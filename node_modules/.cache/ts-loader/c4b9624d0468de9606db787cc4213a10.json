{"remainingRequest":"/home/aline/GitHub/admin-frontend/node_modules/thread-loader/dist/cjs.js!/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js!/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js??ref--13-3!/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/GitHub/admin-frontend/src/components/product-modal/ProductModal.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/GitHub/admin-frontend/src/components/product-modal/ProductModal.vue","mtime":1696437098297},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/thread-loader/dist/cjs.js","mtime":1673370377290},{"path":"/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvYWxpbmUvR2l0SHViL2FkbWluLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvaG9tZS9hbGluZS9HaXRIdWIvYWRtaW4tZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9hbGluZS9HaXRIdWIvYWRtaW4tZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvaG9tZS9hbGluZS9HaXRIdWIvYWRtaW4tZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvaG9tZS9hbGluZS9HaXRIdWIvYWRtaW4tZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBWdWUgfSBmcm9tICJ2dWUtcHJvcGVydHktZGVjb3JhdG9yIjsKaW1wb3J0IFN3YWwgZnJvbSAic3dlZXRhbGVydDIiOwppbXBvcnQgVnVlU2ltcGxlQWxlcnQgZnJvbSAidnVlLXNpbXBsZS1hbGVydCI7CmltcG9ydCB7IFZNb25leSB9IGZyb20gInYtbW9uZXkiOwppbXBvcnQgcHJvZHVjdHNTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvcHJvZHVjdHMuc2VydmljZSI7CmltcG9ydCBQcm9kdWN0SW1hZ2VDYXJvdXNlbCBmcm9tICIuL3Byb2R1Y3QtaW1hZ2UtY2Fyb3VzZWwvUHJvZHVjdEltYWdlQ2Fyb3VzZWwudnVlIjsKaW1wb3J0IFByb2R1Y3RMb2FkaW5nU2NyZWVuIGZyb20gIi4vcHJvZHVjdC1sb2FkaW5nLXNjcmVlbi9Qcm9kdWN0TG9hZGluZ1NjcmVlbi52dWUiOwoKdmFyIFByb2R1Y3RNb2RhbCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZSkgewogIF9pbmhlcml0cyhQcm9kdWN0TW9kYWwsIF9WdWUpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFByb2R1Y3RNb2RhbCk7CgogIGZ1bmN0aW9uIFByb2R1Y3RNb2RhbCgpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUHJvZHVjdE1vZGFsKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpOwogICAgX3RoaXMucHJvZHVjdFNlbGVjdGVkID0gX3RoaXMucHJvcFByb2R1Y3RTZWxlY3RlZDsKICAgIF90aGlzLmNhdGVnb3J5U2VsZWN0ZWQgPSBfdGhpcy5wcm9wQ2F0ZWdvcnlTZWxlY3RlZDsKICAgIF90aGlzLmNhdGVnb3JpZXMgPSBfdGhpcy5wcm9wQ2F0ZWdvcmllczsKICAgIF90aGlzLnNob3dDcmVhdGVQcm9kdWN0ID0gX3RoaXMucHJvcENyZWF0ZVByb2R1Y3Q7CiAgICBfdGhpcy5zaG93RWRpdFByb2R1Y3QgPSBfdGhpcy5wcm9wRWRpdFByb2R1Y3Q7CiAgICBfdGhpcy5zaG93Q3JlYXRlU2VydmljZSA9IF90aGlzLnByb3BJc1NlcnZpY2U7CiAgICBfdGhpcy5zaG93RGVsZXRlUHJvZHVjdCA9IGZhbHNlOwogICAgX3RoaXMuc2hvd1B1Ymxpc2hlZFByb2R1Y3QgPSBmYWxzZTsKICAgIF90aGlzLnNob3dFZGl0SW1hZ2UgPSBmYWxzZTsKICAgIF90aGlzLnNob3dJbXBvcnRJbWFnZSA9IGZhbHNlOwogICAgX3RoaXMuc2hvd0Nsb3NlTW9kYWwgPSBmYWxzZTsKICAgIF90aGlzLmNhblJlb3JkZXJJbWFnZXMgPSB0cnVlOwogICAgX3RoaXMuaXNQdWJsaXNoZWQgPSBfdGhpcy5wcm9kdWN0U2VsZWN0ZWQgPyAhX3RoaXMucHJvZHVjdFNlbGVjdGVkLmlzX3B1Ymxpc2hlZCA6IGZhbHNlOwogICAgX3RoaXMudGl0bGUgPSAiIjsKICAgIF90aGlzLnN1YnRpdGxlID0gIiI7CiAgICBfdGhpcy50aXRsZUJ0biA9ICIiOwogICAgX3RoaXMuY2F0ZWdvcnlHdWlkID0gIiI7CiAgICBfdGhpcy5yZXNwb25zZUVycm9yID0gewogICAgICBuYW1lOiAiIiwKICAgICAgaXNOYW1lOiBmYWxzZSwKICAgICAgZGVzY3JpcHRpb246ICIiLAogICAgICBvcmRlcmluZzogIiIsCiAgICAgIGNhdGVnb3J5OiAiIiwKICAgICAgdmFyaWFudFZhbHVlOiBbXQogICAgfTsKICAgIF90aGlzLmZpZWxkRXJyb3JzID0gewogICAgICBuYW1lOiAiIiwKICAgICAgZGVzY3JpcHRpb246ICIiCiAgICB9OwogICAgX3RoaXMuc2VsZWN0ZWRJbWFnZSA9ICIiOwogICAgX3RoaXMubm90aWZ5ID0gIiI7CiAgICBfdGhpcy5tdWx0aXBsZUltYWdlcyA9IFtdOwogICAgX3RoaXMuaGFzRWRpdEltYWdlID0gZmFsc2U7CiAgICBfdGhpcy5wb3NpdGlvblNlbGVjdGVkID0gMDsKICAgIF90aGlzLmVkaXRJbWFnZSA9IGZhbHNlOwogICAgX3RoaXMucHJpY2VUb01hdGNoID0gZmFsc2U7CiAgICBfdGhpcy5oYXNDYXRlZ29yeVNlbGVjdGVkID0gdHJ1ZTsKICAgIF90aGlzLmlucHV0TGVuZ3RoQ291bnRlciA9IDUxMjsKICAgIF90aGlzLmxvZ29JbnB1dCA9ICIiOwogICAgX3RoaXMuY29uZmlybWVEZWxldGVNb2RhbENvbnRyb2xsZXIgPSBmYWxzZTsKICAgIF90aGlzLnByb2R1Y3RJZCA9ICIiOwogICAgX3RoaXMubG9hZGluZ0NvbnRyb2xsZXIgPSBmYWxzZTsKICAgIF90aGlzLmNyZWF0aW5nUHJvZHVjdCA9IGZhbHNlOwogICAgX3RoaXMuZmluYWxJbWFnZSA9ICIiOwogICAgX3RoaXMudGV4dEFyZWFNb2RlbCA9ICIiOwogICAgX3RoaXMuaXNTYWxlID0gZmFsc2U7CiAgICBfdGhpcy5oYXNSZW9yZGVyaW5nID0gZmFsc2U7CiAgICBfdGhpcy5oYXNBZGRJbWFnZSA9IGZhbHNlOwogICAgX3RoaXMuaGFzUmVtb3ZhbCA9IGZhbHNlOwogICAgX3RoaXMuaW5kZXhJbWFnZXMgPSBbXTsKICAgIF90aGlzLmluZGV4SW1hZ2VzUmVtb3ZlID0gW107CiAgICBfdGhpcy5jdXJyZW50SW1hZ2VzID0gW107CiAgICBfdGhpcy5wcmV2aW91c0ltYWdlcyA9IFtdOwogICAgX3RoaXMubW9uZXkgPSB7CiAgICAgIGRlY2ltYWw6ICIsIiwKICAgICAgdGhvdXNhbmRzOiAiLiIsCiAgICAgIHByZWZpeDogIlIkICIsCiAgICAgIHN1ZmZpeDogIiIsCiAgICAgIHByZWNpc2lvbjogMiwKICAgICAgbWFza2VkOiBmYWxzZQogICAgfTsKICAgIF90aGlzLnByb2R1Y3RTZXJ2aWNlID0gbmV3IHByb2R1Y3RzU2VydmljZSgpOwoKICAgIF90aGlzLmlzRW1wdHkgPSBmdW5jdGlvbiAoYXJyYXkpIHsKICAgICAgcmV0dXJuIGFycmF5LmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtICE9PSAiIjsKICAgICAgfSkubGVuZ3RoOwogICAgfTsKCiAgICBfdGhpcy5kZWxheSA9IGZ1bmN0aW9uIChtcykgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcykgewogICAgICAgIHJldHVybiBzZXRUaW1lb3V0KHJlcywgbXMpOwogICAgICB9KTsKICAgIH07CgogICAgX3RoaXMuaXNNb2JpbGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBCb29sZWFuKC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSk7CiAgICB9OwoKICAgIF90aGlzLnNob3dDcm9wcGVyID0gZmFsc2U7CiAgICBfdGhpcy5kZXN0aW5hdGlvbiA9ICIiOwogICAgX3RoaXMuaW1hZ2VUb0Nyb3AgPSAiIjsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhQcm9kdWN0TW9kYWwsIFt7CiAgICBrZXk6ICJjcmVhdGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgICB2YXIgbG9nZ2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oImxvZ2dlZFVzZXIiKTsKICAgICAgdGhpcy5sb2dnZWRVc2VyID0gSlNPTi5wYXJzZShsb2dnZWQpOwogICAgfQogIH0sIHsKICAgIGtleTogIm1vdW50ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAgIHRoaXMuc2V0SW5mb0Zvcm0oKTsKICAgICAgdGhpcy5tdWx0aXBsZUltYWdlcyA9IFsiMSIsICIyIiwgIjMiLCAiNCJdOwogICAgICB0aGlzLnNldEltYWdlKCk7CiAgICAgIHRoaXMuc2VsZWN0Q2F0ZWdvcnlUeXBlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0SW1hZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEltYWdlKCkgewogICAgICB2YXIgX3RoaXMkcHJvZHVjdFNlbGVjdGVkOwoKICAgICAgaWYgKHRoaXMucHJvZHVjdFNlbGVjdGVkICYmIChfdGhpcyRwcm9kdWN0U2VsZWN0ZWQgPSB0aGlzLnByb2R1Y3RTZWxlY3RlZC5pbWFnZV9saXN0KSAhPT0gbnVsbCAmJiBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQgIT09IHZvaWQgMCAmJiBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQubGVuZ3RoKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZEltYWdlID0gdGhpcy5wcm9kdWN0U2VsZWN0ZWQuaW1hZ2VfbGlzdFswXS5pbWFnZV91cmwgPyB0aGlzLnByb2R1Y3RTZWxlY3RlZC5pbWFnZV9saXN0WzBdLmltYWdlX3VybCA6ICIiOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0SW5mb0Zvcm0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldEluZm9Gb3JtKCkgewogICAgICBpZiAodGhpcy5zaG93Q3JlYXRlUHJvZHVjdCAmJiAhdGhpcy5zaG93Q3JlYXRlU2VydmljZSkgewogICAgICAgIHRoaXMuc2V0VGl0bGVzKCJDYWRhc3RyYXIgUHJvZHV0byIsICJJbnNpcmEgaW5mb3JtYcOnw7VlcyBlIGNhZGFzdHJlIHNldXMgcHJvZHV0b3MiLCAiU2FsdmFyIFByb2R1dG8iKTsKICAgICAgICB0aGlzLnZhbGlkYXRlSW5mb3NDYXRlZ29yeSgpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuc2hvd0NyZWF0ZVByb2R1Y3QgJiYgdGhpcy5zaG93Q3JlYXRlU2VydmljZSkgewogICAgICAgIHRoaXMuc2V0VGl0bGVzKCJDYWRhc3RyYXIgU2VydmnDp28iLCAiSW5zaXJhIGluZm9ybWHDp8O1ZXMgZSBjYWRhc3RyZSBzZXVzIHNlcnZpw6dvcyIsICJTYWx2YXIgU2VydmnDp28iKTsKICAgICAgICB0aGlzLnZhbGlkYXRlSW5mb3NDYXRlZ29yeSgpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICghdGhpcy5zaG93Q3JlYXRlU2VydmljZSkgewogICAgICAgICAgdGhpcy5zZXRUaXRsZXMoIkVkaXRhciBQcm9kdXRvIiwgIkVkaXRlIGFzIGluZm9ybWHDp8O1ZXMgZG8gc2V1IHByb2R1dG8iLCAiQXR1YWxpemFyIHByb2R1dG8iKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2hvd0NyZWF0ZVNlcnZpY2UpIHsKICAgICAgICAgIHRoaXMuc2V0VGl0bGVzKCJFZGl0YXIgU2VydmnDp28iLCAiRWRpdGUgYXMgaW5mb3JtYcOnw7VlcyBkbyBzZXUgc2VydmnDp28iLCAiQXR1YWxpemFyIHNlcnZpw6dvIik7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnZhbGlkYXRlSW5mb3NDYXRlZ29yeSgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0VGl0bGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRUaXRsZXModGl0bGUsIHN1YnRpdGxlLCB0aXRsZUJ0bikgewogICAgICB0aGlzLnRpdGxlID0gdGl0bGU7CiAgICAgIHRoaXMuc3VidGl0bGUgPSBzdWJ0aXRsZTsKICAgICAgdGhpcy50aXRsZUJ0biA9IHRpdGxlQnRuOwogICAgfQogIH0sIHsKICAgIGtleTogInNlbGVjdGVkQ2F0ZWdvcnkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdGVkQ2F0ZWdvcnkoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzLAogICAgICAgICAgX3RoaXMkY2F0ZWdvcnlTZWxlY3RlOwoKICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gdGhpcy5jYXRlZ29yaWVzLmZpbmQoZnVuY3Rpb24gKGNhdGVnb3J5KSB7CiAgICAgICAgcmV0dXJuIGNhdGVnb3J5Lmd1aWQgPT09IF90aGlzMi5jYXRlZ29yeUd1aWQ7CiAgICAgIH0pOwoKICAgICAgaWYgKChfdGhpcyRjYXRlZ29yeVNlbGVjdGUgPSB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQpICE9PSBudWxsICYmIF90aGlzJGNhdGVnb3J5U2VsZWN0ZSAhPT0gdm9pZCAwICYmIF90aGlzJGNhdGVnb3J5U2VsZWN0ZS52YXJpYW50X3N0YXR1cykgewogICAgICAgIHRoaXMuY3JlYXRlUHJvZHVjdFNrdXModGhpcy5jYXRlZ29yeVNlbGVjdGVkKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNlbGVjdENhdGVnb3J5VHlwZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0Q2F0ZWdvcnlUeXBlKCkgewogICAgICBpZiAodGhpcy5zaG93Q3JlYXRlU2VydmljZSkgewogICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IHRoaXMuY2F0ZWdvcmllcy5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gdmFsdWUucmVnaXN0ZXJfdHlwZSA9PT0gIlNlcnZpY2UiOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IHRoaXMuY2F0ZWdvcmllcy5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gdmFsdWUucmVnaXN0ZXJfdHlwZSA9PT0gIlByb2R1Y3QiOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlUHJvZHVjdFNrdXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVByb2R1Y3RTa3VzKGNhdGVnb3J5U2VsZWN0ZWQpIHsKICAgICAgdmFyIF90aGlzJHByb2R1Y3RTZWxlY3RlZDIsCiAgICAgICAgICBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQzLAogICAgICAgICAgX3RoaXMzID0gdGhpcywKICAgICAgICAgIF90aGlzJHByb2R1Y3RTZWxlY3RlZDQ7CgogICAgICAoX3RoaXMkcHJvZHVjdFNlbGVjdGVkMiA9IHRoaXMucHJvZHVjdFNlbGVjdGVkKSA9PT0gbnVsbCB8fCBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQyLnNrdXMuc3BsaWNlKDAsIChfdGhpcyRwcm9kdWN0U2VsZWN0ZWQzID0gdGhpcy5wcm9kdWN0U2VsZWN0ZWQpID09PSBudWxsIHx8IF90aGlzJHByb2R1Y3RTZWxlY3RlZDMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHByb2R1Y3RTZWxlY3RlZDMuc2t1cy5sZW5ndGgpOwogICAgICBjYXRlZ29yeVNlbGVjdGVkICYmIGNhdGVnb3J5U2VsZWN0ZWQudmFyaWFudF92YWx1ZS5sZW5ndGggPyBjYXRlZ29yeVNlbGVjdGVkLnZhcmlhbnRfdmFsdWUubWFwKGZ1bmN0aW9uICh2YWx1ZXMpIHsKICAgICAgICB2YXIgX3RoaXMzJHByb2R1Y3RTZWxlY3RlOwoKICAgICAgICByZXR1cm4gKF90aGlzMyRwcm9kdWN0U2VsZWN0ZSA9IF90aGlzMy5wcm9kdWN0U2VsZWN0ZWQpID09PSBudWxsIHx8IF90aGlzMyRwcm9kdWN0U2VsZWN0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMzJHByb2R1Y3RTZWxlY3RlLnNrdXMucHVzaChfdGhpczMucmVzZXRTa3VzKHZhbHVlcy52YWx1ZSkpOwogICAgICB9KSA6IChfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ0ID0gdGhpcy5wcm9kdWN0U2VsZWN0ZWQpID09PSBudWxsIHx8IF90aGlzJHByb2R1Y3RTZWxlY3RlZDQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHByb2R1Y3RTZWxlY3RlZDQuc2t1cy5wdXNoKHRoaXMucmVzZXRTa3VzKCkpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlc2V0U2t1cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXRTa3VzKCkgewogICAgICB2YXIgdmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICIiOwogICAgICByZXR1cm4gewogICAgICAgIGNvZGU6ICIiLAogICAgICAgIGd1aWQ6ICIiLAogICAgICAgIG5ld19wcmljZTogIiIsCiAgICAgICAgb2xkX3ByaWNlOiAiIiwKICAgICAgICB2dGV4X2lkOiAwLAogICAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgICBpbl9wcm9tb3Rpb246IGZhbHNlLAogICAgICAgIGlzX3NrdXM6IGZhbHNlLAogICAgICAgIHN0YXR1czogdHJ1ZQogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogInZhbGlkYXRlSW5mb3NDYXRlZ29yeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGVJbmZvc0NhdGVnb3J5KCkgewogICAgICBpZiAodGhpcy5jYXRlZ29yeVNlbGVjdGVkKSB7CiAgICAgICAgdGhpcy5jYXRlZ29yeUd1aWQgPSB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQuZ3VpZDsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNldFByb2R1Y3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFByb2R1Y3QoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ1LCBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ2LCBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ3LCBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ4OwoKICAgICAgcmV0dXJuIHsKICAgICAgICBjYXRlZ29yeV9ndWlkOiB0aGlzLmNhdGVnb3J5R3VpZCwKICAgICAgICBuYW1lOiB0aGlzLnByb2R1Y3RTZWxlY3RlZCA/IHRoaXMucHJvZHVjdFNlbGVjdGVkLm5hbWUgOiAiIiwKICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5wcm9kdWN0U2VsZWN0ZWQgPyAoX3RoaXMkcHJvZHVjdFNlbGVjdGVkNSA9IHRoaXMucHJvZHVjdFNlbGVjdGVkKSA9PT0gbnVsbCB8fCBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ1LmRlc2NyaXB0aW9uIDogIiIsCiAgICAgICAgb3JkZXJpbmc6IHRoaXMuc2hvd0NyZWF0ZVByb2R1Y3QgPyAxMDAgOiAoX3RoaXMkcHJvZHVjdFNlbGVjdGVkNiA9IHRoaXMucHJvZHVjdFNlbGVjdGVkKSA9PT0gbnVsbCB8fCBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ2ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ2Lm9yZGVyaW5nLAogICAgICAgIGlzX3B1Ymxpc2hlZDogdGhpcy5zaG93Q3JlYXRlUHJvZHVjdCA/IHRydWUgOiAoX3RoaXMkcHJvZHVjdFNlbGVjdGVkNyA9IHRoaXMucHJvZHVjdFNlbGVjdGVkKSA9PT0gbnVsbCB8fCBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ3ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ3LmlzX3B1Ymxpc2hlZCwKICAgICAgICB2YXJpYW50X3ZhbHVlOiB0aGlzLnNldFZhcmlhbnRzKCksCiAgICAgICAgcmVnaXN0ZXJfdHlwZTogdGhpcy5zZXRSZWdpc3RlclR5cGUoKSwKICAgICAgICBwcmljZV90b19tYXRjaDogdGhpcy5wcmljZVRvTWF0Y2ggPyB0cnVlIDogKF90aGlzJHByb2R1Y3RTZWxlY3RlZDggPSB0aGlzLnByb2R1Y3RTZWxlY3RlZCkgPT09IG51bGwgfHwgX3RoaXMkcHJvZHVjdFNlbGVjdGVkOCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcHJvZHVjdFNlbGVjdGVkOC5wcmljZV90b19tYXRjaAogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogInNldFZhcmlhbnRzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRWYXJpYW50cygpIHsKICAgICAgdmFyIF90aGlzJHByb2R1Y3RTZWxlY3RlZDksCiAgICAgICAgICBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIHZhcmlhbnRzID0gW107CiAgICAgIHRoaXMucmVzcG9uc2VFcnJvci52YXJpYW50VmFsdWUgPSBbXTsKICAgICAgKF90aGlzJHByb2R1Y3RTZWxlY3RlZDkgPSB0aGlzLnByb2R1Y3RTZWxlY3RlZCkgPT09IG51bGwgfHwgX3RoaXMkcHJvZHVjdFNlbGVjdGVkOSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcHJvZHVjdFNlbGVjdGVkOS5za3VzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlcykgewogICAgICAgIHZhbHVlcy5zdGF0dXMgJiYgdmFsdWVzLm9sZF9wcmljZSA9PT0gIlIkIDAsMDAiID8gX3RoaXM0LnJlc3BvbnNlRXJyb3IudmFyaWFudFZhbHVlLnB1c2goIkEgdmFyaWFudGUgbsOjbyB0ZW0gcHJlw6dvIGUgZXN0w6EgYXRpdmFkYSIpIDogX3RoaXM0LnJlc3BvbnNlRXJyb3IudmFyaWFudFZhbHVlLnB1c2goIiIpOwogICAgICAgIF90aGlzNC5zaG93Q3JlYXRlUHJvZHVjdCA/IHZhcmlhbnRzLnB1c2goewogICAgICAgICAgY29kZTogdmFsdWVzLmNvZGUgPyB2YWx1ZXMuY29kZSA6ICIiLAogICAgICAgICAgdmFsdWU6IHZhbHVlcy52YWx1ZSA/IHZhbHVlcy52YWx1ZSA6ICIiLAogICAgICAgICAgbmV3X3ByaWNlOiB2YWx1ZXMubmV3X3ByaWNlID8gcGFyc2VGbG9hdChfdGhpczQudmFsaWRhdGVDdXJyZW5jeSh2YWx1ZXMubmV3X3ByaWNlLnRvU3RyaW5nKCkpKSA6IHBhcnNlRmxvYXQoX3RoaXM0LnZhbGlkYXRlQ3VycmVuY3kodmFsdWVzLm9sZF9wcmljZS50b1N0cmluZygpKSksCiAgICAgICAgICBvbGRfcHJpY2U6IHBhcnNlRmxvYXQoX3RoaXM0LnZhbGlkYXRlQ3VycmVuY3kodmFsdWVzLm9sZF9wcmljZS50b1N0cmluZygpKSksCiAgICAgICAgICBzdGF0dXM6IHZhbHVlcy5zdGF0dXMgPyB2YWx1ZXMuc3RhdHVzIDogZmFsc2UKICAgICAgICB9KSA6IHZhcmlhbnRzLnB1c2goewogICAgICAgICAgZ3VpZDogdmFsdWVzLmd1aWQgPyB2YWx1ZXMuZ3VpZCA6ICIiLAogICAgICAgICAgY29kZTogdmFsdWVzLmNvZGUgPyB2YWx1ZXMuY29kZSA6ICIiLAogICAgICAgICAgdmFsdWU6IHZhbHVlcy52YWx1ZSA/IHZhbHVlcy52YWx1ZSA6ICIiLAogICAgICAgICAgbmV3X3ByaWNlOiB2YWx1ZXMuaW5fcHJvbW90aW9uICYmIHZhbHVlcy5uZXdfcHJpY2UgPyBwYXJzZUZsb2F0KF90aGlzNC52YWxpZGF0ZUN1cnJlbmN5KHZhbHVlcy5uZXdfcHJpY2UudG9TdHJpbmcoKSkpIDogcGFyc2VGbG9hdChfdGhpczQudmFsaWRhdGVDdXJyZW5jeSh2YWx1ZXMub2xkX3ByaWNlLnRvU3RyaW5nKCkpKSwKICAgICAgICAgIG9sZF9wcmljZTogcGFyc2VGbG9hdChfdGhpczQudmFsaWRhdGVDdXJyZW5jeSh2YWx1ZXMub2xkX3ByaWNlLnRvU3RyaW5nKCkpKSwKICAgICAgICAgIHN0YXR1czogdmFsdWVzLnN0YXR1cyA/IHZhbHVlcy5zdGF0dXMgOiBmYWxzZQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIHZhcmlhbnRzOwogICAgfQogIH0sIHsKICAgIGtleTogInNldFJlZ2lzdGVyVHlwZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UmVnaXN0ZXJUeXBlKCkgewogICAgICBpZiAodGhpcy5zaG93Q3JlYXRlU2VydmljZSkgewogICAgICAgIHJldHVybiAiU2VydmljZSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICJQcm9kdWN0IjsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInZhbGlkYXRlUHJvZHVjdEZpZWxkcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGVQcm9kdWN0RmllbGRzKCkgewogICAgICB2YXIgZXJyb3JzID0gewogICAgICAgIG5hbWU6ICIiLAogICAgICAgIGRlc2NyaXB0aW9uOiAiIiwKICAgICAgICBjYXRlZ29yeTogIiIKICAgICAgfTsKICAgICAgdmFyIGlucHV0c0FyZVZhbGlkID0gdHJ1ZTsKCiAgICAgIGlmICghdGhpcy5wcm9kdWN0U2VsZWN0ZWQubmFtZSkgewogICAgICAgIGVycm9ycy5uYW1lID0gIk8gc2V1IFBST0RVVE8gcHJlY2lzYSB0ZXIgdW0gbm9tZSI7CiAgICAgICAgaW5wdXRzQXJlVmFsaWQgPSBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLnByb2R1Y3RTZWxlY3RlZC5kZXNjcmlwdGlvbikgewogICAgICAgIGVycm9ycy5kZXNjcmlwdGlvbiA9ICJPIHNldSBQUk9EVVRPIHByZWNpc2EgdGVyIHVtYSBkZXNjcmnDp8OjbyI7CiAgICAgICAgaW5wdXRzQXJlVmFsaWQgPSBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLmhhc0NhdGVnb3J5U2VsZWN0ZWQpIHsKICAgICAgICBlcnJvcnMuY2F0ZWdvcnkgPSAiVm9jw6ogcHJlY2lzYSBzZWxlY2lvbmFyIHVtYSBjYXRlZ29yaWEgcGFyYSBvIHNldSBQUk9EVVRPIjsKICAgICAgICBpbnB1dHNBcmVWYWxpZCA9IGZhbHNlOwogICAgICB9CgogICAgICB0aGlzLnNldFJlc3BvbnNlRXJyb3IoZXJyb3JzKTsKICAgICAgcmV0dXJuIGlucHV0c0FyZVZhbGlkOwogICAgfQogIH0sIHsKICAgIGtleTogInRvTWF0Y2giLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRvTWF0Y2gocHJvZHVjdFNlbGVjdGVkKSB7CiAgICAgIHRoaXMucHJpY2VUb01hdGNoID0gcHJvZHVjdFNlbGVjdGVkOwoKICAgICAgaWYgKHRoaXMucHJpY2VUb01hdGNoKSB7CiAgICAgICAgdGhpcy5wcm9kdWN0U2VsZWN0ZWQuc2t1c1swXS5vbGRfcHJpY2UgPSAiUiQgMCwwMSI7CiAgICAgICAgdGhpcy5wcm9kdWN0U2VsZWN0ZWQuc2t1c1swXS5uZXdfcHJpY2UgPSAiUiQgMCwwMSI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wcm9kdWN0U2VsZWN0ZWQuc2t1c1swXS5vbGRfcHJpY2UgPSAiUiQgMCwwMCI7CiAgICAgICAgdGhpcy5wcm9kdWN0U2VsZWN0ZWQuc2t1c1swXS5uZXdfcHJpY2UgPSAiUiQgMCwwMCI7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlUHJvZHVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZVByb2R1Y3QoKSB7CiAgICAgIHRoaXMuaGFzQ2F0ZWdvcnkoKTsKCiAgICAgIGlmICh0aGlzLnNob3dDcmVhdGVQcm9kdWN0ICYmICF0aGlzLnZhbGlkYXRlUHJvZHVjdEZpZWxkcygpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5wcm9kdWN0U2VsZWN0ZWQgJiYgdGhpcy5jYXRlZ29yeUd1aWQpIHsKICAgICAgICB0aGlzLnNob3dDcmVhdGVQcm9kdWN0ID8gdGhpcy5jcmVhdGVQcm9kdWN0KHRoaXMuc2V0UHJvZHVjdCgpKSA6IHRoaXMuZWRpdFByb2R1Y3QodGhpcy5zZXRQcm9kdWN0KCksIHRoaXMucHJvZHVjdFNlbGVjdGVkLmd1aWQpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlUHJvZHVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2NyZWF0ZVByb2R1Y3QgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocHJvZHVjdCkgewogICAgICAgIHZhciByZXNwb25zZSwgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoISh0aGlzLmlzRW1wdHkodGhpcy5yZXNwb25zZUVycm9yLnZhcmlhbnRWYWx1ZSkgPCAxKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZ0NvbnRyb2xsZXIgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5jcmVhdGluZ1Byb2R1Y3QgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9kdWN0U2VydmljZS5jcmVhdGVQcm9kdWN0KHByb2R1Y3QsIHRoaXMuY2F0ZWdvcnlHdWlkKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZWxheSg1MDApOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0aW5nUHJvZHVjdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVsYXkoNTAwKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGlmICghKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAyKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHByb2R1Y3QudmFyaWFudF92YWx1ZS5mb3JFYWNoKGZ1bmN0aW9uICh2YXJpYW50LCBpbmRleCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdmFyaWFudC5ndWlkID0gZGF0YS5za3VzW2luZGV4XTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWRpdFByb2R1Y3QocHJvZHVjdCwgZGF0YS5ndWlkKTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tTdGF0dXNPZlByb2R1Y3QocHJvZHVjdCwgcmVzcG9uc2UpOwoKICAgICAgICAgICAgICBjYXNlIDIyOgogICAgICAgICAgICAgICAgdGhpcy5jbG9zZVByb2R1Y3RNb2RhbCgpOwoKICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0LnJlZ2lzdGVyX3R5cGUgPT09ICJTZXJ2aWNlIikgewogICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICAgIHRoaXMudG9hc3RNZXNzYWdlKCJzdWNjZXNzIiwgIlByb250bywgc2V1IFNlcnZpXHhFN28galx4RTEgZm9pICIuY29uY2F0KHRoaXMuc2hvd0NyZWF0ZVByb2R1Y3QgPyAiY3JpYWRvIiA6ICJhdHVhbGl6YWRvIiwgIiBjb20gc3VjZXNzby4iKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICAgIHRoaXMudG9hc3RNZXNzYWdlKCJzdWNjZXNzIiwgIlByb250bywgc2V1IFByb2R1dG8galx4RTEgZm9pICIuY29uY2F0KHRoaXMuc2hvd0NyZWF0ZVByb2R1Y3QgPyAiY3JpYWRvIiA6ICJhdHVhbGl6YWRvIiwgIiBjb20gc3VjZXNzby4iKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nQ29udHJvbGxlciA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVByb2R1Y3QoX3gpIHsKICAgICAgICByZXR1cm4gX2NyZWF0ZVByb2R1Y3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNyZWF0ZVByb2R1Y3Q7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJoYXNDYXRlZ29yeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFzQ2F0ZWdvcnkoKSB7CiAgICAgIGlmICh0aGlzLmNhdGVnb3J5R3VpZCkgewogICAgICAgIHRoaXMuaGFzQ2F0ZWdvcnlTZWxlY3RlZCA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmhhc0NhdGVnb3J5U2VsZWN0ZWQgPSBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJlZGl0UHJvZHVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2VkaXRQcm9kdWN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihwcm9kdWN0LCBndWlkKSB7CiAgICAgICAgdmFyIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmdDb250cm9sbGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByb2R1Y3RTZXJ2aWNlLmVkaXRQcm9kdWN0KHByb2R1Y3QsIGd1aWQpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tTdGF0dXNPZlByb2R1Y3QocHJvZHVjdCwgcmVzcG9uc2UsIGd1aWQpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlUHJvZHVjdE1vZGFsKCk7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmdDb250cm9sbGVyID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGVkaXRQcm9kdWN0KF94MiwgX3gzKSB7CiAgICAgICAgcmV0dXJuIF9lZGl0UHJvZHVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZWRpdFByb2R1Y3Q7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJvblVwbG9hZFByb2dyZXNzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblVwbG9hZFByb2dyZXNzKGV2ZW50LCBwb3NpdGlvbikgewogICAgICB2YXIgcHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKGV2ZW50LmxvYWRlZCAqIDEwMCAvIGV2ZW50LnRvdGFsKTsKCiAgICAgIGlmICh0aGlzLnByb2R1Y3RTZWxlY3RlZCAmJiB0aGlzLnByb2R1Y3RTZWxlY3RlZC5pbWFnZV9saXN0KSB7CiAgICAgICAgdGhpcy5wcm9kdWN0U2VsZWN0ZWQuaW1hZ2VfbGlzdFtwb3NpdGlvbiAtIDFdLnVwbG9hZFByb2dyZXNzID0gcHJvZ3Jlc3M7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVJbWFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3VwZGF0ZUltYWdlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNChwcm9kdWN0R3VpZCwgcHJvZHVjdFNlbGVjdGVkKSB7CiAgICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIShwcm9kdWN0U2VsZWN0ZWQgJiYgcHJvZHVjdFNlbGVjdGVkLmltYWdlX2xpc3QpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb2R1Y3RTZWxlY3RlZC5pbWFnZV9saXN0Lm1hcChmdW5jdGlvbiAoaW1hZ2UpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNS5wcm9kdWN0U2VydmljZS51cGxvYWRJbWFnZSh7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGltYWdlLnBvc2l0aW9uLAogICAgICAgICAgICAgICAgICAgIC8vIGRlc2NyaXB0aW9uOiBpbWFnZS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgICAgICAgICBkYXRhOiBpbWFnZS5pbWFnZUZpbGUsCiAgICAgICAgICAgICAgICAgICAgb25VcGxvYWRQcm9ncmVzc0NhbGxiYWNrOiBfdGhpczUub25VcGxvYWRQcm9ncmVzcwogICAgICAgICAgICAgICAgICB9LCBwcm9kdWN0R3VpZCk7CiAgICAgICAgICAgICAgICB9KSkudGhlbiggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUuZ2V0Q2F0ZWdvcmllcygpOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgICAgICAgICAgfSkpKS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzNS5uZXh0U3RhdHVzRXJyb3IoIkhvdXZlIHVtIGVycm8gYW8gY2FycmVnYXIgb3MgcHJvZHV0b3MuIEZhdm9yIHRlbnRhciBub3ZhbWVudGUuIik7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gdXBkYXRlSW1hZ2UoX3g0LCBfeDUpIHsKICAgICAgICByZXR1cm4gX3VwZGF0ZUltYWdlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB1cGRhdGVJbWFnZTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInVwbG9hZEltYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdXBsb2FkSW1hZ2UgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KHByb2R1Y3RHdWlkLCBpbmRleEltYWdlcywgcHJvZHVjdFNlbGVjdGVkKSB7CiAgICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoaW5kZXhJbWFnZXMubWFwKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgICAgICAgICBpZiAocHJvZHVjdFNlbGVjdGVkICYmIHByb2R1Y3RTZWxlY3RlZC5pbWFnZV9saXN0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNi5wcm9kdWN0U2VydmljZS51cGxvYWRJbWFnZSh7CiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcHJvZHVjdFNlbGVjdGVkLmltYWdlX2xpc3RbdmFsdWVdLnBvc2l0aW9uLAogICAgICAgICAgICAgICAgICAgICAgZGF0YTogcHJvZHVjdFNlbGVjdGVkLmltYWdlX2xpc3RbdmFsdWVdLmltYWdlRmlsZSwKICAgICAgICAgICAgICAgICAgICAgIG9uVXBsb2FkUHJvZ3Jlc3NDYWxsYmFjazogX3RoaXM2Lm9uVXBsb2FkUHJvZ3Jlc3MKICAgICAgICAgICAgICAgICAgICB9LCBwcm9kdWN0R3VpZCkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUudDAgPSByZXNwb25zZS5zdGF0dXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSBfY29udGV4dDUudDAgPT09IDQwMCA/IDMgOiA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LnVwZGF0ZUltYWdlKHByb2R1Y3RHdWlkLCBwcm9kdWN0U2VsZWN0ZWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJicmVhayIsIDYpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3g5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9KCkpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGluZGV4SW1hZ2VzID0gW107CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHVwbG9hZEltYWdlKF94NiwgX3g3LCBfeDgpIHsKICAgICAgICByZXR1cm4gX3VwbG9hZEltYWdlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB1cGxvYWRJbWFnZTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImNoZWNrU3RhdHVzT2ZQcm9kdWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfY2hlY2tTdGF0dXNPZlByb2R1Y3QgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KHByb2R1Y3QsIHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGd1aWQsCiAgICAgICAgICAgIGd1aWRQcm9kdWN0LAogICAgICAgICAgICBfYXJnczcgPSBhcmd1bWVudHM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGd1aWQgPSBfYXJnczcubGVuZ3RoID4gMiAmJiBfYXJnczdbMl0gIT09IHVuZGVmaW5lZCA/IF9hcmdzN1syXSA6ICIiOwogICAgICAgICAgICAgICAgX2NvbnRleHQ3LnQwID0gcmVzcG9uc2Uuc3RhdHVzOwogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSBfY29udGV4dDcudDAgPT09IDIwMSA/IDQgOiBfY29udGV4dDcudDAgPT09IDIwMiA/IDExIDogX2NvbnRleHQ3LnQwID09PSAzMDQgPyAyMCA6IF9jb250ZXh0Ny50MCA9PT0gNDAwID8gMjQgOiBfY29udGV4dDcudDAgPT09IDQwNCA/IDMyIDogX2NvbnRleHQ3LnQwID09PSA0MDUgPyAzNCA6IF9jb250ZXh0Ny50MCA9PT0gNDIzID8gMzQgOiAzOTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBndWlkUHJvZHVjdCA9IF9jb250ZXh0Ny5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXNBZGRJbWFnZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBsb2FkSW1hZ2UoZ3VpZFByb2R1Y3QsIHRoaXMuaW5kZXhJbWFnZXMsIHRoaXMucHJvZHVjdFNlbGVjdGVkKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJicmVhayIsIDQxKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGlmICghKHRoaXMuaGFzQWRkSW1hZ2UgfHwgdGhpcy5oYXNSZW1vdmFsIHx8IHRoaXMuaGFzUmVvcmRlcmluZyB8fCB0aGlzLmVkaXRJbWFnZSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhhc0FkZEltYWdlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGxvYWRJbWFnZShndWlkLCB0aGlzLmluZGV4SW1hZ2VzLCB0aGlzLnByb2R1Y3RTZWxlY3RlZCk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZWRpdEltYWdlKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVJbWFnZShndWlkLCB0aGlzLnByb2R1Y3RTZWxlY3RlZCk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBpZiAodGhpcy5oYXNSZW1vdmFsKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSW1hZ2UoZ3VpZCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgiYnJlYWsiLCA0MSk7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0dXNFcnJvcigiTyBwcm9kdXRvICIuY29uY2F0KHByb2R1Y3QubmFtZSwgIiBqXHhFMSBleGlzdGUiKSk7CiAgICAgICAgICAgICAgICB0aGlzLnNldFJlc3BvbnNlRXJyb3IoewogICAgICAgICAgICAgICAgICBuYW1lOiBbIk9wcywgdmVyaWZpcXVlIHNlIGrDoSBuw6NvIGV4aXN0ZSB1bSBQcm9kdXRvIGNvbSBlc3NlIE5vbWUuIl0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zZUVycm9yLmlzTmFtZSA9IHRydWU7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgiYnJlYWsiLCA0MSk7CgogICAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDcudDEgPSB0aGlzOwogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyNzsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICBfY29udGV4dDcudDIgPSBfY29udGV4dDcuc2VudDsKCiAgICAgICAgICAgICAgICBfY29udGV4dDcudDEuc2V0UmVzcG9uc2VFcnJvci5jYWxsKF9jb250ZXh0Ny50MSwgX2NvbnRleHQ3LnQyKTsKCiAgICAgICAgICAgICAgICB0aGlzLm5leHRTdGF0dXNFcnJvcigiVmVyaWZpcXVlIHNlIHRvZG9zIG9zIGNhbXBvcyBmb3JhbSBwcmVlbmNoaWRvcyBjb3JyZXRhbWVudGUiKTsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyhmYWxzZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgiYnJlYWsiLCA0MSk7CgogICAgICAgICAgICAgIGNhc2UgMzI6CiAgICAgICAgICAgICAgICB0aGlzLnNldFJlc3BvbnNlRXJyb3IoewogICAgICAgICAgICAgICAgICBjYXRlZ29yeTogIlNlbGVjaW9uZSB1bWEgQ2F0ZWdvcmlhLiIKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoImJyZWFrIiwgNDEpOwoKICAgICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgICAgdGhpcy50b2FzdE1lc3NhZ2UoImVycm9yIiwgIlNldSBsb2dpbiBleHBpcm91LCBlbnRyZSBub3ZhbWVudGUuIik7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgicGVydGluaG8iKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJsb2dnZWRVc2VyIik7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgibG9naW4iKTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJicmVhayIsIDQxKTsKCiAgICAgICAgICAgICAgY2FzZSAzOToKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyhmYWxzZSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgiYnJlYWsiLCA0MSk7CgogICAgICAgICAgICAgIGNhc2UgNDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBjaGVja1N0YXR1c09mUHJvZHVjdChfeDEwLCBfeDExKSB7CiAgICAgICAgcmV0dXJuIF9jaGVja1N0YXR1c09mUHJvZHVjdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gY2hlY2tTdGF0dXNPZlByb2R1Y3Q7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJzZXRSZXNwb25zZUVycm9yIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRSZXNwb25zZUVycm9yKGRhdGEpIHsKICAgICAgdGhpcy5yZXNwb25zZUVycm9yLmNhdGVnb3J5ID0gZGF0YS5jYXRlZ29yeTsKICAgICAgdGhpcy5yZXNwb25zZUVycm9yLm5hbWUgPSBkYXRhLm5hbWUgJiYgQXJyYXkuaXNBcnJheShkYXRhLm5hbWUpID8gZGF0YS5uYW1lWzBdIDogZGF0YS5uYW1lOwogICAgICB0aGlzLnJlc3BvbnNlRXJyb3IuZGVzY3JpcHRpb24gPSBkYXRhLmRlc2NyaXB0aW9uICYmIEFycmF5LmlzQXJyYXkoZGF0YS5kZXNjcmlwdGlvbikgPyBkYXRhLmRlc2NyaXB0aW9uWzBdIDogZGF0YS5kZXNjcmlwdGlvbjsKICAgICAgdGhpcy5yZXNwb25zZUVycm9yLm9yZGVyaW5nID0gZGF0YS5vcmRlcmluZyAmJiBkYXRhLm9yZGVyaW5nLmxlbmd0aCA/IGRhdGEub3JkZXJpbmdbMF0gOiBkYXRhLm9yZGVyaW5nOwogICAgfQogIH0sIHsKICAgIGtleTogIm5leHRTdGF0dXNTdWNjZXNzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0U3RhdHVzU3VjY2Vzcyhtc2cpIHsKICAgICAgdGhpcy5sb2FkaW5nKGZhbHNlKTsKICAgICAgdGhpcy50b2FzdE1lc3NhZ2UoInN1Y2Nlc3MiLCBtc2cpOwogICAgICB0aGlzLmdldENhdGVnb3JpZXMoKTsKICAgICAgdGhpcy5jbG9zZVByb2R1Y3RNb2RhbCgpOwogICAgfQogIH0sIHsKICAgIGtleTogIm5leHRTdGF0dXNFcnJvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbmV4dFN0YXR1c0Vycm9yKG1zZykgewogICAgICB0aGlzLmxvYWRpbmcoZmFsc2UpOwogICAgICB0aGlzLnRvYXN0TWVzc2FnZSgiZXJyb3IiLCBtc2cpOwogICAgfQogIH0sIHsKICAgIGtleTogIm5leHRTdGF0dXNEZWZhdWx0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0U3RhdHVzRGVmYXVsdChtc2cpIHsKICAgICAgdGhpcy5sb2FkaW5nKGZhbHNlKTsKICAgICAgdGhpcy50b2FzdE1lc3NhZ2UoImVycm9yIiwgbXNnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJsb2FkaW5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkaW5nKCRldmVudCkgewogICAgICB0aGlzLmxvYWRpbmdDb250cm9sbGVyID0gZmFsc2U7CiAgICAgIHRoaXMuJGVtaXQoImxvYWRpbmciLCAkZXZlbnQpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldENhdGVnb3JpZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldENhdGVnb3JpZXMoKSB7CiAgICAgIHRoaXMuJGVtaXQoImdldENhdGVnb3JpZXMiLCB0cnVlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbG9zZVByb2R1Y3RNb2RhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2VQcm9kdWN0TW9kYWwoKSB7CiAgICAgIHRoaXMuJGVtaXQoImNsb3NlUHJvZHVjdE1vZGFsIiwgdHJ1ZSk7CgogICAgICBpZiAodGhpcy5oYXNSZW1vdmFsIHx8IHRoaXMuZWRpdEltYWdlKSB7CiAgICAgICAgdGhpcy5nZXRDYXRlZ29yaWVzKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJvcGVuQ2xvc2VNb2RhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbkNsb3NlTW9kYWwoKSB7CiAgICAgIHRoaXMuc2hvd0Nsb3NlTW9kYWwgPSB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImNsb3NlQ2xvc2VNb2RhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2VDbG9zZU1vZGFsKCkgewogICAgICB0aGlzLnNob3dDbG9zZU1vZGFsID0gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAib3Blbk1vZGFsRGVsZXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuTW9kYWxEZWxldGUocHJvZHVjdCkgewogICAgICB0aGlzLnByb2R1Y3RTZWxlY3RlZCA9IHByb2R1Y3Q7CiAgICAgIHRoaXMuc2hvd0RlbGV0ZVByb2R1Y3QgPSB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImNsb3NlRGVsZXRlUHJvZHVjdE1vZGFsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZURlbGV0ZVByb2R1Y3RNb2RhbCgpIHsKICAgICAgdGhpcy5zaG93RGVsZXRlUHJvZHVjdCA9IGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogIm9wZW5QdWJsaXNoZWRNb2RhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb3BlblB1Ymxpc2hlZE1vZGFsKCkgewogICAgICB0aGlzLnNob3dQdWJsaXNoZWRQcm9kdWN0ID0gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbG9zZVB1Ymxpc2hlZE1vZGFsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZVB1Ymxpc2hlZE1vZGFsKCkgewogICAgICB0aGlzLnNob3dQdWJsaXNoZWRQcm9kdWN0ID0gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuY2VsUHVibGlzaGVkTW9kYWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhbmNlbFB1Ymxpc2hlZE1vZGFsKCkgewogICAgICB0aGlzLmlzUHVibGlzaGVkID0gIXRoaXMuaXNQdWJsaXNoZWQ7CiAgICAgIHRoaXMuY2xvc2VQdWJsaXNoZWRNb2RhbCgpOwogICAgfQogIH0sIHsKICAgIGtleTogInB1Ymxpc2hlZFByb2R1Y3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHB1Ymxpc2hlZFByb2R1Y3QoKSB7CiAgICAgIGlmICh0aGlzLnByb2R1Y3RTZWxlY3RlZCkgewogICAgICAgIHRoaXMucHJvZHVjdFNlbGVjdGVkLmlzX3B1Ymxpc2hlZCA9ICF0aGlzLnByb2R1Y3RTZWxlY3RlZC5pc19wdWJsaXNoZWQ7CiAgICAgICAgdGhpcy5pc1B1Ymxpc2hlZCA9ICF0aGlzLnByb2R1Y3RTZWxlY3RlZC5pc19wdWJsaXNoZWQ7CiAgICAgICAgdGhpcy5jbG9zZVB1Ymxpc2hlZE1vZGFsKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWxpZGF0ZUN1cnJlbmN5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWxpZGF0ZUN1cnJlbmN5KHgpIHsKICAgICAgdmFyIG1vbmV5ID0gIiI7CgogICAgICBpZiAoeCkgewogICAgICAgIG1vbmV5ID0geC5yZXBsYWNlKCJSJCAiLCAiIik7CiAgICAgICAgbW9uZXkgPSBtb25leS5yZXBsYWNlKCIsIiwgIiIpOwogICAgICAgIG1vbmV5ID0gbW9uZXkucmVwbGFjZSgiLiIsICIiKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1vbmV5OwogICAgfQogIH0sIHsKICAgIGtleTogInRvYXN0TWVzc2FnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9hc3RNZXNzYWdlKHR5cGUsIHRpdGxlKSB7CiAgICAgIFZ1ZVNpbXBsZUFsZXJ0LmZpcmUoewogICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgIHBvc2l0aW9uOiAidG9wLWVuZCIsCiAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgIHRpbWVyOiA2MDAwLAogICAgICAgIG9uT3BlbjogZnVuY3Rpb24gb25PcGVuKHRvYXN0KSB7CiAgICAgICAgICB0b2FzdC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWVudGVyIiwgU3dhbC5zdG9wVGltZXIpLCB0b2FzdC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWxlYXZlIiwgU3dhbC5yZXN1bWVUaW1lcik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZXN0cm95U2VsZWN0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3lTZWxlY3RlZCgpIHsKICAgICAgdGhpcy4kZW1pdCgiZGVzdHJveVByb2R1Y3RTZWxlY3RlZCIsIHRydWUpOwogICAgICB0aGlzLiRlbWl0KCJkZXN0cm95Q2F0ZWdvcnlTZWxlY3RlZCIsIHRydWUpOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZVBvc2l0aW9uSW1hZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF91cGRhdGVQb3NpdGlvbkltYWdlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOShwcm9kdWN0R3VpZCkgewogICAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW1hZ2VzLmZvckVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmMyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoaW1hZ2UsIGluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpbWFnZS5wb3NpdGlvbiAhPT0gX3RoaXM3LnByZXZpb3VzSW1hZ2VzW2luZGV4XS5wb3NpdGlvbikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM3LnByb2R1Y3RTZXJ2aWNlLnVwZGF0ZVBvc2l0aW9uSW1hZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogaW1hZ2UucG9zaXRpb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHByb2R1Y3RHdWlkLCBfdGhpczcucHJldmlvdXNJbWFnZXNbaW5kZXhdLnBvc2l0aW9uKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDguc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC50MCA9IHJlc3BvbnNlLnN0YXR1czsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gX2NvbnRleHQ4LnQwID09PSAyMDAgPyA3IDogX2NvbnRleHQ4LnQwID09PSAyMDEgPyA3IDogX2NvbnRleHQ4LnQwID09PSAyMDIgPyA3IDogOTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczcubmV4dFN0YXR1c1N1Y2Nlc3MoIlByb250bywgYSBwb3NpXHhFN1x4RTNvIGRhIGltYWdlbSBkbyBQcm9kdXRvIGZvaSBhdHVhbGl6YWRhIGNvbSBzdWNlc3NvLiIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJicmVhayIsIDkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MTMsIF94MTQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0oKSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBvc2l0aW9uSW1hZ2UoX3gxMikgewogICAgICAgIHJldHVybiBfdXBkYXRlUG9zaXRpb25JbWFnZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdXBkYXRlUG9zaXRpb25JbWFnZTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInJlbW92ZUltYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVtb3ZlSW1hZ2UgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMShwcm9kdWN0R3VpZCkgewogICAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhJbWFnZXNSZW1vdmUuZm9yRWFjaCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWY0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAocG9zaXRpb24pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzOC5wcm9kdWN0U2VydmljZS5kZWxldGVJbWFnZShwcm9kdWN0R3VpZCwgcG9zaXRpb24pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0MTAuc2VudDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0MTAudDAgPSByZXNwb25zZS5zdGF0dXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSBfY29udGV4dDEwLnQwID09PSAyMDIgPyA2IDogODsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczgubmV4dFN0YXR1c1N1Y2Nlc3MoIlByb250bywgaW1hZ2VtIGRvIFByb2R1dG8gcmVtb3ZpZGEgY29tIHN1Y2Vzc28uIik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJicmVhayIsIDgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gxNikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKTsKICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhJbWFnZXNSZW1vdmUgPSBbXTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTEsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiByZW1vdmVJbWFnZShfeDE1KSB7CiAgICAgICAgcmV0dXJuIF9yZW1vdmVJbWFnZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gcmVtb3ZlSW1hZ2U7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJvcGVuSW5wdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW5JbnB1dChwb3NpdGlvbiwgZWRpdCkgewogICAgICB0aGlzLnBvc2l0aW9uU2VsZWN0ZWQgPSBwb3NpdGlvbjsKICAgICAgdGhpcy5lZGl0SW1hZ2UgPSBlZGl0OwogICAgICB0aGlzLnNob3dJbXBvcnRJbWFnZSA9IHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2xvc2VJbXBvcnRJbWFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2VJbXBvcnRJbWFnZShpbWFnZVVybCkgewogICAgICBpZiAoaW1hZ2VVcmwpIHsKICAgICAgICB0aGlzLmNhblJlb3JkZXJJbWFnZXMgPSBmYWxzZTsKCiAgICAgICAgaWYgKCF0aGlzLmVkaXRJbWFnZSkgewogICAgICAgICAgdGhpcy5oYXNBZGRJbWFnZSA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBpZiAodGhpcy5wcm9kdWN0U2VsZWN0ZWQgJiYgdGhpcy5wcm9kdWN0U2VsZWN0ZWQuaW1hZ2VfbGlzdCkgewogICAgICAgICAgdGhpcy5pbmRleEltYWdlcy5wdXNoKGltYWdlVXJsLnBvc2l0aW9uIC0gMSk7CiAgICAgICAgICB0aGlzLiRzZXQodGhpcy5wcm9kdWN0U2VsZWN0ZWQuaW1hZ2VfbGlzdCwgaW1hZ2VVcmwucG9zaXRpb24gLSAxLCBpbWFnZVVybCk7IC8vIHRoaXMucHJvZHVjdFNlbGVjdGVkLmltYWdlX2xpc3RbaW1hZ2VVcmwucG9zaXRpb24gLSAxXSA9IGltYWdlVXJsOwoKICAgICAgICAgIHRoaXMuc2V0SW1hZ2UoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuc2hvd0ltcG9ydEltYWdlID0gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVtb3ZlSW1hZ2VzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVJbWFnZXMocG9zaXRpb24pIHsKICAgICAgdGhpcy5oYXNSZW1vdmFsID0gdHJ1ZTsKICAgICAgdGhpcy5pbmRleEltYWdlc1JlbW92ZS5wdXNoKHBvc2l0aW9uKTsKICAgICAgdGhpcy5jYW5SZW9yZGVySW1hZ2VzID0gZmFsc2U7CgogICAgICBpZiAodGhpcy5wcm9kdWN0U2VsZWN0ZWQgJiYgdGhpcy5wcm9kdWN0U2VsZWN0ZWQuaW1hZ2VfbGlzdCkgewogICAgICAgIHRoaXMucHJvZHVjdFNlbGVjdGVkLmltYWdlX2xpc3Quc3BsaWNlKHBvc2l0aW9uIC0gMSwgMSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJwcmV2aW91c1Jlb3JkZXJJbWFnZXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByZXZpb3VzUmVvcmRlckltYWdlcyhpbWFnZXNMaXN0KSB7CiAgICAgIHRoaXMucHJldmlvdXNJbWFnZXMgPSBpbWFnZXNMaXN0OwogICAgfQogIH0sIHsKICAgIGtleTogImN1cnJlbnRSZW9yZGVySW1hZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGN1cnJlbnRSZW9yZGVySW1hZ2UoaW1hZ2VzTGlzdCkgewogICAgICB0aGlzLmN1cnJlbnRJbWFnZXMgPSBpbWFnZXNMaXN0OwoKICAgICAgaWYgKHRoaXMucHJvZHVjdFNlbGVjdGVkICYmIHRoaXMucHJvZHVjdFNlbGVjdGVkLmltYWdlX2xpc3QpIHsKICAgICAgICB0aGlzLnByb2R1Y3RTZWxlY3RlZC5pbWFnZV9saXN0ID0gdGhpcy5jdXJyZW50SW1hZ2VzOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0Vmlld0ltYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRWaWV3SW1hZ2UoaW1hZ2UpIHsKICAgICAgdGhpcy5zZWxlY3RlZEltYWdlID0gaW1hZ2U7CiAgICB9CiAgfSwgewogICAga2V5OiAib3BlbkVkaXRJbWFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbkVkaXRJbWFnZSgpIHsKICAgICAgdGhpcy5zaG93RWRpdEltYWdlID0gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbG9zZUVkaXRJbWFnZU1vZGFsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZUVkaXRJbWFnZU1vZGFsKCkgewogICAgICB0aGlzLnNob3dFZGl0SW1hZ2UgPSBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlRWRpdEltYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlRWRpdEltYWdlKCkgewogICAgICB0aGlzLmhhc0VkaXRJbWFnZSA9IGZhbHNlOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFByb2R1Y3RNb2RhbDsKfShWdWUpOwoKX19kZWNvcmF0ZShbUHJvcCgpXSwgUHJvZHVjdE1vZGFsLnByb3RvdHlwZSwgInByb3BQcm9kdWN0U2VsZWN0ZWQiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcCgpXSwgUHJvZHVjdE1vZGFsLnByb3RvdHlwZSwgInByb3BDYXRlZ29yaWVzIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1Byb3AoKV0sIFByb2R1Y3RNb2RhbC5wcm90b3R5cGUsICJwcm9wQ2F0ZWdvcnlTZWxlY3RlZCIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKCldLCBQcm9kdWN0TW9kYWwucHJvdG90eXBlLCAicHJvcENyZWF0ZVByb2R1Y3QiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcCgpXSwgUHJvZHVjdE1vZGFsLnByb3RvdHlwZSwgInByb3BFZGl0UHJvZHVjdCIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKCldLCBQcm9kdWN0TW9kYWwucHJvdG90eXBlLCAicHJvcElzU2VydmljZSIsIHZvaWQgMCk7CgpQcm9kdWN0TW9kYWwgPSBfX2RlY29yYXRlKFtDb21wb25lbnQoewogIGRpcmVjdGl2ZXM6IHsKICAgIG1vbmV5OiBWTW9uZXkKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFByb2R1Y3RJbWFnZUNhcm91c2VsOiBQcm9kdWN0SW1hZ2VDYXJvdXNlbCwKICAgIFByb2R1Y3RMb2FkaW5nU2NyZWVuOiBQcm9kdWN0TG9hZGluZ1NjcmVlbgogIH0KfSldLCBQcm9kdWN0TW9kYWwpOwpleHBvcnQgeyBQcm9kdWN0TW9kYWwgfTsKZXhwb3J0IHsgUHJvZHVjdE1vZGFsIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/GitHub/admin-frontend/src/components/product-modal/ProductModal.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport Swal, { SweetAlertType } from \"sweetalert2\";\nimport VueSimpleAlert from \"vue-simple-alert\";\nimport { VMoney } from \"v-money\";\n\nimport { Category } from \"@/models/category\";\nimport INotification from \"@/models/INotification\";\nimport { Product, IProduct, IProductVariant, ImageURl } from \"@/models/product\";\n\nimport productsService from \"@/services/products.service\";\n\nimport ProductImageCarousel from \"./product-image-carousel/ProductImageCarousel.vue\";\nimport ProductLoadingScreen from \"./product-loading-screen/ProductLoadingScreen.vue\";\n\n@Component({\n  directives: { money: VMoney },\n  components: { ProductImageCarousel, ProductLoadingScreen },\n})\nexport class ProductModal extends Vue {\n  @Prop() propProductSelected!: Product;\n  @Prop() propCategories!: Category[];\n  @Prop() propCategorySelected!: Category;\n  @Prop() propCreateProduct!: boolean;\n  @Prop() propEditProduct!: boolean;\n  @Prop() propIsService!: boolean;\n\n  public productSelected?: Product = this.propProductSelected;\n  public categorySelected?: Category = this.propCategorySelected;\n  public categories: Category[] = this.propCategories;\n  public showCreateProduct: boolean = this.propCreateProduct;\n  public showEditProduct: boolean = this.propEditProduct;\n  public showCreateService: boolean = this.propIsService;\n\n  public showDeleteProduct = false;\n  public showPublishedProduct = false;\n  public showEditImage = false;\n  public showImportImage = false;\n  public showCloseModal = false;\n\n  public canReorderImages = true;\n\n  public isPublished = this.productSelected\n    ? !this.productSelected.is_published\n    : false;\n\n  public title: string = \"\";\n  public subtitle: string = \"\";\n  public titleBtn: string = \"\";\n\n  public categoryGuid = \"\";\n\n  public responseError = {\n    name: \"\",\n    isName: false,\n    description: \"\",\n    ordering: \"\",\n    category: \"\",\n    variantValue: [] as string[],\n  };\n\n  public fieldErrors = {\n    name: \"\",\n    description: \"\",\n  };\n\n  public image: any;\n  public selectedImage: string = \"\";\n  public imageToCrop: any;\n  public cropper: any;\n  public destination: string;\n  public price: any;\n  public showCropper: boolean;\n  public newCategory: any;\n  public loggedUser: any;\n  public notify?: INotification | string = ``;\n  public multipleImages: string[] = [];\n  public hasEditImage: boolean = false;\n  public positionSelected: number = 0;\n  public editImage: boolean = false;\n  public priceToMatch: boolean = false;\n  public hasCategorySelected: boolean = true;\n\n  public inputLengthCounter = 512;\n  public logoInput = \"\";\n  public confirmeDeleteModalController = false;\n  public productId = \"\";\n\n  public loadingController = false;\n  public creatingProduct = false;\n\n  public finalImage: string = \"\";\n  public textAreaModel = \"\";\n  public isSale = false;\n\n  public hasReordering: boolean = false;\n  public hasAddImage: boolean = false;\n  public hasRemoval: boolean = false;\n\n  public indexImages: number[] = [];\n  public indexImagesRemove: number[] = [];\n\n  public currentImages: ImageURl[] = [];\n  public previousImages: ImageURl[] = [];\n\n  public money = {\n    decimal: \",\",\n    thousands: \".\",\n    prefix: \"R$ \",\n    suffix: \"\",\n    precision: 2,\n    masked: false,\n  };\n\n  private productService = new productsService();\n\n  constructor() {\n    super();\n    this.showCropper = false;\n    this.destination = \"\";\n    this.imageToCrop = \"\";\n  }\n\n  created() {\n    const logged: any = localStorage.getItem(\"loggedUser\");\n    this.loggedUser = JSON.parse(logged);\n  }\n\n  mounted() {\n    this.setInfoForm();\n    this.multipleImages = [\"1\", \"2\", \"3\", \"4\"];\n    this.setImage();\n    this.selectCategoryType();\n  }\n\n  setImage() {\n    if (this.productSelected && this.productSelected.image_list?.length) {\n      this.selectedImage = this.productSelected.image_list[0].image_url\n        ? this.productSelected.image_list[0].image_url\n        : \"\";\n    }\n  }\n\n  setInfoForm() {\n    if (this.showCreateProduct && !this.showCreateService) {\n      this.setTitles(\n        \"Cadastrar Produto\",\n        \"Insira informações e cadastre seus produtos\",\n        \"Salvar Produto\"\n      );\n      this.validateInfosCategory();\n    } else if (this.showCreateProduct && this.showCreateService) {\n      this.setTitles(\n        \"Cadastrar Serviço\",\n        \"Insira informações e cadastre seus serviços\",\n        \"Salvar Serviço\"\n      );\n      this.validateInfosCategory();\n    } else {\n      if (!this.showCreateService) {\n        this.setTitles(\n          \"Editar Produto\",\n          \"Edite as informações do seu produto\",\n          \"Atualizar produto\"\n        );\n      } else if (this.showCreateService) {\n        this.setTitles(\n          \"Editar Serviço\",\n          \"Edite as informações do seu serviço\",\n          \"Atualizar serviço\"\n        );\n      }\n      this.validateInfosCategory();\n    }\n  }\n\n  private setTitles(title: string, subtitle: string, titleBtn: string) {\n    this.title = title;\n    this.subtitle = subtitle;\n    this.titleBtn = titleBtn;\n  }\n\n  public selectedCategory() {\n    this.categorySelected = this.categories.find(\n      (category) => category.guid === this.categoryGuid\n    );\n    if (this.categorySelected?.variant_status) {\n      this.createProductSkus(this.categorySelected);\n    }\n  }\n\n  public selectCategoryType() {\n    if (this.showCreateService) {\n      this.categories = this.categories.filter(\n        (value) => value.register_type === \"Service\"\n      );\n    } else {\n      this.categories = this.categories.filter(\n        (value) => value.register_type === \"Product\"\n      );\n    }\n  }\n\n  private createProductSkus(categorySelected?: Category) {\n    this.productSelected?.skus.splice(0, this.productSelected?.skus.length);\n    categorySelected && categorySelected.variant_value.length\n      ? categorySelected.variant_value.map((values) =>\n          this.productSelected?.skus.push(this.resetSkus(values.value))\n        )\n      : this.productSelected?.skus.push(this.resetSkus());\n  }\n\n  private resetSkus(value: string = \"\") {\n    return {\n      code: \"\",\n      guid: \"\",\n      new_price: \"\",\n      old_price: \"\",\n      vtex_id: 0,\n      value,\n      in_promotion: false,\n      is_skus: false,\n      status: true,\n    };\n  }\n\n  validateInfosCategory() {\n    if (this.categorySelected) {\n      this.categoryGuid = this.categorySelected.guid;\n    }\n  }\n\n  private setProduct(): IProduct {\n    return {\n      category_guid: this.categoryGuid,\n      name: this.productSelected ? this.productSelected.name : \"\",\n      description: this.productSelected\n        ? this.productSelected?.description\n        : \"\",\n      ordering: this.showCreateProduct ? 100 : this.productSelected?.ordering,\n      is_published: this.showCreateProduct\n        ? true\n        : this.productSelected?.is_published,\n      variant_value: this.setVariants(),\n      register_type: this.setRegisterType(),\n      price_to_match: this.priceToMatch\n        ? true\n        : this.productSelected?.price_to_match,\n    };\n  }\n\n  private setVariants(): IProductVariant[] {\n    const variants: IProductVariant[] = [];\n    this.responseError.variantValue = [];\n    this.productSelected?.skus.forEach((values) => {\n      values.status && values.old_price === \"R$ 0,00\"\n        ? this.responseError.variantValue.push(\n            \"A variante não tem preço e está ativada\"\n          )\n        : this.responseError.variantValue.push(\"\");\n\n      this.showCreateProduct\n        ? variants.push({\n            code: values.code ? values.code : \"\",\n            value: values.value ? values.value : \"\",\n            new_price: values.new_price\n              ? parseFloat(this.validateCurrency(values.new_price.toString()))\n              : parseFloat(this.validateCurrency(values.old_price.toString())),\n            old_price: parseFloat(\n              this.validateCurrency(values.old_price.toString())\n            ),\n            status: values.status ? values.status : false,\n          })\n        : variants.push({\n            guid: values.guid ? values.guid : \"\",\n            code: values.code ? values.code : \"\",\n            value: values.value ? values.value : \"\",\n            new_price:\n              values.in_promotion && values.new_price\n                ? parseFloat(this.validateCurrency(values.new_price.toString()))\n                : parseFloat(\n                    this.validateCurrency(values.old_price.toString())\n                  ),\n            old_price: parseFloat(\n              this.validateCurrency(values.old_price.toString())\n            ),\n            status: values.status ? values.status : false,\n          });\n    });\n    return variants;\n  }\n\n  private setRegisterType() {\n    if (this.showCreateService) {\n      return \"Service\";\n    } else {\n      return \"Product\";\n    }\n  }\n\n  private validateProductFields() {\n    const errors: {\n      name: string;\n      description: string;\n      category: string;\n    } = {\n      name: \"\",\n      description: \"\",\n      category: \"\",\n    };\n    let inputsAreValid = true;\n    if (!this.productSelected!.name) {\n      errors.name = \"O seu PRODUTO precisa ter um nome\";\n      inputsAreValid = false;\n    }\n    if (!this.productSelected!.description) {\n      errors.description = \"O seu PRODUTO precisa ter uma descrição\";\n      inputsAreValid = false;\n    }\n    if (!this.hasCategorySelected!) {\n      errors.category =\n        \"Você precisa selecionar uma categoria para o seu PRODUTO\";\n      inputsAreValid = false;\n    }\n    this.setResponseError(errors);\n    return inputsAreValid;\n  }\n  public toMatch(productSelected) {\n    this.priceToMatch = productSelected;\n    if (this.priceToMatch) {\n      this.productSelected!.skus[0].old_price = \"R$ 0,01\";\n      this.productSelected!.skus[0].new_price = \"R$ 0,01\";\n    } else {\n      this.productSelected!.skus[0].old_price = \"R$ 0,00\";\n      this.productSelected!.skus[0].new_price = \"R$ 0,00\";\n    }\n  }\n\n  public saveProduct() {\n    this.hasCategory();\n    if (this.showCreateProduct && !this.validateProductFields()) {\n      return;\n    }\n    if (this.productSelected && this.categoryGuid) {\n      this.showCreateProduct\n        ? this.createProduct(this.setProduct())\n        : this.editProduct(this.setProduct(), this.productSelected.guid);\n    }\n  }\n\n  isEmpty = (array: string[]) => array.filter((item) => item !== \"\").length;\n\n  delay = (ms) => new Promise((res) => setTimeout(res, ms));\n\n  private async createProduct(product: IProduct) {\n    if (this.isEmpty(this.responseError.variantValue) < 1) {\n      this.loadingController = true;\n      this.creatingProduct = true;\n\n      const response = await this.productService.createProduct(\n        product,\n        this.categoryGuid\n      );\n\n      await this.delay(500);\n\n      this.creatingProduct = false;\n\n      await this.delay(500);\n\n      if (response.status === 202) {\n        const data = await response.json();\n        product.variant_value.forEach(\n          (variant, index) => (variant.guid = data.skus[index])\n        );\n        await this.editProduct(product, data.guid);\n      } else {\n        await this.checkStatusOfProduct(product, response);\n      }\n\n      this.closeProductModal();\n      if (product.register_type === \"Service\") {\n        window.location.reload();\n        this.toastMessage(\n          \"success\",\n          `Pronto, seu Serviço já foi ${\n            this.showCreateProduct ? \"criado\" : \"atualizado\"\n          } com sucesso.`\n        );\n      } else {\n        window.location.reload();\n        this.toastMessage(\n          \"success\",\n          `Pronto, seu Produto já foi ${\n            this.showCreateProduct ? \"criado\" : \"atualizado\"\n          } com sucesso.`\n        );\n      }\n      this.loadingController = false;\n    }\n  }\n\n  private hasCategory() {\n    if (this.categoryGuid) {\n      this.hasCategorySelected = true;\n      return;\n    }\n    this.hasCategorySelected = false;\n  }\n\n  private async editProduct(product: IProduct, guid: string) {\n    this.loadingController = true;\n    const response = await this.productService.editProduct(product, guid);\n    await this.checkStatusOfProduct(product, response, guid);\n    this.closeProductModal();\n    this.loadingController = false;\n  }\n\n  onUploadProgress(event, position) {\n    let progress: number = Math.round((event.loaded * 100) / event.total);\n\n    if (this.productSelected && this.productSelected.image_list) {\n      this.productSelected.image_list[position - 1].uploadProgress = progress;\n    }\n  }\n\n  private async updateImage(productGuid: string, productSelected: Product) {\n    if (productSelected && productSelected.image_list) {\n      await Promise.all(\n        productSelected.image_list.map((image) =>\n          this.productService.uploadImage(\n            {\n              position: image.position,\n              // description: image.description,\n              data: image.imageFile,\n              onUploadProgressCallback: this.onUploadProgress,\n            },\n            productGuid\n          )\n        )\n      )\n        .then(async () => {\n          await this.getCategories();\n        })\n        .catch(() => {\n          this.nextStatusError(\n            `Houve um erro ao carregar os produtos. Favor tentar novamente.`\n          );\n        });\n    }\n  }\n\n  private async uploadImage(\n    productGuid: string,\n    indexImages: number[],\n    productSelected: Product\n  ) {\n    await Promise.all(\n      indexImages.map((value) => {\n        if (productSelected && productSelected.image_list) {\n          return this.productService\n            .uploadImage(\n              {\n                position: productSelected.image_list[value].position,\n                data: productSelected.image_list[value].imageFile,\n                onUploadProgressCallback: this.onUploadProgress,\n              },\n              productGuid\n            )\n            .then(async (response) => {\n              switch (response.status) {\n                case 400:\n                  await this.updateImage(productGuid, productSelected);\n                  break;\n              }\n            });\n        }\n      })\n    );\n    indexImages = [];\n  }\n\n  private async checkStatusOfProduct(\n    product: IProduct,\n    response: Response,\n    guid: string = \"\"\n  ) {\n    switch (response.status) {\n      case 201:\n        const guidProduct = await response.json();\n        if (this.hasAddImage) {\n          await this.uploadImage(\n            guidProduct,\n            this.indexImages,\n            this.productSelected as Product\n          );\n        }\n        break;\n      case 202:\n        if (\n          this.hasAddImage ||\n          this.hasRemoval ||\n          this.hasReordering ||\n          this.editImage\n        ) {\n          if (this.hasAddImage) {\n            await this.uploadImage(\n              guid,\n              this.indexImages,\n              this.productSelected as Product\n            );\n          }\n          if (this.editImage) {\n            await this.updateImage(guid, this.productSelected as Product);\n          }\n          if (this.hasRemoval) {\n            this.removeImage(guid);\n          }\n        }\n        break;\n      case 304:\n        this.nextStatusError(`O produto ${product.name} já existe`);\n        this.setResponseError({\n          name: [\"Ops, verifique se já não existe um Produto com esse Nome.\"],\n        });\n        this.responseError.isName = true;\n        break;\n\n      case 400:\n        this.setResponseError(await response.json());\n        this.nextStatusError(\n          `Verifique se todos os campos foram preenchidos corretamente`\n        );\n        this.loading(false);\n        break;\n\n      case 404:\n        this.setResponseError({ category: \"Selecione uma Categoria.\" });\n        break;\n\n      case 405:\n      case 423:\n        this.toastMessage(\"error\", \"Seu login expirou, entre novamente.\");\n        localStorage.removeItem(\"pertinho\");\n        localStorage.removeItem(\"loggedUser\");\n        this.$router.push(\"login\");\n        break;\n\n      default:\n        this.loading(false);\n        break;\n    }\n  }\n\n  private setResponseError(data) {\n    this.responseError.category = data.category;\n    this.responseError.name =\n      data.name && Array.isArray(data.name) ? data.name[0] : data.name;\n    this.responseError.description =\n      data.description && Array.isArray(data.description)\n        ? data.description[0]\n        : data.description;\n    this.responseError.ordering =\n      data.ordering && data.ordering.length ? data.ordering[0] : data.ordering;\n  }\n\n  private nextStatusSuccess(msg: string) {\n    this.loading(false);\n    this.toastMessage(\"success\", msg);\n    this.getCategories();\n    this.closeProductModal();\n  }\n\n  private nextStatusError(msg: string) {\n    this.loading(false);\n    this.toastMessage(\"error\", msg);\n  }\n\n  private nextStatusDefault(msg: string) {\n    this.loading(false);\n    this.toastMessage(\"error\", msg);\n  }\n\n  public loading($event) {\n    this.loadingController = false;\n    this.$emit(\"loading\", $event);\n  }\n\n  public getCategories() {\n    this.$emit(\"getCategories\", true);\n  }\n  public closeProductModal() {\n    this.$emit(\"closeProductModal\", true);\n    if (this.hasRemoval || this.editImage) {\n      this.getCategories();\n    }\n  }\n\n  public openCloseModal() {\n    this.showCloseModal = true;\n  }\n\n  public closeCloseModal() {\n    this.showCloseModal = false;\n  }\n\n  public openModalDelete(product: Product) {\n    this.productSelected = product;\n    this.showDeleteProduct = true;\n  }\n\n  public closeDeleteProductModal() {\n    this.showDeleteProduct = false;\n  }\n\n  public openPublishedModal() {\n    this.showPublishedProduct = true;\n  }\n\n  public closePublishedModal() {\n    this.showPublishedProduct = false;\n  }\n\n  public cancelPublishedModal() {\n    this.isPublished = !this.isPublished;\n    this.closePublishedModal();\n  }\n\n  public publishedProduct() {\n    if (this.productSelected) {\n      this.productSelected.is_published = !this.productSelected.is_published;\n      this.isPublished = !this.productSelected.is_published;\n      this.closePublishedModal();\n    }\n  }\n\n  private validateCurrency(x: string) {\n    let money: string = \"\";\n    if (x) {\n      money = x.replace(\"R$ \", \"\");\n      money = money.replace(\",\", \"\");\n      money = money.replace(\".\", \"\");\n    }\n    return money;\n  }\n\n  public toastMessage(type: SweetAlertType, title: string) {\n    VueSimpleAlert.fire({\n      type,\n      title,\n      toast: true,\n      position: \"top-end\",\n      showConfirmButton: false,\n      timer: 6000,\n      onOpen: (toast) => {\n        toast.addEventListener(\"mouseenter\", Swal.stopTimer),\n          toast.addEventListener(\"mouseleave\", Swal.resumeTimer);\n      },\n    });\n  }\n\n  public destroySelected() {\n    this.$emit(\"destroyProductSelected\", true);\n    this.$emit(\"destroyCategorySelected\", true);\n  }\n\n  async updatePositionImage(productGuid: string) {\n    this.currentImages.forEach(async (image, index) => {\n      if (image.position !== this.previousImages[index].position) {\n        const response = await this.productService.updatePositionImage(\n          { position: image.position },\n          productGuid,\n          this.previousImages[index].position\n        );\n        switch (response.status) {\n          case 200:\n          case 201:\n          case 202:\n            this.nextStatusSuccess(\n              `Pronto, a posição da imagem do Produto foi atualizada com sucesso.`\n            );\n            break;\n        }\n      }\n    });\n  }\n\n  async removeImage(productGuid: string) {\n    this.indexImagesRemove.forEach(async (position) => {\n      const response = await this.productService.deleteImage(\n        productGuid,\n        position\n      );\n      switch (response.status) {\n        case 202:\n          this.nextStatusSuccess(\n            `Pronto, imagem do Produto removida com sucesso.`\n          );\n          break;\n      }\n    });\n    this.indexImagesRemove = [];\n  }\n\n  public openInput(position: number, edit: boolean) {\n    this.positionSelected = position;\n    this.editImage = edit;\n    this.showImportImage = true;\n  }\n\n  public closeImportImage(imageUrl) {\n    if (imageUrl) {\n      this.canReorderImages = false;\n      if (!this.editImage) {\n        this.hasAddImage = true;\n      }\n      if (this.productSelected && this.productSelected.image_list) {\n        this.indexImages.push(imageUrl.position - 1);\n        this.$set(\n          this.productSelected.image_list,\n          imageUrl.position - 1,\n          imageUrl\n        );\n        // this.productSelected.image_list[imageUrl.position - 1] = imageUrl;\n        this.setImage();\n      }\n    }\n    this.showImportImage = false;\n  }\n\n  public removeImages(position: number) {\n    this.hasRemoval = true;\n    this.indexImagesRemove.push(position);\n\n    this.canReorderImages = false;\n\n    if (this.productSelected && this.productSelected.image_list) {\n      this.productSelected.image_list.splice(position - 1, 1);\n    }\n  }\n\n  public previousReorderImages(imagesList: ImageURl[]) {\n    this.previousImages = imagesList;\n  }\n  public currentReorderImage(imagesList: ImageURl[]) {\n    this.currentImages = imagesList;\n    if (this.productSelected && this.productSelected.image_list) {\n      this.productSelected.image_list = this.currentImages;\n    }\n  }\n\n  public setViewImage(image: string) {\n    this.selectedImage = image;\n  }\n\n  public openEditImage() {\n    this.showEditImage = true;\n  }\n\n  public closeEditImageModal() {\n    this.showEditImage = false;\n  }\n\n  public saveEditImage() {\n    this.hasEditImage = false;\n  }\n\n  public isMobile = () =>\n    Boolean(\n      /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n        navigator.userAgent\n      )\n    );\n}\n\nexport { ProductModal as default };\n"],"sourceRoot":""}]}