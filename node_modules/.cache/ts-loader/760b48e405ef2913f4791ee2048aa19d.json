{"remainingRequest":"/home/aline/AstaPrecifique/node_modules/babel-loader/lib/index.js!/home/aline/AstaPrecifique/node_modules/ts-loader/index.js??ref--13-2!/home/aline/AstaPrecifique/src/components/box/editarMeuNegocio/editarMeuNegocio.component.ts","dependencies":[{"path":"/home/aline/AstaPrecifique/src/components/box/editarMeuNegocio/editarMeuNegocio.component.ts","mtime":1696439584173},{"path":"/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/AstaPrecifique/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/AstaPrecifique/node_modules/ts-loader/index.js","mtime":1673370387800}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZsYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkudW5zY29wYWJsZXMuZmxhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9hbGluZS9Bc3RhUHJlY2lmaXF1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvYWxpbmUvQXN0YVByZWNpZmlxdWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9hbGluZS9Bc3RhUHJlY2lmaXF1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9ob21lL2FsaW5lL0FzdGFQcmVjaWZpcXVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiL2hvbWUvYWxpbmUvQXN0YVByZWNpZmlxdWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBWdWUsIFdhdGNoIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCBWdWVTbGlkZXIgZnJvbSAndnVlLXNsaWRlci1jb21wb25lbnQnOwppbXBvcnQgVnVlU2ltcGxlQWxlcnQgZnJvbSAndnVlLXNpbXBsZS1hbGVydCc7CmltcG9ydCBTd2FsIGZyb20gJ3N3ZWV0YWxlcnQyJzsKaW1wb3J0ICd2dWUtc2xpZGVyLWNvbXBvbmVudC90aGVtZS9hbnRkLmNzcyc7CmltcG9ydCBDcm9wcGVyIGZyb20gJ2Nyb3BwZXJqcyc7CmltcG9ydCBmb2N1c0lucHV0IGZyb20gJ0AvaGVscGVycy9mb2N1c0lucHV0JzsKaW1wb3J0IHVzZXJTZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvdXNlci5zZXJ2aWNlJzsKaW1wb3J0IGNhdGVnb3J5U2VydmljZSBmcm9tICdAL3NlcnZpY2VzL2NhdGVnb3J5LnNlcnZpY2UnOwppbXBvcnQgcmVnaXN0ZXJTZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvcmVnaXN0ZXIuc2VydmljZSc7CmltcG9ydCBlbnZpcm9ubWVudCBmcm9tICJAL2Vudmlyb25tZW50cy9lbnZpcm9ubWVudCI7CmltcG9ydCBDb21wcmVzc29yIGZyb20gJ2NvbXByZXNzb3Jqcyc7CmltcG9ydCBMb2dvTW9kYWwgZnJvbSAnQC9jb21wb25lbnRzL2xvZ28tbW9kYWwvbG9nby1tb2RhbC52dWUnOwppbXBvcnQgVml0cmluZU1vZGFsIGZyb20gJ0AvY29tcG9uZW50cy92aXRyaW5lLW1vZGFsL3ZpdHJpbmUtbW9kYWwudnVlJzsKaW1wb3J0IG1peHBhbmVsIGZyb20gIm1peHBhbmVsLWJyb3dzZXIiOwoKdmFyIGVkaXRhck1ldU5lZ29jaW8gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWUpIHsKICBfaW5oZXJpdHMoZWRpdGFyTWV1TmVnb2NpbywgX1Z1ZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoZWRpdGFyTWV1TmVnb2Npbyk7CgogIGZ1bmN0aW9uIGVkaXRhck1ldU5lZ29jaW8oKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIGVkaXRhck1ldU5lZ29jaW8pOwoKICAgIF90aGlzID0gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICBfdGhpcy51c2VyU2VydmljZSA9IG5ldyB1c2VyU2VydmljZSgpOwogICAgX3RoaXMuY2F0ZWdvcnlTZXJ2aWNlID0gbmV3IGNhdGVnb3J5U2VydmljZSgpOwogICAgX3RoaXMucmVnaXN0ZXJTZXJ2aWNlID0gbmV3IHJlZ2lzdGVyU2VydmljZSgpOwogICAgX3RoaXMuc2hvd0FkZHJlc3NDaGVja2VkID0gdHJ1ZTsKICAgIF90aGlzLndoZW5DbG9zZWQgPSB0cnVlOwogICAgX3RoaXMub3V0T2ZSYWRpdXMgPSB0cnVlOwogICAgX3RoaXMuc2hvd0FkZHJlc3MgPSB0cnVlOwogICAgX3RoaXMuc2hvd0Nyb3BwZXIyID0gZmFsc2U7CiAgICBfdGhpcy52YWxpZFN1YkNhdGVnb3J5ID0gZmFsc2U7CiAgICBfdGhpcy5jYXRlZ29yeVN1YmNhdGVnb3J5ID0gW107CiAgICBfdGhpcy5jYXRTdWJjYXQgPSAnJzsKICAgIF90aGlzLmF1dG9Db21wbGV0ZVN1YkNhdGVnb3J5T3BlbiA9IGZhbHNlOwogICAgX3RoaXMuc3ViY2F0ZWdvcnkgPSAnJzsKICAgIF90aGlzLnN1YmNhdGVnb3JpZXMgPSBbXTsKICAgIF90aGlzLnN1YmNhdGVnb3JpZXNEYXRhID0gW107CiAgICBfdGhpcy5jb21ib0NhdGVnb3JpZXMgPSBbXTsKICAgIF90aGlzLnVzZXJzbmFtZSA9IFtdOwogICAgX3RoaXMuaW5zdGFJbWcgPSAnJzsKICAgIF90aGlzLnVzZXJJID0gJyc7CiAgICBfdGhpcy52YWxpZEluc3RhID0gZmFsc2U7CiAgICBfdGhpcy5hdXRvQ29tcGxldGVJbnN0YU9wZW4gPSBmYWxzZTsKICAgIF90aGlzLnVzZXIgPSAnJzsKICAgIF90aGlzLnVzZXJzID0gW107CiAgICBfdGhpcy50ZXN0ZTIgPSBmYWxzZTsKICAgIF90aGlzLmZhY2Vib29rVXNlciA9IGZhbHNlOwogICAgX3RoaXMuaW5zdGFncmFtVXNlciA9IGZhbHNlOwogICAgX3RoaXMuZmluYWxJbWFnZSA9ICcnOwogICAgX3RoaXMuZmluYWxDYXBlSW1hZ2UgPSAnJzsKICAgIF90aGlzLnNob3dDcm9wcGVyID0gZmFsc2U7CiAgICBfdGhpcy5kZXN0aW5hdGlvbiA9ICcnOwogICAgX3RoaXMubG9nb0lucHV0ID0gJyc7CiAgICBfdGhpcy5wdWJsaXNoQXZhaWxhYmxlID0gZmFsc2U7CiAgICBfdGhpcy5wdWJsaXNoQXZhaWxhYmxlVGV4dCA9ICcnOwogICAgX3RoaXMucHVibGlzaEF2YWlsYWJsZUNvbG9yID0gJyc7CiAgICBfdGhpcy5pbWFnZSA9IG5ldyBJbWFnZSgpOwogICAgX3RoaXMuY2lyY2xlcyA9IFtdOwogICAgX3RoaXMucHJvY2Vzc1N0eWxlID0gewogICAgICBjb2xvcjogJyRzZWNvbmRhcnknLAogICAgICBoZWlnaHQ6IDcKICAgIH07CiAgICBfdGhpcy5yYW5nZVZhbHVlID0gMTsKICAgIF90aGlzLnZvbHRhciA9IHRydWU7CiAgICBfdGhpcy5jb250ZW50ID0gJyc7CiAgICBfdGhpcy5jb250ZW50UGF5bWVudHMgPSAnJzsKICAgIF90aGlzLnBheW1lbnRzID0gW107CiAgICBfdGhpcy5wYXltZW50c0NoZWNrZWQgPSAnJzsKICAgIF90aGlzLmZhY2Vib29rID0gJyc7CiAgICBfdGhpcy5pbnN0YWdyYW0gPSAnJzsKICAgIF90aGlzLndlYnNpdGUgPSAnJzsKICAgIF90aGlzLnNlbGVjdGVkbGFuZyA9ICcnOwogICAgX3RoaXMubmFtZSA9ICcnOwogICAgX3RoaXMuZW1haWwgPSAnJzsKICAgIF90aGlzLmNlbHVsYXIgPSAnJzsKICAgIF90aGlzLmNhdGVnb3J5ID0gJyc7CiAgICBfdGhpcy5hYm91dCA9ICcnOwogICAgX3RoaXMuYWRkcmVzcyA9ICcnOwogICAgX3RoaXMuY29tcGxlbWVudG8gPSAnJzsKICAgIF90aGlzLmRlc2NyaWNhbyA9ICcnOwogICAgX3RoaXMubnVtZXJvID0gJyc7CiAgICBfdGhpcy5jZXAgPSAnJzsKICAgIF90aGlzLmxvZ3JhZG91cm8gPSAnJzsKICAgIF90aGlzLmJhaXJybyA9ICcnOwogICAgX3RoaXMuY2lkYWRlID0gJyc7CiAgICBfdGhpcy5kb2N1bWVudENwZiA9ICcnOwogICAgX3RoaXMucmVnaW9uID0gJyc7CiAgICBfdGhpcy5zaXplID0gJyc7CiAgICBfdGhpcy5zZWxsZXJOYW1lID0gJyc7CiAgICBfdGhpcy5yZWdpb25zID0gW107CiAgICBfdGhpcy5kZWxpdmVyeVJlZ2lvbnMgPSBbXTsKICAgIF90aGlzLnNvY2lhbE1lZGlhID0gW107CiAgICBfdGhpcy5wcm9maWxlVXJsID0gW107CiAgICBfdGhpcy5lcnJvck1zZyA9IGZhbHNlOwogICAgX3RoaXMubWFya2VycyA9IFtdOwogICAgX3RoaXMucGxhY2VzID0gW107CiAgICBfdGhpcy5jdXJyZW50UGxhY2UgPSAnJzsKICAgIF90aGlzLmZvcm1Nb2RlbCA9IHt9OwogICAgX3RoaXMuY2hlY2tlZE5hbWVzID0gW107CiAgICBfdGhpcy5pc0FjdGl2ZSA9IGZhbHNlOwogICAgX3RoaXMubm90aWZ5ID0gIiI7CiAgICBfdGhpcy5hY3RpdmVBY2NvcmRpb24gPSBfdGhpcy5wcm9wQWN0aXZlQWNjb3JkaW9uOwogICAgX3RoaXMuaGFzSGVhZGVyID0gX3RoaXMucHJvcEhlYWRlcjsKICAgIF90aGlzLmNoZWNrZWQgPSBmYWxzZTsKICAgIF90aGlzLml0ZW1zID0gW107CiAgICBfdGhpcy5mb2N1c2VkID0gbmV3IGZvY3VzSW5wdXQoKTsKICAgIF90aGlzLnJlZyA9IC9eKChbXjw+KClcW1xdXFwuLDs6XHNAIl0rKFwuW148PigpXFtcXVxcLiw7OlxzQCJdKykqKXwoIi4rIikpQCgoXFtbMC05XXsxLDN9XC5bMC05XXsxLDN9XC5bMC05XXsxLDN9XC5bMC05XXsxLDN9XSl8KChbYS16QS1aXC0wLTldK1wuKStbYS16QS1aXXsyLDI0fSkpJC87CiAgICBfdGhpcy52YWxpZCA9IGZhbHNlOwogICAgX3RoaXMudmFsaWRBZGRyZXNzID0gZmFsc2U7CiAgICBfdGhpcy52YWxpZENvbXBsZW1lbnRvID0gZmFsc2U7CiAgICBfdGhpcy52YWxpZERlc2NyaWNhbyA9IGZhbHNlOwogICAgX3RoaXMudmFsaWRDYXRlZ29yeSA9IGZhbHNlOwogICAgX3RoaXMudmFsaWROdW1lcm8gPSBmYWxzZTsKICAgIF90aGlzLnZhbGlkQWJvdXQgPSBmYWxzZTsKICAgIF90aGlzLnZhbGlkUmVnaW9uID0gZmFsc2U7CiAgICBfdGhpcy52YWxpZExvZ3JhZG91cm8gPSBmYWxzZTsKICAgIF90aGlzLnZhbGlkQ2lkYWRlID0gZmFsc2U7CiAgICBfdGhpcy52YWxpZEJhaXJybyA9IGZhbHNlOwogICAgX3RoaXMudmFsaWRDZXAgPSBmYWxzZTsKICAgIF90aGlzLmNhdGVnb3JpZXMgPSBbXTsKICAgIF90aGlzLmF1dG9Db21wbGV0ZUNhdGVnb3J5T3BlbiA9IGZhbHNlOwogICAgX3RoaXMuaGlkZUFkZHJlc3MgPSBmYWxzZTsKICAgIF90aGlzLnNpemVzID0gW107CiAgICBfdGhpcy5zaG93TG9nb01vZGFsID0gZmFsc2U7CiAgICBfdGhpcy5zaG93Vml0cmluZU1vZGFsID0gZmFsc2U7CiAgICBfdGhpcy5nZW5lcmljQ2hhdGJvdCA9ICdtaW5oYWxvamFfMCc7CiAgICBfdGhpcy5jaGF0Ym90SWQgPSBfdGhpcy5nZW5lcmljQ2hhdGJvdDsKICAgIF90aGlzLnNlbGVjdEFsbFBheW1lbnRzID0gZmFsc2U7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoZWRpdGFyTWV1TmVnb2NpbywgW3sKICAgIGtleTogIm9uUHJvcGVydHlDaGFuZ2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvblByb3BlcnR5Q2hhbmdlZCh2YWx1ZSwgb2xkVmFsdWUpIHsvLyBjb25zb2xlLmxvZyh2YWx1ZSwgb2xkVmFsdWUpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldENoYXRib3RJZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q2hhdGJvdElkKGNoYXRib3RJZCwgaXNBY3RpdmUpIHsKICAgICAgdGhpcy5jaGF0Ym90SWQgPSBpc0FjdGl2ZSA/ICJtaW5oYWxvamFfIi5jb25jYXQoY2hhdGJvdElkKSA6IHRoaXMuZ2VuZXJpY0NoYXRib3Q7CiAgICB9CiAgfSwgewogICAga2V5OiAib25QYXltZW50c0NoYW5nZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uUGF5bWVudHNDaGFuZ2VkKHZhbCkgewogICAgICB0aGlzLnNlbGVjdEFsbFBheW1lbnRzID0gdGhpcy5wYXltZW50cy5tYXAoZnVuY3Rpb24gKHBheW1lbnQpIHsKICAgICAgICByZXR1cm4gcGF5bWVudC5tZXRob2RzLm1hcChmdW5jdGlvbiAobWV0aG9kKSB7CiAgICAgICAgICByZXR1cm4gbWV0aG9kLmFjdGl2ZTsKICAgICAgICB9KTsKICAgICAgfSkuZmxhdCgpLmZpbHRlcihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICByZXR1cm4gIXZhbHVlOwogICAgICB9KS5sZW5ndGggPT09IDA7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2NyZWF0ZWQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgICB2YXIgY2F0ZWdvcmllc1Jlc3BvbnNlLCBjYXRlZ29yaWVzRGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGhpcy5zaG93Q3JvcHBlcjIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSAnJzsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Nyb3BwZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUb0Nyb3AgPSAnJzsKICAgICAgICAgICAgICAgIHRoaXMudXNlcnNuYW1lID0gdGhpcy5nZXRBbGxVc2VycygpOwogICAgICAgICAgICAgICAgdGhpcy5zaXplcyA9IFtdOwogICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzQ2hvaWNlc1NlbGxlclNpemUoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyU2VydmljZS5nZXRMaXN0Q2F0ZWdvcmllcygpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBjYXRlZ29yaWVzUmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gY2F0ZWdvcmllc1Jlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICAgIGNhdGVnb3JpZXNEYXRhID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3JpZXMgPSBjYXRlZ29yaWVzRGF0YSB8fCBbXTsKICAgICAgICAgICAgICAgIHRoaXMudXNlclNlcnZpY2UubGlzdFByb2RjdXRzQWxsKCkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgICBkYXRhLmRlbGl2ZXJ5LmZvckVhY2goZnVuY3Rpb24gKHJlZ2lvbikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuc2V0UmVnaW9ucyhyZWdpb24pOwogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGlmICghZGF0YS5kb2N1bWVudCkgewogICAgICAgICAgICAgICAgICAgIHZhciBfZG9jdW1lbnQkZ2V0RWxlbWVudEI7CgogICAgICAgICAgICAgICAgICAgIF90aGlzMi5pbmZvQWxlcnROb0RvY3VtZW50KCk7CgogICAgICAgICAgICAgICAgICAgIChfZG9jdW1lbnQkZ2V0RWxlbWVudEIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG9jdW1lbnQnKSkgPT09IG51bGwgfHwgX2RvY3VtZW50JGdldEVsZW1lbnRCID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZG9jdW1lbnQkZ2V0RWxlbWVudEIucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFkYXRhLmNhdGVnb3J5KSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmluZm9BbGVydE5vQ2F0ZWdvcnkoKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghZGF0YS5hZGRyZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLmluZm9BbGVydE5vQWRyZXNzKCk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF90aGlzMi5zZXRGaWVsZChkYXRhKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMi5jZWx1bGFyVmFsaWRhdGUoKTsKCiAgICAgICAgICAgICAgICAgIF90aGlzMi5jcGZWYWxpZGF0ZSgpOwogICAgICAgICAgICAgICAgfSk7IC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby11bnVzZWQtZXhwcmVzc2lvbgoKICAgICAgICAgICAgICAgIHRoaXMucHJpbnRWYWx1ZXM7CiAgICAgICAgICAgICAgICB0aGlzLnVzZXJTZXJ2aWNlLmxpc3RQYWdhbWVudG9zKCkudGhlbiggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZGF0YSkgewogICAgICAgICAgICAgICAgICAgIHZhciBmb3JtYXRlZFBheW1lbnRzLCBrZXk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ZWRQYXltZW50cyA9IFtdOyAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Zm9yaW4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IHJlZ2VuZXJhdG9yUnVudGltZS5rZXlzKGRhdGEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKF9jb250ZXh0LnQxID0gX2NvbnRleHQudDAoKSkuZG9uZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gX2NvbnRleHQudDEudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhW2tleV0uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZC5hY3RpdmUgPSBfdGhpczIuY2hlY2tlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIucGF5bWVudHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBrZXksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZHM6IGRhdGFba2V5XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBTZXJ2aWNlIGxpc3RPYnRlclBhZ2FtZW50b3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSBsaXN0T2J0ZXJQYWdhbWVudG9zCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBzZXJ2aWNvIHF1ZSBsaXN0YSBvcyBtZWlvcyBkZSBwYWdhbWVudG9zIGFsdGVyYWRvcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICogbmEgZnVuY2FvIGFsdGVyYXJQYXltZW50cywgdHJhemVuZG8gc2VsZWNpb25hZG9zCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi51c2VyU2VydmljZS5saXN0T2J0ZXJQYWdhbWVudG9zKCkgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXNoYWRvd2VkLXZhcmlhYmxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGNob2ljZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5wYXltZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwYXltZW50Q2F0ZWdvcnkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheW1lbnRDYXRlZ29yeS5tZXRob2RzLm1hcChmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5hY3RpdmUgPSB4Lm5hbWUgPT09IGNob2ljZS5uYW1lID8gdHJ1ZSA6IHguYWN0aXZlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwogICAgICAgICAgICAgICAgdGhpcy51c2VyU2VydmljZS5nZXRTb2NpYWxNZWRpYSgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChzb2NpYWwpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczIuc2V0U29jaWFsTWVkaWEoc29jaWFsKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAgICAgcmV0dXJuIF9jcmVhdGVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjcmVhdGVkOwogICAgfSgpCiAgfSwgewogICAga2V5OiAib3BlblplbmRlc2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW5aZW5kZXNrKCkgewogICAgICB0aGlzLiR6ZW5kZXNrLmxvYWQoIjE0ZTZjMDFlLWFlMmMtNGUyYy04Yzc2LWQ0NjFjMDE0NzljOCIpOwogICAgICB0aGlzLiR6ZW5kZXNrLnpFKCdtZXNzZW5nZXInLCAnb3BlbicpOwogICAgfQogIH0sIHsKICAgIGtleTogIm9uQWNjb3JkaW9uVG9nZ2xlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvbkFjY29yZGlvblRvZ2dsZSgpIHt9CiAgICAvKioKICAgICAqIEZ1bmN0aW9uIHZlcmlmeSBldmVudCBjaGVja2JveAogICAgICogQHBhcmFtIHByaW50VmFsdWVzCiAgICAgKiBAcGFyYW0gbmFtZQogICAgICogQHBhcmFtIHN0YXR1cwogICAgICovCgogIH0sIHsKICAgIGtleTogInByaW50VmFsdWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwcmludFZhbHVlcyhuYW1lLCBzdGF0dXMpIHsKICAgICAgaWYgKHN0YXR1cykgewogICAgICAgIHRoaXMuY2hlY2tlZE5hbWVzLnB1c2gobmFtZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jaGVja2VkTmFtZXMgPSB0aGlzLmNoZWNrZWROYW1lcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtICE9PSBuYW1lOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0U29jaWFsTWVkaWEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFNvY2lhbE1lZGlhKG1lZGlhKSB7CiAgICAgIGlmIChtZWRpYS50eXBlID09PSAnRmFjZWJvb2snKSB7CiAgICAgICAgdGhpcy5mYWNlYm9vayA9IEFycmF5LmZyb20obmV3IFNldChtZWRpYS5wcm9maWxlVXJsLnNwbGl0KCdodHRwczovL3d3dy5mYWNlYm9vay5jb20vJykpKS50b1N0cmluZygpOwogICAgICAgIHRoaXMuZmFjZWJvb2sgPSB0aGlzLmZhY2Vib29rLnJlcGxhY2UoLywvZywgJycpOwogICAgICB9CgogICAgICBpZiAobWVkaWEudHlwZSA9PT0gJ0luc3RhZ3JhbScpIHsKICAgICAgICB0aGlzLmluc3RhZ3JhbSA9IEFycmF5LmZyb20obmV3IFNldChtZWRpYS5wcm9maWxlVXJsLnNwbGl0KCdodHRwczovL3d3dy5pbnN0YWdyYW0uY29tLycpKSkudG9TdHJpbmcoKTsKICAgICAgICB0aGlzLmluc3RhZ3JhbSA9IHRoaXMuaW5zdGFncmFtLnJlcGxhY2UoLywvZywgJycpOwogICAgICB9CgogICAgICBpZiAobWVkaWEudHlwZSA9PT0gJ1BlcnNvbmFsIFdlYnNpdGUnKSB7CiAgICAgICAgdGhpcy53ZWJzaXRlID0gbWVkaWEucHJvZmlsZVVybC5zcGxpdCgnaHR0cHM6Ly8nKVsxXTsKICAgICAgfQoKICAgICAgdGhpcy5mYWNlID0gdGhpcy5mYWNlYm9vazsKICAgICAgdGhpcy5pbnN0ZyA9IHRoaXMuaW5zdGFncmFtOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEZpZWxkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRGaWVsZCh0ZXh0cykgewogICAgICB0aGlzLmZpbmFsSW1hZ2UgPSB0ZXh0cy5zdG9yZV9sb2dvX3VybDsKICAgICAgdGhpcy5maW5hbENhcGVJbWFnZSA9IHRleHRzLnN0b3JlX2NvdmVyX3Bob3RvX3VybDsKCiAgICAgIGlmICh0ZXh0cy5hZGRyZXNzKSB7CiAgICAgICAgdGhpcy5yYW5nZVZhbHVlID0gdGV4dHMuYWRkcmVzcy5kaXN0YW5jZTsKICAgICAgICB0aGlzLmFkZHJlc3MgPSB0ZXh0cy5hZGRyZXNzLnN0cmVldCArICcsICcgKyB0ZXh0cy5hZGRyZXNzLm5laWdoYm9yaG9vZCArICcsICcgKyB0ZXh0cy5hZGRyZXNzLmNpdHkgKyAnLCAnICsgdGV4dHMuYWRkcmVzcy5zdGF0ZTsKICAgICAgICB0aGlzLmdlb2NvZGVBZGRyZXNzKHRleHRzLmFkZHJlc3Muc3RyZWV0ICsgJywgJyArIHRleHRzLmFkZHJlc3MubnVtYmVyICsgJywgJyArIHRleHRzLmFkZHJlc3MubmVpZ2hib3Job29kICsgJywgJyArIHRleHRzLmFkZHJlc3MuY2l0eSArICcsICcgKyB0ZXh0cy5hZGRyZXNzLnN0YXRlKTsKICAgICAgICB0aGlzLmNvbXBsZW1lbnRvID0gdGV4dHMuYWRkcmVzcy5jb21wbGVtZW50OwogICAgICAgIHRoaXMuYWJvdXQgPSB0ZXh0cy5hYm91dDsKICAgICAgICB0aGlzLnJlZ2lvbiA9ICcnOwogICAgICAgIHRoaXMubnVtZXJvID0gdGV4dHMuYWRkcmVzcy5udW1iZXI7CiAgICAgICAgdGhpcy5jaWRhZGUgPSB0ZXh0cy5hZGRyZXNzLmNpdHk7CiAgICAgICAgdGhpcy5iYWlycm8gPSB0ZXh0cy5hZGRyZXNzLm5laWdoYm9yaG9vZDsKICAgICAgICB0aGlzLmxvZ3JhZG91cm8gPSB0ZXh0cy5hZGRyZXNzLnN0cmVldDsKICAgICAgICB0aGlzLmNlcCA9IHRleHRzLmFkZHJlc3MuemlwY29kZTsKICAgICAgfQoKICAgICAgdGhpcy5zaXplID0gdGV4dHMuc2l6ZTsKICAgICAgdGhpcy5zZWxsZXJOYW1lID0gdGV4dHMuc2VsbGVyX25hbWU7CiAgICAgIHRoaXMuZG9jdW1lbnRDcGYgPSB0ZXh0cy5kb2N1bWVudDsKICAgICAgdGhpcy5jb250ZW50ID0gdGV4dHM7CiAgICAgIHRoaXMubmFtZSA9IHRleHRzLm5hbWU7CiAgICAgIHRoaXMuY2VsdWxhciA9IHRleHRzLm1vYmlsZTsKICAgICAgdGhpcy5lbWFpbCA9IHRleHRzLmVtYWlsOwogICAgICB0aGlzLnB1Ymxpc2hBdmFpbGFibGUgPSB0ZXh0cy5zZWxsZXJfZGlzYWJsZTsKICAgICAgdGhpcy5wdWJsaXNoQXZhaWxhYmxlVGV4dCA9IHRoaXMucHVibGlzaEF2YWlsYWJsZSA/ICdSZWF0aXZhciBjb250YScgOiAnRGVzYXRpdmFyIGNvbnRhJzsKICAgICAgdGhpcy5wdWJsaXNoQXZhaWxhYmxlQ29sb3IgPSB0aGlzLnB1Ymxpc2hBdmFpbGFibGUgPyAnZWRpdEJveF9fZm9ybURhdGFfX2RhdGFCdG4tLWJ1dHRvbl9fYWN0aXZlJyA6ICdlZGl0Qm94X19mb3JtRGF0YV9fZGF0YUJ0bi0tYnV0dG9uX19kaXNhYmxlJzsKICAgICAgdGhpcy5jYXRTdWJjYXQgPSB0ZXh0cy50aGlyZF9sZXZlbDsKCiAgICAgIGlmICh0ZXh0cy5zdWJfY2F0ZWdvcnkpIHsKICAgICAgICAvLyB0aGlzLmNhdGVnb3J5U3ViY2F0ZWdvcnkgPSB0aGlzLmNhdFN1YmNhdC5zcGxpdCgnIC0gJyk7CiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IHRleHRzLmNhdGVnb3J5OwogICAgICAgIHRoaXMuc3ViY2F0ZWdvcnkgPSB0ZXh0cy5zdWJfY2F0ZWdvcnk7CiAgICAgICAgdGhpcy52YWxpZFN1YkNhdGVnb3J5ID0gdGhpcy5zdWJjYXRlZ29yeSA/IHRydWUgOiBmYWxzZTsKICAgICAgfQoKICAgICAgdGhpcy5oaWRlQWRkcmVzcyA9IHRleHRzLmhpZGVfYWRkcmVzcyA9PT0gdHJ1ZSA/IHRleHRzLmhpZGVfYWRkcmVzcyA6IGZhbHNlOwogICAgICB0aGlzLnZhbGlkID0gZmFsc2U7CiAgICAgIHRoaXMudmFsaWRBZGRyZXNzID0gdGhpcy5hZGRyZXNzID8gdHJ1ZSA6IGZhbHNlOwogICAgICB0aGlzLnZhbGlkQ2F0ZWdvcnkgPSB0aGlzLmNhdGVnb3J5ID8gdHJ1ZSA6IGZhbHNlOwogICAgICB0aGlzLnZhbGlkQ29tcGxlbWVudG8gPSB0aGlzLmNvbXBsZW1lbnRvID8gdHJ1ZSA6IGZhbHNlOwogICAgICB0aGlzLnZhbGlkRGVzY3JpY2FvID0gdGhpcy5kZXNjcmljYW8gPyB0cnVlIDogZmFsc2U7CiAgICAgIHRoaXMudmFsaWROdW1lcm8gPSB0aGlzLm51bWVybyA/IHRydWUgOiBmYWxzZTsKICAgICAgdGhpcy52YWxpZEFib3V0ID0gdGhpcy5hYm91dCA/IHRydWUgOiBmYWxzZTsKICAgICAgdGhpcy52YWxpZFJlZ2lvbiA9IGZhbHNlOwogICAgICB0aGlzLnZhbGlkTG9ncmFkb3VybyA9IGZhbHNlOwogICAgICB0aGlzLnZhbGlkQ2lkYWRlID0gZmFsc2U7CiAgICAgIHRoaXMudmFsaWRCYWlycm8gPSBmYWxzZTsKICAgICAgdGhpcy52YWxpZENlcCA9IGZhbHNlOwogICAgICB0aGlzLmZvY3VzZWQuZWRpdENhdGVnb3J5ID0gdGhpcy5jYXRlZ29yeSA/IHRydWUgOiBmYWxzZTsKICAgICAgdGhpcy5mb2N1c2VkLmVkaXRTaXplID0gdGhpcy5zaXplID8gdHJ1ZSA6IGZhbHNlOwogICAgICB0aGlzLmZvY3VzZWQuZWRpdFNlbGxlck5hbWUgPSB0aGlzLnNlbGxlck5hbWUgPyB0cnVlIDogZmFsc2U7CiAgICAgIHRoaXMuZm9jdXNlZC5lZGl0QWRkcmVzcyA9IHRoaXMuYWRkcmVzcyA/IHRydWUgOiBmYWxzZTsKICAgICAgdGhpcy5mb2N1c2VkLmVkaXRSZWdpb24gPSB0cnVlOwogICAgICB0aGlzLmZvY3VzZWQuZWRpdEFib3V0ID0gdGhpcy5hYm91dCA/IHRydWUgOiBmYWxzZTsKICAgICAgdGhpcy5mb2N1c2VkLmVkaXRDb21wbGVtZW50byA9IHRoaXMuY29tcGxlbWVudG8gPyB0cnVlIDogZmFsc2U7CiAgICAgIHRoaXMuZm9jdXNlZC5lZGl0RGVzY3JpY2FvID0gdGhpcy5kZXNjcmljYW8gPyB0cnVlIDogZmFsc2U7CiAgICAgIHRoaXMuZm9jdXNlZC5lZGl0TnVtZXJvID0gdGhpcy5udW1lcm8gPyB0cnVlIDogZmFsc2U7CiAgICAgIHRoaXMuZm9jdXNlZC5lZGl0Q2VwID0gdGhpcy5jZXAgPyB0cnVlIDogZmFsc2U7CiAgICAgIHRoaXMuZm9jdXNlZC5lZGl0TG9ncmFkb3VybyA9IHRoaXMubG9ncmFkb3VybyA/IHRydWUgOiBmYWxzZTsKICAgICAgdGhpcy5mb2N1c2VkLmVkaXRDaWRhZGUgPSB0aGlzLmNpZGFkZSA/IHRydWUgOiBmYWxzZTsKICAgICAgdGhpcy5mb2N1c2VkLmVkaXRCYWlycm8gPSB0aGlzLmJhaXJybyA/IHRydWUgOiBmYWxzZTsKICAgICAgdGhpcy5zdWJjYXRlZ29yaWVzRGF0YSA9IHRoaXMuc3ViY2F0ZWdvcmllczsKICAgICAgdGhpcy5jbGVhclN1YmNhdGVnb3J5KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiYWx0ZXJhckFkZHJlc3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFsdGVyYXJBZGRyZXNzKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHRoaXMuJGVtaXQoJ2xvYWRpbmcnLCB0cnVlKTsKICAgICAgdGhpcy51c2VyU2VydmljZS51cGRhdGVXaGVuQ2xvc2VkKHsKICAgICAgICBhY2NlcHRzX29yZGVyc193aGVuX2Nsb3NlZDogdGhpcy53aGVuQ2xvc2VkCiAgICAgIH0pOwogICAgICB0aGlzLnVzZXJTZXJ2aWNlLnVwZGF0ZU91dE9mUmFkaXVzKHsKICAgICAgICBhY2NlcHRzX2Rpc3RhbnRfb3JkZXJzOiB0aGlzLm91dE9mUmFkaXVzCiAgICAgIH0pOwogICAgICB2YXIgbG9jYXRpb24gPSB7CiAgICAgICAgZGlzdGFuY2U6IHRoaXMucmFuZ2VWYWx1ZSA/IHRoaXMucmFuZ2VWYWx1ZSA6IG51bGwsCiAgICAgICAgbnVtYmVyOiB0aGlzLm51bWVybywKICAgICAgICBjb21wbGVtZW50OiB0aGlzLmNvbXBsZW1lbnRvLAogICAgICAgIG5laWdoYm9yaG9vZDogdGhpcy5iYWlycm8sCiAgICAgICAgbGF0OiB0aGlzLmxhdCwKICAgICAgICBsbmc6IHRoaXMubG5nLAogICAgICAgIGNpdHk6IHRoaXMuY2lkYWRlLAogICAgICAgIHN0cmVldDogdGhpcy5sb2dyYWRvdXJvLAogICAgICAgIHppcGNvZGU6IHRoaXMuY2VwLAogICAgICAgIHNob3dfYWRkcmVzczogdGhpcy5zaG93QWRkcmVzcwogICAgICB9OwoKICAgICAgaWYgKCFsb2NhdGlvbi5udW1iZXIgfHwgIWxvY2F0aW9uLnppcGNvZGUgfHwgIWxvY2F0aW9uLm5laWdoYm9yaG9vZCB8fCAhbG9jYXRpb24uY2l0eSB8fCAhbG9jYXRpb24uc3RyZWV0KSB7CiAgICAgICAgdmFyIGVtcHR5RmllbGRzID0gIiI7CgogICAgICAgIGlmICghbG9jYXRpb24uemlwY29kZSkgewogICAgICAgICAgZW1wdHlGaWVsZHMgKz0gJ1xuIENlcCc7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWxvY2F0aW9uLnN0cmVldCkgewogICAgICAgICAgZW1wdHlGaWVsZHMgKz0gJ1xuIExvZ3JhZG91cm8nOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFsb2NhdGlvbi5udW1iZXIpIHsKICAgICAgICAgIGVtcHR5RmllbGRzICs9ICdcbiBOw7ptZXJvJzsKICAgICAgICB9CgogICAgICAgIGlmICghbG9jYXRpb24ubmVpZ2hib3Job29kKSB7CiAgICAgICAgICBlbXB0eUZpZWxkcyArPSAnXG4gQmFpcnJvJzsKICAgICAgICB9CgogICAgICAgIGlmICghbG9jYXRpb24uY2l0eSkgewogICAgICAgICAgZW1wdHlGaWVsZHMgKz0gJ1xuIENpZGFkZSc7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnRvYXN0TWVzc2FnZSgnZXJyb3InLCAiT3MgY2FtcG9zIGFiYWl4byBzw6NvIG9icmlnYXTDs3Jpb3M6XG4iICsgZW1wdHlGaWVsZHMpOwogICAgICAgIHRoaXMuJGVtaXQoJ2xvYWRpbmcnLCBmYWxzZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAobG9jYXRpb24pIHsKICAgICAgICB0aGlzLnVzZXJTZXJ2aWNlLnVwZGF0ZVNob3dBZGRyZXNzKGxvY2F0aW9uKTsKICAgICAgICB0aGlzLnVzZXJTZXJ2aWNlLnVwZGF0ZVNlbGxlckFkZHJlc3MobG9jYXRpb24pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIGlmICghZGF0YS5vaykgewogICAgICAgICAgICBfdGhpczMuc2hvd0Vycm9yTm90aWZpY2F0aW9uKCk7CgogICAgICAgICAgICBfdGhpczMuJGVtaXQoJ2xvYWRpbmcnLCBmYWxzZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczMudXNlclNlcnZpY2UudXBkYXRlU2VsbGVyKHsKICAgICAgICAgICAgICBoaWRlX2FkZHJlc3M6IF90aGlzMy5oaWRlQWRkcmVzcwogICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyRGF0YSkgewogICAgICAgICAgICAgIGlmICghdXNlckRhdGEub2spIHsKICAgICAgICAgICAgICAgIF90aGlzMy5zaG93RXJyb3JOb3RpZmljYXRpb24oKTsKCiAgICAgICAgICAgICAgICBfdGhpczMuJGVtaXQoJ2xvYWRpbmcnLCBmYWxzZSk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzMy5zaG93U3VjY2Vzc2Z1bGxOb3RpZmljYXRpb24oKTsKCiAgICAgICAgICAgICAgICBfdGhpczMuJGVtaXQoJ2xvYWRpbmcnLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMuZm9jdXNlZC5lZGl0TnVtZXJvID0gdGhpcy5udW1lcm8gPyB0cnVlIDogZmFsc2U7CiAgICAgIHRoaXMuJGVtaXQoJ2xvYWRpbmcnLCBmYWxzZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0U2lnbGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNpZ2xhKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciBvYmogPSB0aGlzLnNpemVzLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS52YWx1ZSA9PT0gX3RoaXM0LnNpemU7CiAgICAgIH0pOwogICAgICByZXR1cm4gb2JqICE9PSB1bmRlZmluZWQgPyBvYmouc2lnbGEgOiAiIjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzYXZlRGF0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZURhdGEoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy4kZW1pdCgnbG9hZGluZycsIHRydWUpOwoKICAgICAgaWYgKCF0aGlzLnNpemUgfHwgIXRoaXMuc2VsbGVyTmFtZSkgewogICAgICAgIGFsZXJ0KCJEZXZlIHByZWVuY2hlciBvcyBkYWRvcyBlbSBicmFuY28sIHBvciBmYXZvciBwcmVlbmNoYSBlIHRlbnRlIG5vdmFtZW50ZSIpOwogICAgICAgIHRoaXMuc2hvd0Vycm9yTm90aWZpY2F0aW9uKCk7CiAgICAgICAgdGhpcy4kZW1pdCgnbG9hZGluZycsIGZhbHNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnVzZXJTZXJ2aWNlLnVwZGF0ZVNpemUodGhpcy5nZXRTaWdsYSgpLCB0aGlzLnNlbGxlck5hbWUsIHRoaXMubmFtZSwgdGhpcy5lbWFpbCwgdGhpcy5kb2N1bWVudENwZikudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgaWYgKCFkYXRhLm9rKSB7CiAgICAgICAgICAgIGRhdGEuanNvbigpLnRoZW4oZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgICAgIGlmIChvYmouZW1haWwpIHsKICAgICAgICAgICAgICAgIF90aGlzNS5zaG93RXJyb3JOb3RpZmljYXRpb24ob2JqLmVtYWlsWzBdKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXM1LnNob3dFcnJvck5vdGlmaWNhdGlvbigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczUuc2hvd1N1Y2Nlc3NmdWxsTm90aWZpY2F0aW9uKCk7CgogICAgICAgICAgICBkYXRhLmpzb24oKS50aGVuKGZ1bmN0aW9uIChvYmopIHsKICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbG9nZ2VkVXNlcicsIEpTT04uc3RyaW5naWZ5KG9iaikpOwogICAgICAgICAgICAgIF90aGlzNS5sb2dnZWRVc2VyID0gb2JqOwogICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM1LiRlbWl0KCdsb2FkaW5nJywgZmFsc2UpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiYWx0ZXJTZWxsZXJTdGF0dXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFsdGVyU2VsbGVyU3RhdHVzKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnB1Ymxpc2hBdmFpbGFibGUpIHsKICAgICAgICB0aGlzLnVzZXJTZXJ2aWNlLmhhYmlsaXRhVmVuZGVkb3IoKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgaWYgKHZhbHVlLnN0YXR1cyAhPT0gMjAyKSB7CiAgICAgICAgICAgIF90aGlzNi5zaG93RXJyb3JOb3RpZmljYXRpb24oKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzNi5zaG93U3VjY2Vzc2Z1bGxOb3RpZmljYXRpb24oKTsKCiAgICAgICAgICAgIF90aGlzNi5wdWJsaXNoQXZhaWxhYmxlID0gZmFsc2U7CiAgICAgICAgICAgIF90aGlzNi5wdWJsaXNoQXZhaWxhYmxlVGV4dCA9ICdEZXNhdGl2YXIgY29udGEnOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXNlclNlcnZpY2UuZGVzYWJpbGl0YVZlbmRlZG9yKCkudGhlbihmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgIGlmICh2YWx1ZS5zdGF0dXMgIT09IDIwMikgewogICAgICAgICAgICBfdGhpczYuc2hvd0Vycm9yTm90aWZpY2F0aW9uKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczYuc2hvd1N1Y2Nlc3NmdWxsTm90aWZpY2F0aW9uKCk7CgogICAgICAgICAgICBfdGhpczYucHVibGlzaEF2YWlsYWJsZSA9IHRydWU7CiAgICAgICAgICAgIF90aGlzNi5wdWJsaXNoQXZhaWxhYmxlVGV4dCA9ICdSZWF0aXZhciBjb250YSc7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMucHVibGlzaEF2YWlsYWJsZUNvbG9yID0gdGhpcy5wdWJsaXNoQXZhaWxhYmxlID8gJ2VkaXRCb3hfX2Zvcm1EYXRhX19kYXRhQnRuLS1idXR0b25fX2Rpc2FibGUnIDogJ2VkaXRCb3hfX2Zvcm1EYXRhX19kYXRhQnRuLS1idXR0b25fX2FjdGl2ZSc7CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZUNhdGVnb3J5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzYXZlQ2F0ZWdvcnkoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdGhpcy4kZW1pdCgnbG9hZGluZycsIHRydWUpOwoKICAgICAgaWYgKHRoaXMuc3ViY2F0ZWdvcnkgPT09ICcnICYmIHRoaXMuY2F0ZWdvcnkgIT09ICcnKSB7CiAgICAgICAgdGhpcy5zaG93RXJyb3JOb3RpZmljYXRpb24oKTsKICAgICAgICB0aGlzLiRlbWl0KCdsb2FkaW5nJywgZmFsc2UpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGNvbnN0IHZhbHVlID0gdGhpcy5jYXRlZ29yeSArICcgLSAnICsgdGhpcy5zdWJjYXRlZ29yeTsKICAgICAgICAvLyB0aGlzLmNhdGVnb3J5SWQgPSB0aGlzLmNhdGVnb3JpZXMuZmlsdGVyKGMgPT4gYy52YWx1ZSA9PT0gdmFsdWUpWzBdLmlkOwogICAgICAgIHZhciBzdWJjYXRlZ29yeSA9IHRoaXMuc3ViY2F0ZWdvcmllcy5maW5kKGZ1bmN0aW9uIChzdWJjYXRlZ29yeSkgewogICAgICAgICAgcmV0dXJuIHN1YmNhdGVnb3J5Lm5hbWUgPT09IF90aGlzNy5zdWJjYXRlZ29yeTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKHN1YmNhdGVnb3J5KSB7CiAgICAgICAgICB0aGlzLnVzZXJTZXJ2aWNlLnVwZGF0ZUNhdGVnb3J5KHsKICAgICAgICAgICAgY25hZTogc3ViY2F0ZWdvcnkuY25hZQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICBpZiAoIWRhdGEub2spIHsKICAgICAgICAgICAgICBfdGhpczcuc2hvd0Vycm9yTm90aWZpY2F0aW9uKCk7CgogICAgICAgICAgICAgIF90aGlzNy4kZW1pdCgnbG9hZGluZycsIGZhbHNlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczcudXNlclNlcnZpY2UudXBkYXRlU2VsbGVyKHsKICAgICAgICAgICAgICAgIGFib3V0OiBfdGhpczcuYWJvdXQKICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyRGF0YSkgewogICAgICAgICAgICAgICAgaWYgKCF1c2VyRGF0YS5vaykgewogICAgICAgICAgICAgICAgICBfdGhpczcuc2hvd0Vycm9yTm90aWZpY2F0aW9uKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczcuc2hvd1N1Y2Nlc3NmdWxsTm90aWZpY2F0aW9uKCk7CgogICAgICAgICAgICAgICAgICB2YXIgbG9nZ2VkID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9nZ2VkVXNlcicpIHx8ICcnKTsKICAgICAgICAgICAgICAgICAgbG9nZ2VkLmNhdGVnb3J5ID0gX3RoaXM3LmNhdGVnb3J5OwogICAgICAgICAgICAgICAgICBsb2dnZWQuc3Vic2NyaWJlID0gX3RoaXM3LnN1YmNhdGVnb3J5OwogICAgICAgICAgICAgICAgICBsb2dnZWQuYWJvdXQgPSBfdGhpczcuYWJvdXQ7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdsb2dnZWRVc2VyJywgSlNPTi5zdHJpbmdpZnkobG9nZ2VkKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX3RoaXM3LiRlbWl0KCdsb2FkaW5nJywgZmFsc2UpOwoKICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudXNlclNlcnZpY2UudXBkYXRlU2VsbGVyKHsKICAgICAgICAgICAgYWJvdXQ6IHRoaXMuYWJvdXQKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgaWYgKCFkYXRhLm9rKSB7CiAgICAgICAgICAgICAgX3RoaXM3LnNob3dFcnJvck5vdGlmaWNhdGlvbigpOwoKICAgICAgICAgICAgICBfdGhpczcuJGVtaXQoJ2xvYWRpbmcnLCBmYWxzZSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXM3LnNob3dTdWNjZXNzZnVsbE5vdGlmaWNhdGlvbigpOwoKICAgICAgICAgICAgICBfdGhpczcuJGVtaXQoJ2xvYWRpbmcnLCBmYWxzZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImFsdGVyYXJTb2NpYWxNZWRpYSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWx0ZXJhclNvY2lhbE1lZGlhKCkgewogICAgICB2YXIgX3dpbmRvdyRldmVudCwKICAgICAgICAgIF90aGlzOCA9IHRoaXM7CgogICAgICAoX3dpbmRvdyRldmVudCA9IHdpbmRvdy5ldmVudCkgPT09IG51bGwgfHwgX3dpbmRvdyRldmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3dpbmRvdyRldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLnNvY2lhbE1lZGlhID0gW107CiAgICAgIHRoaXMuJGVtaXQoJ2xvYWRpbmcnLCB0cnVlKTsKICAgICAgdGhpcy5pbnN0YWdyYW1Vc2VyID0gZmFsc2U7CiAgICAgIHRoaXMuZmFjZWJvb2tVc2VyID0gZmFsc2U7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmYWNlYm9vaycsICd0cnVlJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpbnN0YWdyYW0nLCAndHJ1ZScpOwoKICAgICAgaWYgKCF0aGlzLmZhY2UpIHsKICAgICAgICB0aGlzLmZhY2UgPSAnJzsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLmluc3RnKSB7CiAgICAgICAgdGhpcy5pbnN0ZyA9ICcnOwogICAgICB9CgogICAgICBpZiAodGhpcy5mYWNlYm9vay5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy52ZXJpZmljYXIoJ2ZhY2Vib29rJyk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2ZhY2Vib29rJykgPT09ICd0cnVlJykgewogICAgICAgICAgICBfdGhpczguc29jaWFsTWVkaWEucHVzaCh7CiAgICAgICAgICAgICAgc3RhdHVzOiBfdGhpczguZmFjZWJvb2sgPyB0cnVlIDogZmFsc2UsCiAgICAgICAgICAgICAgcHJvZmlsZVVybDogJ2h0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS8nICsgX3RoaXM4LmZhY2Vib29rLAogICAgICAgICAgICAgIHR5cGU6ICdGYWNlYm9vaycKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczguc29jaWFsTWVkaWEucHVzaCh7CiAgICAgICAgICAgICAgc3RhdHVzOiBfdGhpczguZmFjZSA/IHRydWUgOiBmYWxzZSwKICAgICAgICAgICAgICBwcm9maWxlVXJsOiAnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tLycgKyBfdGhpczguZmFjZSwKICAgICAgICAgICAgICB0eXBlOiAnRmFjZWJvb2snCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIDUxMCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmluc3RhZ3JhbS5sZW5ndGggPiAwKSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2luc3RhZ3JhbScpID09PSAndHJ1ZScpIHsKICAgICAgICAgICAgX3RoaXM4LnNvY2lhbE1lZGlhLnB1c2goewogICAgICAgICAgICAgIHN0YXR1czogX3RoaXM4Lmluc3RhZ3JhbSA/IHRydWUgOiBmYWxzZSwKICAgICAgICAgICAgICBwcm9maWxlVXJsOiAnaHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS8nICsgX3RoaXM4Lmluc3RhZ3JhbSwKICAgICAgICAgICAgICB0eXBlOiAnSW5zdGFncmFtJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzOC5zb2NpYWxNZWRpYS5wdXNoKHsKICAgICAgICAgICAgICBzdGF0dXM6IF90aGlzOC5pbnN0ZyA/IHRydWUgOiBmYWxzZSwKICAgICAgICAgICAgICBwcm9maWxlVXJsOiAnaHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS8nICsgX3RoaXM4Lmluc3RnLAogICAgICAgICAgICAgIHR5cGU6ICdJbnN0YWdyYW0nCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0sIDUxMCk7CiAgICAgICAgdGhpcy52ZXJpZmljYXIoJ2luc3RhZ3JhbScpOwogICAgICB9CgogICAgICBpZiAodGhpcy53ZWJzaXRlLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLnNvY2lhbE1lZGlhLnB1c2goewogICAgICAgICAgc3RhdHVzOiB0aGlzLndlYnNpdGUgPyB0cnVlIDogZmFsc2UsCiAgICAgICAgICBwcm9maWxlVXJsOiAnaHR0cHM6Ly8nICsgdGhpcy53ZWJzaXRlLAogICAgICAgICAgdHlwZTogJ1BlcnNvbmFsIFdlYnNpdGUnCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzOC51c2VyU2VydmljZS5wb3N0U29jaWFsTWVkaWEoX3RoaXM4LnNvY2lhbE1lZGlhKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICBpZiAoIWRhdGEub2sgfHwgX3RoaXM4Lmluc3RhZ3JhbVVzZXIgIT09IGZhbHNlIHx8IF90aGlzOC5mYWNlYm9va1VzZXIgIT09IGZhbHNlKSB7CiAgICAgICAgICAgIF90aGlzOC5zaG93RXJyb3JOb3RpZmljYXRpb24oKTsKCiAgICAgICAgICAgIF90aGlzOC4kZW1pdCgnbG9hZGluZycsIGZhbHNlKTsKCiAgICAgICAgICAgIGlmIChfdGhpczguaW5zdGFncmFtVXNlciA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICBfdGhpczguaW5zdGcgPSBfdGhpczguaW5zdGFncmFtOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoX3RoaXM4LmZhY2Vib29rVXNlciA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgICBfdGhpczguZmFjZSA9IF90aGlzOC5mYWNlYm9vazsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXM4LnNob3dTdWNjZXNzZnVsbE5vdGlmaWNhdGlvbigpOwoKICAgICAgICAgICAgX3RoaXM4LiRlbWl0KCdsb2FkaW5nJywgZmFsc2UpOwoKICAgICAgICAgICAgX3RoaXM4LnNvY2lhbE1lZGlhID0gW107CiAgICAgICAgICAgIF90aGlzOC5mYWNlID0gX3RoaXM4LmZhY2Vib29rOwogICAgICAgICAgICBfdGhpczguaW5zdGcgPSBfdGhpczguaW5zdGFncmFtOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIHJldHVybiBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0pOwoKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnaW5zdGFncmFtJyk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2ZhY2Vib29rJyk7CiAgICAgIH0sIDYwMCk7CiAgICB9IC8vIHVwZGF0ZVBvc3RTb2NpYWwoKSB7CiAgICAvLyAgIHRoaXMuJGVtaXQoJ2xvYWRpbmcnLCBmYWxzZSk7CiAgICAvLyAgIHRoaXMuc2VydmljZS5nZXRTb2NpYWxNZWRpYSgpCiAgICAvLyAgIC50aGVuKGRhdGEgPT4gZGF0YS5qc29uKCkpCiAgICAvLyAgIC50aGVuKGRhdGEgPT4gewogICAgLy8gICAgIGlmICghZGF0YS5vaykgewogICAgLy8gICAgICAgdGhpcy5zaG93RXJyb3JOb3RpZmljYXRpb24oKTsKICAgIC8vICAgICAgIHRoaXMuJGVtaXQoJ2xvYWRpbmcnLCBmYWxzZSk7CiAgICAvLyAgICAgfSBlbHNlIHsKICAgIC8vICAgICAgIHRoaXMuJGVtaXQoJ2xvYWRpbmcnLCBmYWxzZSk7CiAgICAvLyAgICAgICB0aGlzLnNvY2lhbE1lZGlhLnB1c2goZGF0YSk7CiAgICAvLyAgICAgfQogICAgLy8gICB9KQogICAgLy8gICAuY2F0Y2goZXJyID0+IHsKICAgIC8vICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgLy8gICB9KQogICAgLy8gfQoKICAgIC8qKgogICAgICogUGFyYW0gYWx0ZXJhclBheW1lbnRzCiAgICAgKiBAcGFyYW0gIGFsdGVyYXJQYXltZW50cwogICAgICogZnVuY2FvIHF1ZSBzZWxlY2lvbmEgbyBtZWlvIGRlIHBhZ2FtZW50bywKICAgICAqIGFsdGVyYSBvIG1laW8gZGUgcGFnYW1lbnRvCiAgICAgKiBlIGVudmlhIG8gbWVpbyBkZSBwYWdhbWVudG8KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJhbHRlcmFyUGF5bWVudHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9hbHRlcmFyUGF5bWVudHMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBfd2luZG93JGV2ZW50MiwKICAgICAgICAgICAgX3RoaXM5ID0gdGhpczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIChfd2luZG93JGV2ZW50MiA9IHdpbmRvdy5ldmVudCkgPT09IG51bGwgfHwgX3dpbmRvdyRldmVudDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93aW5kb3ckZXZlbnQyLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdsb2FkaW5nJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXltZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChwYXltZW50Q2F0ZWdvcnkpIHsKICAgICAgICAgICAgICAgICAgcGF5bWVudENhdGVnb3J5Lm1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1ldGhvZC5hY3RpdmUpIHsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzOS5jaGVja2VkTmFtZXMucHVzaChtZXRob2QubmFtZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICB0aGlzLnVzZXJTZXJ2aWNlLmxpc3RVcGRhdGVQYWdhbWVudG9zKHRoaXMuY2hlY2tlZE5hbWVzKS50aGVuKGZ1bmN0aW9uIChwYXltZW50c0NoZWNrZWQpIHsKICAgICAgICAgICAgICAgICAgaWYgKCFwYXltZW50c0NoZWNrZWQub2spIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczkuc2hvd0Vycm9yTm90aWZpY2F0aW9uKCk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzOS4kZW1pdCgnbG9hZGluZycsIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczkuJGVtaXQoJ2xvYWRpbmcnLCBmYWxzZSk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzOS5jaGVja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBfdGhpczkuY2hlY2tlZE5hbWVzID0gW107CgogICAgICAgICAgICAgICAgICAgIF90aGlzOS5zaG93U3VjY2Vzc2Z1bGxOb3RpZmljYXRpb24oKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGFsdGVyYXJQYXltZW50cygpIHsKICAgICAgICByZXR1cm4gX2FsdGVyYXJQYXltZW50cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gYWx0ZXJhclBheW1lbnRzOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiY3BmVmFsaWRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNwZlZhbGlkYXRlKCkgewogICAgICBpZiAodGhpcy5kb2N1bWVudENwZiAmJiB0aGlzLmRvY3VtZW50Q3BmICE9PSBudWxsICYmIHRoaXMuZG9jdW1lbnRDcGYubGVuZ3RoID4gMCAmJiB0aGlzLmRvY3VtZW50Q3BmLmxlbmd0aCA8PSAxMSkgewogICAgICAgIHRoaXMuZG9jdW1lbnRDcGYgPSB0aGlzLmRvY3VtZW50Q3BmLnJlcGxhY2UoLyhcZHszfSkoXGR7M30pKFxkezN9KShcZHsyfSkvLCBmdW5jdGlvbiAocmVnZXgsIGFyZzEsIGFyZzIsIGFyZzMsIGFyZzQpIHsKICAgICAgICAgIHJldHVybiAiIi5jb25jYXQoYXJnMSwgIi4iKS5jb25jYXQoYXJnMiwgIi4iKS5jb25jYXQoYXJnMywgIi0iKS5jb25jYXQoYXJnNCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy5kb2N1bWVudENwZiAhPT0gbnVsbCkgewogICAgICAgIHRoaXMuZG9jdW1lbnRDcGYgPSB0aGlzLmRvY3VtZW50Q3BmLnJlcGxhY2UoLyhcZHsyfSkoXGR7M30pKFxkezN9KShcZHs0fSkoXGR7Mn0pLywgZnVuY3Rpb24gKHJlZ2V4LCBhcmcxLCBhcmcyLCBhcmczLCBhcmc0LCBhcmc1KSB7CiAgICAgICAgICByZXR1cm4gIiIuY29uY2F0KGFyZzEsICIuIikuY29uY2F0KGFyZzIsICIuIikuY29uY2F0KGFyZzMsICIvIikuY29uY2F0KGFyZzQsICItIikuY29uY2F0KGFyZzUpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY2VsdWxhclZhbGlkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjZWx1bGFyVmFsaWRhdGUoKSB7CiAgICAgIHRoaXMuY2VsdWxhciA9IHRoaXMuY2VsdWxhci5yZXBsYWNlKC8oXGR7Mn0pKFxkezV9KShcZHs0fSkvLCBmdW5jdGlvbiAocmVnZXgsIGFyZzEsIGFyZzIsIGFyZzMpIHsKICAgICAgICByZXR1cm4gIigiLmNvbmNhdChhcmcxLCAiKSAiKS5jb25jYXQoYXJnMiwgIiAtICIpLmNvbmNhdChhcmczKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNDYXRlZ29yeVZhbGlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0NhdGVnb3J5VmFsaWQoKSB7CiAgICAgIHRoaXMudmFsaWRDYXRlZ29yeSA9IHRoaXMuY2F0ZWdvcnkgPyB0aGlzLnJlZy50ZXN0KHRoaXMuY2F0ZWdvcnkpID8gdHJ1ZSA6IGZhbHNlIDogZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNBZGRyZXNzVmFsaWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQWRkcmVzc1ZhbGlkKCkgewogICAgICB0aGlzLnZhbGlkQWRkcmVzcyA9IHRoaXMuYWRkcmVzcyA9PT0gJycgPyB0aGlzLnJlZy50ZXN0KHRoaXMuYWRkcmVzcykgPyB0cnVlIDogZmFsc2UgOiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc1JlZ2lvblZhbGlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc1JlZ2lvblZhbGlkKCkgewogICAgICB0aGlzLnZhbGlkUmVnaW9uID0gdGhpcy5yZWdpb24gPT09ICcnID8gdGhpcy5yZWcudGVzdCh0aGlzLnJlZ2lvbikgPyB0cnVlIDogZmFsc2UgOiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0NlcFZhbGlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0NlcFZhbGlkKCkgewogICAgICB0aGlzLnZhbGlkQ2VwID0gdGhpcy5jZXAgPT09ICcnID8gdGhpcy5yZWcudGVzdCh0aGlzLmNlcCkgPyB0cnVlIDogZmFsc2UgOiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0JhaXJyb1ZhbGlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0JhaXJyb1ZhbGlkKCkgewogICAgICB0aGlzLnZhbGlkQmFpcnJvID0gdGhpcy5iYWlycm8gPT09ICcnID8gdGhpcy5yZWcudGVzdCh0aGlzLmJhaXJybykgPyB0cnVlIDogZmFsc2UgOiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0NpZGFkZVZhbGlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0NpZGFkZVZhbGlkKCkgewogICAgICB0aGlzLnZhbGlkQ2lkYWRlID0gdGhpcy5jaWRhZGUgPT09ICcnID8gdGhpcy5yZWcudGVzdCh0aGlzLmNpZGFkZSkgPyB0cnVlIDogZmFsc2UgOiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0xvZ3JhZG91cm9WYWxpZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNMb2dyYWRvdXJvVmFsaWQoKSB7CiAgICAgIHRoaXMudmFsaWRMb2dyYWRvdXJvID0gdGhpcy5sb2dyYWRvdXJvID09PSAnJyA/IHRoaXMucmVnLnRlc3QodGhpcy5sb2dyYWRvdXJvKSA/IHRydWUgOiBmYWxzZSA6IGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogIm1vdW50ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9tb3VudGVkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgc2VsbGVyT2JqZWN0LCB3aGVuQ2xvc2VkU2VsbGVyLCBnZXRPdXRPZlJhZGl1czsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGhpcy5hdXRvY29tcGxldGVJbml0KCk7CiAgICAgICAgICAgICAgICB0aGlzLmluaXRNYXAoKTsgLy8gdGhpcy5jb21ibygpOwoKICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW5zdGFncmFtQ29kZSgpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlclNlcnZpY2UuZ2V0U2VsbGVyU2hvd0FkZHJlc3MoKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgc2VsbGVyT2JqZWN0ID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dBZGRyZXNzQ2hlY2tlZCA9IHNlbGxlck9iamVjdC5zaG93X2FkZHJlc3M7CiAgICAgICAgICAgICAgICB0aGlzLnNob3dBZGRyZXNzID0gc2VsbGVyT2JqZWN0LnNob3dfYWRkcmVzczsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51c2VyU2VydmljZS5nZXRTZWxsZXJXaGVuQ2xvc2VkKCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICB3aGVuQ2xvc2VkU2VsbGVyID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICB0aGlzLndoZW5DbG9zZWQgPSB3aGVuQ2xvc2VkU2VsbGVyLmFjY2VwdHNfb3JkZXJzX3doZW5fY2xvc2VkOwogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVzZXJTZXJ2aWNlLmdldFNlbGxlck91dE9mUmFkaXVzKCk7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBnZXRPdXRPZlJhZGl1cyA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgdGhpcy5vdXRPZlJhZGl1cyA9IGdldE91dE9mUmFkaXVzLmFjY2VwdHNfZGlzdGFudF9vcmRlcnM7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgICAgIHJldHVybiBfbW91bnRlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gbW91bnRlZDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImluZm9BbGVydE5vRG9jdW1lbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9pbmZvQWxlcnROb0RvY3VtZW50ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5ID0gewogICAgICAgICAgICAgICAgICBpY29uOiByZXF1aXJlKCcuLy4uLy4uLy4uL2Fzc2V0cy9pbWFnZXMvaWNvbl9lcnJvci5wbmcnKSwKICAgICAgICAgICAgICAgICAgdGV4dDogIlxuICAgICAgICAgIDxzdHJvbmc+QVRFTlx4QzdceEMzTzogU3VhIGxvamEgblx4RTNvIGVzdFx4RTEgc2VuZG8gZXhpYmlkYSE8L3N0cm9uZz48YnIgLz5QYXJhIHZvY1x4RUEgZmljYXIgdmlzXHhFRHZlbCBhb3Mgc2V1cyBjbGllbnRlcywgXHhFOSBuZWNlc3NceEUxcmlvIHF1ZSBwcmVlbmNoYSB1bSBuXHhGQW1lcm8gZGUgZG9jdW1lbnRvIHZceEUxbGlkbyBkbyBzZXUgbmVnXHhGM2NpbyBvdSBkbyByZXNwb25zXHhFMXZlbCBsZWdhbC5cbiAgICAgICAgIiwKICAgICAgICAgICAgICAgICAgY29sb3I6ICcjZmZkMWM0JywKICAgICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlLAogICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICAgICAgICB0ZXh0X2FsaWduX2xlZnQ6IHRydWUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclNlcnZpY2UudmFsaWRhdGVUb2tlblNlbGxlcigpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0NS5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3BlcnRpbmhvJyk7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdsb2dnZWRVc2VyJyk7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCdsb2dpbicpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBpbmZvQWxlcnROb0RvY3VtZW50KCkgewogICAgICAgIHJldHVybiBfaW5mb0FsZXJ0Tm9Eb2N1bWVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaW5mb0FsZXJ0Tm9Eb2N1bWVudDsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImluZm9BbGVydE5vQ2F0ZWdvcnkiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9pbmZvQWxlcnROb0NhdGVnb3J5ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5ID0gewogICAgICAgICAgICAgICAgICBpY29uOiByZXF1aXJlKCcuLy4uLy4uLy4uL2Fzc2V0cy9pbWFnZXMvaWNvbl9lcnJvci5wbmcnKSwKICAgICAgICAgICAgICAgICAgdGV4dDogIlxuICAgICAgICAgIDxzdHJvbmc+QVRFTlx4QzdceEMzTzogU3VhIGxvamEgblx4RTNvIGVzdFx4RTEgc2VuZG8gZXhpYmlkYSE8L3N0cm9uZz48YnIgLz5QYXJhIHZvY1x4RUEgZmljYXIgdmlzXHhFRHZlbCBhb3Mgc2V1cyBjbGllbnRlcywgXHhFOSBuZWNlc3NceEUxcmlvIHF1ZSBwcmVlbmNoYSB1bWEgY2F0ZWdvcmlhLCB1bWEgc3ViY2F0ZWdvcmlhIGUgdW1hIGRlc2NyaVx4RTdceEUzbyBwYXJhIG8gc2V1IG5lZ1x4RjNjaW8uXG4gICAgICAgICIsCiAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZDFjNCcsCiAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgICAgICAgdGV4dF9hbGlnbl9sZWZ0OiB0cnVlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJTZXJ2aWNlLnZhbGlkYXRlVG9rZW5TZWxsZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDYuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdwZXJ0aW5obycpOwogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbG9nZ2VkVXNlcicpOwogICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnbG9naW4nKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gaW5mb0FsZXJ0Tm9DYXRlZ29yeSgpIHsKICAgICAgICByZXR1cm4gX2luZm9BbGVydE5vQ2F0ZWdvcnkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGluZm9BbGVydE5vQ2F0ZWdvcnk7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJpbmZvQWxlcnROb0FkcmVzcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2luZm9BbGVydE5vQWRyZXNzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICB2YXIgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5ID0gewogICAgICAgICAgICAgICAgICBpY29uOiByZXF1aXJlKCcuLy4uLy4uLy4uL2Fzc2V0cy9pbWFnZXMvaWNvbl9lcnJvci5wbmcnKSwKICAgICAgICAgICAgICAgICAgdGV4dDogIlxuICAgICAgICAgIDxzdHJvbmc+QVRFTlx4QzdceEMzTzogU3VhIGxvamEgblx4RTNvIGVzdFx4RTEgc2VuZG8gZXhpYmlkYSE8L3N0cm9uZz48YnIvPlBhcmEgdm9jXHhFQSBmaWNhciB2aXNceEVEdmVsIGFvcyBzZXVzIGNsaWVudGVzLCBceEU5IG5lY2Vzc1x4RTFyaW8gcXVlIHByZWVuY2hhIG8gZW5kZXJlXHhFN28gZG8gc2V1IG5lZ1x4RjNjaW8gZSBvIHJhaW8gZGUgYXRlbmRpbWVudG8uXG4gICAgICAgICIsCiAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZDFjNCcsCiAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgICAgICAgdGV4dF9hbGlnbl9sZWZ0OiB0cnVlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJTZXJ2aWNlLnZhbGlkYXRlVG9rZW5TZWxsZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDcuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdwZXJ0aW5obycpOwogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbG9nZ2VkVXNlcicpOwogICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnbG9naW4nKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gaW5mb0FsZXJ0Tm9BZHJlc3MoKSB7CiAgICAgICAgcmV0dXJuIF9pbmZvQWxlcnROb0FkcmVzcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaW5mb0FsZXJ0Tm9BZHJlc3M7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJpbml0TWFwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0TWFwKCkgewogICAgICB2YXIgbG9nZ2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvZ2dlZFVzZXInKTsKICAgICAgdGhpcy5sb2dnZWRVc2VyID0gSlNPTi5wYXJzZShsb2dnZWQpOwoKICAgICAgaWYgKHRoaXMubG9nZ2VkVXNlci5hZGRyZXNzKSB7CiAgICAgICAgdGhpcy5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwgewogICAgICAgICAgem9vbTogMTMsCiAgICAgICAgICBjZW50ZXI6IHsKICAgICAgICAgICAgbGF0OiBwYXJzZUZsb2F0KHRoaXMubG9nZ2VkVXNlci5hZGRyZXNzLmxhdCksCiAgICAgICAgICAgIGxuZzogcGFyc2VGbG9hdCh0aGlzLmxvZ2dlZFVzZXIuYWRkcmVzcy5sbmcpCiAgICAgICAgICB9LAogICAgICAgICAgcGFuQ29udHJvbDogdHJ1ZSwKICAgICAgICAgIHpvb21Db250cm9sOiB0cnVlLAogICAgICAgICAgbWFwVHlwZUNvbnRyb2w6IHRydWUKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImF1dG9jb21wbGV0ZUluaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGF1dG9jb21wbGV0ZUluaXQoKSB7CiAgICAgIHZhciAkY3RybCA9IHRoaXM7CiAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgIGNvbXBvbmVudFJlc3RyaWN0aW9uczogewogICAgICAgICAgY291bnRyeTogImJyIgogICAgICAgIH0sCiAgICAgICAgbGFuZ3VhZ2U6IFsicHQtQlIiXSwKICAgICAgICBmaWVsZHM6IFsiYWRkcmVzc19jb21wb25lbnRzIiwgImdlb21ldHJ5IiwgImZvcm1hdHRlZF9hZGRyZXNzIl0KICAgICAgfTsKICAgICAgLyoqCiAgICAgICAqIGlucHV0IGF1dG8gY29tcGxldGUgYWRkcmVzcwogICAgICAgKi8KCiAgICAgIHRoaXMuYXV0b0NvbXBsZXRlQWRkcmVzcyA9IG5ldyBnb29nbGUubWFwcy5wbGFjZXMuQXV0b2NvbXBsZXRlKHRoaXMuJHJlZnMuYXV0b0NvbXBsZXRlQWRkcmVzcywgb3B0aW9ucyk7CiAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMuYXV0b0NvbXBsZXRlQWRkcmVzcywgInBsYWNlX2NoYW5nZWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgJGN0cmwuZ29vZ2xlQXBpUmV0dXJuID0gJGN0cmwuYXV0b0NvbXBsZXRlQWRkcmVzcy5nZXRQbGFjZSgpOwogICAgICAgICRjdHJsLm51bWVybyA9ICRjdHJsLmdvb2dsZUFwaVJldHVybi5hZGRyZXNzX2NvbXBvbmVudHMuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICByZXR1cm4geC50eXBlc1swXSA9PT0gJ3N0cmVldF9udW1iZXInOwogICAgICAgIH0pLmxlbmd0aCA+IDAgPyAkY3RybC5nb29nbGVBcGlSZXR1cm4uYWRkcmVzc19jb21wb25lbnRzLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgICAgcmV0dXJuIHgudHlwZXNbMF0gPT09ICdzdHJlZXRfbnVtYmVyJzsKICAgICAgICB9KVswXS5sb25nX25hbWUgOiAnJzsKICAgICAgICAkY3RybC5jZXAgPSAkY3RybC5nb29nbGVBcGlSZXR1cm4uYWRkcmVzc19jb21wb25lbnRzLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgICAgcmV0dXJuIHgudHlwZXNbMF0gPT09ICdwb3N0YWxfY29kZSc7CiAgICAgICAgfSkubGVuZ3RoID4gMCA/ICRjdHJsLmdvb2dsZUFwaVJldHVybi5hZGRyZXNzX2NvbXBvbmVudHMuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICByZXR1cm4geC50eXBlc1swXSA9PT0gJ3Bvc3RhbF9jb2RlJzsKICAgICAgICB9KVswXS5sb25nX25hbWUgOiAnJzsKICAgICAgICAkY3RybC5mb2N1c2VkLmVkaXRDZXAgPSB0cnVlOwogICAgICAgICRjdHJsLmxvZ3JhZG91cm8gPSAkY3RybC5nb29nbGVBcGlSZXR1cm4uYWRkcmVzc19jb21wb25lbnRzLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgICAgcmV0dXJuIHgudHlwZXNbMF0gPT09ICdyb3V0ZSc7CiAgICAgICAgfSkubGVuZ3RoID4gMCA/ICRjdHJsLmdvb2dsZUFwaVJldHVybi5hZGRyZXNzX2NvbXBvbmVudHMuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICByZXR1cm4geC50eXBlc1swXSA9PT0gJ3JvdXRlJzsKICAgICAgICB9KVswXS5sb25nX25hbWUgOiAnJzsKICAgICAgICAkY3RybC5jaWRhZGUgPSAkY3RybC5nb29nbGVBcGlSZXR1cm4uYWRkcmVzc19jb21wb25lbnRzLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgICAgcmV0dXJuIHgudHlwZXNbMF0gPT09ICdhZG1pbmlzdHJhdGl2ZV9hcmVhX2xldmVsXzInOwogICAgICAgIH0pLmxlbmd0aCA+IDAgPyAkY3RybC5nb29nbGVBcGlSZXR1cm4uYWRkcmVzc19jb21wb25lbnRzLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgICAgcmV0dXJuIHgudHlwZXNbMF0gPT09ICdhZG1pbmlzdHJhdGl2ZV9hcmVhX2xldmVsXzInOwogICAgICAgIH0pWzBdLmxvbmdfbmFtZSA6ICcnOwogICAgICAgICRjdHJsLmJhaXJybyA9ICRjdHJsLmdvb2dsZUFwaVJldHVybi5hZGRyZXNzX2NvbXBvbmVudHMuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICByZXR1cm4geC50eXBlc1swXSA9PT0gJ3N1YmxvY2FsaXR5X2xldmVsXzEnOwogICAgICAgIH0pLmxlbmd0aCA+IDAgPyAkY3RybC5nb29nbGVBcGlSZXR1cm4uYWRkcmVzc19jb21wb25lbnRzLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgICAgcmV0dXJuIHgudHlwZXNbMF0gPT09ICdzdWJsb2NhbGl0eV9sZXZlbF8xJzsKICAgICAgICB9KVswXS5sb25nX25hbWUgOiAnJzsKICAgICAgICAkY3RybC5hZGRyZXNzID0gJGN0cmwuZ29vZ2xlQXBpUmV0dXJuLmZvcm1hdHRlZF9hZGRyZXNzOwogICAgICAgIHZhciBsb2NhdGlvbiA9IHsKICAgICAgICAgIGxhdDogJGN0cmwuZ29vZ2xlQXBpUmV0dXJuLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCgpLAogICAgICAgICAgbG5nOiAkY3RybC5nb29nbGVBcGlSZXR1cm4uZ2VvbWV0cnkubG9jYXRpb24ubG5nKCkKICAgICAgICB9OwogICAgICAgICRjdHJsLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7CiAgICAgICAgICB6b29tOiAxMywKICAgICAgICAgIGNlbnRlcjogbG9jYXRpb24sCiAgICAgICAgICBwYW5Db250cm9sOiB0cnVlLAogICAgICAgICAgem9vbUNvbnRyb2w6IHRydWUsCiAgICAgICAgICBtYXBUeXBlQ29udHJvbDogdHJ1ZSwKICAgICAgICAgIHNjYWxlQ29udHJvbDogZmFsc2UsCiAgICAgICAgICBzdHJlZXRWaWV3Q29udHJvbDogZmFsc2UsCiAgICAgICAgICBvdmVydmlld01hcENvbnRyb2w6IHRydWUsCiAgICAgICAgICByb3RhdGVDb250cm9sOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIG5ldyBnb29nbGUubWFwcy5NYXJrZXIoewogICAgICAgICAgcG9zaXRpb246IGxvY2F0aW9uLAogICAgICAgICAgY2VudGVyOiBsb2NhdGlvbiwKICAgICAgICAgIG1hcDogJGN0cmwubWFwLAogICAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZSwKICAgICAgICAgIGljb246IHsKICAgICAgICAgICAgdXJsOiByZXF1aXJlKCcuLi8uLi8uLi9hc3NldHMvaW1hZ2VzL2ljb24tcGxhY2UucG5nJyksCiAgICAgICAgICAgIHNpemU6IG5ldyBnb29nbGUubWFwcy5TaXplKDI4LCA0MCksCiAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLAogICAgICAgICAgICBhbmNob3I6IG5ldyBnb29nbGUubWFwcy5Qb2ludCgxOCwgMTgpLAogICAgICAgICAgICBzY2FsZWRTaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgyOCwgNDApCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgJGN0cmwubGF0ID0gbG9jYXRpb24ubGF0OwogICAgICAgICRjdHJsLmxuZyA9IGxvY2F0aW9uLmxuZzsKICAgICAgICAkY3RybC5wbG90Q2lyY2xlKGxvY2F0aW9uLmxhdCwgbG9jYXRpb24ubG5nKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicGxvdENpcmNsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGxvdENpcmNsZShsYXQsIGxuZykgewogICAgICB0aGlzLnJlbW92ZUFsbGNpcmNsZXMoKTsKICAgICAgdmFyIGNpcmN1bG8gPSBuZXcgZ29vZ2xlLm1hcHMuQ2lyY2xlKHsKICAgICAgICBtYXA6IHRoaXMubWFwLAogICAgICAgIGNlbnRlcjogbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhsYXQsIGxuZyksCiAgICAgICAgcmFkaXVzOiB0aGlzLnJhbmdlVmFsdWUgKiAxMDAwLAogICAgICAgIHN0cm9rZUNvbG9yOiAnJHNlY29uZGFyeScsCiAgICAgICAgc3Ryb2tlT3BhY2l0eTogMC44LAogICAgICAgIHN0cm9rZVdlaWdodDogMSwKICAgICAgICBmaWxsQ29sb3I6ICckc2Vjb25kYXJ5JywKICAgICAgICBmaWxsT3BhY2l0eTogMC4zNQogICAgICB9KTsKICAgICAgdGhpcy5jaXJjbGVzLnB1c2goY2lyY3Vsbyk7CiAgICAgIHZhciBib3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKCk7CiAgICAgIGJvdW5kcy51bmlvbihjaXJjdWxvLmdldEJvdW5kcygpKTsKICAgICAgdGhpcy5tYXAuZml0Qm91bmRzKGJvdW5kcywgMSk7CiAgICAgIHRoaXMubWFwLnNldENlbnRlcih7CiAgICAgICAgbGF0OiBsYXQsCiAgICAgICAgbG5nOiBsbmcKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2VvY29kZUFkZHJlc3MiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdlb2NvZGVBZGRyZXNzKGFkZHJlc3MpIHsKICAgICAgdmFyICRjdHJsID0gdGhpczsKICAgICAgdmFyIGdlb2NvZGVyID0gbmV3IGdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7CiAgICAgIGdlb2NvZGVyLmdlb2NvZGUoewogICAgICAgIGFkZHJlc3M6IGFkZHJlc3MKICAgICAgfSwgZnVuY3Rpb24gKHJlc3VsdHMsIHN0YXR1cykgewogICAgICAgIGlmIChzdGF0dXMgPT09ICdPSycpIHsKICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHsKICAgICAgICAgICAgbGF0OiByZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCgpLAogICAgICAgICAgICBsbmc6IHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24ubG5nKCkKICAgICAgICAgIH07CiAgICAgICAgICAkY3RybC5sYXQgPSByZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCgpOwogICAgICAgICAgJGN0cmwubG5nID0gcmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKTsKICAgICAgICAgICRjdHJsLm1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7CiAgICAgICAgICAgIHpvb206IDEzLAogICAgICAgICAgICBjZW50ZXI6IGxvY2F0aW9uLAogICAgICAgICAgICBwYW5Db250cm9sOiBmYWxzZSwKICAgICAgICAgICAgem9vbUNvbnRyb2w6IGZhbHNlLAogICAgICAgICAgICBtYXBUeXBlQ29udHJvbDogdHJ1ZSwKICAgICAgICAgICAgc2NhbGVDb250cm9sOiBmYWxzZSwKICAgICAgICAgICAgc3RyZWV0Vmlld0NvbnRyb2w6IGZhbHNlLAogICAgICAgICAgICBvdmVydmlld01hcENvbnRyb2w6IGZhbHNlLAogICAgICAgICAgICByb3RhdGVDb250cm9sOiBmYWxzZQogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7CiAgICAgICAgICAgIHBvc2l0aW9uOiBsb2NhdGlvbiwKICAgICAgICAgICAgY2VudGVyOiBsb2NhdGlvbiwKICAgICAgICAgICAgbWFwOiAkY3RybC5tYXAsCiAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2UsCiAgICAgICAgICAgIGljb246IHsKICAgICAgICAgICAgICB1cmw6IHJlcXVpcmUoJy4uLy4uLy4uL2Fzc2V0cy9pbWFnZXMvaWNvbi1wbGFjZS5wbmcnKSwKICAgICAgICAgICAgICBzaXplOiBuZXcgZ29vZ2xlLm1hcHMuU2l6ZSgyOCwgNDApLAogICAgICAgICAgICAgIG9yaWdpbjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDAsIDApLAogICAgICAgICAgICAgIGFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDE4LCAxOCksCiAgICAgICAgICAgICAgc2NhbGVkU2l6ZTogbmV3IGdvb2dsZS5tYXBzLlNpemUoMjgsIDQwKQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgICRjdHJsLnBsb3RDaXJjbGUocmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbi5sYXQoKSwgcmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZW1vdmVBbGxjaXJjbGVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVBbGxjaXJjbGVzKCkgewogICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6Zm9yaW4KICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLmNpcmNsZXMpIHsKICAgICAgICB0aGlzLmNpcmNsZXNbaV0uc2V0TWFwKG51bGwpOwogICAgICB9CgogICAgICB0aGlzLmNpcmNsZXMgPSBbXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRSZWdpb25zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRSZWdpb25zKGRhdGEpIHsKICAgICAgdmFyIF90aGlzJHJlZ2lvbnM7CgogICAgICAoX3RoaXMkcmVnaW9ucyA9IHRoaXMucmVnaW9ucykgPT09IG51bGwgfHwgX3RoaXMkcmVnaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcmVnaW9ucy5wdXNoKGRhdGEpOwogICAgICB0aGlzLnJlZ2lvbiA9ICcnOwogICAgfQogIH0sIHsKICAgIGtleTogImZvcm1DYW5jZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZvcm1DYW5jZWwoKSB7CiAgICAgIHZhciBfd2luZG93JGV2ZW50MzsKCiAgICAgIChfd2luZG93JGV2ZW50MyA9IHdpbmRvdy5ldmVudCkgPT09IG51bGwgfHwgX3dpbmRvdyRldmVudDMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93aW5kb3ckZXZlbnQzLnByZXZlbnREZWZhdWx0KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmlsdGVyQ2F0ZWdvcmllcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmlsdGVyQ2F0ZWdvcmllcygpIHsKICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cCh0aGlzLmNhdGVnb3J5LCAnZ2knKTsKICAgICAgcmV0dXJuIHRoaXMuY29tYm9DYXRlZ29yaWVzLmZpbHRlcihmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5zZWFyY2gocmUpID4gLTE7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFyU2VsZWN0ZWRDYXRlZ29yeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJTZWxlY3RlZENhdGVnb3J5KCkgewogICAgICB0aGlzLmZpbHRlckNhdGVnb3JpZXMoKS5tYXAoZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBkYXRhID0gJyc7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNldENhdGVnb3J5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDYXRlZ29yeShjYXRlZ29yeSkgewogICAgICB0aGlzLmNsZWFyU2VsZWN0ZWRDYXRlZ29yeSgpOwogICAgICB0aGlzLmF1dG9Db21wbGV0ZUNhdGVnb3J5T3BlbiA9IGZhbHNlOwogICAgICB0aGlzLmZvY3VzZWQuZWRpdENhdGVnb3J5ID0gdHJ1ZTsKCiAgICAgIGlmICh0aGlzLmNhdGVnb3J5KSB7CiAgICAgICAgdGhpcy5zdWJjYXRlZ29yeSA9ICcnOwogICAgICAgIHRoaXMudmFsaWRDYXRlZ29yeSA9IHRydWU7CiAgICAgICAgdGhpcy5jbGVhclN1YmNhdGVnb3J5KCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRTaXplIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTaXplKHNlbGVjdGVkKSB7CiAgICAgIHZhciBzZWxlY3RlZF9zZWxsZXIgPSBzZWxlY3RlZC50YXJnZXQ7CiAgICAgIHRoaXMuc2l6ZSA9IHNlbGVjdGVkX3NlbGxlci52YWx1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDaG9pY2VzU2VsbGVyU2l6ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q2hvaWNlc1NlbGxlclNpemUoKSB7CiAgICAgIHZhciBoZWFkZXJzID0gewogICAgICAgICdBdXRob3JpemF0aW9uJzogZW52aXJvbm1lbnQuc2V0QXV0aG9yaXphdGlvblRva2VuKCksCiAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyc6ICdDb250ZW50LVR5cGUnCiAgICAgIH07CiAgICAgIHZhciByZXF1ZXN0T3B0aW9ucyA9IHsKICAgICAgICBoZWFkZXJzOiBoZWFkZXJzCiAgICAgIH07IC8vIGNvbnNvbGUubG9nKCJmZXRjaGhoaGggcmV0b3JubyIsIGZldGNoKGAke2Vudmlyb25tZW50LnNldEFQSSgpfS9jaG9pY2VzL3NlbGxlcnNpemUvYCwgcmVxdWVzdE9wdGlvbnMpKQoKICAgICAgcmV0dXJuIGZldGNoKCIiLmNvbmNhdChlbnZpcm9ubWVudC5zZXRBUEkoKSwgIi9jaG9pY2VzL3NlbGxlcnNpemUvIiksIHJlcXVlc3RPcHRpb25zKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwcm9jZXNzQ2hvaWNlc1NlbGxlclNpemUiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9wcm9jZXNzQ2hvaWNlc1NlbGxlclNpemUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgICAgdmFyIHJlc3BvbnNlLCBkYXRhOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDaG9pY2VzU2VsbGVyU2l6ZSgpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ4LnQwID0gcmVzcG9uc2Uuc3RhdHVzOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSBfY29udGV4dDgudDAgPT09IDIwMCA/IDYgOiBfY29udGV4dDgudDAgPT09IDIwMSA/IDYgOiBfY29udGV4dDgudDAgPT09IDIwMiA/IDYgOiAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBkYXRhID0gX2NvbnRleHQ4LnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhLm1hcChmdW5jdGlvbiAoc2VsbGVyKSB7CiAgICAgICAgICAgICAgICAgIGlmIChfdGhpczEwLnNpemVzKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMxMC5zaXplcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgIGlkOiBzZWxsZXJbMF0sCiAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIiIuY29uY2F0KHNlbGxlclsxXSksCiAgICAgICAgICAgICAgICAgICAgICBzaWdsYTogIiIuY29uY2F0KHNlbGxlclswXSksCiAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogZmFsc2UKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgiYnJlYWsiLCAxMSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTgsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBwcm9jZXNzQ2hvaWNlc1NlbGxlclNpemUoKSB7CiAgICAgICAgcmV0dXJuIF9wcm9jZXNzQ2hvaWNlc1NlbGxlclNpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHByb2Nlc3NDaG9pY2VzU2VsbGVyU2l6ZTsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImRlbGV0ZVJlZ2lvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVsZXRlUmVnaW9uKGRhdGEpIHsKICAgICAgdGhpcy5yZWdpb25zID0gZGF0YTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0NvbXBsZW1lbnRvVmFsaWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzQ29tcGxlbWVudG9WYWxpZCgpIHsKICAgICAgdGhpcy52YWxpZENvbXBsZW1lbnRvID0gdGhpcy5jb21wbGVtZW50byA9PT0gJycgPyBmYWxzZSA6IHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNEZXNjcmljYW9WYWxpZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNEZXNjcmljYW9WYWxpZCgpIHsKICAgICAgdGhpcy52YWxpZERlc2NyaWNhbyA9IHRoaXMuZGVzY3JpY2FvID09PSAnJyA/IGZhbHNlIDogdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc051bWVyb1ZhbGlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc051bWVyb1ZhbGlkKCkgewogICAgICB0aGlzLnZhbGlkTnVtZXJvID0gdGhpcy5udW1lcm8gPT09ICcnID8gZmFsc2UgOiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImlzQWJvdXRWYWxpZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNBYm91dFZhbGlkKCkgewogICAgICB0aGlzLnZhbGlkQWJvdXQgPSB0aGlzLmFib3V0ID09PSAnJyA/IGZhbHNlIDogdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzaG93U3VjY2Vzc2Z1bGxOb3RpZmljYXRpb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob3dTdWNjZXNzZnVsbE5vdGlmaWNhdGlvbigpIHsKICAgICAgdGhpcy5lZGl0UHJvZmlsZU1peHBhbmVsKCk7CiAgICAgIHRoaXMuJGZpcmUoewogICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICB0aXRsZTogJ0FsdGVyYcOnw7VlcyBzYWx2YXMgY29tIHN1Y2Vzc28nLAogICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgIHBvc2l0aW9uOiAndG9wJywKICAgICAgICBzaG93Q2xvc2VCdXR0b246IHRydWUsCiAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgIHRpbWVyOiAzMDAwCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInNob3dFcnJvck5vdGlmaWNhdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3Nob3dFcnJvck5vdGlmaWNhdGlvbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkodGV4dCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGhpcy4kZmlyZSh7CiAgICAgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICAgICAgICAgIHRpdGxlOiB0ZXh0IHx8ICdFcnJvIGFvIGVmZXR1YXIgYWx0ZXJhw6fDo28hJywKICAgICAgICAgICAgICAgICAgc2hvd0Nsb3NlQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHRpbWVyOiA0MDAwLAogICAgICAgICAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3AnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyU2VydmljZS52YWxpZGF0ZVRva2VuU2VsbGVyKCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ5LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgncGVydGluaG8nKTsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2xvZ2dlZFVzZXInKTsKICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJ2xvZ2luJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHNob3dFcnJvck5vdGlmaWNhdGlvbihfeDIpIHsKICAgICAgICByZXR1cm4gX3Nob3dFcnJvck5vdGlmaWNhdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc2hvd0Vycm9yTm90aWZpY2F0aW9uOwogICAgfSgpCiAgfSwgewogICAga2V5OiAic2hvd05vdGlmaWNhdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd05vdGlmaWNhdGlvbihkYXRhKSB7CiAgICAgIHRoaXMubm90aWZ5ID0gZGF0YTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRSYW5nZVZhbHVlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSYW5nZVZhbHVlKCkgewogICAgICB2YXIgcmFuZ2UgPSB0aGlzLiRyZWZzLnNsaWRlcjsKICAgICAgdGhpcy5wbG90Q2lyY2xlKHRoaXMubGF0LCB0aGlzLmxuZyk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaW5mb0FsZXJ0VmVuZGVkb3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9pbmZvQWxlcnRWZW5kZWRvciA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEwJChfY29udGV4dDEwKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTAucHJldiA9IF9jb250ZXh0MTAubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5ID0gewogICAgICAgICAgICAgICAgICBpY29uOiByZXF1aXJlKCcuLy4uLy4uLy4uL2Fzc2V0cy9pbWFnZXMvaWNvbl9lcnJvci5wbmcnKSwKICAgICAgICAgICAgICAgICAgdGV4dDogIlxuICAgICAgICAgIDxzdHJvbmc+QXRlblx4RTdceEUzbyE8L3N0cm9uZz48YnIgLz5PcyBjYW1wb3MgXCJOb21lXCIsIFwiRS1tYWlsXCIsIFwiVGVsZWZvbmVcIiBlIFwiRG9jdW1lbnRvXCIgblx4RTNvIHNceEUzbyBlZGl0XHhFMXZlaXMuIENhc28gc2VqYSBuZWNlc3NceEUxcmlhIGFsdGVyYVx4RTdceEUzbywgcG9yIGdlbnRpbGV6YSBlbnZpYXIgZS1tYWlsIHBhcmEgPGEgc3R5bGU9XCJjb2xvcjogYmxhY2s7IHRleHQtZGVjb3JhdGlvbjp1bmRlcmxpbmU7XCIgaHJlZj1cIm1haWx0bzpjb250YXRvQHBlcnRpbmhvZGVjYXNhLmNvbS5iclwiIHRhcmdldD1cIl9ibGFua1wiPmNvbnRhdG9AcGVydGluaG9kZWNhc2EuY29tLmJyLjwvYT5cbiAgICAgICAgIiwKICAgICAgICAgICAgICAgICAgY29sb3I6ICcjYzNlNGU3JywKICAgICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlLAogICAgICAgICAgICAgICAgICB0eXBlOiAnZXJyb3InCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyU2VydmljZS52YWxpZGF0ZVRva2VuU2VsbGVyKCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQxMC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHsKICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3BlcnRpbmhvJyk7CiAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdsb2dnZWRVc2VyJyk7CiAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCdsb2dpbicpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGluZm9BbGVydFZlbmRlZG9yKCkgewogICAgICAgIHJldHVybiBfaW5mb0FsZXJ0VmVuZGVkb3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGluZm9BbGVydFZlbmRlZG9yOwogICAgfSgpCiAgfSwgewogICAga2V5OiAidXBsb2FkTG9nbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBsb2FkTG9nbygpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgdGhpcy4kZW1pdCgnbG9hZGluZycsIHRydWUpOwogICAgICB0aGlzLnVzZXJTZXJ2aWNlLnVwbG9hZGxvZ28odGhpcy5sb2dnZWRVc2VyLnNsdWcsIHRoaXMuZGVzdGluYXRpb24pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBpZiAoIWRhdGEub2spIHsKICAgICAgICAgIF90aGlzMTEuc2hvd0Vycm9yTm90aWZpY2F0aW9uKCk7CgogICAgICAgICAgX3RoaXMxMS4kZW1pdCgnbG9hZGluZycsIGZhbHNlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMxMS5zaG93U3VjY2Vzc2Z1bGxOb3RpZmljYXRpb24oKTsKCiAgICAgICAgICBfdGhpczExLmVkaXRQcm9maWxlTWl4cGFuZWwoKTsKCiAgICAgICAgICBfdGhpczExLiRlbWl0KCdsb2FkaW5nJywgZmFsc2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0SW1hZ2VUb0Nyb3AiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEltYWdlVG9Dcm9wKGV2ZW50KSB7CiAgICAgIGlmIChldmVudC50YXJnZXQuZmlsZXMubGVuZ3RoICYmIGV2ZW50LnRhcmdldC5maWxlc1swXS5zaXplIC8gMTAwMDAwMCA8IDEwKSB7CiAgICAgICAgdmFyIGltYWdlRmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsgLy8gY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICAvLyByZWFkZXIucmVhZEFzRGF0YVVSTChpbWFnZUZpbGUpOwogICAgICAgIC8vIHJlYWRlci5vbmxvYWQgPSAoZTogYW55KSA9PiB7CiAgICAgICAgLy8gICAgIHRoaXMuaW1hZ2VUb0Nyb3AgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgLy8gICAgIHRoaXMudXBkYXRlTG9nbygpOwogICAgICAgIC8vIH07CgogICAgICAgIHRoaXMuaW1hZ2VUb0Nyb3AgPSBpbWFnZUZpbGU7CiAgICAgICAgdGhpcy51cGRhdGVMb2dvKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93RXJyb3JOb3RpZmljYXRpb24oKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImRlc3Ryb3lDcm9wcGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95Q3JvcHBlcigpIHsKICAgICAgdGhpcy5jcm9wcGVyLmRlc3Ryb3koKTsKICAgICAgdGhpcy5zaG93Q3JvcHBlciA9IGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogInNhdmVDcm9wcGVkSW1hZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVDcm9wcGVkSW1hZ2UoKSB7CiAgICAgIHRoaXMuZGVzdHJveUNyb3BwZXIoKTsKICAgICAgdGhpcy51cGxvYWRMb2dvKCk7CiAgICAgIHRoaXMuc2hvd0Nyb3BwZXIgPSBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVMb2dvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdXBkYXRlTG9nbyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKCkgewogICAgICAgIHZhciBfdGhpczEyID0gdGhpczsKCiAgICAgICAgdmFyIGNvbXByZXNzb3I7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdsb2FkaW5nJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICBjb21wcmVzc29yID0gbmV3IENvbXByZXNzb3IodGhpcy5pbWFnZVRvQ3JvcCwgewogICAgICAgICAgICAgICAgICBxdWFsaXR5OiAwLjUsCiAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMjUwLAogICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEyNTAsCiAgICAgICAgICAgICAgICAgIGNvbnZlcnRTaXplOiAwLAogICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKGltYWdlQ29tcHJlc3NlZCkgewogICAgICAgICAgICAgICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VDb21wcmVzc2VkLnNpemUgLyAxMDAwMDAwIDwgNikgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMi5pbWFnZVRvQ3JvcCA9IGltYWdlQ29tcHJlc3NlZDsKICAgICAgICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGltYWdlQ29tcHJlc3NlZCk7CgogICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIuaW1hZ2VUb0Nyb3AgPSBlLnRhcmdldC5yZXN1bHQ7CgogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczEyLiRlbWl0KCdsb2FkaW5nJywgZmFsc2UpOwoKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMi5kZXN0aW5hdGlvbiA9IGUudGFyZ2V0LnJlc3VsdDsKCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTIuY3JvcEluaXQoKTsKICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJSZWR1emEgbyB0YW1hbmhvIGRlIGltYWdlbSBlIHRlbnRlIG5vdmFtZW50ZS4iKTsKCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczEyLiRlbWl0KCdsb2FkaW5nJywgZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIGVycm9yKGVycikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBjb21wcmltaW5kbyBpbWFnZW0iLCBlcnIubWVzc2FnZSk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzMTIuJGVtaXQoJ2xvYWRpbmcnLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZUxvZ28oKSB7CiAgICAgICAgcmV0dXJuIF91cGRhdGVMb2dvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB1cGRhdGVMb2dvOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiY3JvcEluaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyb3BJbml0KCkgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICB0aGlzLmltYWdlID0gdGhpcy4kcmVmcy5pbWFnZTsKCiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5zaG93Q3JvcHBlciA9IHRydWU7CiAgICAgICAgdGhpcy5jcm9wcGVyID0gbmV3IENyb3BwZXIodGhpcy5pbWFnZSwgewogICAgICAgICAgZ3VpZGVzOiB0cnVlLAogICAgICAgICAgem9vbWFibGU6IHRydWUsCiAgICAgICAgICBkcmFnTW9kZTogJ21vdmUnLAogICAgICAgICAgc2NhbGFibGU6IHRydWUsCiAgICAgICAgICBjZW50ZXI6IHRydWUsCiAgICAgICAgICBhdXRvQ3JvcEFyZWE6IDAuNjUsCiAgICAgICAgICByZXNwb25zaXZlOiB0cnVlLAogICAgICAgICAgcmVzdG9yZTogZmFsc2UsCiAgICAgICAgICBjcm9wQm94TW92YWJsZTogZmFsc2UsCiAgICAgICAgICBjcm9wQm94UmVzaXphYmxlOiBmYWxzZSwKICAgICAgICAgIHdoZWVsWm9vbVJhdGlvOiAwLjEsCiAgICAgICAgICBhc3BlY3RSYXRpbzogMSAvIDEsCiAgICAgICAgICBpbml0aWFsQXNwZWN0UmF0aW86IDEgLyAxLAogICAgICAgICAgbW9kYWw6IHRydWUsCiAgICAgICAgICB6b29tT25XaGVlbDogZmFsc2UsCiAgICAgICAgICByZWFkeTogZnVuY3Rpb24gcmVhZHkoX3JlYWR5KSB7CiAgICAgICAgICAgIHZhciBjYW52YXMgPSBfdGhpczEzLmNyb3BwZXIuZ2V0Q3JvcHBlZENhbnZhcyh7CiAgICAgICAgICAgICAgaW1hZ2VTbW9vdGhpbmdRdWFsaXR5OiAnaGlnaCcsCiAgICAgICAgICAgICAgbWF4V2lkdGg6IDQwMCwKICAgICAgICAgICAgICBtYXhIZWlnaHQ6IDQwMAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzMTMuZGVzdGluYXRpb24gPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTsKICAgICAgICAgICAgX3RoaXMxMy5sb2dvSW5wdXQgPSBfdGhpczEzLmRlc3RpbmF0aW9uOwogICAgICAgICAgfSwKICAgICAgICAgIGNyb3A6IGZ1bmN0aW9uIGNyb3AoKSB7CiAgICAgICAgICAgIHZhciBjYW52YXMgPSBfdGhpczEzLmNyb3BwZXIuZ2V0Q3JvcHBlZENhbnZhcyh7CiAgICAgICAgICAgICAgaW1hZ2VTbW9vdGhpbmdRdWFsaXR5OiAnaGlnaCcsCiAgICAgICAgICAgICAgbWF4V2lkdGg6IDQwMCwKICAgICAgICAgICAgICBtYXhIZWlnaHQ6IDQwMAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzMTMuZGVzdGluYXRpb24gPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTsKICAgICAgICAgICAgX3RoaXMxMy5sb2dvSW5wdXQgPSBfdGhpczEzLmRlc3RpbmF0aW9uOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JvcHBlclpvb20iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyb3BwZXJab29tKHZhbHVlKSB7CiAgICAgIHRoaXMuY3JvcHBlci56b29tKHZhbHVlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcm9wcGVyUm90YXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcm9wcGVyUm90YXRlKHZhbHVlKSB7CiAgICAgIHRoaXMuY3JvcHBlci5yb3RhdGUodmFsdWUpOwogICAgfQogIH0sIHsKICAgIGtleTogInZlcmlmaWNhciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmVyaWZpY2FyKHR5cGUpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgaWYgKHR5cGUgPT09ICdmYWNlYm9vaycpIHsKICAgICAgICB2YXIgcmVxdWVzdCA9IHJlcXVpcmUoJ3JlcXVlc3QnKTsKCiAgICAgICAgcmVxdWVzdC5nZXQoewogICAgICAgICAgZW5jb2Rpbmc6ICd1dGYtOCcsCiAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgdXJpOiAiaHR0cDovL2dyYXBoLmZhY2Vib29rLmNvbS8iLmNvbmNhdCh0aGlzLmZhY2Vib29rKSwKICAgICAgICAgIGZvbGxvd1JlZGlyZWN0OiBmYWxzZQogICAgICAgIH0sIGZ1bmN0aW9uIChlcnIsIHJlcywgYm9keSkgewogICAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdib2R5JywgYm9keSk7CiAgICAgICAgfSk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgYm9keSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdib2R5Jyk7CiAgICAgICAgICBfdGhpczE0LnRlc3RlID0gSlNPTi5wYXJzZShib2R5KTsKCiAgICAgICAgICBpZiAoX3RoaXMxNC50ZXN0ZS5lcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdyZXF1ZXN0ZWQgZG8gbm90IGV4aXN0JykpIHsKICAgICAgICAgICAgX3RoaXMxNC5mYWNlYm9va1VzZXIgPSAnVmVyaWZpcXVlIHNldSB1c3XDoXJpbyBkbyBGYWNlYm9vayc7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmYWNlYm9vaycsICdmYWxzZScpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMxNC5mYWNlYm9va1VzZXIgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9LCA1MDApOwogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2JvZHknKTsKICAgICAgICB9LCA2MDApOwogICAgICB9CgogICAgICBpZiAodHlwZSA9PT0gJ2luc3RhZ3JhbScpIHsKICAgICAgICBmZXRjaCgiaHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS8iLmNvbmNhdCh0aGlzLmluc3RhZ3JhbSwgIi8/X19hPTEiKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgICBfdGhpczE0Lmluc3RhZ3JhbVVzZXIgPSBmYWxzZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMTQuaW5zdGFncmFtVXNlciA9ICdWZXJpZmlxdWUgc2V1IHVzdcOhcmlvIGRvIEluc3RhZ3JhbSc7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdpbnN0YWdyYW0nLCAnZmFsc2UnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImZpbHRlckluc3RhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaWx0ZXJJbnN0YSgpIHsKICAgICAgdmFyIF90aGlzMTUgPSB0aGlzOwoKICAgICAgdGhpcy51c2Vyc25hbWUgPSBbXTsKICAgICAgdmFyIHJlcXVlc3RPcHRpb25zID0gewogICAgICAgIG1ldGhvZDogJ0dFVCcKICAgICAgfTsKICAgICAgcmV0dXJuIGZldGNoKCJodHRwczovL3d3dy5pbnN0YWdyYW0uY29tL3dlYi9zZWFyY2gvdG9wc2VhcmNoLz9xdWVyeT0iLmNvbmNhdCh0aGlzLmluc3RhZ3JhbSksIHJlcXVlc3RPcHRpb25zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCkudGhlbihmdW5jdGlvbiAodGV4dCkgewogICAgICAgICAgdmFyIGRhdGEgPSB0ZXh0ICYmIEpTT04ucGFyc2UodGV4dCk7CiAgICAgICAgICBkYXRhLnVzZXJzLmZvckVhY2goZnVuY3Rpb24gKHVzZXJzKSB7CiAgICAgICAgICAgIF90aGlzMTUuc2V0VXNlcih1c2Vycyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBkYXRhOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRVc2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRVc2VyKGRhdGEpIHsKICAgICAgdmFyIF90aGlzJHVzZXJzOwoKICAgICAgKF90aGlzJHVzZXJzID0gdGhpcy51c2VycykgPT09IG51bGwgfHwgX3RoaXMkdXNlcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHVzZXJzLnB1c2goZGF0YS51c2VyKTsKICAgICAgdGhpcy51c2VyID0gJyc7CiAgICAgIHZhciBpID0gewogICAgICAgIG5hbWU6IGRhdGEudXNlci51c2VybmFtZSwKICAgICAgICB2YWx1ZTogZGF0YS51c2VyLmZ1bGxfbmFtZSwKICAgICAgICBpbWc6IGRhdGEudXNlci5wcm9maWxlX3BpY191cmwsCiAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlCiAgICAgIH07CiAgICAgIHRoaXMudXNlcnNuYW1lLnB1c2goaSk7CiAgICAgIHRoaXMudXNlcnNuYW1lLmZpbHRlcihmdW5jdGlvbiAoZWxlbSwgaW5kZXgsIHNlbGYpIHsKICAgICAgICByZXR1cm4gaW5kZXggPT09IHNlbGYuaW5kZXhPZihlbGVtKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0QWxsVXNlcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEFsbFVzZXJzKCkgewogICAgICB2YXIgdW4gPSBbewogICAgICAgIG5hbWU6ICcgJywKICAgICAgICB2YWx1ZTogJyAnLAogICAgICAgIGltZzogJycKICAgICAgfV07CiAgICAgIHJldHVybiB1bjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRJbnN0YSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SW5zdGEoaW5zdGFncmFtKSB7CiAgICAgIHRoaXMuY2xlYXJTZWxlY3RlZEluc3RhKCk7CiAgICAgIGluc3RhZ3JhbS5zZWxlY3RlZCA9IHRydWU7CiAgICAgIHRoaXMuaW5zdGFJbWcgPSBpbnN0YWdyYW0uaW1nOwogICAgICB0aGlzLnVzZXJJID0gaW5zdGFncmFtLnZhbHVlOwogICAgICB0aGlzLnVzZXJOYW1lID0gaW5zdGFncmFtLm5hbWU7CiAgICAgIHRoaXMuYXV0b0NvbXBsZXRlSW5zdGFPcGVuID0gZmFsc2U7CiAgICAgIHRoaXMudmFsaWRJbnN0YSA9IHRydWU7CiAgICAgIHRoaXMuaW5zdGFncmFtID0gaW5zdGFncmFtLm5hbWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiaXNJbnN0YVZhbGlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0luc3RhVmFsaWQoKSB7CiAgICAgIHRoaXMudmFsaWRJbnN0YSA9IHRoaXMuaW5zdGFncmFtID8gdGhpcy5yZWcudGVzdCh0aGlzLmluc3RhZ3JhbSkgPyB0cnVlIDogZmFsc2UgOiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbGVhclNlbGVjdGVkSW5zdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyU2VsZWN0ZWRJbnN0YSgpIHsKICAgICAgdmFyIF90aGlzMTYgPSB0aGlzOwoKICAgICAgdGhpcy5maWx0ZXJJbnN0YWdyYW0oKS5tYXAoZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBkYXRhLnNlbGVjdGVkID0gZmFsc2U7CiAgICAgICAgX3RoaXMxNi51c2VySSA9ICcnOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmaWx0ZXJJbnN0YWdyYW0iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbHRlckluc3RhZ3JhbSgpIHsKICAgICAgdmFyIF90aGlzMTcgPSB0aGlzOwoKICAgICAgdmFyIGMgPSBbXTsgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXNoYWRvd2VkLXZhcmlhYmxlCgogICAgICBjID0gdGhpcy51c2Vyc25hbWUuZmlsdGVyKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMubmFtZS5zdWJzdHJpbmcoMCwgX3RoaXMxNy5pbnN0YWdyYW0ubGVuZ3RoKSA9PT0gX3RoaXMxNy5pbnN0YWdyYW0uc3Vic3RyaW5nKDAsIF90aGlzMTcuaW5zdGFncmFtLmxlbmd0aCk7CiAgICAgIH0pOwoKICAgICAgaWYgKGMubGVuZ3RoID4gMSkgewogICAgICAgIGMucmV2ZXJzZSgpOwogICAgICAgIGMuZmlsdGVyKGZ1bmN0aW9uIChlbGVtLCBpbmRleCwgc2VsZikgewogICAgICAgICAgcmV0dXJuIGluZGV4ID09PSBzZWxmLmluZGV4T2YoZWxlbSk7CiAgICAgICAgfSk7CgogICAgICAgIHdoaWxlIChjWzBdLm5hbWUgPT09IGNbYy5sZW5ndGggLSAxXS5uYW1lICYmIGMubGVuZ3RoID4gMSkgewogICAgICAgICAgYy5wb3AoKTsKICAgICAgICB9CiAgICAgIH0gLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLXNoYWRvd2VkLXZhcmlhYmxlCgoKICAgICAgcmV0dXJuIGMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMubmFtZS5zdWJzdHJpbmcoMCwgX3RoaXMxNy5pbnN0YWdyYW0ubGVuZ3RoKSA9PT0gX3RoaXMxNy5pbnN0YWdyYW0uc3Vic3RyaW5nKDAsIF90aGlzMTcuaW5zdGFncmFtLmxlbmd0aCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNvbWJvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb21ibygpIHsKICAgICAgdmFyIHRlc3RlID0gdGhpcy5jYXRlZ29yaWVzLmxlbmd0aCAtIDE7CiAgICAgIHZhciBpID0gMDsKICAgICAgdmFyIGNhdCA9IFtdOwogICAgICB2YXIgdGVzdGVjYXQgPSBbXTsKICAgICAgdmFyIGM7CiAgICAgIHZhciBzY2F0ID0gW107CgogICAgICBmb3IgKGMgPSAwOyBjIDw9IHRlc3RlOyBjKyspIHsKICAgICAgICBjYXRbY10gPSB0aGlzLmNhdGVnb3JpZXNbY10udmFsdWUuc3BsaXQoJyAtICcpOwogICAgICB9CgogICAgICBmb3IgKGMgPSAwOyBjIDwgdGVzdGU7IGMrKykgewogICAgICAgIHRlc3RlY2F0W2NdID0gY2F0W2NdWzBdOwogICAgICB9CgogICAgICB0aGlzLmNvbWJvQ2F0ZWdvcmllc1tpXSA9IHRlc3RlY2F0WzBdOwoKICAgICAgZm9yIChjID0gMDsgYyA8PSB0ZXN0ZTsgYysrKSB7CiAgICAgICAgaWYgKHRoaXMuY29tYm9DYXRlZ29yaWVzW2ldICE9PSB0ZXN0ZWNhdFtjXSkgewogICAgICAgICAgdGhpcy5jb21ib0NhdGVnb3JpZXMucHVzaCh0ZXN0ZWNhdFtjXSk7CiAgICAgICAgICBpID0gaSArIDE7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmNvbWJvQ2F0ZWdvcmllcy5wb3AoKTsKICAgICAgdmFyIHRlc3RlMiA9IHRoaXMuY29tYm9DYXRlZ29yaWVzLmxlbmd0aCAtIDE7CgogICAgICBmb3IgKGkgPSAwOyBpIDw9IHRlc3RlMjsgaSsrKSB7CiAgICAgICAgc2NhdCA9IFtdOwogICAgICAgIHZhciBqID0gMDsKCiAgICAgICAgZm9yIChjID0gMDsgYyA8PSB0ZXN0ZTsgYysrKSB7CiAgICAgICAgICBpZiAoY2F0W2NdWzBdID09PSB0aGlzLmNvbWJvQ2F0ZWdvcmllc1tpXSkgewogICAgICAgICAgICBzY2F0W2pdID0gY2F0W2NdWzFdOwogICAgICAgICAgICBqKys7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5zdWJjYXRlZ29yaWVzW2ldID0gc2NhdDsKICAgICAgICAgIHRoaXMuc3ViY2F0ZWdvcmllc0RhdGFbaV0gPSBzY2F0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5maWx0ZXJDYXRlZ29yeSgpOwogICAgICB0aGlzLmZpbHRlclN1YkNhdGVnb3J5KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmlsdGVyU3ViQ2F0ZWdvcmllcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmlsdGVyU3ViQ2F0ZWdvcmllcygpIHsKICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cCh0aGlzLnN1YmNhdGVnb3J5LCAnZ2knKTsKICAgICAgdmFyIGogPSAwOwogICAgICB2YXIgc3ViY2F0ID0gW107CgogICAgICBpZiAodGhpcy5jYXRlZ29yeSAhPT0gbnVsbCkgewogICAgICAgIGZvciAoajsgaiA8IHRoaXMuY29tYm9DYXRlZ29yaWVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBpZiAodGhpcy5jYXRlZ29yeSA9PT0gdGhpcy5jb21ib0NhdGVnb3JpZXNbal0pIHsKICAgICAgICAgICAgc3ViY2F0ID0gW107CiAgICAgICAgICAgIHN1YmNhdCA9IHRoaXMuc3ViY2F0ZWdvcmllc1tqXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBzdWJjYXQuZmlsdGVyKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLnNlYXJjaChyZSkgPiAtMTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0U3ViQ2F0ZWdvcnkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFN1YkNhdGVnb3J5KHN1YmNhdGVnb3J5KSB7CiAgICAgIHZhciBib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3ViY2F0ZWdvcnknKTsKICAgICAgdGhpcy5zdWJjYXRlZ29yeSA9IGJveC5vcHRpb25zW2JveC5zZWxlY3RlZEluZGV4XS50ZXh0OwogICAgICB0aGlzLmF1dG9Db21wbGV0ZVN1YkNhdGVnb3J5T3BlbiA9IGZhbHNlOwogICAgICB0aGlzLnZhbGlkU3ViQ2F0ZWdvcnkgPSB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImZpbHRlckNhdGVnb3J5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmaWx0ZXJDYXRlZ29yeSgpIHsKICAgICAgdmFyIHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYXRlZ29yeScpOwoKICAgICAgaWYgKHRoaXMuY29tYm9DYXRlZ29yaWVzICYmIHRoaXMuY29tYm9DYXRlZ29yaWVzLmxlbmd0aCkgewogICAgICAgIHRoaXMuY29tYm9DYXRlZ29yaWVzLm1hcChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgIHNlbGVjdC5vcHRpb25zW3NlbGVjdC5vcHRpb25zLmxlbmd0aF0gPSBuZXcgT3B0aW9uKHZhbHVlLnRvU3RyaW5nKCkpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZmlsdGVyU3ViQ2F0ZWdvcnkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZpbHRlclN1YkNhdGVnb3J5KCkgewogICAgICB2YXIgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1YmNhdGVnb3J5Jyk7CiAgICAgIHZhciBpbmRleCA9IHRoaXMuY29tYm9DYXRlZ29yaWVzLmluZGV4T2YodGhpcy5jYXRlZ29yeSwgMCk7CgogICAgICBpZiAodGhpcy5zdWJjYXRlZ29yaWVzRGF0YVtpbmRleF0pIHsKICAgICAgICB0aGlzLnN1YmNhdGVnb3JpZXNEYXRhW2luZGV4XS5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICBzZWxlY3Qub3B0aW9uc1tzZWxlY3Qub3B0aW9ucy5sZW5ndGhdID0gbmV3IE9wdGlvbih2YWx1ZS50b1N0cmluZygpKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImVkaXRQcm9maWxlTWl4cGFuZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGVkaXRQcm9maWxlTWl4cGFuZWwoKSB7CiAgICAgIG1peHBhbmVsLnRyYWNrKCJFZGl0X1Byb2ZpbGUiLCB7fSk7CiAgICAgIGNvbnNvbGUubG9nKCJFZGl0IFByb2ZpbGUiKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYW5kbGVTdWNjZXNzQ2xvc2VNb2RhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU3VjY2Vzc0Nsb3NlTW9kYWwoKSB7CiAgICAgIHRoaXMuZWRpdFByb2ZpbGVNaXhwYW5lbCgpOwogICAgICB0aGlzLnNob3dMb2dvTW9kYWwgPSBmYWxzZTsKICAgICAgdGhpcy50b2FzdE1lc3NhZ2UoJ3N1Y2Nlc3MnLCAnTG9nbyBhdHVhbGl6YWRhIGNvbSBzdWNlc3NvJyk7CiAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoYW5kbGVTdWNjZXNzQ2xvc2VNb2RhbFZpdHJpbmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZVN1Y2Nlc3NDbG9zZU1vZGFsVml0cmluZSgpIHsKICAgICAgdGhpcy5lZGl0UHJvZmlsZU1peHBhbmVsKCk7CiAgICAgIHRoaXMuc2hvd1ZpdHJpbmVNb2RhbCA9IGZhbHNlOwogICAgICB0aGlzLnRvYXN0TWVzc2FnZSgnc3VjY2VzcycsICdDYXBhIGF0dWFsaXphZGEgY29tIHN1Y2Vzc28nKTsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFyU3ViY2F0ZWdvcnkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyU3ViY2F0ZWdvcnkoKSB7CiAgICAgIHZhciBfdGhpczE4ID0gdGhpczsKCiAgICAgIHRoaXMuc3ViY2F0ZWdvcmllcyA9IFtdOwogICAgICB2YXIgY2F0ZWdvcnkgPSB0aGlzLmNhdGVnb3JpZXMuZmluZChmdW5jdGlvbiAoY2F0ZWdvcnkpIHsKICAgICAgICByZXR1cm4gY2F0ZWdvcnkubmFtZSA9PT0gX3RoaXMxOC5jYXRlZ29yeTsKICAgICAgfSk7CgogICAgICBpZiAoY2F0ZWdvcnkpIHsKICAgICAgICB0aGlzLnN1YmNhdGVnb3JpZXMgPSBjYXRlZ29yeS5zdWJjYXRlZ29yaWVzOwogICAgICB9IC8vIGNvbnN0IHNlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3ViY2F0ZWdvcnknKSBhcyBIVE1MU2VsZWN0RWxlbWVudDsKICAgICAgLy8gZm9yIChsZXQgaSA9IHNlbGVjdC5vcHRpb25zLmxlbmd0aDsgaSAhPT0gMDsgaS0tKSB7CiAgICAgIC8vICAgc2VsZWN0Lm9wdGlvbnMucmVtb3ZlKGkpOwogICAgICAvLyB9CiAgICAgIC8vIHRoaXMuZmlsdGVyU3ViQ2F0ZWdvcnkoKTsKCiAgICB9CiAgfSwgewogICAga2V5OiAib25TZWxlY3RBbGxQYXltZW50c0NoYW5nZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25TZWxlY3RBbGxQYXltZW50c0NoYW5nZShldmVudCkgewogICAgICB0aGlzLnBheW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKHBheW1lbnQpIHsKICAgICAgICBwYXltZW50Lm1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7CiAgICAgICAgICByZXR1cm4gbWV0aG9kLmFjdGl2ZSA9IGV2ZW50LnRhcmdldC5jaGVja2VkOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvcGVuSW5zdGFncmFtQXV0aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb3Blbkluc3RhZ3JhbUF1dGgoKSB7CiAgICAgIHdpbmRvdy5vcGVuKGVudmlyb25tZW50LmdldEluc3RhZ3JhbUF1dGhVcmwoKSwgJ19zZWxmJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAib3B0T3V0SW5zdGFncmFtIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfb3B0T3V0SW5zdGFncmFtID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTIoKSB7CiAgICAgICAgdmFyIF90aGlzMTkgPSB0aGlzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy51c2VyU2VydmljZS5vcHRPdXRJbnN0YWdyYW0oKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgdGhpcy51c2VyU2VydmljZS5nZXRTb2NpYWxNZWRpYSgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChzb2NpYWwpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczE5LnNldFNvY2lhbE1lZGlhKHNvY2lhbCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gb3B0T3V0SW5zdGFncmFtKCkgewogICAgICAgIHJldHVybiBfb3B0T3V0SW5zdGFncmFtLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBvcHRPdXRJbnN0YWdyYW07CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJnZXRJbnN0YWdyYW1Db2RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0SW5zdGFncmFtQ29kZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKCkgewogICAgICAgIHZhciBfdGhpczIwID0gdGhpczsKCiAgICAgICAgdmFyIGNvZGU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb2RlID0gdGhpcy4kcm91dGUucXVlcnkuY29kZTsKCiAgICAgICAgICAgICAgICBpZiAoIWNvZGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQxMy5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVzZXJTZXJ2aWNlLmF1dGhvcml6ZUluc3RhZ3JhbShjb2RlKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgdGhpcy51c2VyU2VydmljZS5nZXRTb2NpYWxNZWRpYSgpLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChzb2NpYWwpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpczIwLnNldFNvY2lhbE1lZGlhKHNvY2lhbCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0SW5zdGFncmFtQ29kZSgpIHsKICAgICAgICByZXR1cm4gX2dldEluc3RhZ3JhbUNvZGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldEluc3RhZ3JhbUNvZGU7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJ0b2FzdE1lc3NhZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRvYXN0TWVzc2FnZSh0eXBlLCB0aXRsZSkgewogICAgICBWdWVTaW1wbGVBbGVydC5maXJlKHsKICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICBwb3NpdGlvbjogJ3RvcC1lbmQnLAogICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICBvbk9wZW46IGZ1bmN0aW9uIG9uT3Blbih0b2FzdCkgewogICAgICAgICAgdG9hc3QuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIFN3YWwuc3RvcFRpbWVyKSwgdG9hc3QuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIFN3YWwucmVzdW1lVGltZXIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gZWRpdGFyTWV1TmVnb2NpbzsKfShWdWUpOwoKX19kZWNvcmF0ZShbUHJvcCgpXSwgZWRpdGFyTWV1TmVnb2Npby5wcm90b3R5cGUsICJpc0FjdGl2ZSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKHsKICBkZWZhdWx0OiB1bmRlZmluZWQKfSldLCBlZGl0YXJNZXVOZWdvY2lvLnByb3RvdHlwZSwgImlucHV0TGlzdCIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKHsKICBkZWZhdWx0OiAnJwp9KV0sIGVkaXRhck1ldU5lZ29jaW8ucHJvdG90eXBlLCAiZm9ybSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKHsKICBkZWZhdWx0OiAnPHN0cm9uZz5Mb2phIG9ubGluZTwvc3Ryb25nPicKfSldLCBlZGl0YXJNZXVOZWdvY2lvLnByb3RvdHlwZSwgInRpdHVsbyIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKHsKICBkZWZhdWx0OiAnQXF1aSB2b2PDqiBwb2RlIGNvbmZpcm1hciBzZXVzIGRhZG9zIGUgZWRpdGFyIGFzIGluZm9ybWHDp8O1ZXMgc29icmUgbyBzZXUgbmVnw7NjaW8nCn0pXSwgZWRpdGFyTWV1TmVnb2Npby5wcm90b3R5cGUsICJkZXNjcmlwdGlvbiIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKHsKICBkZWZhdWx0OiAnJwp9KV0sIGVkaXRhck1ldU5lZ29jaW8ucHJvdG90eXBlLCAicHJvcEFjdGl2ZUFjY29yZGlvbiIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKHsKICBkZWZhdWx0OiB0cnVlCn0pXSwgZWRpdGFyTWV1TmVnb2Npby5wcm90b3R5cGUsICJwcm9wSGVhZGVyIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1Byb3AoewogIGRlZmF1bHQ6IHVuZGVmaW5lZAp9KV0sIGVkaXRhck1ldU5lZ29jaW8ucHJvdG90eXBlLCAibm90aWZ5Iiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCdub3RpZnknKV0sIGVkaXRhck1ldU5lZ29jaW8ucHJvdG90eXBlLCAib25Qcm9wZXJ0eUNoYW5nZWQiLCBudWxsKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCdwYXltZW50cycsIHsKICBkZWVwOiB0cnVlCn0pXSwgZWRpdGFyTWV1TmVnb2Npby5wcm90b3R5cGUsICJvblBheW1lbnRzQ2hhbmdlZCIsIG51bGwpOwoKZWRpdGFyTWV1TmVnb2NpbyA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgVnVlU2xpZGVyOiBWdWVTbGlkZXIsCiAgICBMb2dvTW9kYWw6IExvZ29Nb2RhbCwKICAgIFZpdHJpbmVNb2RhbDogVml0cmluZU1vZGFsCiAgfQp9KV0sIGVkaXRhck1ldU5lZ29jaW8pOwpleHBvcnQgeyBlZGl0YXJNZXVOZWdvY2lvIH07"},{"version":3,"sources":["/home/aline/AstaPrecifique/src/components/box/editarMeuNegocio/editarMeuNegocio.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, Prop, Vue, Watch } from 'vue-property-decorator';\nimport VueSlider from 'vue-slider-component';\nimport VueSimpleAlert from 'vue-simple-alert';\nimport Swal, { SweetAlertType } from 'sweetalert2';\nimport 'vue-slider-component/theme/antd.css';\nimport Cropper from 'cropperjs';\n\nimport INotification from '@/models/INotification';\nimport focusInput from '@/helpers/focusInput';\nimport userService from '@/services/user.service';\nimport categoryService from '@/services/category.service';\nimport registerService from '@/services/register.service';\nimport environment from \"@/environments/environment\";\n\nimport Compressor from 'compressorjs';\n\nimport LogoModal from '@/components/logo-modal/logo-modal.vue'\nimport VitrineModal from '@/components/vitrine-modal/vitrine-modal.vue'\nimport { withLatestFrom } from 'rxjs-compat/operator/withLatestFrom';\n\nimport mixpanel from \"mixpanel-browser\";\n\ndeclare var google: any;\n\n@Component({\n  components: {\n    VueSlider,\n    LogoModal,\n    VitrineModal\n  },\n})\n\nexport class editarMeuNegocio extends Vue {\n\n  private userService = new userService();\n  private categoryService = new categoryService();\n  private registerService = new registerService();\n\n  \n  public $zendesk: any;\n  public zE: any;\n\n  public showAddressChecked: boolean = true;\n  public whenClosed: boolean = true;\n  public outOfRadius: boolean = true;\n  public showAddress: boolean = true;\n  public showCropper2: boolean = false;\n  public validSubCategory: boolean = false;\n  public categorySubcategory: any[] = [];\n  public catSubcat: string = '';\n  public autoCompleteSubCategoryOpen: boolean = false;\n  public subcategory: string = '';\n  public subcategories: any[] = [];\n  public subcategoriesData: any[] = [];\n  public comboCategories: any[] = [];\n  public usersname: Array<{\n    name: string,\n    value: string,\n    img: string,\n    selected: boolean,\n  }> = [];\n  public instaImg: string = '';\n  public userI: string = '';\n  public userName: any;\n  public validInsta: boolean = false;\n  public autoCompleteInstaOpen: boolean = false;\n  public user: any = '';\n  public users: any[] = [];\n  public face: any;\n  public instg: any;\n  public teste: any;\n  public teste2: boolean = false;\n  public facebookUser: boolean | string = false;\n  public instagramUser: boolean | string = false;\n  public finalImage: string = '';\n  public finalCapeImage: string = '';\n  public showCropper: boolean = false;\n  public destination: string = '';\n  public logoInput: string = '';\n  public publishAvailable: boolean = false;\n  public publishAvailableText: string = '';\n  public publishAvailableColor: string = '';\n  public image: HTMLImageElement = new Image();\n  public cropper: any;\n  public imageToCrop: any;\n  public map: any;\n  public circles: any[] = [];\n  public lat: any;\n  public lng: any;\n  public processStyle = {\n    color: '$secondary',\n    height: 7,\n  };\n  public rangeValue: number = 1;\n  public voltar: boolean = true;\n  public content: any | undefined = '';\n  public locationSelected;\n  public contentPayments: any = '';\n  public payments: any[] = [];\n  public moneys?: any[];\n  public paymentsChecked: string = '';\n  public facebook: string = '';\n  public instagram: string = '';\n  public website: string = '';\n  public selectedlang: string = '';\n  public googleApiReturn: any;\n  public name: string = '';\n  public email: string = '';\n  public celular: string = '';\n  public category: string = '';\n  public about: string = '';\n  public address: string = '';\n  public complemento: string = '';\n  public descricao: string = '';\n  public numero: string = '';\n  public cep: string = '';\n  public logradouro: string = '';\n  public bairro: string = '';\n  public cidade: string = '';\n  public documentCpf: string = '';\n  public region: string = '';\n  public size: string = '';\n  public sellerName: string = '';\n\n  public regions?: any[] = [];\n  public deliveryRegions: any[] = [];\n  public socialMedia: any[] = [];\n  public profileUrl: any[] = [];\n  public location: any;\n  public categoryId: any;\n  public errorMsg: boolean = false;\n  public autoCompleteAddress: any;\n  public autoCompleteRegion: any;\n  public markers: [] = [];\n  public places: [] = [];\n  public currentPlace: string = '';\n  public formModel: any = {};\n  public checkedNames: object[] = [];\n\n  @Prop() isActive: any = false;\n  @Prop({ default: undefined }) inputList!: object[];\n  @Prop({ default: '' }) form!: string;\n  @Prop({ default: '<strong>Loja online</strong>' }) titulo!: string;\n  @Prop({ default: 'Aqui você pode confirmar seus dados e editar as informações sobre o seu negócio' }) description!: string;\n\n  @Prop({ default: '' }) propActiveAccordion!: string;\n  @Prop({ default: true }) propHeader!: boolean;\n\n  @Prop({ default: undefined }) notify?: INotification | string = ``;\n  @Watch('notify') onPropertyChanged(value: string, oldValue: string) {\n    // console.log(value, oldValue);\n  }\n\n  public activeAccordion = this.propActiveAccordion;\n  public hasHeader = this.propHeader;\n\n  public checked: boolean = false;\n  public items: any[] = [];\n  public focused = new focusInput();\n  public reg: RegExp = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,24}))$/;\n  public valid: boolean = false;\n  public validAddress: boolean = false;\n  public validComplemento: boolean = false;\n  public validDescricao: boolean = false;\n  public validCategory: boolean = false;\n  public validNumero: boolean = false;\n  public validAbout: boolean = false;\n  public validRegion: boolean = false;\n  public validLogradouro: boolean = false;\n  public validCidade: boolean = false;\n  public validBairro: boolean = false;\n  public validCep: boolean = false;\n\n  public categories: Array<{\n    id: string,\n    value: string,\n    selected: boolean,\n    name: string,\n    subcategories: any[]\n  }> = [];\n  public autoCompleteCategoryOpen: boolean = false;\n  public loggedUser: any;\n  public hideAddress: boolean = false;\n  public sizes: Array<{\n    id: string,\n    value: string,\n    sigla: string,\n    selected: boolean,\n  }> = [];\n  public showLogoModal = false;\n  public showVitrineModal = false;\n\n  public genericChatbot: string = 'minhaloja_0';\n  public chatbotId: string = this.genericChatbot;\n\n  public setChatbotId(chatbotId, isActive) {\n    this.chatbotId = isActive ? `minhaloja_${chatbotId}` : this.genericChatbot;\n  }\n\n  public selectAllPayments: boolean = false;\n  @Watch('payments', { deep: true })\n  onPaymentsChanged(val: boolean) {\n    this.selectAllPayments = this.payments.map(payment => {\n      return payment.methods.map(method => method.active);\n    }).flat().filter(value => !value).length === 0;\n  }\n  async created() {\n    this.showCropper2 = false;\n    this.destination = '';\n    this.showCropper = false;\n    this.imageToCrop = '';\n    this.usersname = this.getAllUsers();\n    this.sizes = [];\n    this.processChoicesSellerSize();\n\n    const categoriesResponse = await this.registerService.getListCategories();\n    const categoriesData = await categoriesResponse.json();\n\n    this.categories = categoriesData || [];\n\n    this.userService.listProdcutsAll().then(data => {\n      data.delivery.forEach(region => this.setRegions(region));\n\n      if (!data.document) {\n        this.infoAlertNoDocument();\n        document.getElementById('document')?.removeAttribute('disabled');\n      } else if (!data.category) {\n        this.infoAlertNoCategory();\n      } else if (!data.address) {\n        this.infoAlertNoAdress();\n      }\n      this.setField(data);\n      this.celularValidate();\n      this.cpfValidate();\n    });\n    // tslint:disable-next-line:no-unused-expression\n    this.printValues;\n\n    this.userService.listPagamentos()\n      .then(async (data) => {\n        const formatedPayments = [];\n        // tslint:disable-next-line:forin\n        for (const key in data) {\n          await data[key].forEach(method => {\n            method.active = this.checked;\n          });\n          this.payments.push({ title: key, methods: data[key] });\n        }\n\n        /**\n         * Service listObterPagamentos\n         * @param listObterPagamentos\n         * servico que lista os meios de pagamentos alterados\n         * na funcao alterarPayments, trazendo selecionados\n         */\n        this.userService.listObterPagamentos()\n          // tslint:disable-next-line:no-shadowed-variable\n          .then(data => {\n            data.forEach(choice => {\n              this.payments.forEach(paymentCategory => {\n                paymentCategory.methods.map(x => x.active = x.name === choice.name ? true : x.active);\n              });\n            });\n          });\n      });\n    this.userService.getSocialMedia()\n      .then(data => {\n        data.forEach(social => {\n          this.setSocialMedia(social);\n        });\n      });\n  }\n\n\n  public openZendesk() {\n    this.$zendesk.load(\"14e6c01e-ae2c-4e2c-8c76-d461c01479c8\")\n    this.$zendesk.zE('messenger', 'open')\n}\n\n  onAccordionToggle() {\n\n  }\n\n  /**\n   * Function verify event checkbox\n   * @param printValues\n   * @param name\n   * @param status\n   */\n  printValues(name, status) {\n    if (status) {\n      this.checkedNames.push(name);\n    } else {\n      this.checkedNames = this.checkedNames.filter((item) => item !== name);\n    }\n  }\n\n  setSocialMedia(media) {\n    if (media.type === 'Facebook') {\n      this.facebook = Array.from(new Set(media.profileUrl.split('https://www.facebook.com/'))).toString();\n      this.facebook = this.facebook.replace(/,/g, '');\n    }\n    if (media.type === 'Instagram') {\n      this.instagram = Array.from(new Set(media.profileUrl.split('https://www.instagram.com/'))).toString();\n      this.instagram = this.instagram.replace(/,/g, '');\n    }\n    if (media.type === 'Personal Website') {\n      this.website = media.profileUrl.split('https://')[1];\n    }\n    this.face = this.facebook;\n    this.instg = this.instagram;\n  }\n\n\n  setField(texts: any) {\n    this.finalImage = texts.store_logo_url;\n    this.finalCapeImage = texts.store_cover_photo_url;\n\n    if (texts.address) {\n      this.rangeValue = texts.address.distance;\n      this.address = texts.address.street + ', ' + texts.address.neighborhood + ', ' + texts.address.city + ', ' + texts.address.state;\n      this.geocodeAddress(texts.address.street + ', ' + texts.address.number + ', ' + texts.address.neighborhood + ', ' + texts.address.city + ', ' + texts.address.state);\n      this.complemento = texts.address.complement;\n      this.about = texts.about;\n      this.region = '';\n      this.numero = texts.address.number;\n\n      this.cidade = texts.address.city;\n      this.bairro = texts.address.neighborhood;\n      this.logradouro = texts.address.street;\n      this.cep = texts.address.zipcode;\n    }\n    this.size = texts.size;\n    this.sellerName = texts.seller_name\n    this.documentCpf = texts.document;\n    this.content = texts;\n    this.name = texts.name;\n    this.celular = texts.mobile;\n    this.email = texts.email;\n    this.publishAvailable = texts.seller_disable;\n    this.publishAvailableText = this.publishAvailable ? 'Reativar conta' : 'Desativar conta';\n    this.publishAvailableColor = this.publishAvailable ? 'editBox__formData__dataBtn--button__active' : 'editBox__formData__dataBtn--button__disable';\n    this.catSubcat = texts.third_level;\n    if (texts.sub_category) {\n      // this.categorySubcategory = this.catSubcat.split(' - ');\n      this.category = texts.category;\n      this.subcategory = texts.sub_category;\n      this.validSubCategory = this.subcategory ? true : false;\n    }\n    this.hideAddress = (texts.hide_address === true) ? texts.hide_address : false;\n\n    this.valid = false;\n    this.validAddress = this.address ? true : false;\n    this.validCategory = this.category ? true : false;\n    this.validComplemento = this.complemento ? true : false;\n    this.validDescricao = this.descricao ? true : false;\n    this.validNumero = this.numero ? true : false;\n    this.validAbout = this.about ? true : false;\n    this.validRegion = false;\n    this.validLogradouro = false;\n    this.validCidade = false;\n    this.validBairro = false;\n    this.validCep = false;\n\n    this.focused.editCategory = this.category ? true : false;\n    this.focused.editSize = this.size ? true : false;\n    this.focused.editSellerName = this.sellerName ? true : false;\n    this.focused.editAddress = this.address ? true : false;\n    this.focused.editRegion = true;\n    this.focused.editAbout = this.about ? true : false;\n    this.focused.editComplemento = this.complemento ? true : false;\n    this.focused.editDescricao = this.descricao ? true : false;\n    this.focused.editNumero = this.numero ? true : false;\n    this.focused.editCep = this.cep ? true : false;\n    this.focused.editLogradouro = this.logradouro ? true : false;\n    this.focused.editCidade = this.cidade ? true : false;\n    this.focused.editBairro = this.bairro ? true : false;\n    this.subcategoriesData = this.subcategories;\n    this.clearSubcategory();\n  }\n\n  alterarAddress() {\n    this.$emit('loading', true);\n    this.userService.updateWhenClosed({ accepts_orders_when_closed: this.whenClosed});\n    this.userService.updateOutOfRadius({ accepts_distant_orders: this.outOfRadius});\n\n  \n\n    const location = {\n      distance: this.rangeValue ? this.rangeValue : null,\n      number: this.numero,\n      complement: this.complemento,\n      neighborhood: this.bairro,\n      lat: this.lat,\n      lng: this.lng,\n      city: this.cidade,\n      street: this.logradouro,\n      zipcode: this.cep,\n      show_address: this.showAddress,\n    };\n\n\n\n\n    if (\n      !location.number ||\n      !location.zipcode ||\n      !location.neighborhood ||\n      !location.city ||\n      !location.street\n    ) {\n      let emptyFields = \"\";\n\n      if (!location.zipcode) { emptyFields += '\\n Cep' }\n      if (!location.street) { emptyFields += '\\n Logradouro' }\n      if (!location.number) { emptyFields += '\\n Número' }\n      if (!location.neighborhood) { emptyFields += '\\n Bairro' }\n      if (!location.city) { emptyFields += '\\n Cidade' }\n\n      this.toastMessage('error', \"Os campos abaixo são obrigatórios:\\n\" + emptyFields);\n\n      this.$emit('loading', false);\n\n\n\n      return;\n    }\n\n\n\n   \n\n\n\n\n\n    if (location) {\n\n      \n\n\n   \n      this.userService.updateShowAddress(location)\n      this.userService.updateSellerAddress(location)\n        .then(data => {\n          if (!data.ok) {\n            this.showErrorNotification();\n            this.$emit('loading', false);\n          } else {\n            this.userService.updateSeller({ hide_address: this.hideAddress })\n              .then(userData => {\n                if (!userData.ok) {\n                  this.showErrorNotification();\n                  this.$emit('loading', false);\n                } else {\n                  this.showSuccessfullNotification();\n                  this.$emit('loading', false);\n                  window.location.reload();\n                }\n              });\n          }\n        });\n\n    }\n\n    this.focused.editNumero = this.numero ? true : false;\n\n    this.$emit('loading', false);\n  }\n\n  getSigla() {\n    const obj = this.sizes.find((item) => item.value === this.size)\n    return (obj !== undefined) ? obj.sigla : \"\";\n  }\n\n  saveData() {\n    this.$emit('loading', true);\n    if (!this.size || !this.sellerName) {\n      alert(\"Deve preencher os dados em branco, por favor preencha e tente novamente\");\n      this.showErrorNotification();\n      this.$emit('loading', false);\n    } else {\n      this.userService.updateSize(this.getSigla(), this.sellerName, this.name, this.email, this.documentCpf).then(data => {\n        if (!data.ok) {\n          data.json().then(obj => {\n            if (obj.email) {\n              this.showErrorNotification(obj.email[0]);\n            } else {\n              this.showErrorNotification();\n            }\n          })\n        } else {\n          this.showSuccessfullNotification();\n          data.json().then(obj => {\n            localStorage.setItem('loggedUser', JSON.stringify(obj));\n            this.loggedUser = obj;\n            window.location.reload();\n          });\n        }\n      })\n        .catch((error) => {\n          console.log(error)\n        })\n        .finally(() => this.$emit('loading', false));\n    }\n  }\n\n  alterSellerStatus() {\n    if (this.publishAvailable) {\n      this.userService.habilitaVendedor().then(value => {\n        if (value.status !== 202) {\n          this.showErrorNotification();\n        } else {\n          this.showSuccessfullNotification();\n          this.publishAvailable = false;\n          this.publishAvailableText = 'Desativar conta';\n        }\n      });\n    } else {\n      this.userService.desabilitaVendedor().then(value => {\n        if (value.status !== 202) {\n          this.showErrorNotification();\n        } else {\n          this.showSuccessfullNotification();\n          this.publishAvailable = true;\n          this.publishAvailableText = 'Reativar conta';\n        }\n      });\n    }\n    this.publishAvailableColor = this.publishAvailable ? 'editBox__formData__dataBtn--button__disable' : 'editBox__formData__dataBtn--button__active';\n  }\n\n  saveCategory() {\n    this.$emit('loading', true);\n    if (this.subcategory === '' && this.category !== '') {\n      this.showErrorNotification();\n      this.$emit('loading', false);\n    } else {\n      // const value = this.category + ' - ' + this.subcategory;\n      // this.categoryId = this.categories.filter(c => c.value === value)[0].id;\n      const subcategory = this.subcategories.find(subcategory => subcategory.name === this.subcategory);\n      if (subcategory) {\n        this.userService.updateCategory({ cnae: subcategory.cnae })\n          .then(data => {\n            if (!data.ok) {\n              this.showErrorNotification();\n              this.$emit('loading', false);\n            } else {\n              this.userService.updateSeller({ about: this.about })\n                .then(userData => {\n                  if (!userData.ok) {\n                    this.showErrorNotification();\n                  } else {\n                    this.showSuccessfullNotification();\n                    const logged: any = JSON.parse(localStorage.getItem('loggedUser') || '');\n                    logged.category = this.category;\n                    logged.subscribe = this.subcategory;\n                    logged.about = this.about;\n                    localStorage.setItem('loggedUser', JSON.stringify(logged));\n                  }\n                  this.$emit('loading', false);\n                  window.location.reload();\n                });\n            }\n          });\n      } else {\n        this.userService.updateSeller({ about: this.about })\n          .then(data => {\n            if (!data.ok) {\n              this.showErrorNotification();\n              this.$emit('loading', false);\n            } else {\n              this.showSuccessfullNotification();\n              this.$emit('loading', false);\n            }\n          });\n      }\n    }\n  }\n\n  alterarSocialMedia() {\n    window.event?.preventDefault();\n    this.socialMedia = [];\n    this.$emit('loading', true);\n    this.instagramUser = false;\n    this.facebookUser = false;\n    localStorage.setItem('facebook', 'true');\n    localStorage.setItem('instagram', 'true');\n    if (!this.face) {\n      this.face = '';\n    }\n    if (!this.instg) {\n      this.instg = '';\n    }\n\n    if (this.facebook.length > 0) {\n      this.verificar('facebook');\n      setTimeout(() => {\n        if (localStorage.getItem('facebook') === 'true') {\n          this.socialMedia.push({\n            status: this.facebook ? true : false,\n            profileUrl: 'https://www.facebook.com/' + this.facebook,\n            type: 'Facebook',\n          });\n        } else {\n          this.socialMedia.push({\n            status: this.face ? true : false,\n            profileUrl: 'https://www.facebook.com/' + this.face,\n            type: 'Facebook',\n          });\n        }\n      }, 510);\n    }\n    if (this.instagram.length > 0) {\n      setTimeout(() => {\n        if (localStorage.getItem('instagram') === 'true') {\n          this.socialMedia.push({\n            status: this.instagram ? true : false,\n            profileUrl: 'https://www.instagram.com/' + this.instagram,\n            type: 'Instagram',\n          });\n        } else {\n          this.socialMedia.push({\n            status: this.instg ? true : false,\n            profileUrl: 'https://www.instagram.com/' + this.instg,\n            type: 'Instagram',\n          });\n        }\n      }, 510);\n      this.verificar('instagram');\n    }\n    if (this.website.length > 0) {\n      this.socialMedia.push({\n        status: this.website ? true : false,\n        profileUrl: 'https://' + this.website,\n        type: 'Personal Website',\n      });\n    }\n    setTimeout(() => {\n      this.userService.postSocialMedia(this.socialMedia)\n        .then(data => {\n          if (!data.ok || this.instagramUser !== false || this.facebookUser !== false) {\n            this.showErrorNotification();\n            this.$emit('loading', false);\n            if (this.instagramUser === false) {\n              this.instg = this.instagram;\n            }\n            if (this.facebookUser === false) {\n              this.face = this.facebook;\n            }\n          } else {\n            this.showSuccessfullNotification();\n            this.$emit('loading', false);\n            this.socialMedia = [];\n            this.face = this.facebook;\n            this.instg = this.instagram;\n          }\n        })\n        .catch(err => console.log(err));\n      localStorage.removeItem('instagram');\n      localStorage.removeItem('facebook');\n    }, 600);\n  }\n\n\n  // updatePostSocial() {\n  //   this.$emit('loading', false);\n  //   this.service.getSocialMedia()\n  //   .then(data => data.json())\n  //   .then(data => {\n  //     if (!data.ok) {\n  //       this.showErrorNotification();\n  //       this.$emit('loading', false);\n  //     } else {\n  //       this.$emit('loading', false);\n  //       this.socialMedia.push(data);\n  //     }\n  //   })\n  //   .catch(err => {\n  //     console.log(err);\n  //   })\n  // }\n\n  /**\n   * Param alterarPayments\n   * @param  alterarPayments\n   * funcao que seleciona o meio de pagamento,\n   * altera o meio de pagamento\n   * e envia o meio de pagamento\n   */\n  async alterarPayments() {\n    window.event?.preventDefault();\n    this.$emit('loading', true);\n    await this.payments.forEach(paymentCategory => {\n      paymentCategory.methods.forEach(method => {\n        if (method.active) {\n          this.checkedNames.push(method.name);\n        }\n      });\n    });\n    this.userService.listUpdatePagamentos(this.checkedNames)\n      .then(paymentsChecked => {\n        if (!paymentsChecked.ok) {\n          this.showErrorNotification();\n          this.$emit('loading', false);\n        } else {\n          this.$emit('loading', false);\n          this.checked = true;\n          this.checkedNames = [];\n          this.showSuccessfullNotification();\n        }\n      });\n  }\n\n  cpfValidate() {\n    if (this.documentCpf && this.documentCpf !== null && this.documentCpf.length > 0 && this.documentCpf.length <= 11) {\n      this.documentCpf = this.documentCpf.replace(/(\\d{3})(\\d{3})(\\d{3})(\\d{2})/, (regex, arg1, arg2, arg3, arg4) => `${arg1}.${arg2}.${arg3}-${arg4}`);\n    } else if (this.documentCpf !== null) {\n      this.documentCpf = this.documentCpf.replace(/(\\d{2})(\\d{3})(\\d{3})(\\d{4})(\\d{2})/, (regex, arg1, arg2, arg3, arg4, arg5) => `${arg1}.${arg2}.${arg3}/${arg4}-${arg5}`);\n    }\n  }\n\n  celularValidate() {\n    this.celular = this.celular.replace(/(\\d{2})(\\d{5})(\\d{4})/, (regex, arg1, arg2, arg3) => `(${arg1}) ${arg2} - ${arg3}`);\n  }\n\n  public isCategoryValid() {\n    this.validCategory = (this.category) ? (this.reg.test(this.category)) ? true : false : false;\n  }\n\n  public isAddressValid() {\n    this.validAddress = (this.address === '')\n      ? (this.reg.test(this.address))\n        ? true\n        : false\n      : false;\n  }\n\n  public isRegionValid() {\n    this.validRegion = (this.region === '') ? (this.reg.test(this.region)) ? true : false : false;\n  }\n\n  public isCepValid() {\n    this.validCep = (this.cep === '') ? (this.reg.test(this.cep)) ? true : false : false;\n  }\n\n  public isBairroValid() {\n    this.validBairro = (this.bairro === '') ? (this.reg.test(this.bairro)) ? true : false : false;\n  }\n\n  public isCidadeValid() {\n    this.validCidade = (this.cidade === '') ? (this.reg.test(this.cidade)) ? true : false : false;\n  }\n\n  public isLogradouroValid() {\n    this.validLogradouro = (this.logradouro === '') ? (this.reg.test(this.logradouro)) ? true : false : false;\n  }\n\n  async mounted() {\n    this.autocompleteInit();\n    this.initMap();\n    // this.combo();\n    this.getInstagramCode();\n    const sellerObject = await this.userService.getSellerShowAddress()\n    this.showAddressChecked = sellerObject.show_address;\n    this.showAddress = sellerObject.show_address;\n\n \n\n    const whenClosedSeller = await this.userService.getSellerWhenClosed()\n    this.whenClosed = whenClosedSeller.accepts_orders_when_closed;\n\n\n    const getOutOfRadius = await this.userService.getSellerOutOfRadius()\n    this.outOfRadius = getOutOfRadius.accepts_distant_orders\n\n\n   \n  }\n\n\n  async infoAlertNoDocument() {\n    this.notify = {\n      icon: require('./../../../assets/images/icon_error.png'),\n      text: `\n          <strong>ATENÇÃO: Sua loja não está sendo exibida!</strong><br />Para você ficar visível aos seus clientes, é necessário que preencha um número de documento válido do seu negócio ou do responsável legal.\n        `,\n      color: '#ffd1c4',\n      active: true,\n      type: 'error',\n      text_align_left: true,\n    };\n    const response = await this.registerService.validateTokenSeller();\n    if (!response.ok) {\n      localStorage.removeItem('pertinho');\n      localStorage.removeItem('loggedUser');\n      this.$router.push('login');\n    }\n  }\n\n  async infoAlertNoCategory() {\n    this.notify = {\n      icon: require('./../../../assets/images/icon_error.png'),\n      text: `\n          <strong>ATENÇÃO: Sua loja não está sendo exibida!</strong><br />Para você ficar visível aos seus clientes, é necessário que preencha uma categoria, uma subcategoria e uma descrição para o seu negócio.\n        `,\n      color: '#ffd1c4',\n      active: true,\n      type: 'error',\n      text_align_left: true,\n    };\n    const response = await this.registerService.validateTokenSeller();\n    if (!response.ok) {\n      localStorage.removeItem('pertinho');\n      localStorage.removeItem('loggedUser');\n      this.$router.push('login');\n    }\n  }\n\n  async infoAlertNoAdress() {\n    this.notify = {\n      icon: require('./../../../assets/images/icon_error.png'),\n      text: `\n          <strong>ATENÇÃO: Sua loja não está sendo exibida!</strong><br/>Para você ficar visível aos seus clientes, é necessário que preencha o endereço do seu negócio e o raio de atendimento.\n        `,\n      color: '#ffd1c4',\n      active: true,\n      type: 'error',\n      text_align_left: true,\n    };\n    const response = await this.registerService.validateTokenSeller();\n    if (!response.ok) {\n      localStorage.removeItem('pertinho');\n      localStorage.removeItem('loggedUser');\n      this.$router.push('login');\n    }\n  }\n\n  initMap() {\n    const logged: any = localStorage.getItem('loggedUser');\n    this.loggedUser = JSON.parse(logged);\n    if (this.loggedUser.address) {\n      this.map = new google.maps.Map(document.getElementById('map'), {\n        zoom: 13,\n        center: {\n          lat: parseFloat(this.loggedUser.address.lat),\n          lng: parseFloat(this.loggedUser.address.lng),\n        },\n        panControl: true,\n        zoomControl: true,\n        mapTypeControl: true,\n      });\n    }\n  }\n\n  autocompleteInit() {\n    const $ctrl = this;\n\n    const options = {\n      componentRestrictions: { country: \"br\" },\n      language: [\"pt-BR\"],\n      fields: [\"address_components\", \"geometry\", \"formatted_address\"],\n    };\n\n    /**\n     * input auto complete address\n     */\n\n    this.autoCompleteAddress = new google.maps.places.Autocomplete(this.$refs.autoCompleteAddress as HTMLElement, options);\n    google.maps.event.addListener(this.autoCompleteAddress, `place_changed`, () => {\n      $ctrl.googleApiReturn = $ctrl.autoCompleteAddress.getPlace();\n\n      $ctrl.numero = $ctrl.googleApiReturn.address_components.filter(x => x.types[0] === 'street_number').length > 0\n        ? $ctrl.googleApiReturn.address_components.filter(x => x.types[0] === 'street_number')[0].long_name\n        : '';\n\n      $ctrl.cep = $ctrl.googleApiReturn.address_components.filter(x => x.types[0] === 'postal_code').length > 0\n        ? $ctrl.googleApiReturn.address_components.filter(x => x.types[0] === 'postal_code')[0].long_name\n        : '';\n\n      $ctrl.focused.editCep = true;\n\n      $ctrl.logradouro = $ctrl.googleApiReturn.address_components.filter(x => x.types[0] === 'route').length > 0\n        ? $ctrl.googleApiReturn.address_components.filter(x => x.types[0] === 'route')[0].long_name\n        : '';\n\n      $ctrl.cidade = $ctrl.googleApiReturn.address_components.filter(x => x.types[0] === 'administrative_area_level_2').length > 0\n        ? $ctrl.googleApiReturn.address_components.filter(x => x.types[0] === 'administrative_area_level_2')[0].long_name\n        : '';\n\n      $ctrl.bairro = $ctrl.googleApiReturn.address_components.filter(x => x.types[0] === 'sublocality_level_1').length > 0\n        ? $ctrl.googleApiReturn.address_components.filter(x => x.types[0] === 'sublocality_level_1')[0].long_name\n        : '';\n\n      $ctrl.address = $ctrl.googleApiReturn.formatted_address\n\n      const location = {\n        lat: $ctrl.googleApiReturn.geometry.location.lat(),\n        lng: $ctrl.googleApiReturn.geometry.location.lng(),\n      };\n\n      $ctrl.map = new google.maps.Map(document.getElementById('map'), {\n        zoom: 13,\n        center: location,\n        panControl: true,\n        zoomControl: true,\n        mapTypeControl: true,\n        scaleControl: false,\n        streetViewControl: false,\n        overviewMapControl: true,\n        rotateControl: false,\n      });\n\n      new google.maps.Marker({\n        position: location,\n        center: location,\n        map: $ctrl.map,\n        draggable: false,\n        icon: {\n          url: require('../../../assets/images/icon-place.png'),\n          size: new google.maps.Size(28, 40),\n          origin: new google.maps.Point(0, 0),\n          anchor: new google.maps.Point(18, 18),\n          scaledSize: new google.maps.Size(28, 40),\n        },\n      });\n      $ctrl.lat = location.lat;\n      $ctrl.lng = location.lng;\n      $ctrl.plotCircle(location.lat, location.lng);\n    });\n  }\n\n  plotCircle(lat, lng) {\n    this.removeAllcircles();\n    const circulo = new google.maps.Circle({\n      map: this.map,\n      center: new google.maps.LatLng(lat, lng),\n      radius: this.rangeValue * 1000,\n      strokeColor: '$secondary',\n      strokeOpacity: 0.8,\n      strokeWeight: 1,\n      fillColor: '$secondary',\n      fillOpacity: 0.35,\n    });\n    this.circles.push(circulo);\n    const bounds = new google.maps.LatLngBounds();\n    bounds.union(circulo.getBounds());\n    this.map.fitBounds(bounds, 1);\n    this.map.setCenter({ lat, lng });\n  }\n\n  geocodeAddress(address) {\n    const $ctrl = this;\n\n    const geocoder = new google.maps.Geocoder();\n    geocoder.geocode(\n      { address },\n      (results, status) => {\n        if (status === 'OK') {\n          const location = {\n            lat: results[0].geometry.location.lat(),\n            lng: results[0].geometry.location.lng(),\n          };\n          $ctrl.lat = results[0].geometry.location.lat();\n          $ctrl.lng = results[0].geometry.location.lng();\n          $ctrl.map = new google.maps.Map(document.getElementById('map'), {\n            zoom: 13,\n            center: location,\n            panControl: false,\n            zoomControl: false,\n            mapTypeControl: true,\n            scaleControl: false,\n            streetViewControl: false,\n            overviewMapControl: false,\n            rotateControl: false,\n          });\n\n          const marker = new google.maps.Marker({\n            position: location,\n            center: location,\n            map: $ctrl.map,\n            draggable: false,\n            icon: {\n              url: require('../../../assets/images/icon-place.png'),\n              size: new google.maps.Size(28, 40),\n              origin: new google.maps.Point(0, 0),\n              anchor: new google.maps.Point(18, 18),\n              scaledSize: new google.maps.Size(28, 40),\n            },\n          });\n          $ctrl.plotCircle(results[0].geometry.location.lat(), results[0].geometry.location.lng());\n        }\n      },\n    );\n  }\n\n  removeAllcircles() {\n    // tslint:disable-next-line:forin\n    for (const i in this.circles) {\n      this.circles[i].setMap(null);\n    }\n    this.circles = [];\n  }\n\n  setRegions(data) {\n    this.regions?.push(data);\n    this.region = '';\n  }\n\n  formCancel() {\n    window.event?.preventDefault();\n  }\n\n  filterCategories() {\n    const re = new RegExp(this.category, 'gi');\n    return this.comboCategories.filter(c => c.toString().toLowerCase().search(re) > -1);\n  }\n\n  clearSelectedCategory() {\n    this.filterCategories().map((data) => {\n      data = '';\n    });\n  }\n\n  setCategory(category: any) {\n    this.clearSelectedCategory();\n\n    this.autoCompleteCategoryOpen = false;\n    this.focused.editCategory = true;\n    if (this.category) {\n      this.subcategory = '';\n      this.validCategory = true;\n      this.clearSubcategory();\n    }\n  }\n\n  setSize(selected: any) {\n    const selected_seller = selected.target;\n    this.size = selected_seller.value;\n  }\n\n  public getChoicesSellerSize() {\n    const headers = {\n      'Authorization': environment.setAuthorizationToken(),\n      'Content-Type': 'application/json',\n      'Access-Control-Allow-Headers': 'Content-Type',\n    };\n    const requestOptions = { headers: headers };\n    // console.log(\"fetchhhhh retorno\", fetch(`${environment.setAPI()}/choices/sellersize/`, requestOptions))\n    return fetch(`${environment.setAPI()}/choices/sellersize/`, requestOptions);\n  }\n\n  private async processChoicesSellerSize() {\n    const response = await this.getChoicesSellerSize();\n    switch (response.status) {\n      case 200:\n      case 201:\n      case 202:\n        const data = await response.json();\n        data.map((seller: any[]) => {\n          if (this.sizes) {\n            this.sizes.push({ id: seller[0], value: `${seller[1]}`, sigla: `${seller[0]}`, selected: false });\n          }\n        });\n        break;\n    }\n  }\n\n  deleteRegion(data) {\n    this.regions = data;\n  }\n\n  public isComplementoValid() {\n    this.validComplemento = this.complemento === '' ? false : true;\n  }\n\n  public isDescricaoValid() {\n    this.validDescricao = this.descricao === '' ? false : true;\n  }\n\n  public isNumeroValid() {\n    this.validNumero = this.numero === '' ? false : true;\n  }\n\n  public isAboutValid() {\n    this.validAbout = this.about === '' ? false : true;\n  }\n\n  showSuccessfullNotification() {\n\n    this.editProfileMixpanel()\n    this.$fire({\n      type: 'success',\n      title: 'Alterações salvas com sucesso',\n      toast: true,\n      position: 'top',\n      showCloseButton: true,\n      showConfirmButton: false,\n      timer: 3000,\n    })\n  }\n\n  async showErrorNotification(text?: string) {\n    this.$fire({\n      type: 'error',\n      title: text || 'Erro ao efetuar alteração!',\n      showCloseButton: true,\n      showConfirmButton: false,\n      timer: 4000,\n      toast: true,\n      position: 'top',\n    });\n    const response = await this.registerService.validateTokenSeller();\n    if (!response.ok) {\n      localStorage.removeItem('pertinho');\n      localStorage.removeItem('loggedUser');\n      this.$router.push('login');\n    }\n  }\n\n  showNotification(data) {\n    this.notify = data;\n  }\n\n  getRangeValue() {\n    const range: any = this.$refs.slider;\n    this.plotCircle(this.lat, this.lng);\n  }\n\n  async infoAlertVendedor() {\n    this.notify = {\n      icon: require('./../../../assets/images/icon_error.png'),\n      text: `\n          <strong>Atenção!</strong><br />Os campos \"Nome\", \"E-mail\", \"Telefone\" e \"Documento\" não são editáveis. Caso seja necessária alteração, por gentileza enviar e-mail para <a style=\"color: black; text-decoration:underline;\" href=\"mailto:contato@pertinhodecasa.com.br\" target=\"_blank\">contato@pertinhodecasa.com.br.</a>\n        `,\n      color: '#c3e4e7',\n      active: true,\n      type: 'error',\n    };\n    const response = await this.registerService.validateTokenSeller();\n    if (!response.ok) {\n      localStorage.removeItem('pertinho');\n      localStorage.removeItem('loggedUser');\n      this.$router.push('login');\n    }\n  }\n\n  uploadLogo() {\n    this.$emit('loading', true);\n    this.userService.uploadlogo(this.loggedUser.slug, this.destination)\n      .then(data => {\n        if (!data.ok) {\n          this.showErrorNotification();\n          this.$emit('loading', false);\n        } else {\n          this.showSuccessfullNotification();\n          this.editProfileMixpanel()\n          this.$emit('loading', false);\n        }\n      });\n  }\n\n  getImageToCrop(event) {\n    if (event.target.files.length && event.target.files[0].size / 1000000 < 10) {\n      const imageFile = event.target.files[0];\n      // const reader = new FileReader();\n      // reader.readAsDataURL(imageFile);\n      // reader.onload = (e: any) => {\n      //     this.imageToCrop = e.target.result;\n      //     this.updateLogo();\n      // };\n      this.imageToCrop = imageFile;\n      this.updateLogo();\n    } else {\n      this.showErrorNotification();\n    }\n  }\n\n  destroyCropper() {\n    this.cropper.destroy();\n    this.showCropper = false;\n  }\n\n  saveCroppedImage() {\n    this.destroyCropper();\n    this.uploadLogo();\n    this.showCropper = false;\n  }\n\n  async updateLogo() {\n    this.$emit('loading', true);\n    const compressor = new Compressor(this.imageToCrop, {\n      quality: 0.5,\n      width: 1250,\n      height: 1250,\n      convertSize: 0,\n      success: (imageCompressed) => {\n        const reader = new FileReader();\n        if (imageCompressed.size / 1000000 < 6) {\n          this.imageToCrop = imageCompressed;\n          reader.readAsDataURL(imageCompressed);\n          reader.onload = (e: any) => {\n            this.imageToCrop = e.target.result;\n            this.$emit('loading', false);\n            this.destination = e.target.result;\n            this.cropInit();\n          };\n        } else {\n          alert(\"Reduza o tamanho de imagem e tente novamente.\");\n          this.$emit('loading', false);\n        }\n      },\n      error: (err) => {\n        console.log(\"error comprimindo imagem\", err.message);\n        this.$emit('loading', false);\n      },\n    });\n  }\n\n  cropInit() {\n    this.image = this.$refs.image as HTMLImageElement;\n    try {\n      this.showCropper = true;\n      this.cropper = new Cropper(this.image, {\n        guides: true,\n        zoomable: true,\n        dragMode: 'move',\n        scalable: true,\n        center: true,\n        autoCropArea: 0.65,\n        responsive: true,\n        restore: false,\n        cropBoxMovable: false,\n        cropBoxResizable: false,\n        wheelZoomRatio: 0.1,\n        aspectRatio: 1 / 1,\n        initialAspectRatio: 1 / 1,\n        modal: true,\n        zoomOnWheel: false,\n        ready: (ready) => {\n          const canvas = this.cropper.getCroppedCanvas({\n            imageSmoothingQuality: 'high',\n            maxWidth: 400,\n            maxHeight: 400,\n          });\n          this.destination = canvas.toDataURL('image/png');\n          this.logoInput = this.destination;\n        },\n        crop: () => {\n          const canvas = this.cropper.getCroppedCanvas({\n            imageSmoothingQuality: 'high',\n            maxWidth: 400,\n            maxHeight: 400,\n          });\n          this.destination = canvas.toDataURL('image/png');\n          this.logoInput = this.destination;\n        },\n      });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  cropperZoom(value: number) {\n    this.cropper.zoom(value);\n  }\n\n  cropperRotate(value: number) {\n    this.cropper.rotate(value);\n  }\n  verificar(type) {\n    if (type === 'facebook') {\n      const request = require('request');\n      request.get({\n        encoding: 'utf-8',\n        method: 'GET',\n        uri: `http://graph.facebook.com/${this.facebook}`,\n        followRedirect: false,\n      }, (err, res, body) => localStorage.setItem('body', body));\n      setTimeout(() => {\n        const body: any = localStorage.getItem('body');\n        this.teste = JSON.parse(body);\n        if (this.teste.error.message.includes('requested do not exist')) {\n          this.facebookUser = 'Verifique seu usuário do Facebook';\n          localStorage.setItem('facebook', 'false');\n        } else {\n          this.facebookUser = false;\n        }\n      }, 500);\n      setTimeout(() => {\n        localStorage.removeItem('body');\n      }, 600);\n    }\n    if (type === 'instagram') {\n      fetch(`https://www.instagram.com/${this.instagram}/?__a=1`)\n        .then(response => {\n          if (response.status === 200) {\n            this.instagramUser = false;\n          } else {\n            this.instagramUser = 'Verifique seu usuário do Instagram';\n            localStorage.setItem('instagram', 'false');\n          }\n        });\n    }\n  }\n\n  filterInsta() {\n    this.usersname = [];\n    const requestOptions = {\n      method: 'GET',\n    };\n    return fetch(`https://www.instagram.com/web/search/topsearch/?query=${this.instagram}`, requestOptions).then(response =>\n      response.text().then((text: any) => {\n        const data = text && JSON.parse(text);\n        data.users.forEach(users => {\n          this.setUser(users);\n        });\n        return data;\n      }));\n  }\n\n  setUser(data) {\n    this.users?.push(data.user);\n    this.user = '';\n    const i = {\n      name: data.user.username,\n      value: data.user.full_name,\n      img: data.user.profile_pic_url,\n      selected: false,\n    };\n    this.usersname.push(i);\n    this.usersname.filter((elem, index, self) => index === self.indexOf(elem));\n  }\n\n  getAllUsers() {\n    const un: any = [{ name: ' ', value: ' ', img: '' }];\n    return un;\n  }\n\n  setInsta(instagram: any) {\n    this.clearSelectedInsta();\n    instagram.selected = true;\n    this.instaImg = instagram.img;\n    this.userI = instagram.value;\n    this.userName = instagram.name;\n    this.autoCompleteInstaOpen = false;\n    this.validInsta = true;\n    this.instagram = instagram.name;\n  }\n  public isInstaValid() {\n    this.validInsta = (this.instagram) ? (this.reg.test(this.instagram)) ? true : false : false;\n  }\n\n  clearSelectedInsta() {\n    this.filterInstagram().map((data) => {\n      data.selected = false;\n      this.userI = '';\n    });\n  }\n\n  filterInstagram() {\n    let c: any[] = [];\n    // tslint:disable-next-line:no-shadowed-variable\n    c = this.usersname.filter(c => c.name.substring(0, this.instagram.length) === this.instagram.substring(0, this.instagram.length));\n    if (c.length > 1) {\n      c.reverse();\n      c.filter((elem, index, self) => index === self.indexOf(elem));\n      while (c[0].name === c[c.length - 1].name && c.length > 1) {\n        c.pop();\n      }\n    }\n    // tslint:disable-next-line:no-shadowed-variable\n    return c.filter(c => c.name.substring(0, this.instagram.length) === this.instagram.substring(0, this.instagram.length));\n  }\n\n  combo() {\n    const teste = (this.categories.length) - 1;\n    let i = 0;\n    const cat: any[] = [];\n    const testecat: any[] = [];\n    let c;\n    let scat: any[] = [];\n    for (c = 0; c <= teste; c++) {\n      cat[c] = this.categories[c].value.split(' - ');\n    }\n    for (c = 0; c < teste; c++) {\n      testecat[c] = cat[c][0];\n    }\n    this.comboCategories[i] = testecat[0];\n    for (c = 0; c <= teste; c++) {\n      if (this.comboCategories[i] !== testecat[c]) {\n        this.comboCategories.push(testecat[c]);\n        i = i + 1;\n      }\n    }\n    this.comboCategories.pop();\n    const teste2 = this.comboCategories.length - 1;\n\n    for (i = 0; i <= teste2; i++) {\n      scat = [];\n      let j = 0;\n      for (c = 0; c <= teste; c++) {\n        if (cat[c][0] === this.comboCategories[i]) {\n          scat[j] = cat[c][1];\n          j++;\n        }\n        this.subcategories[i] = scat;\n        this.subcategoriesData[i] = scat;\n      }\n    }\n    this.filterCategory();\n    this.filterSubCategory();\n  }\n\n  filterSubCategories() {\n    const re = new RegExp(this.subcategory, 'gi');\n    let j = 0;\n    let subcat: any[] = [];\n\n    if (this.category !== null) {\n      for (j; j < this.comboCategories.length; j++) {\n        if (this.category === this.comboCategories[j]) {\n          subcat = [];\n          subcat = this.subcategories[j];\n        }\n      }\n    }\n    return subcat.filter(c => c.toString().toLowerCase().search(re) > -1);\n  }\n\n  setSubCategory(subcategory: any) {\n    const box: HTMLSelectElement = document.getElementById('subcategory') as HTMLSelectElement;\n    this.subcategory = box.options[box.selectedIndex].text;\n    this.autoCompleteSubCategoryOpen = false;\n    this.validSubCategory = true;\n  }\n\n  filterCategory() {\n    const select: HTMLSelectElement = document.getElementById('category') as HTMLSelectElement;\n    if (this.comboCategories && this.comboCategories.length) {\n      this.comboCategories.map(value => {\n        select.options[select.options.length] = new Option(value.toString());\n      });\n    }\n  }\n\n  filterSubCategory() {\n    const select: HTMLSelectElement = document.getElementById('subcategory') as HTMLSelectElement;\n    const index = this.comboCategories.indexOf(this.category, 0);\n    if (this.subcategoriesData[index]) {\n      this.subcategoriesData[index].map(value => {\n        select.options[select.options.length] = new Option(value.toString());\n      });\n    }\n  }\n\neditProfileMixpanel() {\n    mixpanel.track(\"Edit_Profile\", {\n\n    });\n\n    console.log(\"Edit Profile\")\n  }\n\n  handleSuccessCloseModal() {\n    this.editProfileMixpanel()\n    this.showLogoModal = false\n    this.toastMessage('success', 'Logo atualizada com sucesso')\n    window.location.reload();\n  }\n\n  handleSuccessCloseModalVitrine() {\n    this.editProfileMixpanel()\n    this.showVitrineModal = false\n    this.toastMessage('success', 'Capa atualizada com sucesso')\n    window.location.reload();\n  }\n  clearSubcategory() {\n    this.subcategories = [];\n    const category = this.categories.find(category => category.name === this.category);\n\n    if (category) {\n      this.subcategories = category.subcategories;\n    }\n    // const select: HTMLSelectElement = document.getElementById('subcategory') as HTMLSelectElement;\n    // for (let i = select.options.length; i !== 0; i--) {\n    //   select.options.remove(i);\n    // }\n    // this.filterSubCategory();\n  }\n\n  public onSelectAllPaymentsChange(event) {\n    this.payments.forEach((payment) => {\n      payment.methods.forEach(method => method.active = event.target.checked);\n    });\n  }\n\n  public openInstagramAuth() {\n    window.open(environment.getInstagramAuthUrl(), '_self');\n  }\n\n  public async optOutInstagram() {\n    await this.userService.optOutInstagram();\n    this.userService.getSocialMedia()\n      .then(data => {\n        data.forEach(social => {\n          this.setSocialMedia(social);\n        });\n      });\n  }\n\n  async getInstagramCode() {\n    const code = this.$route.query.code;\n    if (code) {\n      await this.userService.authorizeInstagram(code);\n      this.userService.getSocialMedia()\n        .then(data => {\n          data.forEach(social => {\n            this.setSocialMedia(social);\n          });\n        });\n    }\n  }\n\n  private toastMessage(type: SweetAlertType, title: string) {\n    VueSimpleAlert.fire({\n      type,\n      title,\n      toast: true,\n      position: 'top-end',\n      showConfirmButton: false,\n      timer: 3000,\n      onOpen: (toast) => {\n        toast.addEventListener('mouseenter', Swal.stopTimer),\n          toast.addEventListener('mouseleave', Swal.resumeTimer);\n      },\n    });\n  }\n}\n"],"sourceRoot":""}]}