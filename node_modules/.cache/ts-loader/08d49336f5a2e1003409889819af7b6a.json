{"remainingRequest":"/home/aline/AstaPrecifique/node_modules/babel-loader/lib/index.js!/home/aline/AstaPrecifique/node_modules/ts-loader/index.js??ref--13-2!/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/aline/AstaPrecifique/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/AstaPrecifique/src/components/product-modal/ProductModal.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/AstaPrecifique/src/components/product-modal/ProductModal.vue","mtime":1696439584633},{"path":"/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/AstaPrecifique/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/AstaPrecifique/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/AstaPrecifique/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvYWxpbmUvQXN0YVByZWNpZmlxdWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9ob21lL2FsaW5lL0FzdGFQcmVjaWZpcXVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUvYWxpbmUvQXN0YVByZWNpZmlxdWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvaG9tZS9hbGluZS9Bc3RhUHJlY2lmaXF1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9ob21lL2FsaW5lL0FzdGFQcmVjaWZpcXVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tICJ0c2xpYiI7CmltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgVnVlIH0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7CmltcG9ydCBTd2FsIGZyb20gInN3ZWV0YWxlcnQyIjsKaW1wb3J0IFZ1ZVNpbXBsZUFsZXJ0IGZyb20gInZ1ZS1zaW1wbGUtYWxlcnQiOwppbXBvcnQgeyBWTW9uZXkgfSBmcm9tICJ2LW1vbmV5IjsKaW1wb3J0IHByb2R1Y3RzU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL3Byb2R1Y3RzLnNlcnZpY2UiOwppbXBvcnQgUHJvZHVjdEltYWdlQ2Fyb3VzZWwgZnJvbSAiLi9wcm9kdWN0LWltYWdlLWNhcm91c2VsL1Byb2R1Y3RJbWFnZUNhcm91c2VsLnZ1ZSI7CmltcG9ydCBQcm9kdWN0TG9hZGluZ1NjcmVlbiBmcm9tICIuL3Byb2R1Y3QtbG9hZGluZy1zY3JlZW4vUHJvZHVjdExvYWRpbmdTY3JlZW4udnVlIjsKCnZhciBQcm9kdWN0TW9kYWwgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWUpIHsKICBfaW5oZXJpdHMoUHJvZHVjdE1vZGFsLCBfVnVlKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihQcm9kdWN0TW9kYWwpOwoKICBmdW5jdGlvbiBQcm9kdWN0TW9kYWwoKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFByb2R1Y3RNb2RhbCk7CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKTsKICAgIF90aGlzLnByb2R1Y3RTZWxlY3RlZCA9IF90aGlzLnByb3BQcm9kdWN0U2VsZWN0ZWQ7CiAgICBfdGhpcy5jYXRlZ29yeVNlbGVjdGVkID0gX3RoaXMucHJvcENhdGVnb3J5U2VsZWN0ZWQ7CiAgICBfdGhpcy5jYXRlZ29yaWVzID0gX3RoaXMucHJvcENhdGVnb3JpZXM7CiAgICBfdGhpcy5zaG93Q3JlYXRlUHJvZHVjdCA9IF90aGlzLnByb3BDcmVhdGVQcm9kdWN0OwogICAgX3RoaXMuc2hvd0VkaXRQcm9kdWN0ID0gX3RoaXMucHJvcEVkaXRQcm9kdWN0OwogICAgX3RoaXMuc2hvd0NyZWF0ZVNlcnZpY2UgPSBfdGhpcy5wcm9wSXNTZXJ2aWNlOwogICAgX3RoaXMuc2hvd0RlbGV0ZVByb2R1Y3QgPSBmYWxzZTsKICAgIF90aGlzLnNob3dQdWJsaXNoZWRQcm9kdWN0ID0gZmFsc2U7CiAgICBfdGhpcy5zaG93RWRpdEltYWdlID0gZmFsc2U7CiAgICBfdGhpcy5zaG93SW1wb3J0SW1hZ2UgPSBmYWxzZTsKICAgIF90aGlzLnNob3dDbG9zZU1vZGFsID0gZmFsc2U7CiAgICBfdGhpcy5jYW5SZW9yZGVySW1hZ2VzID0gdHJ1ZTsKICAgIF90aGlzLmlzUHVibGlzaGVkID0gX3RoaXMucHJvZHVjdFNlbGVjdGVkID8gIV90aGlzLnByb2R1Y3RTZWxlY3RlZC5pc19wdWJsaXNoZWQgOiBmYWxzZTsKICAgIF90aGlzLnRpdGxlID0gIiI7CiAgICBfdGhpcy5zdWJ0aXRsZSA9ICIiOwogICAgX3RoaXMudGl0bGVCdG4gPSAiIjsKICAgIF90aGlzLmNhdGVnb3J5R3VpZCA9ICIiOwogICAgX3RoaXMucmVzcG9uc2VFcnJvciA9IHsKICAgICAgbmFtZTogIiIsCiAgICAgIGlzTmFtZTogZmFsc2UsCiAgICAgIGRlc2NyaXB0aW9uOiAiIiwKICAgICAgb3JkZXJpbmc6ICIiLAogICAgICBjYXRlZ29yeTogIiIsCiAgICAgIHZhcmlhbnRWYWx1ZTogW10KICAgIH07CiAgICBfdGhpcy5maWVsZEVycm9ycyA9IHsKICAgICAgbmFtZTogIiIsCiAgICAgIGRlc2NyaXB0aW9uOiAiIgogICAgfTsKICAgIF90aGlzLnNlbGVjdGVkSW1hZ2UgPSAiIjsKICAgIF90aGlzLm5vdGlmeSA9ICIiOwogICAgX3RoaXMubXVsdGlwbGVJbWFnZXMgPSBbXTsKICAgIF90aGlzLmhhc0VkaXRJbWFnZSA9IGZhbHNlOwogICAgX3RoaXMucG9zaXRpb25TZWxlY3RlZCA9IDA7CiAgICBfdGhpcy5lZGl0SW1hZ2UgPSBmYWxzZTsKICAgIF90aGlzLnByaWNlVG9NYXRjaCA9IGZhbHNlOwogICAgX3RoaXMuaGFzQ2F0ZWdvcnlTZWxlY3RlZCA9IHRydWU7CiAgICBfdGhpcy5pbnB1dExlbmd0aENvdW50ZXIgPSA1MTI7CiAgICBfdGhpcy5sb2dvSW5wdXQgPSAiIjsKICAgIF90aGlzLmNvbmZpcm1lRGVsZXRlTW9kYWxDb250cm9sbGVyID0gZmFsc2U7CiAgICBfdGhpcy5wcm9kdWN0SWQgPSAiIjsKICAgIF90aGlzLmxvYWRpbmdDb250cm9sbGVyID0gZmFsc2U7CiAgICBfdGhpcy5jcmVhdGluZ1Byb2R1Y3QgPSBmYWxzZTsKICAgIF90aGlzLmZpbmFsSW1hZ2UgPSAiIjsKICAgIF90aGlzLnRleHRBcmVhTW9kZWwgPSAiIjsKICAgIF90aGlzLmlzU2FsZSA9IGZhbHNlOwogICAgX3RoaXMuaGFzUmVvcmRlcmluZyA9IGZhbHNlOwogICAgX3RoaXMuaGFzQWRkSW1hZ2UgPSBmYWxzZTsKICAgIF90aGlzLmhhc1JlbW92YWwgPSBmYWxzZTsKICAgIF90aGlzLmluZGV4SW1hZ2VzID0gW107CiAgICBfdGhpcy5pbmRleEltYWdlc1JlbW92ZSA9IFtdOwogICAgX3RoaXMuY3VycmVudEltYWdlcyA9IFtdOwogICAgX3RoaXMucHJldmlvdXNJbWFnZXMgPSBbXTsKICAgIF90aGlzLm1vbmV5ID0gewogICAgICBkZWNpbWFsOiAiLCIsCiAgICAgIHRob3VzYW5kczogIi4iLAogICAgICBwcmVmaXg6ICJSJCAiLAogICAgICBzdWZmaXg6ICIiLAogICAgICBwcmVjaXNpb246IDIsCiAgICAgIG1hc2tlZDogZmFsc2UKICAgIH07CiAgICBfdGhpcy5wcm9kdWN0U2VydmljZSA9IG5ldyBwcm9kdWN0c1NlcnZpY2UoKTsKCiAgICBfdGhpcy5pc0VtcHR5ID0gZnVuY3Rpb24gKGFycmF5KSB7CiAgICAgIHJldHVybiBhcnJheS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbSAhPT0gIiI7CiAgICAgIH0pLmxlbmd0aDsKICAgIH07CgogICAgX3RoaXMuZGVsYXkgPSBmdW5jdGlvbiAobXMpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICByZXR1cm4gc2V0VGltZW91dChyZXMsIG1zKTsKICAgICAgfSk7CiAgICB9OwoKICAgIF90aGlzLmlzTW9iaWxlID0gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gQm9vbGVhbigvQW5kcm9pZHx3ZWJPU3xpUGhvbmV8aVBhZHxpUG9kfEJsYWNrQmVycnl8SUVNb2JpbGV8T3BlcmEgTWluaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpOwogICAgfTsKCiAgICBfdGhpcy5zaG93Q3JvcHBlciA9IGZhbHNlOwogICAgX3RoaXMuZGVzdGluYXRpb24gPSAiIjsKICAgIF90aGlzLmltYWdlVG9Dcm9wID0gIiI7CiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoUHJvZHVjdE1vZGFsLCBbewogICAga2V5OiAiY3JlYXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgICAgdmFyIGxvZ2dlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJsb2dnZWRVc2VyIik7CiAgICAgIHRoaXMubG9nZ2VkVXNlciA9IEpTT04ucGFyc2UobG9nZ2VkKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJtb3VudGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgICB0aGlzLnNldEluZm9Gb3JtKCk7CiAgICAgIHRoaXMubXVsdGlwbGVJbWFnZXMgPSBbIjEiLCAiMiIsICIzIiwgIjQiXTsKICAgICAgdGhpcy5zZXRJbWFnZSgpOwogICAgICB0aGlzLnNlbGVjdENhdGVnb3J5VHlwZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldEltYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRJbWFnZSgpIHsKICAgICAgdmFyIF90aGlzJHByb2R1Y3RTZWxlY3RlZDsKCiAgICAgIGlmICh0aGlzLnByb2R1Y3RTZWxlY3RlZCAmJiAoX3RoaXMkcHJvZHVjdFNlbGVjdGVkID0gdGhpcy5wcm9kdWN0U2VsZWN0ZWQuaW1hZ2VfbGlzdCkgIT09IG51bGwgJiYgX3RoaXMkcHJvZHVjdFNlbGVjdGVkICE9PSB2b2lkIDAgJiYgX3RoaXMkcHJvZHVjdFNlbGVjdGVkLmxlbmd0aCkgewogICAgICAgIHRoaXMuc2VsZWN0ZWRJbWFnZSA9IHRoaXMucHJvZHVjdFNlbGVjdGVkLmltYWdlX2xpc3RbMF0uaW1hZ2VfdXJsID8gdGhpcy5wcm9kdWN0U2VsZWN0ZWQuaW1hZ2VfbGlzdFswXS5pbWFnZV91cmwgOiAiIjsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNldEluZm9Gb3JtIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRJbmZvRm9ybSgpIHsKICAgICAgaWYgKHRoaXMuc2hvd0NyZWF0ZVByb2R1Y3QgJiYgIXRoaXMuc2hvd0NyZWF0ZVNlcnZpY2UpIHsKICAgICAgICB0aGlzLnNldFRpdGxlcygiQ2FkYXN0cmFyIFByb2R1dG8iLCAiSW5zaXJhIGluZm9ybWHDp8O1ZXMgZSBjYWRhc3RyZSBzZXVzIHByb2R1dG9zIiwgIlNhbHZhciBQcm9kdXRvIik7CiAgICAgICAgdGhpcy52YWxpZGF0ZUluZm9zQ2F0ZWdvcnkoKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnNob3dDcmVhdGVQcm9kdWN0ICYmIHRoaXMuc2hvd0NyZWF0ZVNlcnZpY2UpIHsKICAgICAgICB0aGlzLnNldFRpdGxlcygiQ2FkYXN0cmFyIFNlcnZpw6dvIiwgIkluc2lyYSBpbmZvcm1hw6fDtWVzIGUgY2FkYXN0cmUgc2V1cyBzZXJ2acOnb3MiLCAiU2FsdmFyIFNlcnZpw6dvIik7CiAgICAgICAgdGhpcy52YWxpZGF0ZUluZm9zQ2F0ZWdvcnkoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXRoaXMuc2hvd0NyZWF0ZVNlcnZpY2UpIHsKICAgICAgICAgIHRoaXMuc2V0VGl0bGVzKCJFZGl0YXIgUHJvZHV0byIsICJFZGl0ZSBhcyBpbmZvcm1hw6fDtWVzIGRvIHNldSBwcm9kdXRvIiwgIkF0dWFsaXphciBwcm9kdXRvIik7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNob3dDcmVhdGVTZXJ2aWNlKSB7CiAgICAgICAgICB0aGlzLnNldFRpdGxlcygiRWRpdGFyIFNlcnZpw6dvIiwgIkVkaXRlIGFzIGluZm9ybWHDp8O1ZXMgZG8gc2V1IHNlcnZpw6dvIiwgIkF0dWFsaXphciBzZXJ2acOnbyIpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy52YWxpZGF0ZUluZm9zQ2F0ZWdvcnkoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNldFRpdGxlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VGl0bGVzKHRpdGxlLCBzdWJ0aXRsZSwgdGl0bGVCdG4pIHsKICAgICAgdGhpcy50aXRsZSA9IHRpdGxlOwogICAgICB0aGlzLnN1YnRpdGxlID0gc3VidGl0bGU7CiAgICAgIHRoaXMudGl0bGVCdG4gPSB0aXRsZUJ0bjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZWxlY3RlZENhdGVnb3J5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3RlZENhdGVnb3J5KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpcywKICAgICAgICAgIF90aGlzJGNhdGVnb3J5U2VsZWN0ZTsKCiAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCA9IHRoaXMuY2F0ZWdvcmllcy5maW5kKGZ1bmN0aW9uIChjYXRlZ29yeSkgewogICAgICAgIHJldHVybiBjYXRlZ29yeS5ndWlkID09PSBfdGhpczIuY2F0ZWdvcnlHdWlkOwogICAgICB9KTsKCiAgICAgIGlmICgoX3RoaXMkY2F0ZWdvcnlTZWxlY3RlID0gdGhpcy5jYXRlZ29yeVNlbGVjdGVkKSAhPT0gbnVsbCAmJiBfdGhpcyRjYXRlZ29yeVNlbGVjdGUgIT09IHZvaWQgMCAmJiBfdGhpcyRjYXRlZ29yeVNlbGVjdGUudmFyaWFudF9zdGF0dXMpIHsKICAgICAgICB0aGlzLmNyZWF0ZVByb2R1Y3RTa3VzKHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZWxlY3RDYXRlZ29yeVR5cGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdENhdGVnb3J5VHlwZSgpIHsKICAgICAgaWYgKHRoaXMuc2hvd0NyZWF0ZVNlcnZpY2UpIHsKICAgICAgICB0aGlzLmNhdGVnb3JpZXMgPSB0aGlzLmNhdGVnb3JpZXMuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgcmV0dXJuIHZhbHVlLnJlZ2lzdGVyX3R5cGUgPT09ICJTZXJ2aWNlIjsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNhdGVnb3JpZXMgPSB0aGlzLmNhdGVnb3JpZXMuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICAgICAgcmV0dXJuIHZhbHVlLnJlZ2lzdGVyX3R5cGUgPT09ICJQcm9kdWN0IjsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZVByb2R1Y3RTa3VzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVQcm9kdWN0U2t1cyhjYXRlZ29yeVNlbGVjdGVkKSB7CiAgICAgIHZhciBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQyLAogICAgICAgICAgX3RoaXMkcHJvZHVjdFNlbGVjdGVkMywKICAgICAgICAgIF90aGlzMyA9IHRoaXMsCiAgICAgICAgICBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ0OwoKICAgICAgKF90aGlzJHByb2R1Y3RTZWxlY3RlZDIgPSB0aGlzLnByb2R1Y3RTZWxlY3RlZCkgPT09IG51bGwgfHwgX3RoaXMkcHJvZHVjdFNlbGVjdGVkMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcHJvZHVjdFNlbGVjdGVkMi5za3VzLnNwbGljZSgwLCAoX3RoaXMkcHJvZHVjdFNlbGVjdGVkMyA9IHRoaXMucHJvZHVjdFNlbGVjdGVkKSA9PT0gbnVsbCB8fCBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQzLnNrdXMubGVuZ3RoKTsKICAgICAgY2F0ZWdvcnlTZWxlY3RlZCAmJiBjYXRlZ29yeVNlbGVjdGVkLnZhcmlhbnRfdmFsdWUubGVuZ3RoID8gY2F0ZWdvcnlTZWxlY3RlZC52YXJpYW50X3ZhbHVlLm1hcChmdW5jdGlvbiAodmFsdWVzKSB7CiAgICAgICAgdmFyIF90aGlzMyRwcm9kdWN0U2VsZWN0ZTsKCiAgICAgICAgcmV0dXJuIChfdGhpczMkcHJvZHVjdFNlbGVjdGUgPSBfdGhpczMucHJvZHVjdFNlbGVjdGVkKSA9PT0gbnVsbCB8fCBfdGhpczMkcHJvZHVjdFNlbGVjdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzMyRwcm9kdWN0U2VsZWN0ZS5za3VzLnB1c2goX3RoaXMzLnJlc2V0U2t1cyh2YWx1ZXMudmFsdWUpKTsKICAgICAgfSkgOiAoX3RoaXMkcHJvZHVjdFNlbGVjdGVkNCA9IHRoaXMucHJvZHVjdFNlbGVjdGVkKSA9PT0gbnVsbCB8fCBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ0LnNrdXMucHVzaCh0aGlzLnJlc2V0U2t1cygpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXNldFNrdXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0U2t1cygpIHsKICAgICAgdmFyIHZhbHVlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAiIjsKICAgICAgcmV0dXJuIHsKICAgICAgICBjb2RlOiAiIiwKICAgICAgICBndWlkOiAiIiwKICAgICAgICBuZXdfcHJpY2U6ICIiLAogICAgICAgIG9sZF9wcmljZTogIiIsCiAgICAgICAgdnRleF9pZDogMCwKICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgaW5fcHJvbW90aW9uOiBmYWxzZSwKICAgICAgICBpc19za3VzOiBmYWxzZSwKICAgICAgICBzdGF0dXM6IHRydWUKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWxpZGF0ZUluZm9zQ2F0ZWdvcnkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbGlkYXRlSW5mb3NDYXRlZ29yeSgpIHsKICAgICAgaWYgKHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCkgewogICAgICAgIHRoaXMuY2F0ZWdvcnlHdWlkID0gdGhpcy5jYXRlZ29yeVNlbGVjdGVkLmd1aWQ7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRQcm9kdWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRQcm9kdWN0KCkgewogICAgICB2YXIgX3RoaXMkcHJvZHVjdFNlbGVjdGVkNSwgX3RoaXMkcHJvZHVjdFNlbGVjdGVkNiwgX3RoaXMkcHJvZHVjdFNlbGVjdGVkNywgX3RoaXMkcHJvZHVjdFNlbGVjdGVkODsKCiAgICAgIHJldHVybiB7CiAgICAgICAgY2F0ZWdvcnlfZ3VpZDogdGhpcy5jYXRlZ29yeUd1aWQsCiAgICAgICAgbmFtZTogdGhpcy5wcm9kdWN0U2VsZWN0ZWQgPyB0aGlzLnByb2R1Y3RTZWxlY3RlZC5uYW1lIDogIiIsCiAgICAgICAgZGVzY3JpcHRpb246IHRoaXMucHJvZHVjdFNlbGVjdGVkID8gKF90aGlzJHByb2R1Y3RTZWxlY3RlZDUgPSB0aGlzLnByb2R1Y3RTZWxlY3RlZCkgPT09IG51bGwgfHwgX3RoaXMkcHJvZHVjdFNlbGVjdGVkNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcHJvZHVjdFNlbGVjdGVkNS5kZXNjcmlwdGlvbiA6ICIiLAogICAgICAgIG9yZGVyaW5nOiB0aGlzLnNob3dDcmVhdGVQcm9kdWN0ID8gMTAwIDogKF90aGlzJHByb2R1Y3RTZWxlY3RlZDYgPSB0aGlzLnByb2R1Y3RTZWxlY3RlZCkgPT09IG51bGwgfHwgX3RoaXMkcHJvZHVjdFNlbGVjdGVkNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcHJvZHVjdFNlbGVjdGVkNi5vcmRlcmluZywKICAgICAgICBpc19wdWJsaXNoZWQ6IHRoaXMuc2hvd0NyZWF0ZVByb2R1Y3QgPyB0cnVlIDogKF90aGlzJHByb2R1Y3RTZWxlY3RlZDcgPSB0aGlzLnByb2R1Y3RTZWxlY3RlZCkgPT09IG51bGwgfHwgX3RoaXMkcHJvZHVjdFNlbGVjdGVkNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcHJvZHVjdFNlbGVjdGVkNy5pc19wdWJsaXNoZWQsCiAgICAgICAgdmFyaWFudF92YWx1ZTogdGhpcy5zZXRWYXJpYW50cygpLAogICAgICAgIHJlZ2lzdGVyX3R5cGU6IHRoaXMuc2V0UmVnaXN0ZXJUeXBlKCksCiAgICAgICAgcHJpY2VfdG9fbWF0Y2g6IHRoaXMucHJpY2VUb01hdGNoID8gdHJ1ZSA6IChfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ4ID0gdGhpcy5wcm9kdWN0U2VsZWN0ZWQpID09PSBudWxsIHx8IF90aGlzJHByb2R1Y3RTZWxlY3RlZDggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHByb2R1Y3RTZWxlY3RlZDgucHJpY2VfdG9fbWF0Y2gKICAgICAgfTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRWYXJpYW50cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VmFyaWFudHMoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ5LAogICAgICAgICAgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciB2YXJpYW50cyA9IFtdOwogICAgICB0aGlzLnJlc3BvbnNlRXJyb3IudmFyaWFudFZhbHVlID0gW107CiAgICAgIChfdGhpcyRwcm9kdWN0U2VsZWN0ZWQ5ID0gdGhpcy5wcm9kdWN0U2VsZWN0ZWQpID09PSBudWxsIHx8IF90aGlzJHByb2R1Y3RTZWxlY3RlZDkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHByb2R1Y3RTZWxlY3RlZDkuc2t1cy5mb3JFYWNoKGZ1bmN0aW9uICh2YWx1ZXMpIHsKICAgICAgICB2YWx1ZXMuc3RhdHVzICYmIHZhbHVlcy5vbGRfcHJpY2UgPT09ICJSJCAwLDAwIiA/IF90aGlzNC5yZXNwb25zZUVycm9yLnZhcmlhbnRWYWx1ZS5wdXNoKCJBIHZhcmlhbnRlIG7Do28gdGVtIHByZcOnbyBlIGVzdMOhIGF0aXZhZGEiKSA6IF90aGlzNC5yZXNwb25zZUVycm9yLnZhcmlhbnRWYWx1ZS5wdXNoKCIiKTsKICAgICAgICBfdGhpczQuc2hvd0NyZWF0ZVByb2R1Y3QgPyB2YXJpYW50cy5wdXNoKHsKICAgICAgICAgIGNvZGU6IHZhbHVlcy5jb2RlID8gdmFsdWVzLmNvZGUgOiAiIiwKICAgICAgICAgIHZhbHVlOiB2YWx1ZXMudmFsdWUgPyB2YWx1ZXMudmFsdWUgOiAiIiwKICAgICAgICAgIG5ld19wcmljZTogdmFsdWVzLm5ld19wcmljZSA/IHBhcnNlRmxvYXQoX3RoaXM0LnZhbGlkYXRlQ3VycmVuY3kodmFsdWVzLm5ld19wcmljZS50b1N0cmluZygpKSkgOiBwYXJzZUZsb2F0KF90aGlzNC52YWxpZGF0ZUN1cnJlbmN5KHZhbHVlcy5vbGRfcHJpY2UudG9TdHJpbmcoKSkpLAogICAgICAgICAgb2xkX3ByaWNlOiBwYXJzZUZsb2F0KF90aGlzNC52YWxpZGF0ZUN1cnJlbmN5KHZhbHVlcy5vbGRfcHJpY2UudG9TdHJpbmcoKSkpLAogICAgICAgICAgc3RhdHVzOiB2YWx1ZXMuc3RhdHVzID8gdmFsdWVzLnN0YXR1cyA6IGZhbHNlCiAgICAgICAgfSkgOiB2YXJpYW50cy5wdXNoKHsKICAgICAgICAgIGd1aWQ6IHZhbHVlcy5ndWlkID8gdmFsdWVzLmd1aWQgOiAiIiwKICAgICAgICAgIGNvZGU6IHZhbHVlcy5jb2RlID8gdmFsdWVzLmNvZGUgOiAiIiwKICAgICAgICAgIHZhbHVlOiB2YWx1ZXMudmFsdWUgPyB2YWx1ZXMudmFsdWUgOiAiIiwKICAgICAgICAgIG5ld19wcmljZTogdmFsdWVzLmluX3Byb21vdGlvbiAmJiB2YWx1ZXMubmV3X3ByaWNlID8gcGFyc2VGbG9hdChfdGhpczQudmFsaWRhdGVDdXJyZW5jeSh2YWx1ZXMubmV3X3ByaWNlLnRvU3RyaW5nKCkpKSA6IHBhcnNlRmxvYXQoX3RoaXM0LnZhbGlkYXRlQ3VycmVuY3kodmFsdWVzLm9sZF9wcmljZS50b1N0cmluZygpKSksCiAgICAgICAgICBvbGRfcHJpY2U6IHBhcnNlRmxvYXQoX3RoaXM0LnZhbGlkYXRlQ3VycmVuY3kodmFsdWVzLm9sZF9wcmljZS50b1N0cmluZygpKSksCiAgICAgICAgICBzdGF0dXM6IHZhbHVlcy5zdGF0dXMgPyB2YWx1ZXMuc3RhdHVzIDogZmFsc2UKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHJldHVybiB2YXJpYW50czsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRSZWdpc3RlclR5cGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFJlZ2lzdGVyVHlwZSgpIHsKICAgICAgaWYgKHRoaXMuc2hvd0NyZWF0ZVNlcnZpY2UpIHsKICAgICAgICByZXR1cm4gIlNlcnZpY2UiOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAiUHJvZHVjdCI7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWxpZGF0ZVByb2R1Y3RGaWVsZHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbGlkYXRlUHJvZHVjdEZpZWxkcygpIHsKICAgICAgdmFyIGVycm9ycyA9IHsKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgICAgY2F0ZWdvcnk6ICIiCiAgICAgIH07CiAgICAgIHZhciBpbnB1dHNBcmVWYWxpZCA9IHRydWU7CgogICAgICBpZiAoIXRoaXMucHJvZHVjdFNlbGVjdGVkLm5hbWUpIHsKICAgICAgICBlcnJvcnMubmFtZSA9ICJPIHNldSBQUk9EVVRPIHByZWNpc2EgdGVyIHVtIG5vbWUiOwogICAgICAgIGlucHV0c0FyZVZhbGlkID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5wcm9kdWN0U2VsZWN0ZWQuZGVzY3JpcHRpb24pIHsKICAgICAgICBlcnJvcnMuZGVzY3JpcHRpb24gPSAiTyBzZXUgUFJPRFVUTyBwcmVjaXNhIHRlciB1bWEgZGVzY3Jpw6fDo28iOwogICAgICAgIGlucHV0c0FyZVZhbGlkID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5oYXNDYXRlZ29yeVNlbGVjdGVkKSB7CiAgICAgICAgZXJyb3JzLmNhdGVnb3J5ID0gIlZvY8OqIHByZWNpc2Egc2VsZWNpb25hciB1bWEgY2F0ZWdvcmlhIHBhcmEgbyBzZXUgUFJPRFVUTyI7CiAgICAgICAgaW5wdXRzQXJlVmFsaWQgPSBmYWxzZTsKICAgICAgfQoKICAgICAgdGhpcy5zZXRSZXNwb25zZUVycm9yKGVycm9ycyk7CiAgICAgIHJldHVybiBpbnB1dHNBcmVWYWxpZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ0b01hdGNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b01hdGNoKHByb2R1Y3RTZWxlY3RlZCkgewogICAgICB0aGlzLnByaWNlVG9NYXRjaCA9IHByb2R1Y3RTZWxlY3RlZDsKCiAgICAgIGlmICh0aGlzLnByaWNlVG9NYXRjaCkgewogICAgICAgIHRoaXMucHJvZHVjdFNlbGVjdGVkLnNrdXNbMF0ub2xkX3ByaWNlID0gIlIkIDAsMDEiOwogICAgICAgIHRoaXMucHJvZHVjdFNlbGVjdGVkLnNrdXNbMF0ubmV3X3ByaWNlID0gIlIkIDAsMDEiOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucHJvZHVjdFNlbGVjdGVkLnNrdXNbMF0ub2xkX3ByaWNlID0gIlIkIDAsMDAiOwogICAgICAgIHRoaXMucHJvZHVjdFNlbGVjdGVkLnNrdXNbMF0ubmV3X3ByaWNlID0gIlIkIDAsMDAiOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZVByb2R1Y3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNhdmVQcm9kdWN0KCkgewogICAgICB0aGlzLmhhc0NhdGVnb3J5KCk7CgogICAgICBpZiAodGhpcy5zaG93Q3JlYXRlUHJvZHVjdCAmJiAhdGhpcy52YWxpZGF0ZVByb2R1Y3RGaWVsZHMoKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucHJvZHVjdFNlbGVjdGVkICYmIHRoaXMuY2F0ZWdvcnlHdWlkKSB7CiAgICAgICAgdGhpcy5zaG93Q3JlYXRlUHJvZHVjdCA/IHRoaXMuY3JlYXRlUHJvZHVjdCh0aGlzLnNldFByb2R1Y3QoKSkgOiB0aGlzLmVkaXRQcm9kdWN0KHRoaXMuc2V0UHJvZHVjdCgpLCB0aGlzLnByb2R1Y3RTZWxlY3RlZC5ndWlkKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZVByb2R1Y3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9jcmVhdGVQcm9kdWN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHByb2R1Y3QpIHsKICAgICAgICB2YXIgcmVzcG9uc2UsIGRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEodGhpcy5pc0VtcHR5KHRoaXMucmVzcG9uc2VFcnJvci52YXJpYW50VmFsdWUpIDwgMSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmdDb250cm9sbGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRpbmdQcm9kdWN0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvZHVjdFNlcnZpY2UuY3JlYXRlUHJvZHVjdChwcm9kdWN0LCB0aGlzLmNhdGVnb3J5R3VpZCk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVsYXkoNTAwKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgdGhpcy5jcmVhdGluZ1Byb2R1Y3QgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlbGF5KDUwMCk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBpZiAoIShyZXNwb25zZS5zdGF0dXMgPT09IDIwMikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDIwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgZGF0YSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBwcm9kdWN0LnZhcmlhbnRfdmFsdWUuZm9yRWFjaChmdW5jdGlvbiAodmFyaWFudCwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhcmlhbnQuZ3VpZCA9IGRhdGEuc2t1c1tpbmRleF07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxODsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVkaXRQcm9kdWN0KHByb2R1Y3QsIGRhdGEuZ3VpZCk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrU3RhdHVzT2ZQcm9kdWN0KHByb2R1Y3QsIHJlc3BvbnNlKTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VQcm9kdWN0TW9kYWwoKTsKCiAgICAgICAgICAgICAgICBpZiAocHJvZHVjdC5yZWdpc3Rlcl90eXBlID09PSAiU2VydmljZSIpIHsKICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgICB0aGlzLnRvYXN0TWVzc2FnZSgic3VjY2VzcyIsICJQcm9udG8sIHNldSBTZXJ2aVx4RTdvIGpceEUxIGZvaSAiLmNvbmNhdCh0aGlzLnNob3dDcmVhdGVQcm9kdWN0ID8gImNyaWFkbyIgOiAiYXR1YWxpemFkbyIsICIgY29tIHN1Y2Vzc28uIikpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgICB0aGlzLnRvYXN0TWVzc2FnZSgic3VjY2VzcyIsICJQcm9udG8sIHNldSBQcm9kdXRvIGpceEUxIGZvaSAiLmNvbmNhdCh0aGlzLnNob3dDcmVhdGVQcm9kdWN0ID8gImNyaWFkbyIgOiAiYXR1YWxpemFkbyIsICIgY29tIHN1Y2Vzc28uIikpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZ0NvbnRyb2xsZXIgPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBjcmVhdGVQcm9kdWN0KF94KSB7CiAgICAgICAgcmV0dXJuIF9jcmVhdGVQcm9kdWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjcmVhdGVQcm9kdWN0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAiaGFzQ2F0ZWdvcnkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhc0NhdGVnb3J5KCkgewogICAgICBpZiAodGhpcy5jYXRlZ29yeUd1aWQpIHsKICAgICAgICB0aGlzLmhhc0NhdGVnb3J5U2VsZWN0ZWQgPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5oYXNDYXRlZ29yeVNlbGVjdGVkID0gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAiZWRpdFByb2R1Y3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9lZGl0UHJvZHVjdCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIocHJvZHVjdCwgZ3VpZCkgewogICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nQ29udHJvbGxlciA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9kdWN0U2VydmljZS5lZGl0UHJvZHVjdChwcm9kdWN0LCBndWlkKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNoZWNrU3RhdHVzT2ZQcm9kdWN0KHByb2R1Y3QsIHJlc3BvbnNlLCBndWlkKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgdGhpcy5jbG9zZVByb2R1Y3RNb2RhbCgpOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nQ29udHJvbGxlciA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBlZGl0UHJvZHVjdChfeDIsIF94MykgewogICAgICAgIHJldHVybiBfZWRpdFByb2R1Y3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGVkaXRQcm9kdWN0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAib25VcGxvYWRQcm9ncmVzcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb25VcGxvYWRQcm9ncmVzcyhldmVudCwgcG9zaXRpb24pIHsKICAgICAgdmFyIHByb2dyZXNzID0gTWF0aC5yb3VuZChldmVudC5sb2FkZWQgKiAxMDAgLyBldmVudC50b3RhbCk7CgogICAgICBpZiAodGhpcy5wcm9kdWN0U2VsZWN0ZWQgJiYgdGhpcy5wcm9kdWN0U2VsZWN0ZWQuaW1hZ2VfbGlzdCkgewogICAgICAgIHRoaXMucHJvZHVjdFNlbGVjdGVkLmltYWdlX2xpc3RbcG9zaXRpb24gLSAxXS51cGxvYWRQcm9ncmVzcyA9IHByb2dyZXNzOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlSW1hZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF91cGRhdGVJbWFnZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQocHJvZHVjdEd1aWQsIHByb2R1Y3RTZWxlY3RlZCkgewogICAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEocHJvZHVjdFNlbGVjdGVkICYmIHByb2R1Y3RTZWxlY3RlZC5pbWFnZV9saXN0KSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9kdWN0U2VsZWN0ZWQuaW1hZ2VfbGlzdC5tYXAoZnVuY3Rpb24gKGltYWdlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczUucHJvZHVjdFNlcnZpY2UudXBsb2FkSW1hZ2UoewogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBpbWFnZS5wb3NpdGlvbiwKICAgICAgICAgICAgICAgICAgICAvLyBkZXNjcmlwdGlvbjogaW1hZ2UuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgICAgZGF0YTogaW1hZ2UuaW1hZ2VGaWxlLAogICAgICAgICAgICAgICAgICAgIG9uVXBsb2FkUHJvZ3Jlc3NDYWxsYmFjazogX3RoaXM1Lm9uVXBsb2FkUHJvZ3Jlc3MKICAgICAgICAgICAgICAgICAgfSwgcHJvZHVjdEd1aWQpOwogICAgICAgICAgICAgICAgfSkpLnRoZW4oIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LmdldENhdGVnb3JpZXMoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgICAgICAgICAgIH0pKSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBfdGhpczUubmV4dFN0YXR1c0Vycm9yKCJIb3V2ZSB1bSBlcnJvIGFvIGNhcnJlZ2FyIG9zIHByb2R1dG9zLiBGYXZvciB0ZW50YXIgbm92YW1lbnRlLiIpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHVwZGF0ZUltYWdlKF94NCwgX3g1KSB7CiAgICAgICAgcmV0dXJuIF91cGRhdGVJbWFnZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdXBkYXRlSW1hZ2U7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJ1cGxvYWRJbWFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3VwbG9hZEltYWdlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihwcm9kdWN0R3VpZCwgaW5kZXhJbWFnZXMsIHByb2R1Y3RTZWxlY3RlZCkgewogICAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKGluZGV4SW1hZ2VzLm1hcChmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgICAgICAgICAgaWYgKHByb2R1Y3RTZWxlY3RlZCAmJiBwcm9kdWN0U2VsZWN0ZWQuaW1hZ2VfbGlzdCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYucHJvZHVjdFNlcnZpY2UudXBsb2FkSW1hZ2UoewogICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHByb2R1Y3RTZWxlY3RlZC5pbWFnZV9saXN0W3ZhbHVlXS5wb3NpdGlvbiwKICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHByb2R1Y3RTZWxlY3RlZC5pbWFnZV9saXN0W3ZhbHVlXS5pbWFnZUZpbGUsCiAgICAgICAgICAgICAgICAgICAgICBvblVwbG9hZFByb2dyZXNzQ2FsbGJhY2s6IF90aGlzNi5vblVwbG9hZFByb2dyZXNzCiAgICAgICAgICAgICAgICAgICAgfSwgcHJvZHVjdEd1aWQpLnRoZW4oIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ1LnQwID0gcmVzcG9uc2Uuc3RhdHVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gX2NvbnRleHQ1LnQwID09PSA0MDAgPyAzIDogNjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNi51cGRhdGVJbWFnZShwcm9kdWN0R3VpZCwgcHJvZHVjdFNlbGVjdGVkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgiYnJlYWsiLCA2KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94OSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgfSgpKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBpbmRleEltYWdlcyA9IFtdOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB1cGxvYWRJbWFnZShfeDYsIF94NywgX3g4KSB7CiAgICAgICAgcmV0dXJuIF91cGxvYWRJbWFnZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gdXBsb2FkSW1hZ2U7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJjaGVja1N0YXR1c09mUHJvZHVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2NoZWNrU3RhdHVzT2ZQcm9kdWN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNyhwcm9kdWN0LCByZXNwb25zZSkgewogICAgICAgIHZhciBndWlkLAogICAgICAgICAgICBndWlkUHJvZHVjdCwKICAgICAgICAgICAgX2FyZ3M3ID0gYXJndW1lbnRzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBndWlkID0gX2FyZ3M3Lmxlbmd0aCA+IDIgJiYgX2FyZ3M3WzJdICE9PSB1bmRlZmluZWQgPyBfYXJnczdbMl0gOiAiIjsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny50MCA9IHJlc3BvbnNlLnN0YXR1czsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gX2NvbnRleHQ3LnQwID09PSAyMDEgPyA0IDogX2NvbnRleHQ3LnQwID09PSAyMDIgPyAxMSA6IF9jb250ZXh0Ny50MCA9PT0gMzA0ID8gMjAgOiBfY29udGV4dDcudDAgPT09IDQwMCA/IDI0IDogX2NvbnRleHQ3LnQwID09PSA0MDQgPyAzMiA6IF9jb250ZXh0Ny50MCA9PT0gNDA1ID8gMzQgOiBfY29udGV4dDcudDAgPT09IDQyMyA/IDM0IDogMzk7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgZ3VpZFByb2R1Y3QgPSBfY29udGV4dDcuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaGFzQWRkSW1hZ2UpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnVwbG9hZEltYWdlKGd1aWRQcm9kdWN0LCB0aGlzLmluZGV4SW1hZ2VzLCB0aGlzLnByb2R1Y3RTZWxlY3RlZCk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgiYnJlYWsiLCA0MSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBpZiAoISh0aGlzLmhhc0FkZEltYWdlIHx8IHRoaXMuaGFzUmVtb3ZhbCB8fCB0aGlzLmhhc1Jlb3JkZXJpbmcgfHwgdGhpcy5lZGl0SW1hZ2UpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXNBZGRJbWFnZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBsb2FkSW1hZ2UoZ3VpZCwgdGhpcy5pbmRleEltYWdlcywgdGhpcy5wcm9kdWN0U2VsZWN0ZWQpOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLmVkaXRJbWFnZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlSW1hZ2UoZ3VpZCwgdGhpcy5wcm9kdWN0U2VsZWN0ZWQpOwoKICAgICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFzUmVtb3ZhbCkgewogICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUltYWdlKGd1aWQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoImJyZWFrIiwgNDEpOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdHVzRXJyb3IoIk8gcHJvZHV0byAiLmNvbmNhdChwcm9kdWN0Lm5hbWUsICIgalx4RTEgZXhpc3RlIikpOwogICAgICAgICAgICAgICAgdGhpcy5zZXRSZXNwb25zZUVycm9yKHsKICAgICAgICAgICAgICAgICAgbmFtZTogWyJPcHMsIHZlcmlmaXF1ZSBzZSBqw6EgbsOjbyBleGlzdGUgdW0gUHJvZHV0byBjb20gZXNzZSBOb21lLiJdCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VFcnJvci5pc05hbWUgPSB0cnVlOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoImJyZWFrIiwgNDEpOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgX2NvbnRleHQ3LnQxID0gdGhpczsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjc7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpOwoKICAgICAgICAgICAgICBjYXNlIDI3OgogICAgICAgICAgICAgICAgX2NvbnRleHQ3LnQyID0gX2NvbnRleHQ3LnNlbnQ7CgogICAgICAgICAgICAgICAgX2NvbnRleHQ3LnQxLnNldFJlc3BvbnNlRXJyb3IuY2FsbChfY29udGV4dDcudDEsIF9jb250ZXh0Ny50Mik7CgogICAgICAgICAgICAgICAgdGhpcy5uZXh0U3RhdHVzRXJyb3IoIlZlcmlmaXF1ZSBzZSB0b2RvcyBvcyBjYW1wb3MgZm9yYW0gcHJlZW5jaGlkb3MgY29ycmV0YW1lbnRlIik7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcoZmFsc2UpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoImJyZWFrIiwgNDEpOwoKICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgICAgdGhpcy5zZXRSZXNwb25zZUVycm9yKHsKICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICJTZWxlY2lvbmUgdW1hIENhdGVnb3JpYS4iCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJicmVhayIsIDQxKTsKCiAgICAgICAgICAgICAgY2FzZSAzNDoKICAgICAgICAgICAgICAgIHRoaXMudG9hc3RNZXNzYWdlKCJlcnJvciIsICJTZXUgbG9naW4gZXhwaXJvdSwgZW50cmUgbm92YW1lbnRlLiIpOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInBlcnRpbmhvIik7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgibG9nZ2VkVXNlciIpOwogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goImxvZ2luIik7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgiYnJlYWsiLCA0MSk7CgogICAgICAgICAgICAgIGNhc2UgMzk6CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcoZmFsc2UpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoImJyZWFrIiwgNDEpOwoKICAgICAgICAgICAgICBjYXNlIDQxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gY2hlY2tTdGF0dXNPZlByb2R1Y3QoX3gxMCwgX3gxMSkgewogICAgICAgIHJldHVybiBfY2hlY2tTdGF0dXNPZlByb2R1Y3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGNoZWNrU3RhdHVzT2ZQcm9kdWN0OwogICAgfSgpCiAgfSwgewogICAga2V5OiAic2V0UmVzcG9uc2VFcnJvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0UmVzcG9uc2VFcnJvcihkYXRhKSB7CiAgICAgIHRoaXMucmVzcG9uc2VFcnJvci5jYXRlZ29yeSA9IGRhdGEuY2F0ZWdvcnk7CiAgICAgIHRoaXMucmVzcG9uc2VFcnJvci5uYW1lID0gZGF0YS5uYW1lICYmIEFycmF5LmlzQXJyYXkoZGF0YS5uYW1lKSA/IGRhdGEubmFtZVswXSA6IGRhdGEubmFtZTsKICAgICAgdGhpcy5yZXNwb25zZUVycm9yLmRlc2NyaXB0aW9uID0gZGF0YS5kZXNjcmlwdGlvbiAmJiBBcnJheS5pc0FycmF5KGRhdGEuZGVzY3JpcHRpb24pID8gZGF0YS5kZXNjcmlwdGlvblswXSA6IGRhdGEuZGVzY3JpcHRpb247CiAgICAgIHRoaXMucmVzcG9uc2VFcnJvci5vcmRlcmluZyA9IGRhdGEub3JkZXJpbmcgJiYgZGF0YS5vcmRlcmluZy5sZW5ndGggPyBkYXRhLm9yZGVyaW5nWzBdIDogZGF0YS5vcmRlcmluZzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJuZXh0U3RhdHVzU3VjY2VzcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbmV4dFN0YXR1c1N1Y2Nlc3MobXNnKSB7CiAgICAgIHRoaXMubG9hZGluZyhmYWxzZSk7CiAgICAgIHRoaXMudG9hc3RNZXNzYWdlKCJzdWNjZXNzIiwgbXNnKTsKICAgICAgdGhpcy5nZXRDYXRlZ29yaWVzKCk7CiAgICAgIHRoaXMuY2xvc2VQcm9kdWN0TW9kYWwoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJuZXh0U3RhdHVzRXJyb3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG5leHRTdGF0dXNFcnJvcihtc2cpIHsKICAgICAgdGhpcy5sb2FkaW5nKGZhbHNlKTsKICAgICAgdGhpcy50b2FzdE1lc3NhZ2UoImVycm9yIiwgbXNnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJuZXh0U3RhdHVzRGVmYXVsdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbmV4dFN0YXR1c0RlZmF1bHQobXNnKSB7CiAgICAgIHRoaXMubG9hZGluZyhmYWxzZSk7CiAgICAgIHRoaXMudG9hc3RNZXNzYWdlKCJlcnJvciIsIG1zZyk7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9hZGluZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZGluZygkZXZlbnQpIHsKICAgICAgdGhpcy5sb2FkaW5nQ29udHJvbGxlciA9IGZhbHNlOwogICAgICB0aGlzLiRlbWl0KCJsb2FkaW5nIiwgJGV2ZW50KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDYXRlZ29yaWVzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDYXRlZ29yaWVzKCkgewogICAgICB0aGlzLiRlbWl0KCJnZXRDYXRlZ29yaWVzIiwgdHJ1ZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2xvc2VQcm9kdWN0TW9kYWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlUHJvZHVjdE1vZGFsKCkgewogICAgICB0aGlzLiRlbWl0KCJjbG9zZVByb2R1Y3RNb2RhbCIsIHRydWUpOwoKICAgICAgaWYgKHRoaXMuaGFzUmVtb3ZhbCB8fCB0aGlzLmVkaXRJbWFnZSkgewogICAgICAgIHRoaXMuZ2V0Q2F0ZWdvcmllcygpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAib3BlbkNsb3NlTW9kYWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW5DbG9zZU1vZGFsKCkgewogICAgICB0aGlzLnNob3dDbG9zZU1vZGFsID0gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbG9zZUNsb3NlTW9kYWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlQ2xvc2VNb2RhbCgpIHsKICAgICAgdGhpcy5zaG93Q2xvc2VNb2RhbCA9IGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogIm9wZW5Nb2RhbERlbGV0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb3Blbk1vZGFsRGVsZXRlKHByb2R1Y3QpIHsKICAgICAgdGhpcy5wcm9kdWN0U2VsZWN0ZWQgPSBwcm9kdWN0OwogICAgICB0aGlzLnNob3dEZWxldGVQcm9kdWN0ID0gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbG9zZURlbGV0ZVByb2R1Y3RNb2RhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2VEZWxldGVQcm9kdWN0TW9kYWwoKSB7CiAgICAgIHRoaXMuc2hvd0RlbGV0ZVByb2R1Y3QgPSBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvcGVuUHVibGlzaGVkTW9kYWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW5QdWJsaXNoZWRNb2RhbCgpIHsKICAgICAgdGhpcy5zaG93UHVibGlzaGVkUHJvZHVjdCA9IHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2xvc2VQdWJsaXNoZWRNb2RhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2VQdWJsaXNoZWRNb2RhbCgpIHsKICAgICAgdGhpcy5zaG93UHVibGlzaGVkUHJvZHVjdCA9IGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogImNhbmNlbFB1Ymxpc2hlZE1vZGFsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWxQdWJsaXNoZWRNb2RhbCgpIHsKICAgICAgdGhpcy5pc1B1Ymxpc2hlZCA9ICF0aGlzLmlzUHVibGlzaGVkOwogICAgICB0aGlzLmNsb3NlUHVibGlzaGVkTW9kYWwoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJwdWJsaXNoZWRQcm9kdWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwdWJsaXNoZWRQcm9kdWN0KCkgewogICAgICBpZiAodGhpcy5wcm9kdWN0U2VsZWN0ZWQpIHsKICAgICAgICB0aGlzLnByb2R1Y3RTZWxlY3RlZC5pc19wdWJsaXNoZWQgPSAhdGhpcy5wcm9kdWN0U2VsZWN0ZWQuaXNfcHVibGlzaGVkOwogICAgICAgIHRoaXMuaXNQdWJsaXNoZWQgPSAhdGhpcy5wcm9kdWN0U2VsZWN0ZWQuaXNfcHVibGlzaGVkOwogICAgICAgIHRoaXMuY2xvc2VQdWJsaXNoZWRNb2RhbCgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAidmFsaWRhdGVDdXJyZW5jeSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGVDdXJyZW5jeSh4KSB7CiAgICAgIHZhciBtb25leSA9ICIiOwoKICAgICAgaWYgKHgpIHsKICAgICAgICBtb25leSA9IHgucmVwbGFjZSgiUiQgIiwgIiIpOwogICAgICAgIG1vbmV5ID0gbW9uZXkucmVwbGFjZSgiLCIsICIiKTsKICAgICAgICBtb25leSA9IG1vbmV5LnJlcGxhY2UoIi4iLCAiIik7CiAgICAgIH0KCiAgICAgIHJldHVybiBtb25leTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ0b2FzdE1lc3NhZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHRvYXN0TWVzc2FnZSh0eXBlLCB0aXRsZSkgewogICAgICBWdWVTaW1wbGVBbGVydC5maXJlKHsKICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgIHRpdGxlOiB0aXRsZSwKICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICB0aW1lcjogNjAwMCwKICAgICAgICBvbk9wZW46IGZ1bmN0aW9uIG9uT3Blbih0b2FzdCkgewogICAgICAgICAgdG9hc3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsIFN3YWwuc3RvcFRpbWVyKSwgdG9hc3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsIFN3YWwucmVzdW1lVGltZXIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVzdHJveVNlbGVjdGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95U2VsZWN0ZWQoKSB7CiAgICAgIHRoaXMuJGVtaXQoImRlc3Ryb3lQcm9kdWN0U2VsZWN0ZWQiLCB0cnVlKTsKICAgICAgdGhpcy4kZW1pdCgiZGVzdHJveUNhdGVnb3J5U2VsZWN0ZWQiLCB0cnVlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVQb3NpdGlvbkltYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdXBkYXRlUG9zaXRpb25JbWFnZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTkocHJvZHVjdEd1aWQpIHsKICAgICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEltYWdlcy5mb3JFYWNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KGltYWdlLCBpbmRleCkgewogICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoaW1hZ2UucG9zaXRpb24gIT09IF90aGlzNy5wcmV2aW91c0ltYWdlc1tpbmRleF0ucG9zaXRpb24pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNy5wcm9kdWN0U2VydmljZS51cGRhdGVQb3NpdGlvbkltYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGltYWdlLnBvc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBwcm9kdWN0R3VpZCwgX3RoaXM3LnByZXZpb3VzSW1hZ2VzW2luZGV4XS5wb3NpdGlvbik7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQ4LnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgudDAgPSByZXNwb25zZS5zdGF0dXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IF9jb250ZXh0OC50MCA9PT0gMjAwID8gNyA6IF9jb250ZXh0OC50MCA9PT0gMjAxID8gNyA6IF9jb250ZXh0OC50MCA9PT0gMjAyID8gNyA6IDk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM3Lm5leHRTdGF0dXNTdWNjZXNzKCJQcm9udG8sIGEgcG9zaVx4RTdceEUzbyBkYSBpbWFnZW0gZG8gUHJvZHV0byBmb2kgYXR1YWxpemFkYSBjb20gc3VjZXNzby4iKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgiYnJlYWsiLCA5KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sIF9jYWxsZWU4KTsKICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDEzLCBfeDE0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTksIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB1cGRhdGVQb3NpdGlvbkltYWdlKF94MTIpIHsKICAgICAgICByZXR1cm4gX3VwZGF0ZVBvc2l0aW9uSW1hZ2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHVwZGF0ZVBvc2l0aW9uSW1hZ2U7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJyZW1vdmVJbWFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlbW92ZUltYWdlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTEocHJvZHVjdEd1aWQpIHsKICAgICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGlzLmluZGV4SW1hZ2VzUmVtb3ZlLmZvckVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmNCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKHBvc2l0aW9uKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczgucHJvZHVjdFNlcnZpY2UuZGVsZXRlSW1hZ2UocHJvZHVjdEd1aWQsIHBvc2l0aW9uKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dDEwLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDEwLnQwID0gcmVzcG9uc2Uuc3RhdHVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gX2NvbnRleHQxMC50MCA9PT0gMjAyID8gNiA6IDg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM4Lm5leHRTdGF0dXNTdWNjZXNzKCJQcm9udG8sIGltYWdlbSBkbyBQcm9kdXRvIHJlbW92aWRhIGNvbSBzdWNlc3NvLiIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLmFicnVwdCgiYnJlYWsiLCA4KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMTApOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MTYpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlZjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0oKSk7CiAgICAgICAgICAgICAgICB0aGlzLmluZGV4SW1hZ2VzUmVtb3ZlID0gW107CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTExLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gcmVtb3ZlSW1hZ2UoX3gxNSkgewogICAgICAgIHJldHVybiBfcmVtb3ZlSW1hZ2UuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlbW92ZUltYWdlOwogICAgfSgpCiAgfSwgewogICAga2V5OiAib3BlbklucHV0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuSW5wdXQocG9zaXRpb24sIGVkaXQpIHsKICAgICAgdGhpcy5wb3NpdGlvblNlbGVjdGVkID0gcG9zaXRpb247CiAgICAgIHRoaXMuZWRpdEltYWdlID0gZWRpdDsKICAgICAgdGhpcy5zaG93SW1wb3J0SW1hZ2UgPSB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImNsb3NlSW1wb3J0SW1hZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlSW1wb3J0SW1hZ2UoaW1hZ2VVcmwpIHsKICAgICAgaWYgKGltYWdlVXJsKSB7CiAgICAgICAgdGhpcy5jYW5SZW9yZGVySW1hZ2VzID0gZmFsc2U7CgogICAgICAgIGlmICghdGhpcy5lZGl0SW1hZ2UpIHsKICAgICAgICAgIHRoaXMuaGFzQWRkSW1hZ2UgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMucHJvZHVjdFNlbGVjdGVkICYmIHRoaXMucHJvZHVjdFNlbGVjdGVkLmltYWdlX2xpc3QpIHsKICAgICAgICAgIHRoaXMuaW5kZXhJbWFnZXMucHVzaChpbWFnZVVybC5wb3NpdGlvbiAtIDEpOwogICAgICAgICAgdGhpcy4kc2V0KHRoaXMucHJvZHVjdFNlbGVjdGVkLmltYWdlX2xpc3QsIGltYWdlVXJsLnBvc2l0aW9uIC0gMSwgaW1hZ2VVcmwpOyAvLyB0aGlzLnByb2R1Y3RTZWxlY3RlZC5pbWFnZV9saXN0W2ltYWdlVXJsLnBvc2l0aW9uIC0gMV0gPSBpbWFnZVVybDsKCiAgICAgICAgICB0aGlzLnNldEltYWdlKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLnNob3dJbXBvcnRJbWFnZSA9IGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogInJlbW92ZUltYWdlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlSW1hZ2VzKHBvc2l0aW9uKSB7CiAgICAgIHRoaXMuaGFzUmVtb3ZhbCA9IHRydWU7CiAgICAgIHRoaXMuaW5kZXhJbWFnZXNSZW1vdmUucHVzaChwb3NpdGlvbik7CiAgICAgIHRoaXMuY2FuUmVvcmRlckltYWdlcyA9IGZhbHNlOwoKICAgICAgaWYgKHRoaXMucHJvZHVjdFNlbGVjdGVkICYmIHRoaXMucHJvZHVjdFNlbGVjdGVkLmltYWdlX2xpc3QpIHsKICAgICAgICB0aGlzLnByb2R1Y3RTZWxlY3RlZC5pbWFnZV9saXN0LnNwbGljZShwb3NpdGlvbiAtIDEsIDEpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicHJldmlvdXNSZW9yZGVySW1hZ2VzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwcmV2aW91c1Jlb3JkZXJJbWFnZXMoaW1hZ2VzTGlzdCkgewogICAgICB0aGlzLnByZXZpb3VzSW1hZ2VzID0gaW1hZ2VzTGlzdDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjdXJyZW50UmVvcmRlckltYWdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjdXJyZW50UmVvcmRlckltYWdlKGltYWdlc0xpc3QpIHsKICAgICAgdGhpcy5jdXJyZW50SW1hZ2VzID0gaW1hZ2VzTGlzdDsKCiAgICAgIGlmICh0aGlzLnByb2R1Y3RTZWxlY3RlZCAmJiB0aGlzLnByb2R1Y3RTZWxlY3RlZC5pbWFnZV9saXN0KSB7CiAgICAgICAgdGhpcy5wcm9kdWN0U2VsZWN0ZWQuaW1hZ2VfbGlzdCA9IHRoaXMuY3VycmVudEltYWdlczsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInNldFZpZXdJbWFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Vmlld0ltYWdlKGltYWdlKSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRJbWFnZSA9IGltYWdlOwogICAgfQogIH0sIHsKICAgIGtleTogIm9wZW5FZGl0SW1hZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW5FZGl0SW1hZ2UoKSB7CiAgICAgIHRoaXMuc2hvd0VkaXRJbWFnZSA9IHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2xvc2VFZGl0SW1hZ2VNb2RhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2VFZGl0SW1hZ2VNb2RhbCgpIHsKICAgICAgdGhpcy5zaG93RWRpdEltYWdlID0gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZUVkaXRJbWFnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZUVkaXRJbWFnZSgpIHsKICAgICAgdGhpcy5oYXNFZGl0SW1hZ2UgPSBmYWxzZTsKICAgIH0KICB9XSk7CgogIHJldHVybiBQcm9kdWN0TW9kYWw7Cn0oVnVlKTsKCl9fZGVjb3JhdGUoW1Byb3AoKV0sIFByb2R1Y3RNb2RhbC5wcm90b3R5cGUsICJwcm9wUHJvZHVjdFNlbGVjdGVkIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1Byb3AoKV0sIFByb2R1Y3RNb2RhbC5wcm90b3R5cGUsICJwcm9wQ2F0ZWdvcmllcyIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKCldLCBQcm9kdWN0TW9kYWwucHJvdG90eXBlLCAicHJvcENhdGVnb3J5U2VsZWN0ZWQiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcCgpXSwgUHJvZHVjdE1vZGFsLnByb3RvdHlwZSwgInByb3BDcmVhdGVQcm9kdWN0Iiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1Byb3AoKV0sIFByb2R1Y3RNb2RhbC5wcm90b3R5cGUsICJwcm9wRWRpdFByb2R1Y3QiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcCgpXSwgUHJvZHVjdE1vZGFsLnByb3RvdHlwZSwgInByb3BJc1NlcnZpY2UiLCB2b2lkIDApOwoKUHJvZHVjdE1vZGFsID0gX19kZWNvcmF0ZShbQ29tcG9uZW50KHsKICBkaXJlY3RpdmVzOiB7CiAgICBtb25leTogVk1vbmV5CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBQcm9kdWN0SW1hZ2VDYXJvdXNlbDogUHJvZHVjdEltYWdlQ2Fyb3VzZWwsCiAgICBQcm9kdWN0TG9hZGluZ1NjcmVlbjogUHJvZHVjdExvYWRpbmdTY3JlZW4KICB9Cn0pXSwgUHJvZHVjdE1vZGFsKTsKZXhwb3J0IHsgUHJvZHVjdE1vZGFsIH07CmV4cG9ydCB7IFByb2R1Y3RNb2RhbCBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/aline/AstaPrecifique/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/AstaPrecifique/src/components/product-modal/ProductModal.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport Swal, { SweetAlertType } from \"sweetalert2\";\nimport VueSimpleAlert from \"vue-simple-alert\";\nimport { VMoney } from \"v-money\";\n\nimport { Category } from \"@/models/category\";\nimport INotification from \"@/models/INotification\";\nimport { Product, IProduct, IProductVariant, ImageURl } from \"@/models/product\";\n\nimport productsService from \"@/services/products.service\";\n\nimport ProductImageCarousel from \"./product-image-carousel/ProductImageCarousel.vue\";\nimport ProductLoadingScreen from \"./product-loading-screen/ProductLoadingScreen.vue\";\n\n@Component({\n  directives: { money: VMoney },\n  components: { ProductImageCarousel, ProductLoadingScreen },\n})\nexport class ProductModal extends Vue {\n  @Prop() propProductSelected!: Product;\n  @Prop() propCategories!: Category[];\n  @Prop() propCategorySelected!: Category;\n  @Prop() propCreateProduct!: boolean;\n  @Prop() propEditProduct!: boolean;\n  @Prop() propIsService!: boolean;\n\n  public productSelected?: Product = this.propProductSelected;\n  public categorySelected?: Category = this.propCategorySelected;\n  public categories: Category[] = this.propCategories;\n  public showCreateProduct: boolean = this.propCreateProduct;\n  public showEditProduct: boolean = this.propEditProduct;\n  public showCreateService: boolean = this.propIsService;\n\n  public showDeleteProduct = false;\n  public showPublishedProduct = false;\n  public showEditImage = false;\n  public showImportImage = false;\n  public showCloseModal = false;\n\n  public canReorderImages = true;\n\n  public isPublished = this.productSelected\n    ? !this.productSelected.is_published\n    : false;\n\n  public title: string = \"\";\n  public subtitle: string = \"\";\n  public titleBtn: string = \"\";\n\n  public categoryGuid = \"\";\n\n  public responseError = {\n    name: \"\",\n    isName: false,\n    description: \"\",\n    ordering: \"\",\n    category: \"\",\n    variantValue: [] as string[],\n  };\n\n  public fieldErrors = {\n    name: \"\",\n    description: \"\",\n  };\n\n  public image: any;\n  public selectedImage: string = \"\";\n  public imageToCrop: any;\n  public cropper: any;\n  public destination: string;\n  public price: any;\n  public showCropper: boolean;\n  public newCategory: any;\n  public loggedUser: any;\n  public notify?: INotification | string = ``;\n  public multipleImages: string[] = [];\n  public hasEditImage: boolean = false;\n  public positionSelected: number = 0;\n  public editImage: boolean = false;\n  public priceToMatch: boolean = false;\n  public hasCategorySelected: boolean = true;\n\n  public inputLengthCounter = 512;\n  public logoInput = \"\";\n  public confirmeDeleteModalController = false;\n  public productId = \"\";\n\n  public loadingController = false;\n  public creatingProduct = false;\n\n  public finalImage: string = \"\";\n  public textAreaModel = \"\";\n  public isSale = false;\n\n  public hasReordering: boolean = false;\n  public hasAddImage: boolean = false;\n  public hasRemoval: boolean = false;\n\n  public indexImages: number[] = [];\n  public indexImagesRemove: number[] = [];\n\n  public currentImages: ImageURl[] = [];\n  public previousImages: ImageURl[] = [];\n\n  public money = {\n    decimal: \",\",\n    thousands: \".\",\n    prefix: \"R$ \",\n    suffix: \"\",\n    precision: 2,\n    masked: false,\n  };\n\n  private productService = new productsService();\n\n  constructor() {\n    super();\n    this.showCropper = false;\n    this.destination = \"\";\n    this.imageToCrop = \"\";\n  }\n\n  created() {\n    const logged: any = localStorage.getItem(\"loggedUser\");\n    this.loggedUser = JSON.parse(logged);\n  }\n\n  mounted() {\n    this.setInfoForm();\n    this.multipleImages = [\"1\", \"2\", \"3\", \"4\"];\n    this.setImage();\n    this.selectCategoryType();\n  }\n\n  setImage() {\n    if (this.productSelected && this.productSelected.image_list?.length) {\n      this.selectedImage = this.productSelected.image_list[0].image_url\n        ? this.productSelected.image_list[0].image_url\n        : \"\";\n    }\n  }\n\n  setInfoForm() {\n    if (this.showCreateProduct && !this.showCreateService) {\n      this.setTitles(\n        \"Cadastrar Produto\",\n        \"Insira informações e cadastre seus produtos\",\n        \"Salvar Produto\"\n      );\n      this.validateInfosCategory();\n    } else if (this.showCreateProduct && this.showCreateService) {\n      this.setTitles(\n        \"Cadastrar Serviço\",\n        \"Insira informações e cadastre seus serviços\",\n        \"Salvar Serviço\"\n      );\n      this.validateInfosCategory();\n    } else {\n      if (!this.showCreateService) {\n        this.setTitles(\n          \"Editar Produto\",\n          \"Edite as informações do seu produto\",\n          \"Atualizar produto\"\n        );\n      } else if (this.showCreateService) {\n        this.setTitles(\n          \"Editar Serviço\",\n          \"Edite as informações do seu serviço\",\n          \"Atualizar serviço\"\n        );\n      }\n      this.validateInfosCategory();\n    }\n  }\n\n  private setTitles(title: string, subtitle: string, titleBtn: string) {\n    this.title = title;\n    this.subtitle = subtitle;\n    this.titleBtn = titleBtn;\n  }\n\n  public selectedCategory() {\n    this.categorySelected = this.categories.find(\n      (category) => category.guid === this.categoryGuid\n    );\n    if (this.categorySelected?.variant_status) {\n      this.createProductSkus(this.categorySelected);\n    }\n  }\n\n  public selectCategoryType() {\n    if (this.showCreateService) {\n      this.categories = this.categories.filter(\n        (value) => value.register_type === \"Service\"\n      );\n    } else {\n      this.categories = this.categories.filter(\n        (value) => value.register_type === \"Product\"\n      );\n    }\n  }\n\n  private createProductSkus(categorySelected?: Category) {\n    this.productSelected?.skus.splice(0, this.productSelected?.skus.length);\n    categorySelected && categorySelected.variant_value.length\n      ? categorySelected.variant_value.map((values) =>\n          this.productSelected?.skus.push(this.resetSkus(values.value))\n        )\n      : this.productSelected?.skus.push(this.resetSkus());\n  }\n\n  private resetSkus(value: string = \"\") {\n    return {\n      code: \"\",\n      guid: \"\",\n      new_price: \"\",\n      old_price: \"\",\n      vtex_id: 0,\n      value,\n      in_promotion: false,\n      is_skus: false,\n      status: true,\n    };\n  }\n\n  validateInfosCategory() {\n    if (this.categorySelected) {\n      this.categoryGuid = this.categorySelected.guid;\n    }\n  }\n\n  private setProduct(): IProduct {\n    return {\n      category_guid: this.categoryGuid,\n      name: this.productSelected ? this.productSelected.name : \"\",\n      description: this.productSelected\n        ? this.productSelected?.description\n        : \"\",\n      ordering: this.showCreateProduct ? 100 : this.productSelected?.ordering,\n      is_published: this.showCreateProduct\n        ? true\n        : this.productSelected?.is_published,\n      variant_value: this.setVariants(),\n      register_type: this.setRegisterType(),\n      price_to_match: this.priceToMatch\n        ? true\n        : this.productSelected?.price_to_match,\n    };\n  }\n\n  private setVariants(): IProductVariant[] {\n    const variants: IProductVariant[] = [];\n    this.responseError.variantValue = [];\n    this.productSelected?.skus.forEach((values) => {\n      values.status && values.old_price === \"R$ 0,00\"\n        ? this.responseError.variantValue.push(\n            \"A variante não tem preço e está ativada\"\n          )\n        : this.responseError.variantValue.push(\"\");\n\n      this.showCreateProduct\n        ? variants.push({\n            code: values.code ? values.code : \"\",\n            value: values.value ? values.value : \"\",\n            new_price: values.new_price\n              ? parseFloat(this.validateCurrency(values.new_price.toString()))\n              : parseFloat(this.validateCurrency(values.old_price.toString())),\n            old_price: parseFloat(\n              this.validateCurrency(values.old_price.toString())\n            ),\n            status: values.status ? values.status : false,\n          })\n        : variants.push({\n            guid: values.guid ? values.guid : \"\",\n            code: values.code ? values.code : \"\",\n            value: values.value ? values.value : \"\",\n            new_price:\n              values.in_promotion && values.new_price\n                ? parseFloat(this.validateCurrency(values.new_price.toString()))\n                : parseFloat(\n                    this.validateCurrency(values.old_price.toString())\n                  ),\n            old_price: parseFloat(\n              this.validateCurrency(values.old_price.toString())\n            ),\n            status: values.status ? values.status : false,\n          });\n    });\n    return variants;\n  }\n\n  private setRegisterType() {\n    if (this.showCreateService) {\n      return \"Service\";\n    } else {\n      return \"Product\";\n    }\n  }\n\n  private validateProductFields() {\n    const errors: {\n      name: string;\n      description: string;\n      category: string;\n    } = {\n      name: \"\",\n      description: \"\",\n      category: \"\",\n    };\n    let inputsAreValid = true;\n    if (!this.productSelected!.name) {\n      errors.name = \"O seu PRODUTO precisa ter um nome\";\n      inputsAreValid = false;\n    }\n    if (!this.productSelected!.description) {\n      errors.description = \"O seu PRODUTO precisa ter uma descrição\";\n      inputsAreValid = false;\n    }\n    if (!this.hasCategorySelected!) {\n      errors.category =\n        \"Você precisa selecionar uma categoria para o seu PRODUTO\";\n      inputsAreValid = false;\n    }\n    this.setResponseError(errors);\n    return inputsAreValid;\n  }\n  public toMatch(productSelected) {\n    this.priceToMatch = productSelected;\n    if (this.priceToMatch) {\n      this.productSelected!.skus[0].old_price = \"R$ 0,01\";\n      this.productSelected!.skus[0].new_price = \"R$ 0,01\";\n    } else {\n      this.productSelected!.skus[0].old_price = \"R$ 0,00\";\n      this.productSelected!.skus[0].new_price = \"R$ 0,00\";\n    }\n  }\n\n  public saveProduct() {\n    this.hasCategory();\n    if (this.showCreateProduct && !this.validateProductFields()) {\n      return;\n    }\n    if (this.productSelected && this.categoryGuid) {\n      this.showCreateProduct\n        ? this.createProduct(this.setProduct())\n        : this.editProduct(this.setProduct(), this.productSelected.guid);\n    }\n  }\n\n  isEmpty = (array: string[]) => array.filter((item) => item !== \"\").length;\n\n  delay = (ms) => new Promise((res) => setTimeout(res, ms));\n\n  private async createProduct(product: IProduct) {\n    if (this.isEmpty(this.responseError.variantValue) < 1) {\n      this.loadingController = true;\n      this.creatingProduct = true;\n\n      const response = await this.productService.createProduct(\n        product,\n        this.categoryGuid\n      );\n\n      await this.delay(500);\n\n      this.creatingProduct = false;\n\n      await this.delay(500);\n\n      if (response.status === 202) {\n        const data = await response.json();\n        product.variant_value.forEach(\n          (variant, index) => (variant.guid = data.skus[index])\n        );\n        await this.editProduct(product, data.guid);\n      } else {\n        await this.checkStatusOfProduct(product, response);\n      }\n\n      this.closeProductModal();\n      if (product.register_type === \"Service\") {\n        window.location.reload();\n        this.toastMessage(\n          \"success\",\n          `Pronto, seu Serviço já foi ${\n            this.showCreateProduct ? \"criado\" : \"atualizado\"\n          } com sucesso.`\n        );\n      } else {\n        window.location.reload();\n        this.toastMessage(\n          \"success\",\n          `Pronto, seu Produto já foi ${\n            this.showCreateProduct ? \"criado\" : \"atualizado\"\n          } com sucesso.`\n        );\n      }\n      this.loadingController = false;\n    }\n  }\n\n  private hasCategory() {\n    if (this.categoryGuid) {\n      this.hasCategorySelected = true;\n      return;\n    }\n    this.hasCategorySelected = false;\n  }\n\n  private async editProduct(product: IProduct, guid: string) {\n    this.loadingController = true;\n    const response = await this.productService.editProduct(product, guid);\n    await this.checkStatusOfProduct(product, response, guid);\n    this.closeProductModal();\n    this.loadingController = false;\n  }\n\n  onUploadProgress(event, position) {\n    let progress: number = Math.round((event.loaded * 100) / event.total);\n\n    if (this.productSelected && this.productSelected.image_list) {\n      this.productSelected.image_list[position - 1].uploadProgress = progress;\n    }\n  }\n\n  private async updateImage(productGuid: string, productSelected: Product) {\n    if (productSelected && productSelected.image_list) {\n      await Promise.all(\n        productSelected.image_list.map((image) =>\n          this.productService.uploadImage(\n            {\n              position: image.position,\n              // description: image.description,\n              data: image.imageFile,\n              onUploadProgressCallback: this.onUploadProgress,\n            },\n            productGuid\n          )\n        )\n      )\n        .then(async () => {\n          await this.getCategories();\n        })\n        .catch(() => {\n          this.nextStatusError(\n            `Houve um erro ao carregar os produtos. Favor tentar novamente.`\n          );\n        });\n    }\n  }\n\n  private async uploadImage(\n    productGuid: string,\n    indexImages: number[],\n    productSelected: Product\n  ) {\n    await Promise.all(\n      indexImages.map((value) => {\n        if (productSelected && productSelected.image_list) {\n          return this.productService\n            .uploadImage(\n              {\n                position: productSelected.image_list[value].position,\n                data: productSelected.image_list[value].imageFile,\n                onUploadProgressCallback: this.onUploadProgress,\n              },\n              productGuid\n            )\n            .then(async (response) => {\n              switch (response.status) {\n                case 400:\n                  await this.updateImage(productGuid, productSelected);\n                  break;\n              }\n            });\n        }\n      })\n    );\n    indexImages = [];\n  }\n\n  private async checkStatusOfProduct(\n    product: IProduct,\n    response: Response,\n    guid: string = \"\"\n  ) {\n    switch (response.status) {\n      case 201:\n        const guidProduct = await response.json();\n        if (this.hasAddImage) {\n          await this.uploadImage(\n            guidProduct,\n            this.indexImages,\n            this.productSelected as Product\n          );\n        }\n        break;\n      case 202:\n        if (\n          this.hasAddImage ||\n          this.hasRemoval ||\n          this.hasReordering ||\n          this.editImage\n        ) {\n          if (this.hasAddImage) {\n            await this.uploadImage(\n              guid,\n              this.indexImages,\n              this.productSelected as Product\n            );\n          }\n          if (this.editImage) {\n            await this.updateImage(guid, this.productSelected as Product);\n          }\n          if (this.hasRemoval) {\n            this.removeImage(guid);\n          }\n        }\n        break;\n      case 304:\n        this.nextStatusError(`O produto ${product.name} já existe`);\n        this.setResponseError({\n          name: [\"Ops, verifique se já não existe um Produto com esse Nome.\"],\n        });\n        this.responseError.isName = true;\n        break;\n\n      case 400:\n        this.setResponseError(await response.json());\n        this.nextStatusError(\n          `Verifique se todos os campos foram preenchidos corretamente`\n        );\n        this.loading(false);\n        break;\n\n      case 404:\n        this.setResponseError({ category: \"Selecione uma Categoria.\" });\n        break;\n\n      case 405:\n      case 423:\n        this.toastMessage(\"error\", \"Seu login expirou, entre novamente.\");\n        localStorage.removeItem(\"pertinho\");\n        localStorage.removeItem(\"loggedUser\");\n        this.$router.push(\"login\");\n        break;\n\n      default:\n        this.loading(false);\n        break;\n    }\n  }\n\n  private setResponseError(data) {\n    this.responseError.category = data.category;\n    this.responseError.name =\n      data.name && Array.isArray(data.name) ? data.name[0] : data.name;\n    this.responseError.description =\n      data.description && Array.isArray(data.description)\n        ? data.description[0]\n        : data.description;\n    this.responseError.ordering =\n      data.ordering && data.ordering.length ? data.ordering[0] : data.ordering;\n  }\n\n  private nextStatusSuccess(msg: string) {\n    this.loading(false);\n    this.toastMessage(\"success\", msg);\n    this.getCategories();\n    this.closeProductModal();\n  }\n\n  private nextStatusError(msg: string) {\n    this.loading(false);\n    this.toastMessage(\"error\", msg);\n  }\n\n  private nextStatusDefault(msg: string) {\n    this.loading(false);\n    this.toastMessage(\"error\", msg);\n  }\n\n  public loading($event) {\n    this.loadingController = false;\n    this.$emit(\"loading\", $event);\n  }\n\n  public getCategories() {\n    this.$emit(\"getCategories\", true);\n  }\n  public closeProductModal() {\n    this.$emit(\"closeProductModal\", true);\n    if (this.hasRemoval || this.editImage) {\n      this.getCategories();\n    }\n  }\n\n  public openCloseModal() {\n    this.showCloseModal = true;\n  }\n\n  public closeCloseModal() {\n    this.showCloseModal = false;\n  }\n\n  public openModalDelete(product: Product) {\n    this.productSelected = product;\n    this.showDeleteProduct = true;\n  }\n\n  public closeDeleteProductModal() {\n    this.showDeleteProduct = false;\n  }\n\n  public openPublishedModal() {\n    this.showPublishedProduct = true;\n  }\n\n  public closePublishedModal() {\n    this.showPublishedProduct = false;\n  }\n\n  public cancelPublishedModal() {\n    this.isPublished = !this.isPublished;\n    this.closePublishedModal();\n  }\n\n  public publishedProduct() {\n    if (this.productSelected) {\n      this.productSelected.is_published = !this.productSelected.is_published;\n      this.isPublished = !this.productSelected.is_published;\n      this.closePublishedModal();\n    }\n  }\n\n  private validateCurrency(x: string) {\n    let money: string = \"\";\n    if (x) {\n      money = x.replace(\"R$ \", \"\");\n      money = money.replace(\",\", \"\");\n      money = money.replace(\".\", \"\");\n    }\n    return money;\n  }\n\n  public toastMessage(type: SweetAlertType, title: string) {\n    VueSimpleAlert.fire({\n      type,\n      title,\n      toast: true,\n      position: \"top-end\",\n      showConfirmButton: false,\n      timer: 6000,\n      onOpen: (toast) => {\n        toast.addEventListener(\"mouseenter\", Swal.stopTimer),\n          toast.addEventListener(\"mouseleave\", Swal.resumeTimer);\n      },\n    });\n  }\n\n  public destroySelected() {\n    this.$emit(\"destroyProductSelected\", true);\n    this.$emit(\"destroyCategorySelected\", true);\n  }\n\n  async updatePositionImage(productGuid: string) {\n    this.currentImages.forEach(async (image, index) => {\n      if (image.position !== this.previousImages[index].position) {\n        const response = await this.productService.updatePositionImage(\n          { position: image.position },\n          productGuid,\n          this.previousImages[index].position\n        );\n        switch (response.status) {\n          case 200:\n          case 201:\n          case 202:\n            this.nextStatusSuccess(\n              `Pronto, a posição da imagem do Produto foi atualizada com sucesso.`\n            );\n            break;\n        }\n      }\n    });\n  }\n\n  async removeImage(productGuid: string) {\n    this.indexImagesRemove.forEach(async (position) => {\n      const response = await this.productService.deleteImage(\n        productGuid,\n        position\n      );\n      switch (response.status) {\n        case 202:\n          this.nextStatusSuccess(\n            `Pronto, imagem do Produto removida com sucesso.`\n          );\n          break;\n      }\n    });\n    this.indexImagesRemove = [];\n  }\n\n  public openInput(position: number, edit: boolean) {\n    this.positionSelected = position;\n    this.editImage = edit;\n    this.showImportImage = true;\n  }\n\n  public closeImportImage(imageUrl) {\n    if (imageUrl) {\n      this.canReorderImages = false;\n      if (!this.editImage) {\n        this.hasAddImage = true;\n      }\n      if (this.productSelected && this.productSelected.image_list) {\n        this.indexImages.push(imageUrl.position - 1);\n        this.$set(\n          this.productSelected.image_list,\n          imageUrl.position - 1,\n          imageUrl\n        );\n        // this.productSelected.image_list[imageUrl.position - 1] = imageUrl;\n        this.setImage();\n      }\n    }\n    this.showImportImage = false;\n  }\n\n  public removeImages(position: number) {\n    this.hasRemoval = true;\n    this.indexImagesRemove.push(position);\n\n    this.canReorderImages = false;\n\n    if (this.productSelected && this.productSelected.image_list) {\n      this.productSelected.image_list.splice(position - 1, 1);\n    }\n  }\n\n  public previousReorderImages(imagesList: ImageURl[]) {\n    this.previousImages = imagesList;\n  }\n  public currentReorderImage(imagesList: ImageURl[]) {\n    this.currentImages = imagesList;\n    if (this.productSelected && this.productSelected.image_list) {\n      this.productSelected.image_list = this.currentImages;\n    }\n  }\n\n  public setViewImage(image: string) {\n    this.selectedImage = image;\n  }\n\n  public openEditImage() {\n    this.showEditImage = true;\n  }\n\n  public closeEditImageModal() {\n    this.showEditImage = false;\n  }\n\n  public saveEditImage() {\n    this.hasEditImage = false;\n  }\n\n  public isMobile = () =>\n    Boolean(\n      /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n        navigator.userAgent\n      )\n    );\n}\n\nexport { ProductModal as default };\n"],"sourceRoot":""}]}