{"remainingRequest":"/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js!/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js??ref--13-2!/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/GitHub/admin-frontend/src/components/vitrine-modal/vitrine-image-import.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/GitHub/admin-frontend/src/components/vitrine-modal/vitrine-image-import.vue","mtime":1696439584665},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIi9ob21lL2FsaW5lL0dpdEh1Yi9hZG1pbi1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBDb21wcmVzc29yIGZyb20gJ2NvbXByZXNzb3Jqcyc7CmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoewogIG5hbWU6ICd2aXRyaW5lSW1hZ2VJbXBvcnQnLAogIHByb3BzOiB7CiAgICBzaG93SW1wb3J0SW1hZ2VNb2RhbDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbGVsaXN0OiBbXSwKICAgICAgaW1hZ2VUb0Nyb3A6ICcnLAogICAgICBmaWxlOiB7fSwKICAgICAgaW1hZ2VGaWxlOiB7fQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uQ2hhbmdlVml0cmluZTogZnVuY3Rpb24gb25DaGFuZ2VWaXRyaW5lKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coImNyb3Agdml0cmluZSAtIHVwbG9hZCIpOwogICAgICB0aGlzLmZpbGUgPSB0aGlzLiRyZWZzLmZpbGV2aXRyaW5lOwogICAgICB0aGlzLmZpbGVsaXN0ID0gX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMuZmlsZS5maWxlcyk7CgogICAgICBpZiAodGhpcy5maWxlLmZpbGVzLmxlbmd0aCkgewogICAgICAgIHZhciBpbWFnZUZpbGUgPSB0aGlzLmZpbGUuZmlsZXNbMF07CgogICAgICAgIGlmIChpbWFnZUZpbGUuc2l6ZSAvIDEwMDAwMDAgPCAxNSkgewogICAgICAgICAgdmFyIGNvbXByZXNzb3IgPSBuZXcgQ29tcHJlc3NvcihpbWFnZUZpbGUsIHsKICAgICAgICAgICAgcXVhbGl0eTogMC41LAogICAgICAgICAgICB3aWR0aDogMTI1MCwKICAgICAgICAgICAgaGVpZ2h0OiAxMjUwLAogICAgICAgICAgICBjb252ZXJ0U2l6ZTogMCwKICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gc3VjY2VzcyhpbWFnZUNvbXByZXNzZWQpIHsKICAgICAgICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCiAgICAgICAgICAgICAgaWYgKGltYWdlQ29tcHJlc3NlZC5zaXplIC8gMTAwMDAwMCA8IDYpIHsKICAgICAgICAgICAgICAgIF90aGlzLmltYWdlRmlsZSA9IGltYWdlQ29tcHJlc3NlZDsKICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGltYWdlQ29tcHJlc3NlZCk7CgogICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLmltYWdlVG9Dcm9wID0gZS50YXJnZXQucmVzdWx0OwoKICAgICAgICAgICAgICAgICAgX3RoaXMuJGVtaXQoJ3NldEltYWdlVG9Dcm9wJywgZS50YXJnZXQucmVzdWx0KTsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGFsZXJ0KCJSZWR1emEgbyB0YW1hbmhvIGRlIGltYWdlbSBlIHRlbnRlIG5vdmFtZW50ZS4iKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihlcnIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3IgY29tcHJpbWluZG8gaW1hZ2VtIiwgZXJyLm1lc3NhZ2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQoIlJlZHV6YSBvIHRhbWFuaG8gZGUgaW1hZ2VtIGUgdGVudGUgbm92YW1lbnRlLiIpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGRyYWdvdmVyOiBmdW5jdGlvbiBkcmFnb3ZlcihldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgaWYgKCFldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmctZ3JlZW4tMzAwJykpIHsKICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWdyYXktMTAwJyk7CiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdiZy1ncmVlbi0zMDAnKTsKICAgICAgfQogICAgfSwKICAgIGRyYWdsZWF2ZTogZnVuY3Rpb24gZHJhZ2xlYXZlKGV2ZW50KSB7CiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgnYmctZ3JheS0xMDAnKTsKICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ncmVlbi0zMDAnKTsKICAgIH0sCiAgICBkcm9wOiBmdW5jdGlvbiBkcm9wKGV2ZW50KSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuZmlsZSA9IHRoaXMuJHJlZnMuZmlsZXZpdHJpbmU7CiAgICAgIHRoaXMuZmlsZS5maWxlcyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlczsKICAgICAgdGhpcy5vbkNoYW5nZVZpdHJpbmUoKTsKICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdiZy1ncmF5LTEwMCcpOwogICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWdyZWVuLTMwMCcpOwogICAgfSwKICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGZpbGVOYW1lKSB7CiAgICAgIHRoaXMucmVtb3ZlQnlOYW1lKHRoaXMuZmlsZWxpc3QsIGZpbGVOYW1lKTsKICAgIH0sCiAgICByZW1vdmVCeU5hbWU6IGZ1bmN0aW9uIHJlbW92ZUJ5TmFtZShhcnIsIG5hbWUpIHsKICAgICAgdmFyIHJlcXVpcmVkSW5kZXggPSBhcnIuZmluZEluZGV4KGZ1bmN0aW9uIChlbCkgewogICAgICAgIHJldHVybiBlbC5uYW1lID09PSBTdHJpbmcobmFtZSk7CiAgICAgIH0pOwoKICAgICAgaWYgKHJlcXVpcmVkSW5kZXggPT09IC0xKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICA7CiAgICAgIHJldHVybiAhIWFyci5zcGxpY2UocmVxdWlyZWRJbmRleCwgMSk7CiAgICB9CiAgfQp9KTs="},{"version":3,"sources":["/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/GitHub/admin-frontend/src/components/vitrine-modal/vitrine-image-import.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport Compressor from 'compressorjs'\nexport default Vue.extend({\n  name: 'vitrineImageImport',\n  props: {\n    showImportImageModal: {\n      type: Boolean,\n      required: true\n    }\n  },\n  data: () => ({\n    filelist: [] as File[],\n    imageToCrop: '',\n    file: {} as any,\n    imageFile: {} as any,\n  }),\n  methods: {\n    onChangeVitrine() {\n      console.log(\"crop vitrine - upload\")\n      this.file = this.$refs.filevitrine;\n      this.filelist = [...this.file.files];\n      if (this.file.files.length) {            \n        const imageFile = this.file.files[0];\n        if (imageFile.size / 1000000 < 15) {\n          const compressor = new Compressor(imageFile, {\n            quality: 0.5,\n            width: 1250,\n            height: 1250,\n            convertSize: 0,\n            success: (imageCompressed) => {\n              const reader = new FileReader();\n              if (imageCompressed.size / 1000000 < 6) {\n                this.imageFile = imageCompressed;\n                reader.readAsDataURL(imageCompressed);\n                reader.onload = (e: any) => {\n                  this.imageToCrop = e.target.result;\n                  this.$emit('setImageToCrop', e.target.result)\n                };\n              }else{\n                alert(\"Reduza o tamanho de imagem e tente novamente.\");\n              }                       \n            },\n            error(err) {\n              console.log(\"error comprimindo imagem\", err.message);\n            },\n          });\n        }else{\n          alert(\"Reduza o tamanho de imagem e tente novamente.\");\n        } \n      }\n    },\n    dragover(event) {\n      event.preventDefault();\n      if (!event.currentTarget.classList.contains('bg-green-300')) {\n        event.currentTarget.classList.remove('bg-gray-100');\n        event.currentTarget.classList.add('bg-green-300');\n      }\n    },\n    dragleave(event) {\n      event.currentTarget.classList.add('bg-gray-100');\n      event.currentTarget.classList.remove('bg-green-300');\n    },\n    drop(event) {\n      event.preventDefault();\n      this.file = this.$refs.filevitrine;\n      this.file.files = event.dataTransfer.files;\n      this.onChangeVitrine();\n      event.currentTarget.classList.add('bg-gray-100');\n      event.currentTarget.classList.remove('bg-green-300');\n    },\n    remove(fileName){\n      this.removeByName(this.filelist, fileName);\n    },\n    removeByName(arr, name){\n      const requiredIndex = arr.findIndex(el => {\n          return el.name === String(name);\n      });\n      if(requiredIndex === -1){\n          return false;\n      };\n      return !!arr.splice(requiredIndex, 1);\n    }\n\n  }\n})\n"],"sourceRoot":""}]}