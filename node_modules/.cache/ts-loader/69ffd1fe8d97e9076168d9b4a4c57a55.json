{"remainingRequest":"/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js!/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js??ref--13-2!/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/GitHub/admin-frontend/src/views/Product/ProductCreateOrEditImages.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/GitHub/admin-frontend/src/views/Product/ProductCreateOrEditImages.vue","mtime":1673321154842},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZS5hbGwtc2V0dGxlZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvaG9tZS9hbGluZS9HaXRIdWIvYWRtaW4tZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvYWxpbmUvR2l0SHViL2FkbWluLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvYWxpbmUvR2l0SHViL2FkbWluLWZyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9ob21lL2FsaW5lL0dpdEh1Yi9hZG1pbi1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFByb2R1Y3RDcmVhdGVPckVkaXRTdGVwIGZyb20gIkAvdmlld3MvUHJvZHVjdC9Qcm9kdWN0Q3JlYXRlT3JFZGl0U3RlcC52dWUiOwppbXBvcnQgUHJvZHVjdEltYWdlQ2Fyb3VzZWwgZnJvbSAiQC9jb21wb25lbnRzL3Byb2R1Y3QtbW9kYWwvcHJvZHVjdC1pbWFnZS1jYXJvdXNlbC9Qcm9kdWN0SW1hZ2VDYXJvdXNlbC52dWUiOwppbXBvcnQgUHJvZHVjdExvYWRpbmdTY3JlZW4gZnJvbSAiQC9jb21wb25lbnRzL3Byb2R1Y3QtbW9kYWwvcHJvZHVjdC1sb2FkaW5nLXNjcmVlbi9Qcm9kdWN0TG9hZGluZ1NjcmVlbi52dWUiOwppbXBvcnQgUHJvZHVjdEltYWdlQ3JvcHBlciBmcm9tICJAL2NvbXBvbmVudHMvcHJvZHVjdC1tb2RhbC9wcm9kdWN0LWltYWdlLWNyb3BwZXIvUHJvZHVjdEltYWdlQ3JvcHBlci52dWUiOwppbXBvcnQgQ29tcHJlc3NvciBmcm9tICJjb21wcmVzc29yanMiOwppbXBvcnQgcHJvZHVjdHNTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvcHJvZHVjdHMuc2VydmljZSI7CmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoewogIG5hbWU6ICJQcm9kdWN0Q3JlYXRlT3JFZGl0SW1hZ2VzIiwKICBjb21wb25lbnRzOiB7CiAgICBQcm9kdWN0SW1hZ2VDcm9wcGVyOiBQcm9kdWN0SW1hZ2VDcm9wcGVyLAogICAgUHJvZHVjdExvYWRpbmdTY3JlZW46IFByb2R1Y3RMb2FkaW5nU2NyZWVuLAogICAgUHJvZHVjdEltYWdlQ2Fyb3VzZWw6IFByb2R1Y3RJbWFnZUNhcm91c2VsLAogICAgUHJvZHVjdENyZWF0ZU9yRWRpdFN0ZXA6IFByb2R1Y3RDcmVhdGVPckVkaXRTdGVwCiAgfSwKICBwcm9wczogewogICAgb3BlbjogewogICAgICB0eXBlOiBCb29sZWFuCiAgICB9LAogICAgcHJvZHVjdEd1aWQ6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgaXNTZXJ2aWNlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGlzVXBkYXRlUGFnZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBwcm9kdWN0OiB7CiAgICAgIHR5cGU6IFtPYmplY3QsIEJvb2xlYW5dLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbWFnZVRvQ3JvcFBvc2l0aW9uOiBudWxsLAogICAgICBpbWFnZVRvQ3JvcDogbnVsbCwKICAgICAgaW1hZ2VMaXN0OiBbXSwKICAgICAgb3BlbkxvYWRpbmdTY3JlZW46IGZhbHNlLAogICAgICBwcm9kdWN0TG9hZGluZzogZmFsc2UsCiAgICAgIHByb2R1Y3RzU2VydmljZTogbmV3IHByb2R1Y3RzU2VydmljZSgpLAogICAgICBvcGVuSW1hZ2VDcm9wcGVyOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBzdGVwVGl0bGU6IGZ1bmN0aW9uIHN0ZXBUaXRsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNVcGRhdGVQYWdlID8gIkZvdG9zIGRvICIuY29uY2F0KHRoaXMuaXNTZXJ2aWNlID8gJ3NlcnZpw6dvJyA6ICdwcm9kdXRvJykgOiAiTWVsaG9yZSBzZXUgYW5ceEZBbmNpbyBjb20gZm90b3MgZG8gc2V1ICIuY29uY2F0KHRoaXMuaXNTZXJ2aWNlID8gJ3NlcnZpw6dvJyA6ICdwcm9kdXRvJyk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMucHJvZHVjdCkgewogICAgICB0aGlzLmltYWdlTGlzdCA9IHRoaXMucHJvZHVjdC5pbWFnZV9saXN0OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYWRkSW1hZ2U6IGZ1bmN0aW9uIGFkZEltYWdlKCkgewogICAgICB0aGlzLiRyZWZzLmltYWdlSW5wdXQuY2xpY2soKTsKICAgIH0sCiAgICBkZWxldGVJbWFnZTogZnVuY3Rpb24gZGVsZXRlSW1hZ2UoaW5kZXgpIHsKICAgICAgdGhpcy5pbWFnZUxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICBjcm9wSW1hZ2U6IGZ1bmN0aW9uIGNyb3BJbWFnZShpbmRleCkgewogICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlTGlzdFtpbmRleF07CiAgICAgIHRoaXMuaW1hZ2VUb0Nyb3AgPSBpbWFnZS5pbWFnZV91cmw7CiAgICAgIHRoaXMuaW1hZ2VUb0Nyb3BQb3NpdGlvbiA9IGluZGV4OwogICAgICB0aGlzLm9wZW5JbWFnZUNyb3BwZXIgPSB0cnVlOwogICAgfSwKICAgIGNsb3NlSW1hZ2VDcm9wcGVyOiBmdW5jdGlvbiBjbG9zZUltYWdlQ3JvcHBlcihfcmVmKSB7CiAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpLAogICAgICAgICAgbWVzc2FnZSA9IF9yZWYyWzBdLAogICAgICAgICAgaW1hZ2UgPSBfcmVmMlsxXTsKCiAgICAgIGlmIChtZXNzYWdlID09PSAnc3VjY2VzcycpIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy5pbWFnZUxpc3QsIGltYWdlLnBvc2l0aW9uLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuaW1hZ2VMaXN0W2ltYWdlLnBvc2l0aW9uXSksIHt9LCB7CiAgICAgICAgICBpbWFnZV91cmw6IGltYWdlLmltYWdlX3VybCwKICAgICAgICAgIGltYWdlQmxvYjogaW1hZ2UuaW1hZ2VGaWxlCiAgICAgICAgfSkpOwogICAgICB9CgogICAgICB0aGlzLm9wZW5JbWFnZUNyb3BwZXIgPSBmYWxzZTsKICAgICAgdGhpcy5pbWFnZVRvQ3JvcCA9IG51bGw7CiAgICAgIHRoaXMuaW1hZ2VUb0Nyb3BQb3NpdGlvbiA9IG51bGw7CiAgICB9LAogICAgb25VcGxvYWRQcm9ncmVzczogZnVuY3Rpb24gb25VcGxvYWRQcm9ncmVzcyhldmVudCwgaW5kZXgpIHsKICAgICAgdmFyIHByb2dyZXNzID0gTWF0aC5yb3VuZChldmVudC5sb2FkZWQgKiAxMDAgLyBldmVudC50b3RhbCk7CgogICAgICBpZiAodGhpcy5pbWFnZUxpc3QgJiYgdGhpcy5pbWFnZUxpc3QpIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy5pbWFnZUxpc3QsIGluZGV4LCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuaW1hZ2VMaXN0W2luZGV4XSksIHt9LCB7CiAgICAgICAgICB1cGxvYWRQcm9ncmVzczogcHJvZ3Jlc3MKICAgICAgICB9KSk7CiAgICAgIH0KICAgIH0sCiAgICBzZW5kSW1hZ2VUb1MzOiBmdW5jdGlvbiBzZW5kSW1hZ2VUb1MzKHBhcmFtcykgewogICAgICByZXR1cm4gdGhpcy5wcm9kdWN0c1NlcnZpY2UudXBsb2FkVG9TMyhfb2JqZWN0U3ByZWFkKHt9LCBwYXJhbXMpKTsKICAgIH0sCiAgICBnZXRTaWduYXR1cmVzOiBmdW5jdGlvbiBnZXRTaWduYXR1cmVzKHF1YW50aXR5KSB7CiAgICAgIHJldHVybiB0aGlzLnByb2R1Y3RzU2VydmljZS5nZXRTM1NpZ25hdHVyZSh0aGlzLnByb2R1Y3RHdWlkLCBxdWFudGl0eSk7CiAgICB9LAogICAgZGVsYXk6IGZ1bmN0aW9uIGRlbGF5KG1zKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQocmVzLCBtcyk7CiAgICAgIH0pOwogICAgfSwKICAgIHNraXA6IGZ1bmN0aW9uIHNraXAoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NvbmZpcm0tbGVhdmUnLCB0cnVlKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9wcm9kdXRvcycpOwogICAgfSwKICAgIHVwZGF0ZVByb2R1Y3RJbWFnZXM6IGZ1bmN0aW9uIHVwZGF0ZVByb2R1Y3RJbWFnZXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBvbGRJbWFnZXMsIGltYWdlc1RvVXBsb2FkLCBzaWduYXR1cmVzLCBfeWllbGQkX3RoaXMkZ2V0U2lnbmEsIGRhdGEsIHJlc3VsdDsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgICBvbGRJbWFnZXMgPSBfdGhpcy5pbWFnZUxpc3QuZmlsdGVyKGZ1bmN0aW9uIChpbWFnZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gIWltYWdlLmlzTmV3OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBpbWFnZXNUb1VwbG9hZCA9IF90aGlzLmltYWdlTGlzdC5maWx0ZXIoZnVuY3Rpb24gKGltYWdlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpbWFnZS5pc05ldzsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgc2lnbmF0dXJlcyA9IFtdOwoKICAgICAgICAgICAgICAgIGlmICghKGltYWdlc1RvVXBsb2FkLmxlbmd0aCA+IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZ2V0U2lnbmF0dXJlcyhpbWFnZXNUb1VwbG9hZC5sZW5ndGgpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBfeWllbGQkX3RoaXMkZ2V0U2lnbmEgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRfdGhpcyRnZXRTaWduYS5kYXRhOwogICAgICAgICAgICAgICAgc2lnbmF0dXJlcyA9IGRhdGE7CiAgICAgICAgICAgICAgICBfdGhpcy5vcGVuTG9hZGluZ1NjcmVlbiA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGxTZXR0bGVkKGltYWdlc1RvVXBsb2FkLm1hcChmdW5jdGlvbiAoaW1hZ2UsIGluZGV4KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZW5kSW1hZ2VUb1MzKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc2lnbmF0dXJlc1tpbmRleF0uY29kZSksIHt9LCB7CiAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IGltYWdlLmltYWdlQmxvYiwKICAgICAgICAgICAgICAgICAgICBvblVwbG9hZFByb2dyZXNzQ2FsbGJhY2s6IF90aGlzLm9uVXBsb2FkUHJvZ3Jlc3MsCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGluZGV4CiAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTc7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIF90aGlzLnByb2R1Y3RMb2FkaW5nID0gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIF90aGlzLmltYWdlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpbWFnZSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gaW1hZ2UuaXNOZXcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5wcm9kdWN0c1NlcnZpY2UudXBkYXRlUHJvZHVjdEltYWdlcyhfdGhpcy5wcm9kdWN0R3VpZCwgW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShpbWFnZXNUb1VwbG9hZC5tYXAoZnVuY3Rpb24gKGltYWdlLCBpbmRleCkgewogICAgICAgICAgICAgICAgICB2YXIgc2lnbmF0dXJlID0gc2lnbmF0dXJlc1tpbmRleF0uY29kZTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25hdHVyZS51cmwgKyBzaWduYXR1cmUuZmllbGRzLmtleTsKICAgICAgICAgICAgICAgIH0pKSwgX3RvQ29uc3VtYWJsZUFycmF5KG9sZEltYWdlcy5tYXAoZnVuY3Rpb24gKGltYWdlKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBpbWFnZS5pbWFnZV91cmw7CiAgICAgICAgICAgICAgICB9KSkpKTsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICAgIF90aGlzLnByb2R1Y3RMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF90aGlzLm9wZW5Mb2FkaW5nU2NyZWVuID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuZGVsYXkoNTAwKTsKCiAgICAgICAgICAgICAgY2FzZSAyNDoKICAgICAgICAgICAgICAgIF90aGlzLiRlbWl0KCdjb25maXJtLWxlYXZlJywgdHJ1ZSk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI3OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRyb3V0ZXIucHVzaCgnL3Byb2R1dG9zJyk7CgogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjk7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJGFsZXJ0KCJJbWFnZW5zICIuY29uY2F0KF90aGlzLmlzVXBkYXRlUGFnZSA/ICdhdHVhbGl6YWRhcycgOiAnYWRpY2lvbmFkYXMnLCAiIGNvbSBzdWNlc3NvIiksICcnLCAnc3VjY2VzcycsIHsKICAgICAgICAgICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wLWVuZCcsCiAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgdGltZXI6IDMwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzE7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihfY29udGV4dC50MCk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJGFsZXJ0KCdFcnJvIGFvIGZhemVyIG8gdXBsb2FkIGRhcyBpbWFnZW5zJywgJycsICdlcnJvcicsIHsKICAgICAgICAgICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wLWVuZCcsCiAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgdGltZXI6IDMwMDAKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM2OgogICAgICAgICAgICAgICAgX3RoaXMub3BlbkxvYWRpbmdTY3JlZW4gPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSAzNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMCwgMzFdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG9uSW1hZ2VJbnB1dDogZnVuY3Rpb24gb25JbWFnZUlucHV0KGUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgZmlsZUlucHV0ID0gdGhpcy4kcmVmcy5pbWFnZUlucHV0IHx8IHt9OwoKICAgICAgaWYgKGZpbGVJbnB1dCAmJiBmaWxlSW5wdXQuZmlsZXMubGVuZ3RoKSB7CiAgICAgICAgdmFyIGltYWdlRmlsZSA9IGZpbGVJbnB1dC5maWxlc1swXTsKCiAgICAgICAgaWYgKGltYWdlRmlsZS5zaXplIC8gMTAwMDAwMCA8IDE1KSB7CiAgICAgICAgICB2YXIgY29tcHJlc3NvciA9IG5ldyBDb21wcmVzc29yKGltYWdlRmlsZSwgewogICAgICAgICAgICBxdWFsaXR5OiAwLjUsCiAgICAgICAgICAgIHdpZHRoOiAxMjUwLAogICAgICAgICAgICBoZWlnaHQ6IDEyNTAsCiAgICAgICAgICAgIGNvbnZlcnRTaXplOiAwLAogICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgdmFyIF9zdWNjZXNzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhpbWFnZUNvbXByZXNzZWQpIHsKICAgICAgICAgICAgICAgIHZhciByZWFkZXI7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlQ29tcHJlc3NlZC5zaXplIC8gMTAwMDAwMCA8IDYpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZUZpbGUgPSBpbWFnZUNvbXByZXNzZWQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2VDb21wcmVzc2VkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfdGhpczIuaW1hZ2VMaXN0OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MSA9IGUudGFyZ2V0LnJlc3VsdDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKGUudGFyZ2V0LnJlc3VsdCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc2VudC5ibG9iKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQyID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQzID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2VfdXJsOiBfY29udGV4dDIudDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZUJsb2I6IF9jb250ZXh0Mi50MiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTmV3OiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwLnB1c2guY2FsbChfY29udGV4dDIudDAsIF9jb250ZXh0Mi50Myk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5pbWFnZVRvQ3JvcCA9IGUudGFyZ2V0LnJlc3VsdDsgLy9AdHMtaWdub3JlCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVJbnB1dC52YWx1ZSA9IG51bGw7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlJlZHV6YSBvIHRhbWFuaG8gZGUgaW1hZ2VtIGUgdGVudGUgbm92YW1lbnRlLiIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKF94KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3N1Y2Nlc3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHJldHVybiBzdWNjZXNzOwogICAgICAgICAgICB9KCksCiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiBlcnJvcihlcnIpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZXJybyBjb21wcmltaW5kbyBpbWFnZW0iLCBlcnIubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhbGVydCgiUmVkdXphIG8gdGFtYW5obyBkZSBpbWFnZW0gZSB0ZW50ZSBub3ZhbWVudGUuIik7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9KTs="},{"version":3,"sources":["/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/GitHub/admin-frontend/src/views/Product/ProductCreateOrEditImages.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue';\n\nimport ProductCreateOrEditStep from \"@/views/Product/ProductCreateOrEditStep.vue\";\nimport ProductImageCarousel from \"@/components/product-modal/product-image-carousel/ProductImageCarousel.vue\";\nimport ProductLoadingScreen from \"@/components/product-modal/product-loading-screen/ProductLoadingScreen.vue\";\nimport ProductImageCropper from \"@/components/product-modal/product-image-cropper/ProductImageCropper.vue\";\n\n\nimport Compressor from \"compressorjs\";\nimport productsService from \"@/services/products.service\";\n\ninterface IData {\n  imageToCrop: Blob | File | string | null;\n  imageList: any[];\n  openLoadingScreen: boolean;\n  productLoading: boolean;\n  productsService: productsService,\n  openImageCropper: boolean;\n  imageToCropPosition: number | null;\n}\n\nexport default Vue.extend({\n  name: \"ProductCreateOrEditImages\",\n  components: {\n    ProductImageCropper,\n    ProductLoadingScreen,\n    ProductImageCarousel,\n    ProductCreateOrEditStep,\n  },\n\n  props: {\n    open: {\n      type: Boolean,\n    },\n\n    productGuid: {\n      type: String,\n    },\n\n    isService: {\n      type: Boolean,\n      default: () => false,\n    },\n\n    isUpdatePage: {\n      type: Boolean,\n      default: () => false,\n    },\n\n    product: {\n      type: [Object, Boolean],\n      default: () => false,\n    }\n  },\n\n  data(): IData {\n    return {\n      imageToCropPosition: null,\n      imageToCrop: null,\n      imageList: [],\n\n      openLoadingScreen: false,\n      productLoading: false,\n      productsService: new productsService(),\n      openImageCropper: false,\n    }\n  },\n\n  computed: {\n    stepTitle(): string {\n      return this.isUpdatePage\n        ? `Fotos do ${this.isService ? 'serviço' : 'produto'}`\n        : `Melhore seu anúncio com fotos do seu ${this.isService ? 'serviço' : 'produto'}`\n    }\n  },\n\n  created() {\n    if (this.product) {\n      this.imageList = this.product.image_list;\n    }\n  },\n\n  methods: {\n    addImage() {\n      (this.$refs.imageInput as HTMLInputElement).click();\n    },\n\n    deleteImage(index) {\n      this.imageList.splice(index, 1);\n    },\n\n    cropImage(index) {\n      const image = this.imageList[index];\n      this.imageToCrop = image.image_url;\n      this.imageToCropPosition = index;\n\n      this.openImageCropper = true;\n    },\n\n    closeImageCropper([message, image]) {\n      if (message === 'success') {\n        this.$set(this.imageList, image.position, {\n          ...this.imageList[image.position],\n          image_url: image.image_url,\n          imageBlob: image.imageFile,\n        });\n      }\n\n      this.openImageCropper = false;\n      this.imageToCrop = null;\n      this.imageToCropPosition = null;\n    },\n\n    onUploadProgress(event, index) {\n      let progress: number = Math.round(\n        (event.loaded * 100) / event.total\n      );\n\n      if (this.imageList && this.imageList) {\n        this.$set(this.imageList, index, {\n          ...this.imageList[index],\n          uploadProgress: progress,\n        });\n      }\n    },\n\n    sendImageToS3(params) {\n      return this.productsService.uploadToS3({\n        ...params,\n      });\n    },\n\n    getSignatures(quantity) {\n      return this.productsService.getS3Signature(this.productGuid, quantity);\n    },\n\n    delay(ms) {\n      return new Promise((res) => setTimeout(res, ms));\n    },\n\n    skip() {\n      this.$emit('confirm-leave', true);\n      this.$router.push('/produtos');\n    },\n\n    async updateProductImages() {\n      try {\n        const oldImages = this.imageList.filter(image => !image.isNew);\n        const imagesToUpload = this.imageList.filter(image => image.isNew);\n\n        let signatures = [] as any[];\n\n        if (imagesToUpload.length > 0) {\n          const { data } = await this.getSignatures(imagesToUpload.length);\n\n          signatures = data;\n\n          this.openLoadingScreen = true;\n\n          const result = await Promise.allSettled(\n            imagesToUpload.map((image, index) => {\n              return this.sendImageToS3({\n                ...signatures[index].code,\n                image: image.imageBlob,\n                onUploadProgressCallback: this.onUploadProgress,\n                position: index,\n              });\n            }),\n          );\n        } else {\n          this.productLoading = true;\n        }\n\n        this.imageList.forEach(image => image.isNew = false)\n\n        await this.productsService.updateProductImages(\n          this.productGuid,\n          [\n            ...imagesToUpload.map((image, index) => {\n              const signature = signatures[index].code;\n              return signature.url + signature.fields.key;\n            }),\n            ...oldImages.map(image => image.image_url),\n          ]\n        );\n\n        this.productLoading = true;\n\n        this.openLoadingScreen = false;\n\n        await this.delay(500);\n\n        this.$emit('confirm-leave', true);\n        await this.$router.push('/produtos');\n\n        await this.$alert(\n          `Imagens ${this.isUpdatePage ? 'atualizadas' : 'adicionadas'} com sucesso`,\n          '',\n          'success', {\n          toast: true,\n          position: 'top-end',\n          showConfirmButton: false,\n          timer: 3000,\n        });\n      } catch (e) {\n        console.error(e);\n\n        await this.$alert('Erro ao fazer o upload das imagens', '', 'error', {\n          toast: true,\n          position: 'top-end',\n          showConfirmButton: false,\n          timer: 3000,\n        });\n      }\n\n      this.openLoadingScreen = false;\n    },\n\n    onImageInput(e) {\n      const fileInput = this.$refs.imageInput as HTMLInputElement || {};\n\n      if (fileInput && fileInput.files!.length) {\n        let imageFile: Blob | File = fileInput.files![0];\n        if (imageFile.size / 1000000 < 15) {\n          const compressor = new Compressor(imageFile, {\n            quality: 0.5,\n            width: 1250,\n            height: 1250,\n            convertSize: 0,\n            success: async (imageCompressed) => {\n              const reader = new FileReader();\n              if (imageCompressed.size / 1000000 < 6) {\n                imageFile = imageCompressed;\n                reader.readAsDataURL(imageCompressed);\n                reader.onload = async (e: any) => {\n                  this.imageList.push({\n                    image_url: e.target.result,\n                    imageBlob: await (await fetch(e.target.result)).blob(),\n                    isNew: true,\n                  });\n                  this.imageToCrop = e.target.result;\n                  //@ts-ignore\n                  fileInput.value = null;\n                };\n              } else {\n                alert(\"Reduza o tamanho de imagem e tente novamente.\");\n              }\n            },\n            error(err) {\n              console.log(\"erro comprimindo imagem\", err.message);\n            },\n          });\n        } else {\n          alert(\"Reduza o tamanho de imagem e tente novamente.\");\n        }\n      }\n    }\n  }\n});\n"],"sourceRoot":""}]}