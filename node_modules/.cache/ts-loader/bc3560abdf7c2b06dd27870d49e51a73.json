{"remainingRequest":"/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js!/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js??ref--13-2!/home/aline/GitHub/admin-frontend/src/components/help-button/help-button.component.ts","dependencies":[{"path":"/home/aline/GitHub/admin-frontend/src/components/help-button/help-button.component.ts","mtime":1675112059749},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js","mtime":1673370387800}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9hbGluZS9HaXRIdWIvYWRtaW4tZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9ob21lL2FsaW5lL0dpdEh1Yi9hZG1pbi1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9ob21lL2FsaW5lL0dpdEh1Yi9hZG1pbi1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9ob21lL2FsaW5lL0dpdEh1Yi9hZG1pbi1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9ob21lL2FsaW5lL0dpdEh1Yi9hZG1pbi1mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwppbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSAidHNsaWIiOwppbXBvcnQgeyBDb21wb25lbnQsIFByb3AsIFZ1ZSB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InOwppbXBvcnQgSGVscFNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9oZWxwLnNlcnZpY2UiOwoKdmFyIEhlbHBCdXR0b24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWUpIHsKICBfaW5oZXJpdHMoSGVscEJ1dHRvbiwgX1Z1ZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoSGVscEJ1dHRvbik7CgogIGZ1bmN0aW9uIEhlbHBCdXR0b24oKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEhlbHBCdXR0b24pOwoKICAgIF90aGlzID0gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICBfdGhpcy5vcGVuUG9wdXAgPSBmYWxzZTsKICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhIZWxwQnV0dG9uLCBbewogICAga2V5OiAib3BlbkhlbHAiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW5IZWxwKCkgewogICAgICBpZiAodGhpcy5jdXJyZW50Q2hhdGJvdCkgewogICAgICAgIHRoaXMub3BlblBvcHVwID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLm9wZW5GcmVzaHdvcmtzV2lkZ2V0KCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJvcGVuRnJlc2h3b3Jrc1dpZGdldCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbkZyZXNod29ya3NXaWRnZXQoKSB7CiAgICAgIHdpbmRvdy5GcmVzaHdvcmtzV2lkZ2V0KCdvcGVuJyk7CiAgICAgIHRoaXMub3BlblBvcHVwID0gZmFsc2U7CiAgICB9CiAgfSwgewogICAga2V5OiAic2VuZENoYXRib3REYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfc2VuZENoYXRib3REYXRhID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfSlNPTiRwYXJzZSwgbW9iaWxlLCBoZWxwU2VydmljZTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX0pTT04kcGFyc2UgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdsb2dnZWRVc2VyJykgfHwgJ3t9JyksIG1vYmlsZSA9IF9KU09OJHBhcnNlLm1vYmlsZTsKICAgICAgICAgICAgICAgIGhlbHBTZXJ2aWNlID0gbmV3IEhlbHBTZXJ2aWNlKCk7CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDM7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBoZWxwU2VydmljZS5zZW5kQ2hhdGJvdERhdGEoewogICAgICAgICAgICAgICAgICBtb2JpbGU6IG1vYmlsZSwKICAgICAgICAgICAgICAgICAgY2hhdGJvdDogdGhpcy5jdXJyZW50Q2hhdGJvdC5pZF9ib3QKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICB0aGlzLiRhbGVydCgnTWVuc2FnZW0gZW52aWFkYSBwb3IgV2hhdHNBcHAnLCAnJywgJ3N1Y2Nlc3MnLCB7CiAgICAgICAgICAgICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1lbmQnLAogICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHRpbWVyOiAzMDAwCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKF9jb250ZXh0LnQwKTsKICAgICAgICAgICAgICAgIHRoaXMuJGFsZXJ0KCdFcnJvIGFvIGVudmlhciBtZW5zYWdlbSBwb3IgV2hhdHNBcHAnLCAnJywgJ2Vycm9yJywgewogICAgICAgICAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3AtZW5kJywKICAgICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgICB0aW1lcjogMzAwMAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMub3BlblBvcHVwID0gZmFsc2U7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzMsIDldXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHNlbmRDaGF0Ym90RGF0YSgpIHsKICAgICAgICByZXR1cm4gX3NlbmRDaGF0Ym90RGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc2VuZENoYXRib3REYXRhOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiY2hhdGJvdHMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jaGF0Ym90czsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjdXJyZW50Q2hhdGJvdCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuY2hhdGJvdElkIHx8ICF0aGlzLmNoYXRib3RzIHx8ICF0aGlzLmNoYXRib3RzLmxpc3QpIHJldHVybiBudWxsOwogICAgICByZXR1cm4gdGhpcy5jaGF0Ym90cy5saXN0LmZpbmQoZnVuY3Rpb24gKGNoYXRib3QpIHsKICAgICAgICByZXR1cm4gY2hhdGJvdC5pZCA9PT0gX3RoaXMyLmNoYXRib3RJZDsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2hhdGJvdFRleHQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIGlmICghdGhpcy5jaGF0Ym90SWQgfHwgIXRoaXMuY2hhdGJvdHMgfHwgIXRoaXMuY2hhdGJvdHMubGlzdCkgcmV0dXJuIG51bGw7CiAgICAgIHJldHVybiB0aGlzLmNoYXRib3RzLnRleHRzLmRlZmF1bHRfY2hhdGJvdF90ZXh0LnJlcGxhY2UoJyR0ZXh0JCcsIHRoaXMuY3VycmVudENoYXRib3QudGV4dCk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gSGVscEJ1dHRvbjsKfShWdWUpOwoKX19kZWNvcmF0ZShbUHJvcCgpXSwgSGVscEJ1dHRvbi5wcm90b3R5cGUsICJwb3NpdGlvbiIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKCldLCBIZWxwQnV0dG9uLnByb3RvdHlwZSwgInNwYWNpbmdCb3R0b20iLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcCgpXSwgSGVscEJ1dHRvbi5wcm90b3R5cGUsICJjaGF0Ym90SWQiLCB2b2lkIDApOwoKSGVscEJ1dHRvbiA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7fSldLCBIZWxwQnV0dG9uKTsKZXhwb3J0IHsgSGVscEJ1dHRvbiB9Ow=="},{"version":3,"sources":["/home/aline/GitHub/admin-frontend/src/components/help-button/help-button.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, Prop, Vue} from 'vue-property-decorator';\n\nimport HelpService from \"@/services/help.service\";\nimport VueSimpleAlert from \"vue-simple-alert\";\n\ndeclare global {\n    interface Window {\n        FreshworksWidget(action: string);\n    }\n}\n\n@Component({})\nexport class HelpButton extends Vue {\n    @Prop() position!: string;\n    @Prop() spacingBottom!: boolean;\n    @Prop() chatbotId!: string;\n\n    public openPopup: boolean = false;\n    public loading: boolean = false;\n\n    get chatbots() {\n        return this.$store.state.chatbots;\n    }\n\n    get currentChatbot(): any {\n        if (!this.chatbotId || !this.chatbots || !this.chatbots.list) return null;\n        return this.chatbots.list.find(chatbot => chatbot.id === this.chatbotId);\n    }\n\n    get chatbotText(): string | null {\n        if (!this.chatbotId || !this.chatbots || !this.chatbots.list) return null;\n        return this.chatbots.texts.default_chatbot_text.replace(\n            '$text$',\n            this.currentChatbot.text,\n        );\n    }\n\n    public openHelp() {\n        if (this.currentChatbot) {\n            this.openPopup = true;\n        } else {\n            this.openFreshworksWidget();\n        }\n    }\n\n    public openFreshworksWidget() {\n        window.FreshworksWidget('open');\n        this.openPopup = false;\n    }\n\n    public async sendChatbotData() {\n        const {mobile} = JSON.parse(localStorage.getItem('loggedUser') || '{}');\n\n        const helpService = new HelpService();\n\n        this.loading = true;\n\n        try {\n            await helpService.sendChatbotData({\n                mobile,\n                chatbot: this.currentChatbot.id_bot,\n            });\n\n            this.$alert('Mensagem enviada por WhatsApp', '', 'success', {\n                toast: true,\n                position: 'top-end',\n                showConfirmButton: false,\n                timer: 3000,\n            });\n        } catch (e) {\n            console.error(e);\n            this.$alert('Erro ao enviar mensagem por WhatsApp', '', 'error', {\n                toast: true,\n                position: 'top-end',\n                showConfirmButton: false,\n                timer: 3000,\n            });\n        }\n\n        this.loading = false;\n        this.openPopup = false;\n    }\n}\n"],"sourceRoot":""}]}