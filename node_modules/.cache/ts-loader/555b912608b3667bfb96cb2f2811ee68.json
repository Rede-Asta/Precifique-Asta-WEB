{"remainingRequest":"/home/aline/AstaPrecifique/node_modules/babel-loader/lib/index.js!/home/aline/AstaPrecifique/node_modules/ts-loader/index.js??ref--13-2!/home/aline/AstaPrecifique/src/services/cupon.service.ts","dependencies":[{"path":"/home/aline/AstaPrecifique/src/services/cupon.service.ts","mtime":1696439584697},{"path":"/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/AstaPrecifique/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/AstaPrecifique/node_modules/ts-loader/index.js","mtime":1673370387800}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvYWxpbmUvQXN0YVByZWNpZmlxdWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9hbGluZS9Bc3RhUHJlY2lmaXF1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvYWxpbmUvQXN0YVByZWNpZmlxdWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9hbGluZS9Bc3RhUHJlY2lmaXF1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgVXNlclN0b3JhZ2UgZnJvbSAnQC9zZXJ2aWNlcy9Vc2VyU3RvcmFnZSc7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBlbnZpcm9ubWVudCBmcm9tICdAL2Vudmlyb25tZW50cy9lbnZpcm9ubWVudCc7Cgp2YXIgY3Vwb25TZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBjdXBvblNlcnZpY2UoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgY3Vwb25TZXJ2aWNlKTsKCiAgICB0aGlzLmhlYWRlcnNUb2tlbiA9IHsKICAgICAgJ0F1dGhvcml6YXRpb24nOiBlbnZpcm9ubWVudC5zZXRBdXRob3JpemF0aW9uVG9rZW4oKSwKICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ29udGVudC1UeXBlJywKICAgICAgJ3gtdG9rZW4nOiBVc2VyU3RvcmFnZS5yZXR1cm5Ub2tlbigpCiAgICB9OwogICAgdGhpcy5oZWFkZXJzID0gewogICAgICAnQXV0aG9yaXphdGlvbic6IGVudmlyb25tZW50LnNldEF1dGhvcml6YXRpb25Ub2tlbigpLAogICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyc6ICdDb250ZW50LVR5cGUnCiAgICB9OwogIH0gLy8gcHVibGljIGF1dGhIZWFkZXIoKSB7CiAgLy8gICAgIGNvbnN0IHVzZXJMUzogYW55ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKTsKICAvLyAgICAgY29uc3QgdXNlciA9IEpTT04ucGFyc2UodXNlckxTKTsKICAvLyAgICAgaWYgKHVzZXIgJiYgdXNlci50b2tlbikgewogIC8vICAgICAgICAgcmV0dXJuIHsgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAnICsgdXNlci50b2tlbiB9OwogIC8vICAgICB9IGVsc2UgewogIC8vICAgICAgICAgcmV0dXJuIHt9OwogIC8vICAgICB9CiAgLy8gfQoKCiAgX2NyZWF0ZUNsYXNzKGN1cG9uU2VydmljZSwgW3sKICAgIGtleTogImdldEN1cG9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2dldEN1cG9ucyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZ3VpZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBndWlkID0gVXNlclN0b3JhZ2UucmV0dXJuR3VpZCgpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCIiLmNvbmNhdChlbnZpcm9ubWVudC5zZXRBUEkoKSwgIi9zZWxsZXIvY291cG9uX2JhdGNoLyIpLmNvbmNhdChndWlkKSwgewogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGdldEN1cG9ucygpIHsKICAgICAgICByZXR1cm4gX2dldEN1cG9ucy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0Q3Vwb25zOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiZ2V0Q3Vwb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRDdXBvbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoY3Vwb25HdWlkKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoIiIuY29uY2F0KGVudmlyb25tZW50LnNldEFQSSgpLCAiL2NvdXBvbl9iYXRjaC8iKS5jb25jYXQoY3Vwb25HdWlkKSwgewogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyLnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBnZXRDdXBvbihfeCkgewogICAgICAgIHJldHVybiBfZ2V0Q3Vwb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGdldEN1cG9uOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiYWRkQ3Vwb24iLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9hZGRDdXBvbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoY3Vwb24pIHsKICAgICAgICB2YXIgZ3VpZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZ3VpZCA9IFVzZXJTdG9yYWdlLnJldHVybkd1aWQoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCIiLmNvbmNhdChlbnZpcm9ubWVudC5zZXRBUEkoKSwgIi9zZWxsZXIvY291cG9uX2JhdGNoLyIpLmNvbmNhdChndWlkKSwgY3Vwb24sIHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzVG9rZW4KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzLnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBhZGRDdXBvbihfeDIpIHsKICAgICAgICByZXR1cm4gX2FkZEN1cG9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBhZGRDdXBvbjsKICAgIH0oKQogIH0sIHsKICAgIGtleTogInVwZGF0ZUN1cG9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdXBkYXRlQ3Vwb24gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KGN1cG9uLCBjdXBvbkd1aWQpIHsKICAgICAgICB2YXIgZ3VpZCwgZGF0YTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZ3VpZCA9IFVzZXJTdG9yYWdlLnJldHVybkd1aWQoKTsKICAgICAgICAgICAgICAgIGRhdGEgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGN1cG9uKSwge30sIHsKICAgICAgICAgICAgICAgICAgc2VsbGVyX2d1aWRfbGlzdDogW2d1aWRdCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wYXRjaCgiIi5jb25jYXQoZW52aXJvbm1lbnQuc2V0QVBJKCksICIvY291cG9uX2JhdGNoLyIpLmNvbmNhdChjdXBvbkd1aWQpLCBkYXRhLCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1Rva2VuCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NC5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gdXBkYXRlQ3Vwb24oX3gzLCBfeDQpIHsKICAgICAgICByZXR1cm4gX3VwZGF0ZUN1cG9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB1cGRhdGVDdXBvbjsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIGN1cG9uU2VydmljZTsKfSgpOwoKZXhwb3J0IHsgY3Vwb25TZXJ2aWNlIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/home/aline/AstaPrecifique/src/services/cupon.service.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,WAAP,MAAiC,wBAAjC;AACA,OAAO,KAAP,MAAkB,OAAlB;AAEA,OAAO,WAAP,MAAiC,4BAAjC;;IAIqB,Y;AAArB,0BAAA;AAAA;;AAEY,SAAA,YAAA,GAAe;AACnB,uBAAiB,WAAW,CAAC,qBAAZ,EADE;AAEnB,sBAAgB,kBAFG;AAGnB,sCAAgC,cAHb;AAInB,iBAAW,WAAW,CAAC,WAAZ;AAJQ,KAAf;AAOA,SAAA,OAAA,GAAU;AACd,uBAAiB,WAAW,CAAC,qBAAZ,EADH;AAEd,sBAAgB,kBAFF;AAGd,sCAAgC;AAHlB,KAAV;AA4CX,G,CAtCG;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AAGU,gBAAA,I,GAAO,WAAW,CAAC,UAAZ,E;;uBACA,KAAK,CAAC,GAAN,WAAa,WAAW,CAAC,MAAZ,EAAb,kCAAyD,IAAzD,GAAiE;AAC1E,kBAAA,OAAO,EAAE,KAAK;AAD4D,iBAAjE,C;;;;;;;;;;;;;;;;;;;;;;gGAKK,S;;;;;;uBACL,KAAK,CAAC,GAAN,WAAa,WAAW,CAAC,MAAZ,EAAb,2BAAkD,SAAlD,GAA+D;AACxE,kBAAA,OAAO,EAAE,KAAK;AAD0D,iBAA/D,C;;;;;;;;;;;;;;;;;;;;;;gGAKK,K;;;;;;AACZ,gBAAA,I,GAAO,WAAW,CAAC,UAAZ,E;;uBACA,KAAK,CAAC,IAAN,WAAc,WAAW,CAAC,MAAZ,EAAd,kCAA0D,IAA1D,GAAkE,KAAlE,EAAyE;AAClF,kBAAA,OAAO,EAAE,KAAK;AADoE,iBAAzE,C;;;;;;;;;;;;;;;;;;;;;;mGAKQ,K,EAAO,S;;;;;;AACtB,gBAAA,I,GAAO,WAAW,CAAC,UAAZ,E;AACP,gBAAA,I,mCAAU,K;AAAO,kBAAA,gBAAgB,EAAE,CAAC,IAAD;;;uBAC5B,KAAK,CAAC,KAAN,WAAe,WAAW,CAAC,MAAZ,EAAf,2BAAoD,SAApD,GAAiE,IAAjE,EAAuE;AAChF,kBAAA,OAAO,EAAE,KAAK;AADkE,iBAAvE,C;;;;;;;;;;;;;;;;;;;;;;;;SAjDA,Y","sourcesContent":["import UserStorage          from '@/services/UserStorage';\nimport axios from 'axios';\n\nimport environment          from '@/environments/environment';\n\nimport { ICategory, VariantValue }    from '@/models/category';\n\nexport default class cuponService {\n\n    private headersToken = {\n        'Authorization': environment.setAuthorizationToken(),\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Headers': 'Content-Type',\n        'x-token': UserStorage.returnToken(),\n    };\n\n    private headers = {\n        'Authorization': environment.setAuthorizationToken(),\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Headers': 'Content-Type',\n    };\n\n    // public authHeader() {\n    //     const userLS: any = localStorage.getItem('user');\n    //     const user = JSON.parse(userLS);\n\n    //     if (user && user.token) {\n    //         return { Authorization: 'Bearer ' + user.token };\n    //     } else {\n    //         return {};\n    //     }\n    // }\n\n    public async getCupons() {\n        const guid = UserStorage.returnGuid();\n        return await axios.get(`${environment.setAPI()}/seller/coupon_batch/${guid}`, {\n            headers: this.headers,\n        });\n    }\n\n    public async getCupon(cuponGuid) {\n        return await axios.get(`${environment.setAPI()}/coupon_batch/${cuponGuid}`, {\n            headers: this.headers,\n        });\n    }\n\n    public async addCupon(cupon){\n        const guid = UserStorage.returnGuid();\n        return await axios.post(`${environment.setAPI()}/seller/coupon_batch/${guid}`, cupon, {\n            headers: this.headersToken,\n        });\n    }\n\n    public async updateCupon(cupon, cuponGuid){\n        const guid = UserStorage.returnGuid();\n        const data ={...cupon, seller_guid_list: [guid]}\n        return await axios.patch(`${environment.setAPI()}/coupon_batch/${cuponGuid}`, data, {\n            headers: this.headersToken,\n        });\n    }\n}\n"],"sourceRoot":""}]}