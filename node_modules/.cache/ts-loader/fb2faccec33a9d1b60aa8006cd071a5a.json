{"remainingRequest":"/home/aline/AstaPrecifique/node_modules/babel-loader/lib/index.js!/home/aline/AstaPrecifique/node_modules/ts-loader/index.js??ref--13-2!/home/aline/AstaPrecifique/src/components/help-button-open-call/help-button-open-call.component.ts","dependencies":[{"path":"/home/aline/AstaPrecifique/src/components/help-button-open-call/help-button-open-call.component.ts","mtime":1696439584417},{"path":"/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/AstaPrecifique/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/AstaPrecifique/node_modules/ts-loader/index.js","mtime":1673370387800}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvaG9tZS9hbGluZS9Bc3RhUHJlY2lmaXF1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvYWxpbmUvQXN0YVByZWNpZmlxdWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvaG9tZS9hbGluZS9Bc3RhUHJlY2lmaXF1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9ob21lL2FsaW5lL0FzdGFQcmVjaWZpcXVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiL2hvbWUvYWxpbmUvQXN0YVByZWNpZmlxdWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBWdWUgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJzsKaW1wb3J0IEhlbHBTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvaGVscC5zZXJ2aWNlIjsKCnZhciBIZWxwQnV0dG9uT3BlbkNhbGwgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9WdWUpIHsKICBfaW5oZXJpdHMoSGVscEJ1dHRvbk9wZW5DYWxsLCBfVnVlKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihIZWxwQnV0dG9uT3BlbkNhbGwpOwoKICBmdW5jdGlvbiBIZWxwQnV0dG9uT3BlbkNhbGwoKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEhlbHBCdXR0b25PcGVuQ2FsbCk7CgogICAgX3RoaXMgPSBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIF90aGlzLm9wZW5Qb3B1cCA9IGZhbHNlOwogICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEhlbHBCdXR0b25PcGVuQ2FsbCwgW3sKICAgIGtleTogIm9wZW5IZWxwIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuSGVscCgpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudENoYXRib3QpIHsKICAgICAgICB0aGlzLm9wZW5Qb3B1cCA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5vcGVuRnJlc2h3b3Jrc1dpZGdldCgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAib3BlbkZyZXNod29ya3NXaWRnZXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW5GcmVzaHdvcmtzV2lkZ2V0KCkgewogICAgICB3aW5kb3cuRnJlc2h3b3Jrc1dpZGdldCgnb3BlbicpOwogICAgICB0aGlzLm9wZW5Qb3B1cCA9IGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogIm9wZW5aZW5kZXNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuWmVuZGVzaygpIHsKICAgICAgdGhpcy4kemVuZGVzay5sb2FkKCIxNGU2YzAxZS1hZTJjLTRlMmMtOGM3Ni1kNDYxYzAxNDc5YzgiKTsKICAgICAgdGhpcy4kemVuZGVzay56RSgnbWVzc2VuZ2VyJywgJ29wZW4nKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZW5kQ2hhdGJvdERhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zZW5kQ2hhdGJvdERhdGEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF9KU09OJHBhcnNlLCBtb2JpbGUsIGhlbHBTZXJ2aWNlOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfSlNPTiRwYXJzZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xvZ2dlZFVzZXInKSB8fCAne30nKSwgbW9iaWxlID0gX0pTT04kcGFyc2UubW9iaWxlOwogICAgICAgICAgICAgICAgaGVscFNlcnZpY2UgPSBuZXcgSGVscFNlcnZpY2UoKTsKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIGhlbHBTZXJ2aWNlLnNlbmRDaGF0Ym90RGF0YSh7CiAgICAgICAgICAgICAgICAgIG1vYmlsZTogbW9iaWxlLAogICAgICAgICAgICAgICAgICBjaGF0Ym90OiB0aGlzLmN1cnJlbnRDaGF0Ym90LmlkX2JvdAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHRoaXMuJGFsZXJ0KCdNZW5zYWdlbSBlbnZpYWRhIHBvciBXaGF0c0FwcCcsICcnLCAnc3VjY2VzcycsIHsKICAgICAgICAgICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wLWVuZCcsCiAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgdGltZXI6IDMwMDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoX2NvbnRleHQudDApOwogICAgICAgICAgICAgICAgdGhpcy4kYWxlcnQoJ0Vycm8gYW8gZW52aWFyIG1lbnNhZ2VtIHBvciBXaGF0c0FwcCcsICcnLCAnZXJyb3InLCB7CiAgICAgICAgICAgICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1lbmQnLAogICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgIHRpbWVyOiAzMDAwCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5vcGVuUG9wdXAgPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbMywgOV1dKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc2VuZENoYXRib3REYXRhKCkgewogICAgICAgIHJldHVybiBfc2VuZENoYXRib3REYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzZW5kQ2hhdGJvdERhdGE7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJjaGF0Ym90cyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmNoYXRib3RzOwogICAgfQogIH0sIHsKICAgIGtleTogImN1cnJlbnRDaGF0Ym90IiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5jaGF0Ym90SWQgfHwgIXRoaXMuY2hhdGJvdHMgfHwgIXRoaXMuY2hhdGJvdHMubGlzdCkgcmV0dXJuIG51bGw7CiAgICAgIHJldHVybiB0aGlzLmNoYXRib3RzLmxpc3QuZmluZChmdW5jdGlvbiAoY2hhdGJvdCkgewogICAgICAgIHJldHVybiBjaGF0Ym90LmlkID09PSBfdGhpczIuY2hhdGJvdElkOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjaGF0Ym90VGV4dCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKCF0aGlzLmNoYXRib3RJZCB8fCAhdGhpcy5jaGF0Ym90cyB8fCAhdGhpcy5jaGF0Ym90cy5saXN0KSByZXR1cm4gbnVsbDsKICAgICAgcmV0dXJuIHRoaXMuY2hhdGJvdHMudGV4dHMuZGVmYXVsdF9jaGF0Ym90X3RleHQucmVwbGFjZSgnJHRleHQkJywgdGhpcy5jdXJyZW50Q2hhdGJvdC50ZXh0KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBIZWxwQnV0dG9uT3BlbkNhbGw7Cn0oVnVlKTsKCl9fZGVjb3JhdGUoW1Byb3AoKV0sIEhlbHBCdXR0b25PcGVuQ2FsbC5wcm90b3R5cGUsICJwb3NpdGlvbiIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKCldLCBIZWxwQnV0dG9uT3BlbkNhbGwucHJvdG90eXBlLCAic3BhY2luZ0JvdHRvbSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKCldLCBIZWxwQnV0dG9uT3BlbkNhbGwucHJvdG90eXBlLCAiY2hhdGJvdElkIiwgdm9pZCAwKTsKCkhlbHBCdXR0b25PcGVuQ2FsbCA9IF9fZGVjb3JhdGUoW0NvbXBvbmVudCh7fSldLCBIZWxwQnV0dG9uT3BlbkNhbGwpOwpleHBvcnQgeyBIZWxwQnV0dG9uT3BlbkNhbGwgfTs="},{"version":3,"sources":["/home/aline/AstaPrecifique/src/components/help-button-open-call/help-button-open-call.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, Prop, Vue} from 'vue-property-decorator';\n\nimport HelpService from \"@/services/help.service\";\nimport VueSimpleAlert from \"vue-simple-alert\";\n\n// import zE from '@dansmaculotte/vue-zendesk';\n\n\ndeclare global {\n    interface Window {\n        FreshworksWidget(action: string);\n    }\n}\n\n@Component({})\nexport class HelpButtonOpenCall extends Vue {\n    @Prop() position!: string;\n    @Prop() spacingBottom!: boolean;\n    @Prop() chatbotId!: string;\n\n    public openPopup: boolean = false;\n    public loading: boolean = false;\n\n    public $zendesk: any;\n    public zE: any;\n\n\n    get chatbots() {\n        return this.$store.state.chatbots;\n    }\n\n    get currentChatbot(): any {\n        if (!this.chatbotId || !this.chatbots || !this.chatbots.list) return null;\n        return this.chatbots.list.find(chatbot => chatbot.id === this.chatbotId);\n    }\n\n    get chatbotText(): string | null {\n        if (!this.chatbotId || !this.chatbots || !this.chatbots.list) return null;\n        return this.chatbots.texts.default_chatbot_text.replace(\n            '$text$',\n            this.currentChatbot.text,\n        );\n    }\n\n    public openHelp() {\n        if (this.currentChatbot) {\n            this.openPopup = true;\n        } else {\n            this.openFreshworksWidget();\n        }\n    }\n\n    public openFreshworksWidget() {\n        window.FreshworksWidget('open');\n        this.openPopup = false;\n    }\n\n    public openZendesk() {\n        this.$zendesk.load(\"14e6c01e-ae2c-4e2c-8c76-d461c01479c8\")\n        this.$zendesk.zE('messenger', 'open')\n    }\n\n    public async sendChatbotData() {\n        const {mobile} = JSON.parse(localStorage.getItem('loggedUser') || '{}');\n\n        const helpService = new HelpService();\n\n        this.loading = true;\n\n        try {\n            await helpService.sendChatbotData({\n                mobile,\n                chatbot: this.currentChatbot.id_bot,\n            });\n\n            this.$alert('Mensagem enviada por WhatsApp', '', 'success', {\n                toast: true,\n                position: 'top-end',\n                showConfirmButton: false,\n                timer: 3000,\n            });\n        } catch (e) {\n            console.error(e);\n            this.$alert('Erro ao enviar mensagem por WhatsApp', '', 'error', {\n                toast: true,\n                position: 'top-end',\n                showConfirmButton: false,\n                timer: 3000,\n            });\n        }\n\n        this.loading = false;\n        this.openPopup = false;\n    }\n}\n"],"sourceRoot":""}]}