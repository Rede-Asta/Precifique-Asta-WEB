{"remainingRequest":"/home/aline/AstaPrecifique/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/AstaPrecifique/src/views/Statistics/Statistics.vue?vue&type=style&index=0&id=6d840465&scoped=true&lang=scss&","dependencies":[{"path":"/home/aline/AstaPrecifique/src/views/Statistics/Statistics.vue","mtime":1673321154842},{"path":"/home/aline/AstaPrecifique/node_modules/css-loader/dist/cjs.js","mtime":1673370389401},{"path":"/home/aline/AstaPrecifique/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1673370389594},{"path":"/home/aline/AstaPrecifique/node_modules/postcss-loader/src/index.js","mtime":1673370389569},{"path":"/home/aline/AstaPrecifique/node_modules/sass-loader/dist/cjs.js","mtime":1673370393532},{"path":"/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/AstaPrecifique/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpoMSB7CiAgZm9udC1zaXplOiAxLjc1cmVtOwogIGZvbnQtd2VpZ2h0OiBib2xkOwp9CgpoMiB7CiAgZm9udC1zaXplOiAxLjVyZW07CiAgZm9udC13ZWlnaHQ6IGJvbGQ7Cn0KCi5zdGF0aXN0aWNzLXNrZWxldG9uIHsKICAmX19kYXRhLXN0YXQgewogICAgZmxleDogNTAlOwogIH0KfQo="},{"version":3,"sources":["Statistics.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwMA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Statistics.vue","sourceRoot":"src/views/Statistics","sourcesContent":["<template>\n  <section>\n    <Header></Header>\n\n    <template v-if=\"statisticsDataLoading\">\n      <div class=\"container statistics-skeleton\">\n        <b-skeleton-img no-aspect height=\"140px\"></b-skeleton-img>\n\n        <div class=\"d-flex mt-3\" style=\"max-width: 560px;\">\n          <b-skeleton class=\"flex-grow-1 mx-1\"></b-skeleton>\n          <b-skeleton class=\"flex-grow-1 mx-1\"></b-skeleton>\n          <b-skeleton class=\"flex-grow-1 mx-1\"></b-skeleton>\n          <b-skeleton class=\"flex-grow-1 mx-1\"></b-skeleton>\n        </div>\n\n        <div class=\"my-3\">\n          <b-skeleton-img no-aspect height=\"73px\" class=\"mb-3\"></b-skeleton-img>\n        </div>\n\n        <div class=\"d-flex my-2\">\n          <div class=\"mr-2 statistics-skeleton__data-stat\">\n            <b-skeleton-img no-aspect height=\"73px\"></b-skeleton-img>\n          </div>\n          <div class=\"ml-2 statistics-skeleton__data-stat\">\n            <b-skeleton-img no-aspect height=\"73px\"></b-skeleton-img>\n          </div>\n        </div>\n\n        <div class=\"d-flex my-2\">\n          <div class=\"mr-2 statistics-skeleton__data-stat\">\n            <b-skeleton-img no-aspect height=\"73px\"></b-skeleton-img>\n          </div>\n          <div class=\"ml-2 statistics-skeleton__data-stat\">\n            <b-skeleton-img no-aspect height=\"73px\"></b-skeleton-img>\n          </div>\n        </div>\n\n        <div class=\"d-flex my-2\">\n          <div class=\"mr-2 statistics-skeleton__data-stat\">\n            <b-skeleton-img no-aspect height=\"73px\"></b-skeleton-img>\n          </div>\n          <div class=\"ml-2 statistics-skeleton__data-stat\">\n            <b-skeleton-img no-aspect height=\"73px\"></b-skeleton-img>\n          </div>\n        </div>\n\n        <div class=\"statistics-skeleton__carousel mt-3\">\n          <h2>Produtos mais vendidos:</h2>\n          <b-skeleton-img no-aspect height=\"98px\"></b-skeleton-img>\n        </div>\n\n        <div class=\"statistics-skeleton__carousel mt-3 mb-4\">\n          <h2>Ãšltimos pedidos:</h2>\n          <b-skeleton-img no-aspect height=\"98px\"></b-skeleton-img>\n        </div>\n      </div>\n    </template>\n\n    <template v-if=\"!statisticsDataLoading && statisticsData\">\n      <div class=\"container\">\n        <statistics-daily\n          v-if=\"statisticsData.daily_data\"\n          :daily-data=\"statisticsData.daily_data\"\n        />\n\n        <statistics-time-filters\n          class=\"my-3 mx-auto\"\n          @filter-change=\"selectedFilter = $event\"\n          :selected-filter=\"selectedFilter\"\n        />\n\n        <statistics-data\n          v-if=\"statisticsData.filtered_data\"\n          :data=\"statisticsData.filtered_data\"\n        />\n\n        <statistics-carousels\n          v-if=\"statisticsData.filtered_data\"\n          class=\"mt-4\"\n          :products=\"statisticsData.products_most_sell || []\"\n          :orders=\"statisticsData.filtered_data.last_order || []\"\n        />\n      </div>\n    </template>\n\n    <Footer></Footer>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue';\n\nimport StatisticsCarousels from \"@/components/statistics/StatisticsCarousels.vue\";\nimport StatisticsData from \"@/components/statistics/StatisticsData.vue\";\nimport StatisticsTimeFilters from \"@/components/statistics/StatisticsTimeFilters.vue\";\nimport StatisticsDaily from \"@/components/statistics/StatisticsDaily.vue\"\nimport {IStatisticsData} from \"@/models/statistics\";\n\nimport {BSkeletonImg, BSkeleton} from \"bootstrap-vue\";\n\nimport statisticsService from \"@/services/statistics.service\";\nimport moment from \"moment\";\n\ninterface IStatisticsViewData {\n  user: any;\n  selectedFilter: string;\n  statisticsData: IStatisticsData;\n\n  statisticsService: statisticsService,\n  statisticsDataLoading: boolean,\n}\n\nexport default Vue.extend({\n  name: \"statistics\",\n  components: {\n    StatisticsDaily,\n    StatisticsTimeFilters,\n    StatisticsData,\n    StatisticsCarousels,\n    BSkeletonImg,\n    BSkeleton\n  },\n\n  data(): IStatisticsViewData {\n    return {\n      user: null,\n      selectedFilter: 'all',\n      statisticsData: {} as IStatisticsData,\n\n      statisticsService: new statisticsService(),\n      statisticsDataLoading: false,\n    }\n  },\n\n  watch: {\n    selectedFilter(newValue) {\n      this.getStatisticsData();\n    },\n  },\n\n  mounted() {\n    const storageUser = localStorage.getItem('loggedUser');\n    this.user = storageUser ? JSON.parse(storageUser) : null;\n\n    this.getStatisticsData();\n  },\n\n  methods: {\n    async getStatisticsData() {\n      this.statisticsDataLoading = true;\n      try {\n        const pertinho = JSON.parse(localStorage.getItem('pertinho') || '');\n        if (!pertinho) return;\n\n        let filter: {\n          startDate: string;\n          endDate: string;\n        } | null = null;\n\n        const today = moment(new Date()).locale('pt-br');\n        const getFormattedDate = (date: moment.Moment, end = false) => date.format(`YYYY-MM-DD ${end ? '23:59' : '00:00'}`);\n\n        switch (this.selectedFilter) {\n          case \"all\":\n            filter = null;\n            break;\n          case \"30d\":\n            filter = {\n              startDate: getFormattedDate(moment(today).subtract(30, 'days')),\n              endDate: getFormattedDate(today, true),\n            };\n            break;\n          case \"7d\":\n            filter = {\n              startDate: getFormattedDate(moment(today).subtract(7, 'days')),\n              endDate: getFormattedDate(today, true),\n            }\n            break;\n          case \"today\":\n            filter = {\n              startDate: getFormattedDate(today),\n              endDate: getFormattedDate(today, true)\n            }\n            break;\n          default:\n            break;\n        }\n\n        const {data} = await this.statisticsService.getStatisticsData(pertinho.guid, filter);\n        this.statisticsData = data;\n      } catch (e) {\n\n      }\n      this.statisticsDataLoading = false;\n    }\n  }\n});\n</script>\n\n<style scoped lang=\"scss\">\nh1 {\n  font-size: 1.75rem;\n  font-weight: bold;\n}\n\nh2 {\n  font-size: 1.5rem;\n  font-weight: bold;\n}\n\n.statistics-skeleton {\n  &__data-stat {\n    flex: 50%;\n  }\n}\n</style>"]}]}