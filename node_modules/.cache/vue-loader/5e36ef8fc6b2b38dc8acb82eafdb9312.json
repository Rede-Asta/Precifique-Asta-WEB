{"remainingRequest":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/GitHub/admin-frontend/src/components/product-modal/product-image-cropper/ProductImageCropper.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/GitHub/admin-frontend/src/components/product-modal/product-image-cropper/ProductImageCropper.vue","mtime":1673321154838},{"path":"/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBWdWUgfSBmcm9tICJ2dWUtcHJvcGVydHktZGVjb3JhdG9yIjsKaW1wb3J0IFN3YWwsIHsgU3dlZXRBbGVydFR5cGUgfSBmcm9tICJzd2VldGFsZXJ0MiI7CmltcG9ydCBWdWVTaW1wbGVBbGVydCBmcm9tICJ2dWUtc2ltcGxlLWFsZXJ0IjsKaW1wb3J0IHsgQ3JvcHBlciB9IGZyb20gInZ1ZS1hZHZhbmNlZC1jcm9wcGVyIjsKaW1wb3J0ICJ2dWUtYWR2YW5jZWQtY3JvcHBlci9kaXN0L3N0eWxlLmNzcyI7CmltcG9ydCB7IEltYWdlVVJsIH0gZnJvbSAiQC9tb2RlbHMvcHJvZHVjdCI7CgpAQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBDcm9wcGVyLAogIH0sCn0pCmV4cG9ydCBjbGFzcyBQcm9kdWN0SW1hZ2VDcm9wcGVyIGV4dGVuZHMgVnVlIHsKICBAUHJvcCgpIHByb3BTaG93Q3JvcHBlckltYWdlITogYm9vbGVhbjsKICBAUHJvcCgpIHByb3BJbWFnZVRvQ3JvcCE6IHN0cmluZzsKICBAUHJvcCgpIHByb3BQcm9kdWN0R3VpZCE6IHN0cmluZzsKICBAUHJvcCgpIHByb3BEZXNjcmlwdGlvbiE6IHN0cmluZzsKICBAUHJvcCgpIHByb3BQb3NpdGlvbiE6IG51bWJlcjsKICBAUHJvcCgpIHByb3BJbWFnZUZpbGUhOiBhbnk7CgogIHB1YmxpYyBzaG93Q3JvcHBlckltYWdlID0gdGhpcy5wcm9wU2hvd0Nyb3BwZXJJbWFnZTsKICBwdWJsaWMgaW1hZ2VUb0Nyb3AgPSB0aGlzLnByb3BJbWFnZVRvQ3JvcDsKICBwdWJsaWMgcHJvZHVjdEd1aWQgPSB0aGlzLnByb3BQcm9kdWN0R3VpZDsKICBwdWJsaWMgZGVzY3JpcHRpb24gPSB0aGlzLnByb3BEZXNjcmlwdGlvbjsKICBwdWJsaWMgcG9zaXRpb24gPSB0aGlzLnByb3BQb3NpdGlvbjsKICBwdWJsaWMgY3JvcHBlciE6IENyb3BwZXI7CiAgcHVibGljIHNpemUgPSB7CiAgICB3aWR0aDogMCwKICAgIGhlaWdodDogMCwKICB9OwoKICBwdWJsaWMgcmVzdWx0SW1hZ2U6IHN0cmluZyA9ICIiOwogIHB1YmxpYyByZXN1bHRJbWFnZUJsb2I6IGFueTsKCiAgY29uc3RydWN0b3IoKSB7CiAgICBzdXBlcigpOwogIH0KCiAgcHVibGljIGFzeW5jIHNhdmVDcm9wcGVySW1hZ2VNb2RhbCgpIHsKICAgIHRoaXMucmVzdWx0SW1hZ2VCbG9iID0gYXdhaXQgKGF3YWl0IGZldGNoKHRoaXMucmVzdWx0SW1hZ2UpKS5ibG9iKCk7CgogICAgdGhpcy5jbG9zZUNyb3BwZXJJbWFnZU1vZGFsKCJzdWNjZXNzIiwgewogICAgICBwb3NpdGlvbjogdGhpcy5wb3NpdGlvbiwKICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sCiAgICAgIGltYWdlX3VybDogdGhpcy5yZXN1bHRJbWFnZSwKICAgICAgdXBsb2FkUHJvZ3Jlc3M6IDAsCiAgICAgIGltYWdlRmlsZTogdGhpcy5yZXN1bHRJbWFnZUJsb2IsCiAgICB9KTsKICB9CgogIHB1YmxpYyBjbG9zZUNyb3BwZXJJbWFnZU1vZGFsKG1zZzogc3RyaW5nLCBpbWFnZVVybDogSW1hZ2VVUmwpIHsKICAgIHRoaXMuJGVtaXQoImNsb3NlQ3JvcHBlckltYWdlTW9kYWwiLCBbbXNnLCBpbWFnZVVybF0pOwogIH0KCiAgcHVibGljIGNoYW5nZUNyb3AoeyBjb29yZGluYXRlcywgY2FudmFzIH0pIHsKICAgIHRoaXMuc2l6ZS53aWR0aCA9IE1hdGgucm91bmQoY29vcmRpbmF0ZXMud2lkdGgpOwogICAgdGhpcy5zaXplLmhlaWdodCA9IE1hdGgucm91bmQoY29vcmRpbmF0ZXMuaGVpZ2h0KTsKICAgIHRoaXMucmVzdWx0SW1hZ2UgPSBjYW52YXMudG9EYXRhVVJMKCk7CiAgfQoKICBwdWJsaWMgYm91bmRhcmllcyh7IGNyb3BwZXIsIGltYWdlU2l6ZSB9KSB7CiAgICByZXR1cm4gewogICAgICB3aWR0aDogY3JvcHBlci5jbGllbnRXaWR0aCwKICAgICAgaGVpZ2h0OiBjcm9wcGVyLmNsaWVudEhlaWdodCwKICAgIH07CiAgfQoKICBwdWJsaWMgdXBkYXRlU2l6ZSh7IGNvb3JkaW5hdGVzIH0pIHsKICAgIHRoaXMuc2l6ZS53aWR0aCA9IE1hdGgucm91bmQoY29vcmRpbmF0ZXMud2lkdGgpOwogICAgdGhpcy5zaXplLmhlaWdodCA9IE1hdGgucm91bmQoY29vcmRpbmF0ZXMuaGVpZ2h0KTsKICB9CgogIHB1YmxpYyBtb3ZlKGRpcmVjdGlvbjogc3RyaW5nKSB7CiAgICB0aGlzLmNyb3BwZXIgPSB0aGlzLiRyZWZzLmNyb3BwZXIgYXMgQ3JvcHBlcjsKICAgIGlmIChkaXJlY3Rpb24gPT09ICJsZWZ0IikgewogICAgICB0aGlzLmNyb3BwZXIubW92ZSgtdGhpcy5zaXplLndpZHRoIC8gOCk7CiAgICB9IGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gInJpZ2h0IikgewogICAgICB0aGlzLmNyb3BwZXIubW92ZSh0aGlzLnNpemUud2lkdGggLyA4KTsKICAgIH0gZWxzZSBpZiAoZGlyZWN0aW9uID09PSAidG9wIikgewogICAgICB0aGlzLmNyb3BwZXIubW92ZSgwLCAtdGhpcy5zaXplLmhlaWdodCAvIDgpOwogICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICJib3R0b20iKSB7CiAgICAgIHRoaXMuY3JvcHBlci5tb3ZlKDAsIHRoaXMuc2l6ZS5oZWlnaHQgLyA4KTsKICAgIH0KICB9CgogIHB1YmxpYyBzZXRab29tQ3JvcHBlcihmYWN0b3I6IG51bWJlcikgewogICAgdGhpcy5jcm9wcGVyID0gdGhpcy4kcmVmcy5jcm9wcGVyIGFzIENyb3BwZXI7CiAgICB0aGlzLmNyb3BwZXIuem9vbShmYWN0b3IpOwogIH0KCiAgcHJpdmF0ZSB0b2FzdE1lc3NhZ2UodHlwZTogU3dlZXRBbGVydFR5cGUsIHRpdGxlOiBzdHJpbmcpIHsKICAgIFZ1ZVNpbXBsZUFsZXJ0LmZpcmUoewogICAgICB0eXBlLAogICAgICB0aXRsZSwKICAgICAgdG9hc3Q6IHRydWUsCiAgICAgIHBvc2l0aW9uOiAidG9wLWVuZCIsCiAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgdGltZXI6IDQwMDAsCiAgICAgIG9uT3BlbjogKHRvYXN0KSA9PiB7CiAgICAgICAgdG9hc3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsIFN3YWwuc3RvcFRpbWVyKSwKICAgICAgICAgIHRvYXN0LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLCBTd2FsLnJlc3VtZVRpbWVyKTsKICAgICAgfSwKICAgIH0pOwogIH0KfQoKZXhwb3J0IHsgUHJvZHVjdEltYWdlQ3JvcHBlciBhcyBkZWZhdWx0IH07Cg=="},{"version":3,"sources":["ProductImageCropper.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"ProductImageCropper.vue","sourceRoot":"src/components/product-modal/product-image-cropper","sourcesContent":["<template>\n  <modal :active=\"showCropperImage\">\n    <div class=\"card custom-modal\">\n      <div\n        class=\"card-body text-center d-flex flex-column justify-content-between\"\n      >\n        <div\n          class=\"custom-close\"\n          title=\"Fechar Modal de Excluir\"\n          @click=\"closeCropperImageModal('close')\"\n        >\n          <i class=\"fas fa-times\"></i>\n        </div>\n\n        <div>\n          <h4 class=\"font-weight-bold text-dark text-center text-uppercase\">\n            Ajustar Imagem\n          </h4>\n          <p class=\"text-muted text-center mb-1\">\n            Ajuste a imagem do seu produtos.\n          </p>\n        </div>\n\n        <div class=\"container-cropper\">\n          <div\n            class=\"\n              d-flex\n              flex-column\n              align-items-center\n              justify-content-center\n              position-relative\n              bg-black\n            \"\n          >\n            <cropper\n              class=\"cropper\"\n              ref=\"cropper\"\n              :src=\"imageToCrop\"\n              :default-boundaries=\"boundaries\"\n              :transitions=\"true\"\n              :auto-zoom=\"true\"\n              :stencil-props=\"{\n                movable: false,\n                scalable: false,\n              }\"\n              :stencil-size=\"{\n                width: 300,\n                height: 300,\n              }\"\n              image-restriction=\"none\"\n              @change=\"changeCrop\"\n            >\n            </cropper>\n\n            <div\n              class=\"\n                d-flex\n                align-items-center\n                justify-content-center\n                cropper-actions\n              \"\n            >\n              <button\n                class=\"\n                  btn btn-link\n                  text-muted\n                  d-flex\n                  align-items-center\n                  justify-content-center\n                \"\n                @click=\"setZoomCropper(0.9)\"\n              >\n                <span class=\"material-icons\">zoom_out</span>\n              </button>\n              <button\n                class=\"\n                  btn btn-link\n                  text-muted\n                  d-flex\n                  align-items-center\n                  justify-content-center\n                \"\n                @click=\"setZoomCropper(1.1)\"\n              >\n                <span class=\"material-icons\">zoom_in</span>\n              </button>\n\n              <button\n                class=\"\n                  btn btn-link\n                  text-muted\n                  d-flex\n                  align-items-center\n                  justify-content-center\n                \"\n                title=\"Move Top\"\n                @click=\"move('top')\"\n              >\n                <span class=\"material-icons\">arrow_upward</span>\n              </button>\n              <button\n                class=\"\n                  btn btn-link\n                  text-muted\n                  d-flex\n                  align-items-center\n                  justify-content-center\n                \"\n                title=\"Move Left\"\n                @click=\"move('left')\"\n              >\n                <span class=\"material-icons\">arrow_back</span>\n              </button>\n              <button\n                class=\"\n                  btn btn-link\n                  text-muted\n                  d-flex\n                  align-items-center\n                  justify-content-center\n                \"\n                title=\"Move Right\"\n                @click=\"move('right')\"\n              >\n                <span class=\"material-icons\">arrow_forward</span>\n              </button>\n              <button\n                class=\"\n                  btn btn-link\n                  text-muted\n                  d-flex\n                  align-items-center\n                  justify-content-center\n                \"\n                title=\"Move Bottom\"\n                @click=\"move('bottom')\"\n              >\n                <span class=\"material-icons\">arrow_downward</span>\n              </button>\n            </div>\n          </div>\n          <div class=\"d-flex justify-content-end mt-4\">\n            <button\n              class=\"btn btn-link text-muted\"\n              @click=\"closeCropperImageModal('close')\"\n            >\n              Voltar\n            </button>\n            <button\n              class=\"btn btn-primary d-flex align-items-center\"\n              @click=\"saveCropperImageModal()\"\n            >\n              Salvar\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </modal>\n</template>\n\n<script lang=\"ts\">\n  import { Component, Prop, Vue } from \"vue-property-decorator\";\n  import Swal, { SweetAlertType } from \"sweetalert2\";\n  import VueSimpleAlert from \"vue-simple-alert\";\n  import { Cropper } from \"vue-advanced-cropper\";\n  import \"vue-advanced-cropper/dist/style.css\";\n  import { ImageURl } from \"@/models/product\";\n\n  @Component({\n    components: {\n      Cropper,\n    },\n  })\n  export class ProductImageCropper extends Vue {\n    @Prop() propShowCropperImage!: boolean;\n    @Prop() propImageToCrop!: string;\n    @Prop() propProductGuid!: string;\n    @Prop() propDescription!: string;\n    @Prop() propPosition!: number;\n    @Prop() propImageFile!: any;\n\n    public showCropperImage = this.propShowCropperImage;\n    public imageToCrop = this.propImageToCrop;\n    public productGuid = this.propProductGuid;\n    public description = this.propDescription;\n    public position = this.propPosition;\n    public cropper!: Cropper;\n    public size = {\n      width: 0,\n      height: 0,\n    };\n\n    public resultImage: string = \"\";\n    public resultImageBlob: any;\n\n    constructor() {\n      super();\n    }\n\n    public async saveCropperImageModal() {\n      this.resultImageBlob = await (await fetch(this.resultImage)).blob();\n\n      this.closeCropperImageModal(\"success\", {\n        position: this.position,\n        description: this.description,\n        image_url: this.resultImage,\n        uploadProgress: 0,\n        imageFile: this.resultImageBlob,\n      });\n    }\n\n    public closeCropperImageModal(msg: string, imageUrl: ImageURl) {\n      this.$emit(\"closeCropperImageModal\", [msg, imageUrl]);\n    }\n\n    public changeCrop({ coordinates, canvas }) {\n      this.size.width = Math.round(coordinates.width);\n      this.size.height = Math.round(coordinates.height);\n      this.resultImage = canvas.toDataURL();\n    }\n\n    public boundaries({ cropper, imageSize }) {\n      return {\n        width: cropper.clientWidth,\n        height: cropper.clientHeight,\n      };\n    }\n\n    public updateSize({ coordinates }) {\n      this.size.width = Math.round(coordinates.width);\n      this.size.height = Math.round(coordinates.height);\n    }\n\n    public move(direction: string) {\n      this.cropper = this.$refs.cropper as Cropper;\n      if (direction === \"left\") {\n        this.cropper.move(-this.size.width / 8);\n      } else if (direction === \"right\") {\n        this.cropper.move(this.size.width / 8);\n      } else if (direction === \"top\") {\n        this.cropper.move(0, -this.size.height / 8);\n      } else if (direction === \"bottom\") {\n        this.cropper.move(0, this.size.height / 8);\n      }\n    }\n\n    public setZoomCropper(factor: number) {\n      this.cropper = this.$refs.cropper as Cropper;\n      this.cropper.zoom(factor);\n    }\n\n    private toastMessage(type: SweetAlertType, title: string) {\n      VueSimpleAlert.fire({\n        type,\n        title,\n        toast: true,\n        position: \"top-end\",\n        showConfirmButton: false,\n        timer: 4000,\n        onOpen: (toast) => {\n          toast.addEventListener(\"mouseenter\", Swal.stopTimer),\n            toast.addEventListener(\"mouseleave\", Swal.resumeTimer);\n        },\n      });\n    }\n  }\n\n  export { ProductImageCropper as default };\n</script>\n\n<style lang=\"scss\" scoped>\n  .custom-modal {\n    width: 32vw;\n    background-color: #f4f5f9;\n\n    .btn {\n      font-size: 14px;\n    }\n\n    .slider {\n      top: 6px !important;\n    }\n\n    .variant {\n      font-size: 14px;\n    }\n\n    @media screen and (max-width: 992px) {\n      width: 100vw;\n      height: 100vh;\n      border-radius: 0;\n\n      .btn {\n        font-size: 12px;\n      }\n\n      h4 {\n        margin-top: 20px;\n      }\n    }\n\n    @media screen and (min-width: 992px) and (max-width: 1360px) {\n      width: 45vw;\n    }\n\n    @media screen and (min-width: 1361px) and (max-width: 1600px) {\n      width: 40vw;\n    }\n  }\n\n  .preview-image {\n  }\n\n  .cropper {\n    height: 400px;\n    background: #dddddd;\n  }\n\n  .cropper-actions {\n    position: absolute;\n    background: rgba(255, 255, 255, 0.9);\n    border-radius: 6px;\n\n    @media screen and (max-width: 992px) {\n      bottom: 5px;\n      flex-direction: row;\n    }\n\n    @media screen and (min-width: 992px) {\n      left: 5px;\n      flex-direction: column;\n    }\n  }\n\n  .bg-black {\n    background: #000000;\n  }\n\n  .container-cropper {\n    max-height: 80vh;\n    min-height: -webkit-fill-available;\n  }\n</style>"]}]}