{"remainingRequest":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/GitHub/admin-frontend/src/components/product-modal/product-import/ProductImport.vue?vue&type=style&index=0&id=29448350&lang=scss&scoped=true&","dependencies":[{"path":"/home/aline/GitHub/admin-frontend/src/components/product-modal/product-import/ProductImport.vue","mtime":1696272469463},{"path":"/home/aline/GitHub/admin-frontend/node_modules/css-loader/dist/cjs.js","mtime":1673370389401},{"path":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1673370389594},{"path":"/home/aline/GitHub/admin-frontend/node_modules/postcss-loader/src/index.js","mtime":1673370389569},{"path":"/home/aline/GitHub/admin-frontend/node_modules/sass-loader/dist/cjs.js","mtime":1673370393532},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jdXN0b20tbW9kYWwgewogIHdpZHRoOiAzMHZ3OwoKICAuYnRuIHsKICAgIGZvbnQtc2l6ZTogMTRweDsKICB9CgogIC5zbGlkZXIgewogICAgdG9wOiA2cHggIWltcG9ydGFudDsKICB9CgogIC52YXJpYW50IHsKICAgIGZvbnQtc2l6ZTogMTRweDsKICB9CgogIC5saXN0LWl0ZW5zIHsKICAgIGxpc3Qtc3R5bGUtdHlwZTogZGlzYzsKCiAgICBsaSB7CiAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgIH0KICB9CgogIEBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDk5MnB4KSB7CiAgICB3aWR0aDogMTAwdnc7CiAgICBoZWlnaHQ6IDEwMHZoOwogICAgYm9yZGVyLXJhZGl1czogMDsKCiAgICAuYnRuIHsKICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgfQoKICAgIGg0IHsKICAgICAgbWFyZ2luLXRvcDogMjBweDsKICAgIH0KICB9CgogIEBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6IDk5MnB4KSBhbmQgKG1heC13aWR0aDogMTM2MHB4KSB7CiAgICB3aWR0aDogNDB2dzsKICB9Cn0KCi5sb2ctbGlzdCB7CiAgbWF4LWhlaWdodDogMjB2aDsKICBvdmVyZmxvdy15OiBhdXRvOwoKICBAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA5OTJweCkgewogICAgbWF4LWhlaWdodDogNTB2aDsKICB9Cn0KCi5pbXBvcnQtY29udGFpbmVyIHsKICBoZWlnaHQ6IDEwMCU7CiAgbWFyZ2luOiA2dmggMDsKCiAgLmxpc3QtaXRlbnMgewogICAgbWFyZ2luOiA1dmggMDsKICB9Cn0KCi5idG4tYWN0aW9uIHsKICBwb3NpdGlvbjogc3RpY2t5OwogIGJvdHRvbTogMTBweDsKfQo="},{"version":3,"sources":["ProductImport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqOA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"ProductImport.vue","sourceRoot":"src/components/product-modal/product-import","sourcesContent":["<template>\n  <modal :active=\"showImportProduto\">\n    <div class=\"card custom-modal\">\n      <div class=\"card-body\">\n        <div\n          class=\"custom-close\"\n          title=\"Fechar Modal de Excluir\"\n          @click=\"closeImportProductModal()\"\n        >\n          <i class=\"fas fa-times\"></i>\n        </div>\n\n        <h4 class=\"font-weight-bold text-dark text-center\">\n          {{\n            !showResultImportProduto\n              ? \"Importar Produto\"\n              : \"Resultado da Importação\"\n          }}\n        </h4>\n\n        <div class=\"import-container\" v-if=\"!showResultImportProduto\">\n          <p class=\"text-muted text-center mb-1\">\n            Faça o upload do seu produto\n          </p>\n          <div class=\"cadprod__uploadImage--input\">\n            <input\n              v-model=\"produtoInput\"\n              readonly\n              type=\"text\"\n              placeholder=\"Escolher arquivo .csv\"\n              required\n            />\n            <input\n              type=\"file\"\n              accept=\".csv\"\n              name=\"file\"\n              id=\"file\"\n              hidden\n              @change=\"getProductImport($event)\"\n              required\n            />\n            <label for=\"file\" class=\"button\"> Escolher Arquivo </label>\n          </div>\n          <ul class=\"col-12 list-itens\">\n            <li>Certifique-se que o arquivo está legível</li>\n            <li>Tamanho máximo 4MB</li>\n            <li>\n              Dados das colunas: Categoria, Cod. Produto (PDV), Produto (Nome),\n              Descrição do Produto (max 512 caracteres), Preço de (sem R$),\n              Preço por (sem R$), Ordenação, URL de imagem\n            </li>\n            <li>\n              Os campos \"Cod. Produto (PDV)\", \"Preço de\", \"Ordenação\" e \"URL de\n              imagem\" não são obrigatórios.\n            </li>\n            <li>\n              Para ver o modelo do arquivo .csv\n              <a\n                style=\"color: blue; text-decoration: underline\"\n                href=\"https://images-portal-pertinho.s3-sa-east-1.amazonaws.com/Modelo.csv\"\n                dowload\n                >clique aqui</a\n              >\n            </li>\n          </ul>\n        </div>\n\n        <template v-else>\n          <div class=\"my-4\" v-html=\"resultImport\"></div>\n          <p class=\"font-weight-bold\">Log de Erros:</p>\n          <ul class=\"my-4 list-group log-list\">\n            <li\n              class=\"list-group-item m-0 list-group-item-light\"\n              v-for=\"result in resultErrorsImport\"\n            >\n              {{ result.message }}\n            </li>\n          </ul>\n        </template>\n\n        <div class=\"d-flex justify-content-between mt-4 btn-action\">\n          <button\n            class=\"btn\"\n            @click=\"closeImportProductModal()\"\n            :class=\"{\n              'btn-light': !showResultImportProduto,\n              'btn-info col-12': showResultImportProduto,\n            }\"\n          >\n            <i\n              class=\"fas mr-2\"\n              :class=\"{\n                'fa-times': !showResultImportProduto,\n                'fa-check-circle': showResultImportProduto,\n              }\"\n            ></i>\n            {{ !showResultImportProduto ? \"Cancelar\" : \"Ok\" }}\n          </button>\n          <button\n            class=\"btn btn-info\"\n            @click=\"importProduto()\"\n            :disabled=\"!produtoInput\"\n            v-if=\"!showResultImportProduto\"\n          >\n            <i class=\"fas fa-file-import mr-2\"></i>\n            Importar Produtos\n          </button>\n        </div>\n      </div>\n    </div>\n  </modal>\n</template>\n\n<script lang=\"ts\">\n  import { Component, Prop, Vue } from \"vue-property-decorator\";\n  import VueSimpleAlert from \"vue-simple-alert\";\n  import Swal, { SweetAlertType } from \"sweetalert2\";\n\n  import Seller from \"@/models/seller\";\n  import productsService from \"@/services/products.service\";\n\n  @Component({})\n  export class ProductImport extends Vue {\n    private productService = new productsService();\n\n    @Prop() propShowImportProduto!: boolean;\n    @Prop() propLoggedUser!: Seller;\n\n    public showImportProduto: boolean = this.propShowImportProduto;\n    private loggedUser: Seller = this.propLoggedUser;\n\n    public showResultImportProduto: boolean = false;\n\n    public produtoInput: string = \"\";\n    public produtoFile: any;\n\n    public resultImport: string = \"\";\n    public resultErrorsImport: any[] = [];\n\n    constructor() {\n      super();\n    }\n\n    getProductImport(event) {\n      if (event.target.files.length && event.target.files[0].size / 1000000 < 4) {\n        const productFile = event.target.files[0];\n        this.produtoInput = productFile.name;\n        const reader = new FileReader();\n        reader.readAsDataURL(productFile);\n        reader.onload = (e: any) => {\n          this.produtoFile = e.target.result;\n        };\n      } else {\n        this.toastMessage(\"error\", \"Arquivo muito grande!\");\n      }\n    }\n\n    importProduto() {\n      this.productService\n        .importProduct({ file: this.produtoFile }, this.loggedUser.slug)\n        .then((data) => {\n          if (!data.ok) {\n            this.nextStatusError(\"Erro ao enviar o arquivo!\");\n          } else {\n            data\n              .json()\n              .then((result) =>\n                this.nextStatusSuccess(\"Arquivo enviado com sucesso!\", result)\n              );\n          }\n        })\n        .catch((err) =>\n          this.toastMessage(\"error\", \"Erro ao importar o arquivo!\")\n        );\n    }\n\n    private nextStatusSuccess(msg: string, result) {\n      this.$emit(\"getCategories\", true);\n      this.setResultImport(result);\n      this.openResultImportModal();\n      this.toastMessage(\"success\", msg);\n    }\n\n    private openResultImportModal() {\n      this.showResultImportProduto = true;\n    }\n\n    public closeResultImportModal() {\n      this.showResultImportProduto = false;\n    }\n\n    private nextStatusError(msg: string) {\n      this.closeImportProductModal();\n      this.toastMessage(\"error\", msg);\n    }\n\n    setResultImport(result) {\n      this.resultImport = result.result\n        .replace(\"Created\", '<span class=\"text-success\">Criados: </span>')\n        .replace(\"updated\", '<br><span class=\"text-info\">Atualizados: </span>')\n        .replace(\"errors\", '<br><span class=\"text-danger\">Falhas: </span>')\n        .replaceAll(\",\", \"\");\n      this.resultErrorsImport = result.errors;\n    }\n\n    public closeImportProductModal() {\n      this.$emit(\"closeImportProductModal\", true);\n    }\n\n    private toastMessage(type: SweetAlertType, title: string) {\n      VueSimpleAlert.fire({\n        type,\n        title,\n        toast: true,\n        position: \"top-end\",\n        showConfirmButton: false,\n        timer: 3000,\n        onOpen: (toast) => {\n          toast.addEventListener(\"mouseenter\", Swal.stopTimer),\n            toast.addEventListener(\"mouseleave\", Swal.resumeTimer);\n        },\n      });\n    }\n  }\n\n  export { ProductImport as default };\n</script>\n\n<style lang=\"scss\" scoped>\n  .custom-modal {\n    width: 30vw;\n\n    .btn {\n      font-size: 14px;\n    }\n\n    .slider {\n      top: 6px !important;\n    }\n\n    .variant {\n      font-size: 14px;\n    }\n\n    .list-itens {\n      list-style-type: disc;\n\n      li {\n        font-size: 12px;\n      }\n    }\n\n    @media screen and (max-width: 992px) {\n      width: 100vw;\n      height: 100vh;\n      border-radius: 0;\n\n      .btn {\n        font-size: 12px;\n      }\n\n      h4 {\n        margin-top: 20px;\n      }\n    }\n\n    @media screen and (min-width: 992px) and (max-width: 1360px) {\n      width: 40vw;\n    }\n  }\n\n  .log-list {\n    max-height: 20vh;\n    overflow-y: auto;\n\n    @media screen and (max-width: 992px) {\n      max-height: 50vh;\n    }\n  }\n\n  .import-container {\n    height: 100%;\n    margin: 6vh 0;\n\n    .list-itens {\n      margin: 5vh 0;\n    }\n  }\n\n  .btn-action {\n    position: sticky;\n    bottom: 10px;\n  }\n</style>"]}]}