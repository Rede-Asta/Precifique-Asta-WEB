{"remainingRequest":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/GitHub/admin-frontend/src/components/vitrine-modal/vitrine-image-import.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/GitHub/admin-frontend/src/components/vitrine-modal/vitrine-image-import.vue","mtime":1696439584665},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/thread-loader/dist/cjs.js","mtime":1673370377290},{"path":"/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKaW1wb3J0IENvbXByZXNzb3IgZnJvbSAnY29tcHJlc3NvcmpzJwpleHBvcnQgZGVmYXVsdCBWdWUuZXh0ZW5kKHsKICBuYW1lOiAndml0cmluZUltYWdlSW1wb3J0JywKICBwcm9wczogewogICAgc2hvd0ltcG9ydEltYWdlTW9kYWw6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGE6ICgpID0+ICh7CiAgICBmaWxlbGlzdDogW10gYXMgRmlsZVtdLAogICAgaW1hZ2VUb0Nyb3A6ICcnLAogICAgZmlsZToge30gYXMgYW55LAogICAgaW1hZ2VGaWxlOiB7fSBhcyBhbnksCiAgfSksCiAgbWV0aG9kczogewogICAgb25DaGFuZ2VWaXRyaW5lKCkgewogICAgICBjb25zb2xlLmxvZygiY3JvcCB2aXRyaW5lIC0gdXBsb2FkIikKICAgICAgdGhpcy5maWxlID0gdGhpcy4kcmVmcy5maWxldml0cmluZTsKICAgICAgdGhpcy5maWxlbGlzdCA9IFsuLi50aGlzLmZpbGUuZmlsZXNdOwogICAgICBpZiAodGhpcy5maWxlLmZpbGVzLmxlbmd0aCkgeyAgICAgICAgICAgIAogICAgICAgIGNvbnN0IGltYWdlRmlsZSA9IHRoaXMuZmlsZS5maWxlc1swXTsKICAgICAgICBpZiAoaW1hZ2VGaWxlLnNpemUgLyAxMDAwMDAwIDwgMTUpIHsKICAgICAgICAgIGNvbnN0IGNvbXByZXNzb3IgPSBuZXcgQ29tcHJlc3NvcihpbWFnZUZpbGUsIHsKICAgICAgICAgICAgcXVhbGl0eTogMC41LAogICAgICAgICAgICB3aWR0aDogMTI1MCwKICAgICAgICAgICAgaGVpZ2h0OiAxMjUwLAogICAgICAgICAgICBjb252ZXJ0U2l6ZTogMCwKICAgICAgICAgICAgc3VjY2VzczogKGltYWdlQ29tcHJlc3NlZCkgPT4gewogICAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgICAgICAgaWYgKGltYWdlQ29tcHJlc3NlZC5zaXplIC8gMTAwMDAwMCA8IDYpIHsKICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VGaWxlID0gaW1hZ2VDb21wcmVzc2VkOwogICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoaW1hZ2VDb21wcmVzc2VkKTsKICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZTogYW55KSA9PiB7CiAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUb0Nyb3AgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NldEltYWdlVG9Dcm9wJywgZS50YXJnZXQucmVzdWx0KQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgIGFsZXJ0KCJSZWR1emEgbyB0YW1hbmhvIGRlIGltYWdlbSBlIHRlbnRlIG5vdmFtZW50ZS4iKTsKICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXJyb3IoZXJyKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coImVycm9yIGNvbXByaW1pbmRvIGltYWdlbSIsIGVyci5tZXNzYWdlKTsKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pOwogICAgICAgIH1lbHNlewogICAgICAgICAgYWxlcnQoIlJlZHV6YSBvIHRhbWFuaG8gZGUgaW1hZ2VtIGUgdGVudGUgbm92YW1lbnRlLiIpOwogICAgICAgIH0gCiAgICAgIH0KICAgIH0sCiAgICBkcmFnb3ZlcihldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBpZiAoIWV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiZy1ncmVlbi0zMDAnKSkgewogICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnYmctZ3JheS0xMDAnKTsKICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2JnLWdyZWVuLTMwMCcpOwogICAgICB9CiAgICB9LAogICAgZHJhZ2xlYXZlKGV2ZW50KSB7CiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgnYmctZ3JheS0xMDAnKTsKICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdiZy1ncmVlbi0zMDAnKTsKICAgIH0sCiAgICBkcm9wKGV2ZW50KSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuZmlsZSA9IHRoaXMuJHJlZnMuZmlsZXZpdHJpbmU7CiAgICAgIHRoaXMuZmlsZS5maWxlcyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlczsKICAgICAgdGhpcy5vbkNoYW5nZVZpdHJpbmUoKTsKICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdiZy1ncmF5LTEwMCcpOwogICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2JnLWdyZWVuLTMwMCcpOwogICAgfSwKICAgIHJlbW92ZShmaWxlTmFtZSl7CiAgICAgIHRoaXMucmVtb3ZlQnlOYW1lKHRoaXMuZmlsZWxpc3QsIGZpbGVOYW1lKTsKICAgIH0sCiAgICByZW1vdmVCeU5hbWUoYXJyLCBuYW1lKXsKICAgICAgY29uc3QgcmVxdWlyZWRJbmRleCA9IGFyci5maW5kSW5kZXgoZWwgPT4gewogICAgICAgICAgcmV0dXJuIGVsLm5hbWUgPT09IFN0cmluZyhuYW1lKTsKICAgICAgfSk7CiAgICAgIGlmKHJlcXVpcmVkSW5kZXggPT09IC0xKXsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfTsKICAgICAgcmV0dXJuICEhYXJyLnNwbGljZShyZXF1aXJlZEluZGV4LCAxKTsKICAgIH0KCiAgfQp9KQo="},{"version":3,"sources":["vitrine-image-import.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"vitrine-image-import.vue","sourceRoot":"src/components/vitrine-modal","sourcesContent":["<template>\n  <modal :active=\"showImportImageModal\">\n    <div class=\"card custom-modal\">\n        <div class=\"card-body text-center d-flex flex-column justify-content-between\">\n            <div class=\"custom-close\" title=\"Fechar Modal de Logo\" @click=\"$emit('closeImageModal')\">\n                <i class=\"fas fa-times\"></i>                \n            </div>\n\n            <div>\n                <h4 class=\"font-weight-bold text-dark text-center text-uppercase\">Adicionar Nova Capa</h4>\n                <!-- <p class=\"text-muted text-center mb-1\">Adicione até {{ totalImages }} {{totalImages === 1 ? 'imagem' :'imagens'}} para seus produtos.</p> -->\n                <p class=\"text-muted text-center mb-1\">Adicione a imagem da sua Capa.</p>\n            </div>\n\n            <div class=\"d-flex align-items-center justify-content-center text-center mt-3\" id=\"app\">\n                <div class=\"drag-area bg-gray-100 border border-dashed border-gray-300\" @dragover=\"dragover\" @dragleave=\"dragleave\" @drop=\"drop\">\n                    <input type=\"file\" name=\"fields[assetsFieldHandle2][]\" id=\"assetsFieldHandle2\" @change=\"onChangeVitrine()\"\n                        class=\"w-px h-px opacity-0 overflow-hidden position-absolute\" \n                         ref=\"filevitrine\" accept=\".jpg,.jpeg,.png\"/>\n                    \n                    <label for=\"assetsFieldHandle2\" class=\"label-input d-flex align-items-center justify-content-center\">\n                            <p>Arraste ou <span class=\"btn btn-link p-0 text-uppercase mx-1\">clique aqui</span> para enviar sua imagem</p>\n                            <span class=\"material-icons icon-drive\">drive_folder_upload</span>\n                    </label>\n                </div>\n            </div>\n\n            <ul class=\"d-flex flex-column align-items-start my-1\">\n                <li class=\"small ul-list\">Certifique-se que o arquivo está legível</li>\n                <li class=\"small ul-list\">Tamanho máximo 6MB</li>\n                <li class=\"small ul-list\">Dimensões ideais: 1.640x856</li>\n                <li class=\"small ul-list\">Formatos permitidos: PNG ou JPG</li>\n            </ul>\n\n            <ul class=\"mt-2 p-2 cloak\" v-if=\"filelist.length > 0\" v-cloak>\n                <li class=\"text-sm p-2 my-1 d-flex justify-content-between align-items-center\" v-for=\"file in filelist\" :key=\"file.name\">\n                    <span class=\"col-9 p-0 text-left\">{{ file.name }}</span>\n                    <button class=\"btn btn-link d-flex align-items-center justify-content-end p-0 small col-3 text-danger\" type=\"button\" @click=\"remove(file.name)\" title=\"Remove file\">\n                        <span class=\"material-icons mr-1 small-icon\">delete_sweep</span>\n                        remover\n                    </button>\n                </li>\n<!--                <li class=\"form-group d-flex flex-column align-items-start m-0 p-2\">-->\n<!--                    <label for=\"description\" class=\"m-0 small text-muted\">Descrição</label>-->\n<!--                    <input v-model=\"description\" type=\"text\" maxlength=\"40\"-->\n<!--                        class=\"form-control\" id=\"description\" aria-describedby=\"descriptionHelp\" placeholder=\"Descrição\">-->\n<!--                    <small id=\"descriptionHelp\" class=\"form-text text-muted\">Escreva uma descrição para imagem.</small>-->\n<!--                </li>-->\n            </ul>\n            \n            <div class=\"d-flex justify-content-end mt-2 mb-5 import-action-footer\">\n                <button class=\"btn btn-link text-muted\" @click=\"$emit('closeImageModal')\">\n                    Cancelar\n                </button>\n                <button class=\"btn btn-primary d-flex align-items-center\" @click=\"$emit('showImageCropper')\">\n                    Próximo\n                    <span class=\"material-icons ml-2\">chevron_right</span>\n                </button>\n            </div>\n        </div>\n    </div>\n  </modal>\n</template>\n\n<script lang=\"ts\">\n  import Vue from 'vue'\n  import Compressor from 'compressorjs'\n  export default Vue.extend({\n    name: 'vitrineImageImport',\n    props: {\n      showImportImageModal: {\n        type: Boolean,\n        required: true\n      }\n    },\n    data: () => ({\n      filelist: [] as File[],\n      imageToCrop: '',\n      file: {} as any,\n      imageFile: {} as any,\n    }),\n    methods: {\n      onChangeVitrine() {\n        console.log(\"crop vitrine - upload\")\n        this.file = this.$refs.filevitrine;\n        this.filelist = [...this.file.files];\n        if (this.file.files.length) {            \n          const imageFile = this.file.files[0];\n          if (imageFile.size / 1000000 < 15) {\n            const compressor = new Compressor(imageFile, {\n              quality: 0.5,\n              width: 1250,\n              height: 1250,\n              convertSize: 0,\n              success: (imageCompressed) => {\n                const reader = new FileReader();\n                if (imageCompressed.size / 1000000 < 6) {\n                  this.imageFile = imageCompressed;\n                  reader.readAsDataURL(imageCompressed);\n                  reader.onload = (e: any) => {\n                    this.imageToCrop = e.target.result;\n                    this.$emit('setImageToCrop', e.target.result)\n                  };\n                }else{\n                  alert(\"Reduza o tamanho de imagem e tente novamente.\");\n                }                       \n              },\n              error(err) {\n                console.log(\"error comprimindo imagem\", err.message);\n              },\n            });\n          }else{\n            alert(\"Reduza o tamanho de imagem e tente novamente.\");\n          } \n        }\n      },\n      dragover(event) {\n        event.preventDefault();\n        if (!event.currentTarget.classList.contains('bg-green-300')) {\n          event.currentTarget.classList.remove('bg-gray-100');\n          event.currentTarget.classList.add('bg-green-300');\n        }\n      },\n      dragleave(event) {\n        event.currentTarget.classList.add('bg-gray-100');\n        event.currentTarget.classList.remove('bg-green-300');\n      },\n      drop(event) {\n        event.preventDefault();\n        this.file = this.$refs.filevitrine;\n        this.file.files = event.dataTransfer.files;\n        this.onChangeVitrine();\n        event.currentTarget.classList.add('bg-gray-100');\n        event.currentTarget.classList.remove('bg-green-300');\n      },\n      remove(fileName){\n        this.removeByName(this.filelist, fileName);\n      },\n      removeByName(arr, name){\n        const requiredIndex = arr.findIndex(el => {\n            return el.name === String(name);\n        });\n        if(requiredIndex === -1){\n            return false;\n        };\n        return !!arr.splice(requiredIndex, 1);\n      }\n\n    }\n  })\n</script>\n\n<style lang=\"scss\" scoped>\n.custom-modal {\n    width: 28vw;\n    background-color: #f4f5f9;\n    \n    .btn {\n        font-size: 14px;\n    }\n\n    .slider {\n        top: 6px !important;\n    }\n\n    .variant {\n        font-size: 14px;\n    }\n\n    @media screen and (max-width: 992px) {\n        width: 100vw;\n        height: 100vh;\n        border-radius: 0;\n        \n        .btn {\n            font-size: 12px;\n        }\n\n        h4 {\n            margin-top: 20px;\n        }\n    }\n\n    @media screen and (min-width: 992px) and (max-width: 1360px) {\n        width: 45vw;\n    }\n\n    @media screen and (min-width: 1361px) and (max-width: 1600px) {\n        width: 40vw;\n    }\n}\n\n[v-cloak] {\n    display: none;\n}\n\n.w-px {\n    width: 1px;\n}\n\n.h-px {\n    height: 1px;\n}\n\n.opacity-0 {\n    opacity: 0;\n}\n.opacity-5 {\n    opacity: .5;\n}\n.drag-area {\n    width: 100%;\n    border-radius: 6px;\n}\n\n.cloak {\n    border: 1px solid rgba(43, 88, 164, 0.28);\n    border-radius: 6px;\n\n    li {\n        background-color: #ffffff;\n\n        @media screen and (max-width: 992px) {\n            .text-sm {\n                font-size: 10px;\n            }\n        }\n    }\n}\n\n.icon-drive {\n    position: absolute;\n    font-size: 120px;\n    color: #f3f3f3;\n}\n\n.bg-green-300 {\n    background-color: #9ae6b4\n}\n\n.bg-gray-100 {\n    background-color: #f7fafc;\n}\n\n.cursor-pointer {\n    cursor: pointer;\n}\n\n.label-input {\n    margin: 0;\n    width: 100%;\n    height: 120px;\n\n    p {\n        z-index: 1;\n    }\n}\n\n.cropper {\n    height: 600px;\n    background: #DDD;\n}\n\n.ul-list {\n    list-style: inside;\n}\n\n.import-action-footer {\n    position: sticky;\n}\n\n</style>"]}]}