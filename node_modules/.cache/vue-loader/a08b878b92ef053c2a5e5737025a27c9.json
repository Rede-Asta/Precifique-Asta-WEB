{"remainingRequest":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/GitHub/admin-frontend/src/views/Cupon/CuponCreateOrEditInfo.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/GitHub/admin-frontend/src/views/Cupon/CuponCreateOrEditInfo.vue","mtime":1691603490958},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKCmltcG9ydCBDdXBvbkNyZWF0ZU9yRWRpdFN0ZXAgZnJvbSAiQC92aWV3cy9DdXBvbi9DdXBvbkNyZWF0ZU9yRWRpdFN0ZXAudnVlIjsKaW1wb3J0IGN1cG9uU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL2N1cG9uLnNlcnZpY2UiOwoKCmltcG9ydCBGb3JtSW5wdXQgZnJvbSAiQC9jb21wb25lbnRzL0Zvcm0vRm9ybUlucHV0LnZ1ZSI7CmltcG9ydCBGb3JtU2VsZWN0IGZyb20gIkAvY29tcG9uZW50cy9Gb3JtL0Zvcm1TZWxlY3QudnVlIjsKaW1wb3J0IEZvcm1QcmljZUlucHV0IGZyb20gIkAvY29tcG9uZW50cy9Gb3JtL0Zvcm1QcmljZUlucHV0LnZ1ZSI7CgppbXBvcnQgY2F0ZWdvcnlTZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvY2F0ZWdvcnkuc2VydmljZSc7CgppbXBvcnQgeyBCRm9ybUNoZWNrYm94IH0gZnJvbSAnYm9vdHN0cmFwLXZ1ZSc7CgppbXBvcnQgeyByZXF1aXJlZCB9IGZyb20gJ3Z1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyc7CmltcG9ydCB7IHZhbGlkYXRpb25NZXNzYWdlIH0gZnJvbSAidnVlbGlkYXRlLW1lc3NhZ2VzIjsKaW1wb3J0IHsgY3VycmVuY3lIaWdoZXJUaGFuLCByZXF1aXJlZElmIH0gZnJvbSAiQC9oZWxwZXJzL3ZhbGlkYXRvcnMiOwppbXBvcnQgb3V0cHV0Rm9ybWF0IGZyb20gIkAvaGVscGVycy9vdXRwdXRGb3JtYXQiOwoKaW1wb3J0IFN3YWwsIHsgU3dlZXRBbGVydFR5cGUgfSBmcm9tICJzd2VldGFsZXJ0MiI7CmltcG9ydCBWdWVTaW1wbGVBbGVydCBmcm9tICJ2dWUtc2ltcGxlLWFsZXJ0IjsKCmNvbnN0IGdldFJlcXVpcmVkTWVzc2FnZSA9ICgpID0+ICdFc3RlIGNhbXBvIMOpIG9icmlnYXTDs3Jpby4nOwoKY29uc3QgZXJyb3JNZXNzYWdlcyA9IHsKICByZXF1aXJlZDogZ2V0UmVxdWlyZWRNZXNzYWdlLAogIHJlcXVpcmVkSWY6IGdldFJlcXVpcmVkTWVzc2FnZSwKICBjdXJyZW5jeU1pbmltdW06IGdldFJlcXVpcmVkTWVzc2FnZSwKICBoaWdoZXJUaGFuOiAoKSA9PiAnRGV2ZSBzZXIgbWFpb3IgcXVlIG8gdmFsb3IgcHJvbW9jaW9uYWwuJywKICBoaWdoZXJUaGFuU2VydmljZTogKCkgPT4gJ0RldmUgc2VyIG1haW9yIG91IGlndWFsIGFvIHZhbG9yICJEZSInCn0KCmNvbnN0IGlnbm9yZU9sZFByaWNlSWYgPSAodmFsdWU6IGFueSwgcGFyZW50Vm06IGFueSkgPT4gewogIHJldHVybiAhcGFyZW50Vm0uaW5fcHJvbW90aW9uIHx8ICFwYXJlbnRWbS5zdGF0dXM7Cn0KCmNvbnN0IGlnbm9yZVByaWNlc0lmUHJpY2VUb01hdGNoID0gKHZhbHVlOiBhbnksIHBhcmVudFZtOiBhbnksIGNvbXBvbmVudDogYW55KSA9PiB7CiAgcmV0dXJuIGNvbXBvbmVudC5wcmljZV90b19tYXRjaDsKfQoKaW50ZXJmYWNlIElQcm9kdWN0SW5mbyB7CiAgY2F0ZWdvcnlfZ3VpZDogc3RyaW5nLAogIG5hbWU6IHN0cmluZywKICBkZXNjcmlwdGlvbjogc3RyaW5nLAogIG9yZGVyaW5nOiAxMDAsCiAgaXNfcHVibGlzaGVkOiBib29sZWFuLAogIHJlZ2lzdGVyX3R5cGU6ICdQcm9kdWN0JyB8ICdTZXJ2aWNlJywKICBwcmljZV90b19tYXRjaDogYm9vbGVhbiwKICB2YXJpYW50X3ZhbHVlOiBhbnlbXSwKfQoKZXhwb3J0IGRlZmF1bHQgVnVlLmV4dGVuZCh7CiAgbmFtZTogIkN1cG9uQ3JlYXRlT3JFZGl0SW5mbyIsCiAgY29tcG9uZW50czogewogICAgRm9ybVByaWNlSW5wdXQsCiAgICBGb3JtU2VsZWN0LAogICAgRm9ybUlucHV0LAogICAgQ3Vwb25DcmVhdGVPckVkaXRTdGVwLAogICAgQkZvcm1DaGVja2JveAogIH0sCgogIHByb3BzOiB7ICAgIAogICAgb3BlbjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgfSwKCiAgICBkYXRhOiB7CiAgICAgIHR5cGU6IFtPYmplY3QsIEJvb2xlYW5dLAogICAgICBkZWZhdWx0OiAoKSA9PiBmYWxzZSwKICAgIH0sCgogICAgaXNQYXJlbnRMb2FkaW5nOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6ICgpID0+IGZhbHNlLAogICAgfSwKCiAgICBkaXNhYmxlZDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiAoKSA9PiBmYWxzZSwKICAgIH0sCgogICAgaGFzQ3JlYXRlZFByb2R1Y3Q6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogKCkgPT4gZmFsc2UsCiAgICB9LAoKICAgIHByb2R1Y3Q6IHsKICAgICAgdHlwZTogW09iamVjdCwgQm9vbGVhbl0sCiAgICAgIGRlZmF1bHQ6ICgpID0+IGZhbHNlLAogICAgfSwKCiAgICBpc1NlcnZpY2U6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogKCkgPT4gZmFsc2UsCiAgICB9LAoKICAgIGlzVXBkYXRlUGFnZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiAoKSA9PiBmYWxzZSwKICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWxsQ3Vwb25UeXBlczogWyJWQUxPUiBGSVhPIiwgIkZSRVRFIEdSQVRJUyJdLAogICAgICBzZWxlY3RlZEN1cG9uVHlwZTogJycsCiAgICAgIGFsbEV4cGlyYXRpb25EYXRlczogWyI3IERpYXMiLCAiMTUgRGlhcyIsICIyMSBEaWFzIl0sCiAgICAgIHNlbGVjdGVkRXhwaXJhdGlvbkRhdGU6ICcnLAogICAgICBjdXBvbkRpc2NvdW50OiAwLAogICAgICBtaW5pbXVtVmFsdWU6IDAsCiAgICAgIGN1cG9uc051bWJlcjogMCwKICAgICAgY3Vwb246IHtndWlkOicnfSwKICAgICAgY3Vwb25TZXJ2aWNlOiBuZXcgY3Vwb25TZXJ2aWNlKCksCiAgICAgIGZsYWdDcmVhdGU6IGZhbHNlLAoKICAgICAgY2F0ZWdvcnlTZXJ2aWNlOiBuZXcgY2F0ZWdvcnlTZXJ2aWNlKCksCiAgICAgIGNhdGVnb3J5T3B0aW9uczogW10sICAgICAgCiAgICAgIHNlbGVjdGVkQ2F0ZWdvcnk6IHt9IGFzIGFueSwgIAogICAgICBsb2FkaW5nOiBmYWxzZSwKCiAgICAgIHByb2R1Y3RJbmZvOiB7CiAgICAgICAgY2F0ZWdvcnlfZ3VpZDogJycsCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIG9yZGVyaW5nOiAxMDAsCiAgICAgICAgaXNfcHVibGlzaGVkOiB0cnVlLAogICAgICAgIHJlZ2lzdGVyX3R5cGU6ICdQcm9kdWN0JywKICAgICAgICBwcmljZV90b19tYXRjaDogZmFsc2UsCiAgICAgICAgdmFyaWFudF92YWx1ZTogW10sCiAgICAgIH0gYXMgSVByb2R1Y3RJbmZvLAogICAgfQogIH0sCgogIGNvbXB1dGVkOiB7CgogICAgdmFyaWFudHNLZXlOYW1lKCk6IHN0cmluZyB7CiAgICAgIHJldHVybiAndmFyaWFudF92YWx1ZSc7CiAgICB9LAoKICAgIGlzVXBkYXRlKCk6IGJvb2xlYW4gewogICAgICByZXR1cm4gdGhpcy5oYXNDcmVhdGVkUHJvZHVjdCAmJiBCb29sZWFuKHRoaXMucHJvZHVjdCk7CiAgICB9LAoKICAgIHJlZ2lzdGVyVHlwZSgpOiBzdHJpbmcgewogICAgICByZXR1cm4gdGhpcy5pc1NlcnZpY2UgPyAnc2VydmnDp28nIDogJ3Byb2R1dG8nOwogICAgfSwKCiAgICBwcm9kdWN0TmFtZVBsYWNlaG9sZGVyKCkgewogICAgICBpZiAodGhpcy5yZWdpc3RlclR5cGUgPT09ICdwcm9kdXRvJykgewogICAgICAgIHJldHVybiAnTm9tZSBkbyBwcm9kdXRvIHF1ZSBzZXLDoSBhcHJlc2VudGFkbyAtIEV4OiBDYW1pc2V0YSBlc3RhbXBhZGEgcm94YSwgYm9sbyBkZSBjaG9jb2xhdGUsIGV0Yy4nCiAgICAgIH0KCiAgICAgIHJldHVybiAnTm9tZSBkbyBzZXJ2acOnbyAtIEV4OiBBc3Npc3TDqm5jaWEgdMOpY25pY2EsIGNoYXZlaXJvLCBlbmNhbmFkb3IsIGV0Yy4nOwogICAgfSwKICB9LAoKICB3YXRjaDogewoKICAgIHNlbGVjdGVkQ2F0ZWdvcnkoKSB7CiAgICAgIC8vIGlmICghdGhpcy5zZWxlY3RlZENhdGVnb3J5IHx8IHRoaXMucHJvZHVjdCl7CiAgICAgIC8vICAgcmV0dXJuOyAgICAKICAgICAgLy8gfQoKICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkQ2F0ZWdvcnkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5zZWxlY3RlZEN1cG9uVHlwZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKCiAgICAgIGNvbnN0IGJhc2VWYXJpYW50ID0gewogICAgICAgIGNvZGU6ICcnLAogICAgICAgIGd1aWQ6ICcnLAogICAgICAgIG5ld19wcmljZTogJycsCiAgICAgICAgb2xkX3ByaWNlOiAnJywKICAgICAgICB2YWx1ZTogJycsCiAgICAgICAgaW5fcHJvbW90aW9uOiBmYWxzZSwKICAgICAgICBpc19za3VzOiBmYWxzZSwKICAgICAgICBzdGF0dXM6IHRydWUsCiAgICAgIH07CgogICAgICBsZXQgdmFyaWFudHMgPSBbCiAgICAgICAgeyAuLi5iYXNlVmFyaWFudCB9CiAgICAgIF07CgogICAgICBpZiAodGhpcy5zZWxlY3RlZENhdGVnb3J5LnZhcmlhbnRfc3RhdHVzKSB7CiAgICAgICAgdmFyaWFudHMgPSB0aGlzLnNlbGVjdGVkQ2F0ZWdvcnlbdGhpcy52YXJpYW50c0tleU5hbWVdLm1hcCgoeyB2YWx1ZSB9KSA9PiB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAuLi5iYXNlVmFyaWFudCwKICAgICAgICAgICAgdmFsdWUsCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMuJHNldCh0aGlzLnByb2R1Y3RJbmZvLCAnY2F0ZWdvcnlfZ3VpZCcsIHRoaXMuc2VsZWN0ZWRDYXRlZ29yeS5ndWlkKTsKICAgICAgdGhpcy4kc2V0KHRoaXMucHJvZHVjdEluZm8sIHRoaXMudmFyaWFudHNLZXlOYW1lLCB2YXJpYW50cyk7CiAgICAgIHRoaXMuJHNldCh0aGlzLnByb2R1Y3RJbmZvLCAncmVnaXN0ZXJfdHlwZScsIHRoaXMuc2VsZWN0ZWRDYXRlZ29yeS5yZWdpc3Rlcl90eXBlKTsKICAgICAgdGhpcy4kc2V0KHRoaXMucHJvZHVjdEluZm8sICd2YXJpYW50X3ZhbHVlJywgdGhpcy5wcm9kdWN0LnNrdXMubWFwKHNrdSA9PiAoeyAuLi5za3UsIHZhbHVlOiBza3UgfHwgJycgfSkpKTsKICAgIH0sCgogICAgcHJvZHVjdDogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgaWYgKCF2YWwgfHwgIXRoaXMuaGFzQ3JlYXRlZFByb2R1Y3QpIHJldHVybjsKCiAgICAgICAgdGhpcy5wcm9kdWN0SW5mbyA9IHsKICAgICAgICAgIGNhdGVnb3J5X2d1aWQ6IHZhbC5jYXRlZ29yeS5ndWlkLAogICAgICAgICAgbmFtZTogdmFsLm5hbWUsCiAgICAgICAgICBkZXNjcmlwdGlvbjogdmFsLmRlc2NyaXB0aW9uLAogICAgICAgICAgaXNfcHVibGlzaGVkOiB2YWwuaXNfcHVibGlzaGVkLAogICAgICAgICAgcmVnaXN0ZXJfdHlwZTogdmFsLnJlZ2lzdGVyX3R5cGUsCiAgICAgICAgICBwcmljZV90b19tYXRjaDogdmFsLnByaWNlX3RvX21hdGNoLAogICAgICAgICAgdmFyaWFudF92YWx1ZTogdmFsLnNrdXMubWFwKHNrdSA9PiAoeyAuLi5za3UsIHZhbHVlOiBza3UgfHwgJycgfSkpLAogICAgICAgICAgb3JkZXJpbmc6IHZhbC5vcmRlcmluZywKICAgICAgICB9OwogICAgICB9LAogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICB9LAoKICAgICdwcm9kdWN0SW5mby5wcmljZV90b19tYXRjaCc6IGZ1bmN0aW9uIChuZXdWYWwpIHsKICAgICAgaWYgKCFuZXdWYWwpIHJldHVybjsKCiAgICAgIHRoaXMucHJvZHVjdEluZm9bdGhpcy52YXJpYW50c0tleU5hbWVdWzBdLm9sZF9wcmljZSA9ICcwLjAxJzsKICAgICAgdGhpcy5wcm9kdWN0SW5mb1t0aGlzLnZhcmlhbnRzS2V5TmFtZV1bMF0ubmV3X3ByaWNlID0gJzAuMDEnOwogICAgfQogIH0sCgogIHZhbGlkYXRpb25zKCkgewoKICAgIGNvbnN0IHZhcmlhbnRWYWxpZGF0aW9ucyA9IHsKICAgICAgJGVhY2g6IHsKICAgICAgICBjb2RlOiB7CiAgICAgICAgICByZXF1aXJlZElmOiByZXF1aXJlZElmKFsnaXNfc2t1cycsICdzdGF0dXMnXSksCiAgICAgICAgfSwKICAgICAgICBuZXdfcHJpY2U6IHsKICAgICAgICAgIHJlcXVpcmVkLAogICAgICAgICAgY3VycmVuY3lNaW5pbXVtOiBjdXJyZW5jeUhpZ2hlclRoYW4oewogICAgICAgICAgICB2YWx1ZTogJzAsMDAnLAogICAgICAgICAgICBpZ25vcmVJZjogKHZhbHVlOiBhbnksIHBhcmVudFZtOiBhbnkpID0+ICFwYXJlbnRWbS5zdGF0dXMsCiAgICAgICAgICB9KSwKICAgICAgICB9LAogICAgICAgIG9sZF9wcmljZTogewogICAgICAgICAgaGlnaGVyVGhhbjogY3VycmVuY3lIaWdoZXJUaGFuKHsKICAgICAgICAgICAgdHlwZTogJ3Byb3AnLAogICAgICAgICAgICB2YWx1ZTogJ25ld19wcmljZScsCiAgICAgICAgICAgIGlnbm9yZUlmOiBpZ25vcmVPbGRQcmljZUlmCiAgICAgICAgICB9KSwKICAgICAgICAgIGN1cnJlbmN5TWluaW11bTogY3VycmVuY3lIaWdoZXJUaGFuKHsKICAgICAgICAgICAgdmFsdWU6ICcwLDAwJywKICAgICAgICAgICAgaWdub3JlSWY6IGlnbm9yZU9sZFByaWNlSWYKICAgICAgICAgIH0pLAogICAgICAgIH0sCiAgICAgIH0KICAgIH0KCiAgICBpZiAodGhpcy5pc1NlcnZpY2UpIHsKICAgICAgZGVsZXRlIHZhcmlhbnRWYWxpZGF0aW9ucy4kZWFjaC5vbGRfcHJpY2UuaGlnaGVyVGhhbjsKCiAgICAgIHZhcmlhbnRWYWxpZGF0aW9ucy4kZWFjaC5uZXdfcHJpY2VbJ2hpZ2hlclRoYW5TZXJ2aWNlJ10gPSBjdXJyZW5jeUhpZ2hlclRoYW4oewogICAgICAgIHR5cGU6ICdwcm9wJywKICAgICAgICB2YWx1ZTogJ29sZF9wcmljZScsCiAgICAgICAgaWdub3JlSWY6IGlnbm9yZVByaWNlc0lmUHJpY2VUb01hdGNoLAogICAgICAgIGFsbG93RXF1YWxzOiB0cnVlLAogICAgICB9KTsKICAgIH0KCiAgICBsZXQgYmFzZVZhbGlkYXRpb25zID0gewogICAgICBwcm9kdWN0SW5mbzogewogICAgICAgIG5hbWU6IHsKICAgICAgICAgIHJlcXVpcmVkLAogICAgICAgIH0sCiAgICAgICAgZGVzY3JpcHRpb246IHsKICAgICAgICAgIHJlcXVpcmVkLAogICAgICAgIH0sCiAgICAgIH0KICAgIH0KCiAgICBiYXNlVmFsaWRhdGlvbnNbJ3Byb2R1Y3RJbmZvJ11bdGhpcy52YXJpYW50c0tleU5hbWVdID0gdmFyaWFudFZhbGlkYXRpb25zOwoKICAgIHJldHVybiBiYXNlVmFsaWRhdGlvbnM7CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Q3Vwb24oKTsKICB9LAoKICBtZXRob2RzOiB7CgogICAgYXN5bmMgZ2V0Q3Vwb24oKXsKICAgICAgdHJ5IHsKICAgICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmN1cG9uR3VpZCkgewogICAgICAgICAgY29uc3QgY3Vwb25HdWlkID0gdGhpcy4kcm91dGUucGFyYW1zLmN1cG9uR3VpZAogICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmN1cG9uU2VydmljZS5nZXRDdXBvbihjdXBvbkd1aWQpCiAgICAgICAgICB0aGlzLmN1cG9uID0gcmVzcG9uc2UuZGF0YQogICAgICAgICAgY29uc3Qge21pbmltdW1fcHVyY2hhc2UsIHNlbGxlcl9jb3Vwb25zfSA9IHJlc3BvbnNlLmRhdGEKICAgICAgICAgIGNvbnNvbGUubG9nKCJlZGl0YXIgcmVzcG9uc3NlLi4uLiIsIHJlc3BvbnNlLmRhdGEpCiAgICAgICAgICB0aGlzLm1pbmltdW1WYWx1ZSA9IG1pbmltdW1fcHVyY2hhc2UKICAgICAgICAgIHRoaXMuY3Vwb25zTnVtYmVyID0gc2VsbGVyX2NvdXBvbnNbMF0ucXVhbnRpdHkKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHRoaXMuZmxhZ0NyZWF0ZSA9IHRydWUKICAgICAgICB9CiAgICAgICAKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgfQogICAgfSwKCiAgICBzZXRDdXBvblR5cGUoc2VsZWN0ZWQ6IGFueSl7CiAgICAgIGNvbnNvbGUubG9nKCJzZWxlY3RlZCIsIHNlbGVjdGVkLnRhcmdldC52YWx1ZSkKICAgICAgdGhpcy5zZWxlY3RlZEN1cG9uVHlwZSA9IHNlbGVjdGVkLnRhcmdldC52YWx1ZTsKICAgIH0sCgogICAgc2V0RXhwaXJhdGlvbkRhdGUoc2VsZWN0ZWQ6IGFueSl7CiAgICAgIGNvbnNvbGUubG9nKCJzZWxlY3RlZCIsIHNlbGVjdGVkLnRhcmdldC52YWx1ZSkKICAgICAgdGhpcy5zZWxlY3RlZEV4cGlyYXRpb25EYXRlID0gc2VsZWN0ZWQudGFyZ2V0LnZhbHVlOwogICAgfSwKCiAgICBnZXROZXdQcmljZUhlbHBUZXh0KGluUHJvbW90aW9uKSB7CiAgICAgIGlmICh0aGlzLmlzU2VydmljZSkgewogICAgICAgIHJldHVybiAnQXTDqSc7CiAgICAgIH0KCiAgICAgIHJldHVybiBpblByb21vdGlvbiA/ICdWYWxvciBwcm9tb2Npb25hbCcgOiAnVmFsb3IgdW5pdMOhcmlvJzsKICAgIH0sCgogICAgZ2V0T2xkUHJpY2VIZWxwVGV4dCgpIHsKICAgICAgaWYgKHRoaXMuaXNTZXJ2aWNlKSB7CiAgICAgICAgcmV0dXJuICdEZSc7CiAgICAgIH0KCiAgICAgIHJldHVybiAnVmFsb3IgYW50aWdvJzsKICAgIH0sCgogICAgdmFsaWRhdGVJc1NlbGVjdGFibGUob3B0aW9uKSB7CiAgICAgIHJldHVybiAhb3B0aW9uLnZhcmlhbnRfc3RhdHVzOwogICAgfSwKCiAgICB2YWxpZGF0aW9uTWVzc2FnZTogdmFsaWRhdGlvbk1lc3NhZ2UoZXJyb3JNZXNzYWdlcywge30pLAoKICAgIHNldFNLVVByb21vdGlvbihpbmRleCwgdmFsdWUpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMucHJvZHVjdEluZm9bdGhpcy52YXJpYW50c0tleU5hbWVdLCBpbmRleCwgewogICAgICAgIC4uLih0aGlzLnByb2R1Y3RJbmZvW3RoaXMudmFyaWFudHNLZXlOYW1lXVtpbmRleF0gfHwge30pLAogICAgICAgIGluX3Byb21vdGlvbjogdmFsdWUKICAgICAgfSk7CiAgICB9LAoKICAgIHRvZ2dsZUlzU2t1KGluZGV4LCB2YWx1ZSkgewogICAgICB0aGlzLiRzZXQodGhpcy5wcm9kdWN0SW5mb1t0aGlzLnZhcmlhbnRzS2V5TmFtZV0sIGluZGV4LCB7CiAgICAgICAgLi4uKHRoaXMucHJvZHVjdEluZm9bdGhpcy52YXJpYW50c0tleU5hbWVdW2luZGV4XSB8fCB7fSksCiAgICAgICAgaXNfc2t1czogdmFsdWUKICAgICAgfSk7CiAgICB9LAoKICAgIGFzeW5jIHZhbGlkYXRlSW5mbygpIHsKICAgICAgaWYgKCF0aGlzLmZsYWdDcmVhdGUpIHsKICAgICAgICBpZiAodGhpcy52YWxpZGF0ZVVwZGF0ZUNvdXBvbigpKSB7CiAgICAgICAgICBjb25zdCBlZGl0ZWRDb3Vwb24gPSB7CiAgICAgICAgICAgIGNvdXBvbl9kYXRhOiB7CiAgICAgICAgICAgICAgcXVhbnRpdHk6IE51bWJlcih0aGlzLmN1cG9uc051bWJlciksCiAgICAgICAgICAgICAgbWluaW11bV9wdXJjaGFzZTogdGhpcy5taW5pbXVtVmFsdWUsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9ICAgICAgICAKICAgICAgICAgIHRoaXMuJGVtaXQoJ3N1Ym1pdC12YWxpZCcsIGVkaXRlZENvdXBvbiwgdGhpcy5jdXBvbj8uZ3VpZCk7CiAgICAgICAgfSAgICAgICAKICAgICAgfWVsc2V7CiAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVDcmVhdGVDb3Vwb24oKSkgewogICAgICAgICAgbGV0IG5vdyA9IERhdGUoKTsKICAgICAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRFeHBpcmF0aW9uRGF0ZS5zcGxpdCgiICIpOwogICAgICAgICAgY29uc3QgZXhwaXJhdGlvbl9kYXRlID0gdGhpcy5hZGREYXlzKG5vdywgTnVtYmVyKHNlbGVjdGVkWzBdKSkKCiAgICAgICAgICBsZXQgY3Vwb25UeXBlID0gInNoaXBwaW5nIgogICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDdXBvblR5cGUgPT0gIlZBTE9SIEZJWE8iKSB7CiAgICAgICAgICAgIGN1cG9uVHlwZSA9ICJmaXhlZCIKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCBjdXBvbiA9IHsKICAgICAgICAgICAgdHlwZTogY3Vwb25UeXBlLAogICAgICAgICAgICBkaXNjb3VudDogTnVtYmVyKHRoaXMuY3Vwb25EaXNjb3VudCksCiAgICAgICAgICAgIG1pbmltdW1fcHVyY2hhc2U6IE51bWJlcih0aGlzLm1pbmltdW1WYWx1ZSksCiAgICAgICAgICAgIHF1YW50aXR5OiBOdW1iZXIodGhpcy5jdXBvbnNOdW1iZXIpLAogICAgICAgICAgICBleHBpcmF0aW9uX2RhdGU6IGV4cGlyYXRpb25fZGF0ZSwKICAgICAgICAgICAgY3JlYXRlZF9ieTogInNlbGxlciIsCiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy4kZW1pdCgnc3VibWl0LXZhbGlkJywgY3Vwb24pOwogICAgICAgIH0KICAgICAgICAKICAgICAgfQogICAgfSwKCiAgICB2YWxpZGF0ZVVwZGF0ZUNvdXBvbigpewogICAgICBsZXQgdG9SZXR1cm4gPSB0cnVlCiAgICAgIGlmICghdGhpcy5jdXBvbnNOdW1iZXIpIHsKICAgICAgICB0aGlzLnRvYXN0TWVzc2FnZSgKICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgIkRldmUgcHJlZW5jaGVyIG8gbsO6bWVybyBkZSBjdXBvbnMiCiAgICAgICAgKTsKICAgICAgICB0b1JldHVybiA9IGZhbHNlCiAgICAgIH0KICAgICAgaWYgKCF0aGlzLm1pbmltdW1WYWx1ZSkgewogICAgICAgIHRoaXMudG9hc3RNZXNzYWdlKAogICAgICAgICAgICAiZXJyb3IiLAogICAgICAgICAgICAiRGV2ZSBwcmVlbmNoZXIgbyB2YWxvciBtw61uaW1vIGRlIGNvbXByYSIKICAgICAgICApOwogICAgICAgIHRvUmV0dXJuID0gZmFsc2UKICAgICAgfQogICAgICByZXR1cm4gdG9SZXR1cm4KICAgIH0sCgogICAgdmFsaWRhdGVDcmVhdGVDb3Vwb24oKXsKICAgICAgbGV0IHRvUmV0dXJuID0gdHJ1ZQogICAgICBpZiAoIXRoaXMuY3Vwb25zTnVtYmVyKSB7CiAgICAgICAgdGhpcy50b2FzdE1lc3NhZ2UoCiAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgICJEZXZlIHByZWVuY2hlciBvIG7Dum1lcm8gZGUgY3Vwb25zIgogICAgICAgICk7CiAgICAgICAgdG9SZXR1cm4gPSBmYWxzZQogICAgICB9CiAgICAgIGlmICghdGhpcy5taW5pbXVtVmFsdWUpIHsKICAgICAgICB0aGlzLnRvYXN0TWVzc2FnZSgKICAgICAgICAgICAgImVycm9yIiwKICAgICAgICAgICAgIkRldmUgcHJlZW5jaGVyIG8gdmFsb3IgbcOtbmltbyBkZSBjb21wcmEiCiAgICAgICAgKTsKICAgICAgICB0b1JldHVybiA9IGZhbHNlCiAgICAgIH0KICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkQ3Vwb25UeXBlKSB7CiAgICAgICAgdGhpcy50b2FzdE1lc3NhZ2UoCiAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgICJEZXZlIHNlbGVjaW9uYXIgbyB0aXBvIGRlIGN1cG9tIgogICAgICAgICk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDdXBvblR5cGUgIT0gJ0ZSRVRFIEdSQVRJUycgJiYgIXRoaXMuY3Vwb25EaXNjb3VudCkgewogICAgICAgIHRoaXMudG9hc3RNZXNzYWdlKAogICAgICAgICAgICAiZXJyb3IiLAogICAgICAgICAgICAiRGV2ZSBwcmVlbmNoZXIgbyBkZXNjb250byBkZSBjdXBvbiIKICAgICAgICApOwogICAgICB9CiAgICAgIGlmICghdGhpcy5zZWxlY3RlZEV4cGlyYXRpb25EYXRlKSB7CiAgICAgICAgdGhpcy50b2FzdE1lc3NhZ2UoCiAgICAgICAgICAgICJlcnJvciIsCiAgICAgICAgICAgICJEZXZlIHNlbGVjaW9uYXIgYSBkYXRhIGRlIGV4cGlyYcOnw6NvIgogICAgICAgICk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0b1JldHVybgogICAgfSwKCiAgICB0b2FzdE1lc3NhZ2UodHlwZTogU3dlZXRBbGVydFR5cGUsIHRpdGxlOiBzdHJpbmcpIHsKICAgICAgVnVlU2ltcGxlQWxlcnQuZmlyZSh7CiAgICAgICAgdHlwZSwKICAgICAgICB0aXRsZSwKICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICBvbk9wZW46ICh0b2FzdCkgPT4gewogICAgICAgICAgdG9hc3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsIFN3YWwuc3RvcFRpbWVyKSwKICAgICAgICAgICAgdG9hc3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsIFN3YWwucmVzdW1lVGltZXIpOwogICAgICAgIH0sCiAgICAgIH0pOwogICAgfSwKCiAgICBhZGREYXlzKGRhdGUsIGRheXMpIHsKICAgICAgdmFyIHJlc3VsdCA9IG5ldyBEYXRlKGRhdGUpOwogICAgICByZXN1bHQuc2V0RGF0ZShyZXN1bHQuZ2V0RGF0ZSgpICsgZGF5cyk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogIH0KfSk7Cg=="},{"version":3,"sources":["CuponCreateOrEditInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CuponCreateOrEditInfo.vue","sourceRoot":"src/views/Cupon","sourcesContent":["<template>\n  <cupon-create-or-edit-step :step=\"1\" :open=\"open\" title=\"Informações do lote de cupons\" :hide-steps=\"isUpdatePage\">\n    <fieldset class=\"product-create-info p-1 px-md-5\" :disabled=\"disabled\">\n      \n      <!-- <form-select label=\"Tipo de Cupon\" placeholder=\"Tipo de Cupon\" name=\"tipo-cupon\"\n        id=\"cupon-type\" :options=\"allCuponTypes\" v-model=\"selectedCuponType\" @change=\"changeCuponType()\"/> -->\n\n      <div v-if=\"flagCreate\">\n        <label>Tipo de cupom</label>\n        <select id=\"cuponType\" v-model=\"selectedCuponType\"\n            @change=\"setCuponType\">\n            <option v-for=\"(cupontype, index) in allCuponTypes\" :key=\"index\" :value=\"cupontype\">\n                {{ cupontype }}\n            </option>\n        </select>\n      </div>\n\n      <div v-if=\"selectedCuponType != 'FRETE GRATIS' && flagCreate\">\n        <label>Desconto de Cupon</label>\n        <div>\n            <input id=\"cuponDiscount\" v-model=\"cuponDiscount\" type=\"text\">\n        </div>\n      </div>\n\n      <div>\n        <label>Valor minimo de compra</label>\n        <div>\n            <input id=\"minimumValue\" v-model=\"minimumValue\" type=\"text\">\n        </div>\n      </div>  \n\n      <div>\n        <label>Número de cupons disponiveis</label>\n        <div>\n            <input id=\"cuponsNumber\" v-model=\"cuponsNumber\" type=\"text\">\n        </div>\n      </div> \n\n      <div v-if=\"flagCreate\">\n        <label>Data de expiração</label>\n        <select id=\"expirationDate\" v-model=\"selectedExpirationDate\"\n            @change=\"setExpirationDate\">\n            <option v-for=\"(expirationDate, index) in allExpirationDates\" :key=\"index\" :value=\"expirationDate\">\n                {{ expirationDate }}\n            </option>\n        </select>\n      </div>  \n\n    </fieldset>\n\n    <div class=\"d-flex justify-content-end mt-25 pb-20\">\n      <button class=\"btn btn-primary\" @click=\"validateInfo\">\n        Criar Cupons\n      </button>\n    </div>\n\n    <loading style=\"left: 0; height: 100%\" :active=\"loading || isParentLoading\" />\n  </cupon-create-or-edit-step>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue';\n\nimport CuponCreateOrEditStep from \"@/views/Cupon/CuponCreateOrEditStep.vue\";\nimport cuponService from \"@/services/cupon.service\";\n\n\nimport FormInput from \"@/components/Form/FormInput.vue\";\nimport FormSelect from \"@/components/Form/FormSelect.vue\";\nimport FormPriceInput from \"@/components/Form/FormPriceInput.vue\";\n\nimport categoryService from '@/services/category.service';\n\nimport { BFormCheckbox } from 'bootstrap-vue';\n\nimport { required } from 'vuelidate/lib/validators';\nimport { validationMessage } from \"vuelidate-messages\";\nimport { currencyHigherThan, requiredIf } from \"@/helpers/validators\";\nimport outputFormat from \"@/helpers/outputFormat\";\n\nimport Swal, { SweetAlertType } from \"sweetalert2\";\nimport VueSimpleAlert from \"vue-simple-alert\";\n\nconst getRequiredMessage = () => 'Este campo é obrigatório.';\n\nconst errorMessages = {\n  required: getRequiredMessage,\n  requiredIf: getRequiredMessage,\n  currencyMinimum: getRequiredMessage,\n  higherThan: () => 'Deve ser maior que o valor promocional.',\n  higherThanService: () => 'Deve ser maior ou igual ao valor \"De\"'\n}\n\nconst ignoreOldPriceIf = (value: any, parentVm: any) => {\n  return !parentVm.in_promotion || !parentVm.status;\n}\n\nconst ignorePricesIfPriceToMatch = (value: any, parentVm: any, component: any) => {\n  return component.price_to_match;\n}\n\ninterface IProductInfo {\n  category_guid: string,\n  name: string,\n  description: string,\n  ordering: 100,\n  is_published: boolean,\n  register_type: 'Product' | 'Service',\n  price_to_match: boolean,\n  variant_value: any[],\n}\n\nexport default Vue.extend({\n  name: \"CuponCreateOrEditInfo\",\n  components: {\n    FormPriceInput,\n    FormSelect,\n    FormInput,\n    CuponCreateOrEditStep,\n    BFormCheckbox\n  },\n\n  props: {    \n    open: {\n      type: Boolean,\n    },\n\n    data: {\n      type: [Object, Boolean],\n      default: () => false,\n    },\n\n    isParentLoading: {\n      type: Boolean,\n      default: () => false,\n    },\n\n    disabled: {\n      type: Boolean,\n      default: () => false,\n    },\n\n    hasCreatedProduct: {\n      type: Boolean,\n      default: () => false,\n    },\n\n    product: {\n      type: [Object, Boolean],\n      default: () => false,\n    },\n\n    isService: {\n      type: Boolean,\n      default: () => false,\n    },\n\n    isUpdatePage: {\n      type: Boolean,\n      default: () => false,\n    }\n  },\n\n  data() {\n    return {\n      allCuponTypes: [\"VALOR FIXO\", \"FRETE GRATIS\"],\n      selectedCuponType: '',\n      allExpirationDates: [\"7 Dias\", \"15 Dias\", \"21 Dias\"],\n      selectedExpirationDate: '',\n      cuponDiscount: 0,\n      minimumValue: 0,\n      cuponsNumber: 0,\n      cupon: {guid:''},\n      cuponService: new cuponService(),\n      flagCreate: false,\n\n      categoryService: new categoryService(),\n      categoryOptions: [],      \n      selectedCategory: {} as any,  \n      loading: false,\n\n      productInfo: {\n        category_guid: '',\n        name: '',\n        description: '',\n        ordering: 100,\n        is_published: true,\n        register_type: 'Product',\n        price_to_match: false,\n        variant_value: [],\n      } as IProductInfo,\n    }\n  },\n\n  computed: {\n\n    variantsKeyName(): string {\n      return 'variant_value';\n    },\n\n    isUpdate(): boolean {\n      return this.hasCreatedProduct && Boolean(this.product);\n    },\n\n    registerType(): string {\n      return this.isService ? 'serviço' : 'produto';\n    },\n\n    productNamePlaceholder() {\n      if (this.registerType === 'produto') {\n        return 'Nome do produto que será apresentado - Ex: Camiseta estampada roxa, bolo de chocolate, etc.'\n      }\n\n      return 'Nome do serviço - Ex: Assistência técnica, chaveiro, encanador, etc.';\n    },\n  },\n\n  watch: {\n\n    selectedCategory() {\n      // if (!this.selectedCategory || this.product){\n      //   return;    \n      // }\n\n      if (!this.selectedCategory) {\n        return;\n      }\n\n      if (!this.selectedCuponType) {\n        return;\n      }\n\n\n      const baseVariant = {\n        code: '',\n        guid: '',\n        new_price: '',\n        old_price: '',\n        value: '',\n        in_promotion: false,\n        is_skus: false,\n        status: true,\n      };\n\n      let variants = [\n        { ...baseVariant }\n      ];\n\n      if (this.selectedCategory.variant_status) {\n        variants = this.selectedCategory[this.variantsKeyName].map(({ value }) => {\n          return {\n            ...baseVariant,\n            value,\n          }\n        });\n      }\n\n      this.$set(this.productInfo, 'category_guid', this.selectedCategory.guid);\n      this.$set(this.productInfo, this.variantsKeyName, variants);\n      this.$set(this.productInfo, 'register_type', this.selectedCategory.register_type);\n      this.$set(this.productInfo, 'variant_value', this.product.skus.map(sku => ({ ...sku, value: sku || '' })));\n    },\n\n    product: {\n      handler: function (val) {\n        if (!val || !this.hasCreatedProduct) return;\n\n        this.productInfo = {\n          category_guid: val.category.guid,\n          name: val.name,\n          description: val.description,\n          is_published: val.is_published,\n          register_type: val.register_type,\n          price_to_match: val.price_to_match,\n          variant_value: val.skus.map(sku => ({ ...sku, value: sku || '' })),\n          ordering: val.ordering,\n        };\n      },\n      immediate: true,\n    },\n\n    'productInfo.price_to_match': function (newVal) {\n      if (!newVal) return;\n\n      this.productInfo[this.variantsKeyName][0].old_price = '0.01';\n      this.productInfo[this.variantsKeyName][0].new_price = '0.01';\n    }\n  },\n\n  validations() {\n\n    const variantValidations = {\n      $each: {\n        code: {\n          requiredIf: requiredIf(['is_skus', 'status']),\n        },\n        new_price: {\n          required,\n          currencyMinimum: currencyHigherThan({\n            value: '0,00',\n            ignoreIf: (value: any, parentVm: any) => !parentVm.status,\n          }),\n        },\n        old_price: {\n          higherThan: currencyHigherThan({\n            type: 'prop',\n            value: 'new_price',\n            ignoreIf: ignoreOldPriceIf\n          }),\n          currencyMinimum: currencyHigherThan({\n            value: '0,00',\n            ignoreIf: ignoreOldPriceIf\n          }),\n        },\n      }\n    }\n\n    if (this.isService) {\n      delete variantValidations.$each.old_price.higherThan;\n\n      variantValidations.$each.new_price['higherThanService'] = currencyHigherThan({\n        type: 'prop',\n        value: 'old_price',\n        ignoreIf: ignorePricesIfPriceToMatch,\n        allowEquals: true,\n      });\n    }\n\n    let baseValidations = {\n      productInfo: {\n        name: {\n          required,\n        },\n        description: {\n          required,\n        },\n      }\n    }\n\n    baseValidations['productInfo'][this.variantsKeyName] = variantValidations;\n\n    return baseValidations;\n  },\n\n  created() {\n    this.getCupon();\n  },\n\n  methods: {\n\n    async getCupon(){\n      try {\n        if (this.$route.params.cuponGuid) {\n          const cuponGuid = this.$route.params.cuponGuid\n          const response = await this.cuponService.getCupon(cuponGuid)\n          this.cupon = response.data\n          const {minimum_purchase, seller_coupons} = response.data\n          console.log(\"editar responsse....\", response.data)\n          this.minimumValue = minimum_purchase\n          this.cuponsNumber = seller_coupons[0].quantity\n        }else{\n          this.flagCreate = true\n        }\n       \n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    setCuponType(selected: any){\n      console.log(\"selected\", selected.target.value)\n      this.selectedCuponType = selected.target.value;\n    },\n\n    setExpirationDate(selected: any){\n      console.log(\"selected\", selected.target.value)\n      this.selectedExpirationDate = selected.target.value;\n    },\n\n    getNewPriceHelpText(inPromotion) {\n      if (this.isService) {\n        return 'Até';\n      }\n\n      return inPromotion ? 'Valor promocional' : 'Valor unitário';\n    },\n\n    getOldPriceHelpText() {\n      if (this.isService) {\n        return 'De';\n      }\n\n      return 'Valor antigo';\n    },\n\n    validateIsSelectable(option) {\n      return !option.variant_status;\n    },\n\n    validationMessage: validationMessage(errorMessages, {}),\n\n    setSKUPromotion(index, value) {\n      this.$set(this.productInfo[this.variantsKeyName], index, {\n        ...(this.productInfo[this.variantsKeyName][index] || {}),\n        in_promotion: value\n      });\n    },\n\n    toggleIsSku(index, value) {\n      this.$set(this.productInfo[this.variantsKeyName], index, {\n        ...(this.productInfo[this.variantsKeyName][index] || {}),\n        is_skus: value\n      });\n    },\n\n    async validateInfo() {\n      if (!this.flagCreate) {\n        if (this.validateUpdateCoupon()) {\n          const editedCoupon = {\n            coupon_data: {\n              quantity: Number(this.cuponsNumber),\n              minimum_purchase: this.minimumValue,\n            },\n          }        \n          this.$emit('submit-valid', editedCoupon, this.cupon?.guid);\n        }       \n      }else{\n        if (this.validateCreateCoupon()) {\n          let now = Date();\n          let selected = this.selectedExpirationDate.split(\" \");\n          const expiration_date = this.addDays(now, Number(selected[0]))\n\n          let cuponType = \"shipping\"\n          if (this.selectedCuponType == \"VALOR FIXO\") {\n            cuponType = \"fixed\"\n          }\n\n          const cupon = {\n            type: cuponType,\n            discount: Number(this.cuponDiscount),\n            minimum_purchase: Number(this.minimumValue),\n            quantity: Number(this.cuponsNumber),\n            expiration_date: expiration_date,\n            created_by: \"seller\",\n          }\n\n          this.$emit('submit-valid', cupon);\n        }\n        \n      }\n    },\n\n    validateUpdateCoupon(){\n      let toReturn = true\n      if (!this.cuponsNumber) {\n        this.toastMessage(\n            \"error\",\n            \"Deve preencher o número de cupons\"\n        );\n        toReturn = false\n      }\n      if (!this.minimumValue) {\n        this.toastMessage(\n            \"error\",\n            \"Deve preencher o valor mínimo de compra\"\n        );\n        toReturn = false\n      }\n      return toReturn\n    },\n\n    validateCreateCoupon(){\n      let toReturn = true\n      if (!this.cuponsNumber) {\n        this.toastMessage(\n            \"error\",\n            \"Deve preencher o número de cupons\"\n        );\n        toReturn = false\n      }\n      if (!this.minimumValue) {\n        this.toastMessage(\n            \"error\",\n            \"Deve preencher o valor mínimo de compra\"\n        );\n        toReturn = false\n      }\n      if (!this.selectedCuponType) {\n        this.toastMessage(\n            \"error\",\n            \"Deve selecionar o tipo de cupom\"\n        );\n      }\n      if (this.selectedCuponType != 'FRETE GRATIS' && !this.cuponDiscount) {\n        this.toastMessage(\n            \"error\",\n            \"Deve preencher o desconto de cupon\"\n        );\n      }\n      if (!this.selectedExpirationDate) {\n        this.toastMessage(\n            \"error\",\n            \"Deve selecionar a data de expiração\"\n        );\n      }\n\n      return toReturn\n    },\n\n    toastMessage(type: SweetAlertType, title: string) {\n      VueSimpleAlert.fire({\n        type,\n        title,\n        toast: true,\n        position: \"top-end\",\n        showConfirmButton: false,\n        timer: 3000,\n        onOpen: (toast) => {\n          toast.addEventListener(\"mouseenter\", Swal.stopTimer),\n            toast.addEventListener(\"mouseleave\", Swal.resumeTimer);\n        },\n      });\n    },\n\n    addDays(date, days) {\n      var result = new Date(date);\n      result.setDate(result.getDate() + days);\n      return result;\n    },\n  }\n});\n</script>\n\n<style scoped lang=\"scss\">\n::v-deep {\n  .custom-control-label {\n    color: #535556E5;\n    font-size: 1rem;\n    font-weight: 700;\n  }\n}\n\n.product-create-info {\n  &__outline-btn {\n    border: 1px solid $primary;\n    border-radius: 5px;\n\n    background-color: transparent;\n\n    color: $primary;\n    font-size: .625rem;\n\n    padding: 5px;\n    margin-top: calc(1rem + 8px);\n\n    height: 34px;\n\n    &--clear {\n      border-radius: 50%;\n\n      $clear-color: #fff;\n\n      color: $clear-color;\n      border-color: transparent;\n\n      width: 28px;\n      height: 28px;\n      margin-top: calc(1rem + 13px);\n\n      background-color: $primary;\n\n      span {\n        line-height: 1;\n        font-size: 18px;\n      }\n\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n\n    \n  }\n\n  select {\n    padding: 10px 8px;\n  }\n\n  label{\n    margin-top: 3%;\n  }\n\n  &__dash {\n    margin-top: calc(1rem + 8px + 18px);\n    background: linear-gradient(90deg, rgba(0, 0, 0, 0.02) 0%, rgba(0, 0, 0, 0.2) 51.56%, rgba(0, 0, 0, 0.02) 100%);\n    height: 1px;\n    width: 20px;\n  }\n\n  &__sku {\n    &--variant-title {\n      span {\n        color: #535556E5;\n        font-weight: 500;\n      }\n    }\n  }\n}\n#cuponDiscount, #minimumValue{\n  width: 20%;\n  border-radius: 5px;\n}\n#cuponsNumber{\n  width: 100%;\n  border-radius: 5px;\n  border-color: gray;\n}\n</style>"]}]}