{"remainingRequest":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/GitHub/admin-frontend/src/views/Statistics/Statistics.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/GitHub/admin-frontend/src/views/Statistics/Statistics.vue","mtime":1673321154842},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/thread-loader/dist/cjs.js","mtime":1673370377290},{"path":"/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwoKaW1wb3J0IFN0YXRpc3RpY3NDYXJvdXNlbHMgZnJvbSAiQC9jb21wb25lbnRzL3N0YXRpc3RpY3MvU3RhdGlzdGljc0Nhcm91c2Vscy52dWUiOwppbXBvcnQgU3RhdGlzdGljc0RhdGEgZnJvbSAiQC9jb21wb25lbnRzL3N0YXRpc3RpY3MvU3RhdGlzdGljc0RhdGEudnVlIjsKaW1wb3J0IFN0YXRpc3RpY3NUaW1lRmlsdGVycyBmcm9tICJAL2NvbXBvbmVudHMvc3RhdGlzdGljcy9TdGF0aXN0aWNzVGltZUZpbHRlcnMudnVlIjsKaW1wb3J0IFN0YXRpc3RpY3NEYWlseSBmcm9tICJAL2NvbXBvbmVudHMvc3RhdGlzdGljcy9TdGF0aXN0aWNzRGFpbHkudnVlIgppbXBvcnQge0lTdGF0aXN0aWNzRGF0YX0gZnJvbSAiQC9tb2RlbHMvc3RhdGlzdGljcyI7CgppbXBvcnQge0JTa2VsZXRvbkltZywgQlNrZWxldG9ufSBmcm9tICJib290c3RyYXAtdnVlIjsKCmltcG9ydCBzdGF0aXN0aWNzU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL3N0YXRpc3RpY3Muc2VydmljZSI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKCmludGVyZmFjZSBJU3RhdGlzdGljc1ZpZXdEYXRhIHsKICB1c2VyOiBhbnk7CiAgc2VsZWN0ZWRGaWx0ZXI6IHN0cmluZzsKICBzdGF0aXN0aWNzRGF0YTogSVN0YXRpc3RpY3NEYXRhOwoKICBzdGF0aXN0aWNzU2VydmljZTogc3RhdGlzdGljc1NlcnZpY2UsCiAgc3RhdGlzdGljc0RhdGFMb2FkaW5nOiBib29sZWFuLAp9CgpleHBvcnQgZGVmYXVsdCBWdWUuZXh0ZW5kKHsKICBuYW1lOiAic3RhdGlzdGljcyIsCiAgY29tcG9uZW50czogewogICAgU3RhdGlzdGljc0RhaWx5LAogICAgU3RhdGlzdGljc1RpbWVGaWx0ZXJzLAogICAgU3RhdGlzdGljc0RhdGEsCiAgICBTdGF0aXN0aWNzQ2Fyb3VzZWxzLAogICAgQlNrZWxldG9uSW1nLAogICAgQlNrZWxldG9uCiAgfSwKCiAgZGF0YSgpOiBJU3RhdGlzdGljc1ZpZXdEYXRhIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IG51bGwsCiAgICAgIHNlbGVjdGVkRmlsdGVyOiAnYWxsJywKICAgICAgc3RhdGlzdGljc0RhdGE6IHt9IGFzIElTdGF0aXN0aWNzRGF0YSwKCiAgICAgIHN0YXRpc3RpY3NTZXJ2aWNlOiBuZXcgc3RhdGlzdGljc1NlcnZpY2UoKSwKICAgICAgc3RhdGlzdGljc0RhdGFMb2FkaW5nOiBmYWxzZSwKICAgIH0KICB9LAoKICB3YXRjaDogewogICAgc2VsZWN0ZWRGaWx0ZXIobmV3VmFsdWUpIHsKICAgICAgdGhpcy5nZXRTdGF0aXN0aWNzRGF0YSgpOwogICAgfSwKICB9LAoKICBtb3VudGVkKCkgewogICAgY29uc3Qgc3RvcmFnZVVzZXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbG9nZ2VkVXNlcicpOwogICAgdGhpcy51c2VyID0gc3RvcmFnZVVzZXIgPyBKU09OLnBhcnNlKHN0b3JhZ2VVc2VyKSA6IG51bGw7CgogICAgdGhpcy5nZXRTdGF0aXN0aWNzRGF0YSgpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGFzeW5jIGdldFN0YXRpc3RpY3NEYXRhKCkgewogICAgICB0aGlzLnN0YXRpc3RpY3NEYXRhTG9hZGluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcGVydGluaG8gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwZXJ0aW5obycpIHx8ICcnKTsKICAgICAgICBpZiAoIXBlcnRpbmhvKSByZXR1cm47CgogICAgICAgIGxldCBmaWx0ZXI6IHsKICAgICAgICAgIHN0YXJ0RGF0ZTogc3RyaW5nOwogICAgICAgICAgZW5kRGF0ZTogc3RyaW5nOwogICAgICAgIH0gfCBudWxsID0gbnVsbDsKCiAgICAgICAgY29uc3QgdG9kYXkgPSBtb21lbnQobmV3IERhdGUoKSkubG9jYWxlKCdwdC1icicpOwogICAgICAgIGNvbnN0IGdldEZvcm1hdHRlZERhdGUgPSAoZGF0ZTogbW9tZW50Lk1vbWVudCwgZW5kID0gZmFsc2UpID0+IGRhdGUuZm9ybWF0KGBZWVlZLU1NLUREICR7ZW5kID8gJzIzOjU5JyA6ICcwMDowMCd9YCk7CgogICAgICAgIHN3aXRjaCAodGhpcy5zZWxlY3RlZEZpbHRlcikgewogICAgICAgICAgY2FzZSAiYWxsIjoKICAgICAgICAgICAgZmlsdGVyID0gbnVsbDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlICIzMGQiOgogICAgICAgICAgICBmaWx0ZXIgPSB7CiAgICAgICAgICAgICAgc3RhcnREYXRlOiBnZXRGb3JtYXR0ZWREYXRlKG1vbWVudCh0b2RheSkuc3VidHJhY3QoMzAsICdkYXlzJykpLAogICAgICAgICAgICAgIGVuZERhdGU6IGdldEZvcm1hdHRlZERhdGUodG9kYXksIHRydWUpLAogICAgICAgICAgICB9OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgIjdkIjoKICAgICAgICAgICAgZmlsdGVyID0gewogICAgICAgICAgICAgIHN0YXJ0RGF0ZTogZ2V0Rm9ybWF0dGVkRGF0ZShtb21lbnQodG9kYXkpLnN1YnRyYWN0KDcsICdkYXlzJykpLAogICAgICAgICAgICAgIGVuZERhdGU6IGdldEZvcm1hdHRlZERhdGUodG9kYXksIHRydWUpLAogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAidG9kYXkiOgogICAgICAgICAgICBmaWx0ZXIgPSB7CiAgICAgICAgICAgICAgc3RhcnREYXRlOiBnZXRGb3JtYXR0ZWREYXRlKHRvZGF5KSwKICAgICAgICAgICAgICBlbmREYXRlOiBnZXRGb3JtYXR0ZWREYXRlKHRvZGF5LCB0cnVlKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgICBjb25zdCB7ZGF0YX0gPSBhd2FpdCB0aGlzLnN0YXRpc3RpY3NTZXJ2aWNlLmdldFN0YXRpc3RpY3NEYXRhKHBlcnRpbmhvLmd1aWQsIGZpbHRlcik7CiAgICAgICAgdGhpcy5zdGF0aXN0aWNzRGF0YSA9IGRhdGE7CiAgICAgIH0gY2F0Y2ggKGUpIHsKCiAgICAgIH0KICAgICAgdGhpcy5zdGF0aXN0aWNzRGF0YUxvYWRpbmcgPSBmYWxzZTsKICAgIH0KICB9Cn0pOwo="},{"version":3,"sources":["Statistics.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0FA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Statistics.vue","sourceRoot":"src/views/Statistics","sourcesContent":["<template>\n  <section>\n    <Header></Header>\n\n    <template v-if=\"statisticsDataLoading\">\n      <div class=\"container statistics-skeleton\">\n        <b-skeleton-img no-aspect height=\"140px\"></b-skeleton-img>\n\n        <div class=\"d-flex mt-3\" style=\"max-width: 560px;\">\n          <b-skeleton class=\"flex-grow-1 mx-1\"></b-skeleton>\n          <b-skeleton class=\"flex-grow-1 mx-1\"></b-skeleton>\n          <b-skeleton class=\"flex-grow-1 mx-1\"></b-skeleton>\n          <b-skeleton class=\"flex-grow-1 mx-1\"></b-skeleton>\n        </div>\n\n        <div class=\"my-3\">\n          <b-skeleton-img no-aspect height=\"73px\" class=\"mb-3\"></b-skeleton-img>\n        </div>\n\n        <div class=\"d-flex my-2\">\n          <div class=\"mr-2 statistics-skeleton__data-stat\">\n            <b-skeleton-img no-aspect height=\"73px\"></b-skeleton-img>\n          </div>\n          <div class=\"ml-2 statistics-skeleton__data-stat\">\n            <b-skeleton-img no-aspect height=\"73px\"></b-skeleton-img>\n          </div>\n        </div>\n\n        <div class=\"d-flex my-2\">\n          <div class=\"mr-2 statistics-skeleton__data-stat\">\n            <b-skeleton-img no-aspect height=\"73px\"></b-skeleton-img>\n          </div>\n          <div class=\"ml-2 statistics-skeleton__data-stat\">\n            <b-skeleton-img no-aspect height=\"73px\"></b-skeleton-img>\n          </div>\n        </div>\n\n        <div class=\"d-flex my-2\">\n          <div class=\"mr-2 statistics-skeleton__data-stat\">\n            <b-skeleton-img no-aspect height=\"73px\"></b-skeleton-img>\n          </div>\n          <div class=\"ml-2 statistics-skeleton__data-stat\">\n            <b-skeleton-img no-aspect height=\"73px\"></b-skeleton-img>\n          </div>\n        </div>\n\n        <div class=\"statistics-skeleton__carousel mt-3\">\n          <h2>Produtos mais vendidos:</h2>\n          <b-skeleton-img no-aspect height=\"98px\"></b-skeleton-img>\n        </div>\n\n        <div class=\"statistics-skeleton__carousel mt-3 mb-4\">\n          <h2>Ãšltimos pedidos:</h2>\n          <b-skeleton-img no-aspect height=\"98px\"></b-skeleton-img>\n        </div>\n      </div>\n    </template>\n\n    <template v-if=\"!statisticsDataLoading && statisticsData\">\n      <div class=\"container\">\n        <statistics-daily\n          v-if=\"statisticsData.daily_data\"\n          :daily-data=\"statisticsData.daily_data\"\n        />\n\n        <statistics-time-filters\n          class=\"my-3 mx-auto\"\n          @filter-change=\"selectedFilter = $event\"\n          :selected-filter=\"selectedFilter\"\n        />\n\n        <statistics-data\n          v-if=\"statisticsData.filtered_data\"\n          :data=\"statisticsData.filtered_data\"\n        />\n\n        <statistics-carousels\n          v-if=\"statisticsData.filtered_data\"\n          class=\"mt-4\"\n          :products=\"statisticsData.products_most_sell || []\"\n          :orders=\"statisticsData.filtered_data.last_order || []\"\n        />\n      </div>\n    </template>\n\n    <Footer></Footer>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue';\n\nimport StatisticsCarousels from \"@/components/statistics/StatisticsCarousels.vue\";\nimport StatisticsData from \"@/components/statistics/StatisticsData.vue\";\nimport StatisticsTimeFilters from \"@/components/statistics/StatisticsTimeFilters.vue\";\nimport StatisticsDaily from \"@/components/statistics/StatisticsDaily.vue\"\nimport {IStatisticsData} from \"@/models/statistics\";\n\nimport {BSkeletonImg, BSkeleton} from \"bootstrap-vue\";\n\nimport statisticsService from \"@/services/statistics.service\";\nimport moment from \"moment\";\n\ninterface IStatisticsViewData {\n  user: any;\n  selectedFilter: string;\n  statisticsData: IStatisticsData;\n\n  statisticsService: statisticsService,\n  statisticsDataLoading: boolean,\n}\n\nexport default Vue.extend({\n  name: \"statistics\",\n  components: {\n    StatisticsDaily,\n    StatisticsTimeFilters,\n    StatisticsData,\n    StatisticsCarousels,\n    BSkeletonImg,\n    BSkeleton\n  },\n\n  data(): IStatisticsViewData {\n    return {\n      user: null,\n      selectedFilter: 'all',\n      statisticsData: {} as IStatisticsData,\n\n      statisticsService: new statisticsService(),\n      statisticsDataLoading: false,\n    }\n  },\n\n  watch: {\n    selectedFilter(newValue) {\n      this.getStatisticsData();\n    },\n  },\n\n  mounted() {\n    const storageUser = localStorage.getItem('loggedUser');\n    this.user = storageUser ? JSON.parse(storageUser) : null;\n\n    this.getStatisticsData();\n  },\n\n  methods: {\n    async getStatisticsData() {\n      this.statisticsDataLoading = true;\n      try {\n        const pertinho = JSON.parse(localStorage.getItem('pertinho') || '');\n        if (!pertinho) return;\n\n        let filter: {\n          startDate: string;\n          endDate: string;\n        } | null = null;\n\n        const today = moment(new Date()).locale('pt-br');\n        const getFormattedDate = (date: moment.Moment, end = false) => date.format(`YYYY-MM-DD ${end ? '23:59' : '00:00'}`);\n\n        switch (this.selectedFilter) {\n          case \"all\":\n            filter = null;\n            break;\n          case \"30d\":\n            filter = {\n              startDate: getFormattedDate(moment(today).subtract(30, 'days')),\n              endDate: getFormattedDate(today, true),\n            };\n            break;\n          case \"7d\":\n            filter = {\n              startDate: getFormattedDate(moment(today).subtract(7, 'days')),\n              endDate: getFormattedDate(today, true),\n            }\n            break;\n          case \"today\":\n            filter = {\n              startDate: getFormattedDate(today),\n              endDate: getFormattedDate(today, true)\n            }\n            break;\n          default:\n            break;\n        }\n\n        const {data} = await this.statisticsService.getStatisticsData(pertinho.guid, filter);\n        this.statisticsData = data;\n      } catch (e) {\n\n      }\n      this.statisticsDataLoading = false;\n    }\n  }\n});\n</script>\n\n<style scoped lang=\"scss\">\nh1 {\n  font-size: 1.75rem;\n  font-weight: bold;\n}\n\nh2 {\n  font-size: 1.5rem;\n  font-weight: bold;\n}\n\n.statistics-skeleton {\n  &__data-stat {\n    flex: 50%;\n  }\n}\n</style>"]}]}