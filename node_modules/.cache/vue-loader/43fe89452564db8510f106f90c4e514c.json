{"remainingRequest":"/home/aline/Precifique-Asta-WEB/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/Precifique-Asta-WEB/src/components/login-precifique/code-precifique-form/CodePrecifiqueForm.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/Precifique-Asta-WEB/src/components/login-precifique/code-precifique-form/CodePrecifiqueForm.vue","mtime":1700502168005},{"path":"/home/aline/Precifique-Asta-WEB/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/Precifique-Asta-WEB/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/Precifique-Asta-WEB/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/Precifique-Asta-WEB/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/Precifique-Asta-WEB/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgeyBDb21wb25lbnQsIFByb3AsIFZ1ZSB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOwppbXBvcnQgUHJlY2lmaXF1ZVNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9wcmVjaWZpcXVlU2VydmljZSI7CgpAQ29tcG9uZW50KHt9KQpleHBvcnQgY2xhc3MgQ29kZVByZWNpZmlxdWVGb3JtIGV4dGVuZHMgVnVlIHsKCiAgcHVibGljIGVtYWlsQnV0dG9uOiBib29sZWFuID0gZmFsc2U7CiAgcHVibGljIGVtYWlsOiBzdHJpbmcgfCBudWxsICA9ICcnOwogIHB1YmxpYyB0b2tlbjogc3RyaW5nICA9ICcnOwogIHB1YmxpYyBrZXk6IHN0cmluZyA9ICcnOwogIHB1YmxpYyBpc1ZhbGlkQ29kZTogYm9vbGVhbiA9IHRydWU7CiAgcHVibGljIGJ1dHRvbkVudGVyOiBib29sZWFuID0gZmFsc2U7CgogIHB1YmxpYyBuZXh0UGFnZTogYm9vbGVhbiA9IGZhbHNlOwoKCgoKCgoKICB2YWxpZGF0ZUNvZGUoKSB7CgogICAgaWYgKCF0aGlzLmlzVmFsaWRDb2RlKSB7CiAgICB0aGlzLmlzVmFsaWRDb2RlID0gdHJ1ZQogIH0KICAgIGNvbnN0IGNvZGVSZWdleCA9IC9eXGR7NH0kLzsKICAgIHRoaXMuaXNWYWxpZENvZGUgPSBjb2RlUmVnZXgudGVzdCh0aGlzLnRva2VuKTsKICAgIGlmICh0aGlzLmlzVmFsaWRDb2RlKSB7CiAgICAgIHRoaXMuYnV0dG9uRW50ZXIgPSB0cnVlOwogICAgfQogICAgZWxzZSB7CiAgICAgIHRoaXMuYnV0dG9uRW50ZXIgPSBmYWxzZTsKICAgIH0KICAgIAogIH0KCiAgcHVibGljIGFzeW5jIHN1Ym1pdEZvcm0oKSB7CiAgCiAgICBpZiAodGhpcy5pc1ZhbGlkQ29kZSkgewoKICAgICAgdGhpcy5lbWFpbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlbWFpbCcpOyAKICAgICAgY29uc3QgcHJlY2lmaXF1ZVNlcnZpY2UgPSBuZXcgUHJlY2lmaXF1ZVNlcnZpY2UoKTsKICAgICAgdGhpcy5idXR0b25FbnRlciA9IGZhbHNlOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gIGF3YWl0IHByZWNpZmlxdWVTZXJ2aWNlLnNlbmRUb2tlbih7CiAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgdG9rZW46IHRoaXMudG9rZW4KICAgIH0pCgogICAgdGhpcy5rZXkgPSByZXNwb25zZS5kYXRhLnRva2VuCiAgICB0aGlzLmJ1dHRvbkVudGVyID0gZmFsc2U7CiAgICB0aGlzLm5leHRQYWdlID0gdHJ1ZTsKICAgIHRoaXMuJGVtaXQoInRvU3RlcCIsICIzIikKCiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgna2V5JywgdGhpcy5rZXkpOwogICAgIAogICAgICAgIHRoaXMuJGFsZXJ0KCdDw7NkaWdvIGVudmlhZG8gY29tIHN1Y2Vzc28nLCAnJywgJ3N1Y2Nlc3MnLAogICAgICAgICAgewogICAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgICAgcG9zaXRpb246ICd0b3AtZW5kJywKICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgIH0pCiAgICAgICAgICA7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICAgIHRoaXMuJGFsZXJ0KCdDw7NkaWdvIGluY29ycmV0bycsICcnLCAnZXJyb3InLCB7CiAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgIHBvc2l0aW9uOiAndG9wLWVuZCcsCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICB9KTsKICAgICAgICAKICAgICAgfQogICAgfQogICAgdGhpcy5idXR0b25FbnRlciA9IHRydWU7CiAgfQp9CgoKZXhwb3J0IHsgQ29kZVByZWNpZmlxdWVGb3JtIGFzIGRlZmF1bHQgfTsKCgo="},{"version":3,"sources":["CodePrecifiqueForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AAQA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA","file":"CodePrecifiqueForm.vue","sourceRoot":"src/components/login-precifique/code-precifique-form","sourcesContent":["\n<template> \n   <section id=\"code-precifique-form\">\n    <section class=\"col-12 col-xl-10 mx-auto my-4\">\n\n<form @submit.prevent=\"submitForm\">\n  <div>\n    <label class=\"label-precifique\">Insira o código</label>\n    <input class=\"form-precifique\"  maxlength=\"4\" inputmode=\"numeric\" pattern=\"[0-9]*\" v-bind:class=\"{\n  'form-precifique-error': !isValidCode,\n  'form-precifique-success': isValidCode && buttonEnter\n}\"\n  id=\"code\" v-model=\"token\" @input=\"validateCode\">\n    <span v-show=\"!isValidCode\" class=\"error\">Formato de código incorreto</span>\n    <span v-show=\"isValidCode && buttonEnter\" class=\"success\">Formato de código correto</span>\n  </div>\n</form>\n\n<div class=\"d-flex align-items-center justify-content-center\">\n  <button :disabled=\"!buttonEnter\" class=\"button-enter-code-precifique col-11 col-xl-5\" @click=\"submitForm()\">Enviar</button>\n</div>\n\n\n</section>\n<login-precifique-password v-if=\"nextPage\"/>\n</section>\n\n\n</template>\n\n<script lang=\"ts\">\n\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport PrecifiqueService from \"@/services/precifiqueService\";\n\n@Component({})\nexport class CodePrecifiqueForm extends Vue {\n\n  public emailButton: boolean = false;\n  public email: string | null  = '';\n  public token: string  = '';\n  public key: string = '';\n  public isValidCode: boolean = true;\n  public buttonEnter: boolean = false;\n\n  public nextPage: boolean = false;\n\n\n\n\n\n\n\n  validateCode() {\n\n    if (!this.isValidCode) {\n    this.isValidCode = true\n  }\n    const codeRegex = /^\\d{4}$/;\n    this.isValidCode = codeRegex.test(this.token);\n    if (this.isValidCode) {\n      this.buttonEnter = true;\n    }\n    else {\n      this.buttonEnter = false;\n    }\n    \n  }\n\n  public async submitForm() {\n  \n    if (this.isValidCode) {\n\n      this.email = localStorage.getItem('email'); \n      const precifiqueService = new PrecifiqueService();\n      this.buttonEnter = false;\n      try {\n        const response =  await precifiqueService.sendToken({\n        email: this.email,\n        token: this.token\n    })\n\n    this.key = response.data.token\n    this.buttonEnter = false;\n    this.nextPage = true;\n    this.$emit(\"toStep\", \"3\")\n\n    localStorage.setItem('key', this.key);\n     \n        this.$alert('Código enviado com sucesso', '', 'success',\n          {\n            toast: true,\n            position: 'top-end',\n            showConfirmButton: false,\n            timer: 3000,\n          })\n          ;\n      } catch (e) {\n        console.error(e);\n        this.$alert('Código incorreto', '', 'error', {\n          toast: true,\n          position: 'top-end',\n          showConfirmButton: false,\n          timer: 3000,\n        });\n        \n      }\n    }\n    this.buttonEnter = true;\n  }\n}\n\n\nexport { CodePrecifiqueForm as default };\n\n\n</script>\n<style lang=\"scss\">\n\n.form-precifique {\n    display: block;\n    width: 100%;\n    height: calc(1.5em + 0.75rem + 2px);\n    padding: 0.375rem 0.75rem;\n    font-size: 1rem;\n    font-weight: 400;\n    line-height: 1.5;\n    color: #495057;\n    background-color: #fff;\n    background-clip: padding-box;\n    border: 1px solid #ced4da;\n    border-radius: 0.25rem;\n    transition: border-color 0.15s ease-in-out, box-shadow 0.15s;\n    \n  }\n  .form-precifique-error {\n    display: block;\n    width: 100%;\n    height: calc(1.5em + 0.75rem + 2px);\n    padding: 0.375rem 0.75rem;\n    font-size: 1rem;\n    font-weight: 400;\n    line-height: 1.5;\n    color: #495057;\n    background-color: #fff;\n    background-clip: padding-box;\n    border-color: $error !important;\n    border-radius: 0.25rem;\n    transition: border-color 0.15s ease-in-out, box-shadow 0.15s;\n\n\n\n    \n  }\n\n  .form-precifique-success {\n    display: block;\n    width: 100%;\n    height: calc(1.5em + 0.75rem + 2px);\n    padding: 0.375rem 0.75rem;\n    font-size: 1rem;\n    font-weight: 400;\n    line-height: 1.5;\n    color: #495057;\n    background-color: #fff;\n    background-clip: padding-box;\n    border-color: $success !important;\n    border-radius: 0.25rem;\n    transition: border-color 0.15s ease-in-out, box-shadow 0.15s;\n\n\n\n    \n  }\n\n\n  .label-precifique{\n    font-size: 14px;\n  }\n  \n  .error {\n    color: $error;\n    font-size: 12px;\n\n\n  }\n\n  .success {\n    color: $success;\n    font-size: 12px;\n\n\n  }\n  \n  input:focus {\n    border-color: $primary;\n    outline: none;\n  }\n</style>"]}]}