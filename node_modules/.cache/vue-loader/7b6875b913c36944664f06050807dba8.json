{"remainingRequest":"/home/aline/AstaPrecifique/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/AstaPrecifique/src/components/register-seller/steps-form/step-two/StepTwo.vue?vue&type=style&index=0&id=b0359a8a&lang=scss&scoped=true&","dependencies":[{"path":"/home/aline/AstaPrecifique/src/components/register-seller/steps-form/step-two/StepTwo.vue","mtime":1673321154838},{"path":"/home/aline/AstaPrecifique/node_modules/css-loader/dist/cjs.js","mtime":1673370389401},{"path":"/home/aline/AstaPrecifique/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1673370389594},{"path":"/home/aline/AstaPrecifique/node_modules/postcss-loader/src/index.js","mtime":1673370389569},{"path":"/home/aline/AstaPrecifique/node_modules/sass-loader/dist/cjs.js","mtime":1673370393532},{"path":"/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/AstaPrecifique/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5hZGRyZXNzLWNvbnRlbnQgewogIGJhY2tncm91bmQtY29sb3I6ICNmZmZhZmE7CiAgYm9yZGVyLXJhZGl1czogNnB4Owp9CgouYnRuLWxvY2F0aW9uLWRpdiB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogODJweDsKICB6LWluZGV4OiA5OTsKfQoKLmJ0bi1sb2NhdGlvbi1zZWFyY2ggewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBoZWlnaHQ6IDU1cHg7CiAgcGFkZGluZzogNXB4OwogIGNvbG9yOiAjNzE3MTcxOwogIGJhY2tncm91bmQ6ICNmZmZmZmY7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKICB0cmFuc2l0aW9uOiBhbGwgMXMgZWFzZS1pbi1vdXQ7CiAgb3BhY2l0eTogMTsKICB2aXNpYmlsaXR5OiB2aXNpYmxlOwogIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZDlkOWQ5OwogIGJveC1zaGFkb3c6IDAgMnB4IDZweCByZ2JhKDAsIDAsIDAsIDAuMyk7CiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDZweDsKICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA2cHg7CiAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDZweDsKICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiA2cHg7CiAgY3Vyc29yOiBwb2ludGVyOwoKICAmOmhvdmVyIHsKICAgIGNvbG9yOiAjM2UzZTNlOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYTsKICB9CgogICY6Zm9jdXMgewogICAgb3V0bGluZTogMDsKICAgIGJveC1zaGFkb3c6IDBweCA0cHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMDUpLAogICAgICAwcHggNHB4IDE2cHggcmdiYSgwLCAwLCAwLCAwLjA4KTsKICB9Cn0KCi5idG4tbG9jYXRpb24tc2VhcmNoLmhpZGUgewogIG9wYWNpdHk6IDA7CiAgcG9pbnRlci1ldmVudHM6IG5vbmU7Cn0KCi5idG4tbG9jYXRpb24tc2VhcmNoLnNob3cgewogIG9wYWNpdHk6IDE7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAwLjVzIGxpbmVhcjsKfQo="},{"version":3,"sources":["StepTwo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuVA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"StepTwo.vue","sourceRoot":"src/components/register-seller/steps-form/step-two","sourcesContent":["<template>\n  <section id=\"step-two\">\n    <section class=\"position-relative\">\n      <input-form v-if=\"inputAddress\" :propArrayInputs=\"inputAddress\" v-on:validateInputs=\"validateInputs\"\n        v-on:blurInputs=\"searchBlurAutoComplete\" v-on:focusInput=\"searchFocusAutoComplete\" />\n\n      <div class=\"btn-location-div\" v-on:mouseover=\"mouseover = true\" v-on:mouseleave=\"mouseover = false\">\n        <button class=\"btn btn-location-search d-flex flex-column\" aria-label=\"Usar minha localização\"\n          :class=\"{ show: checkAddressCurrent, hide: !checkAddressCurrent }\" @click=\"getCurrentLocation()\"\n          v-if=\"openLocation\" :style=\"{ width: widthSearch + 'px' }\">\n          <small class=\"text-danger\">Não achou seu endereço?</small>\n          <div class=\"d-flex align-items-center\">\n            <img class=\"mr-2\" src=\"./../../../../assets/images/gps.svg\" alt=\"location\" />\n            <small class=\"font-weight-bold\">Usar localização atual</small>\n          </div>\n        </button>\n      </div>\n    </section>\n\n    <input-form v-if=\"arrayInputs\" class=\"address-content card-advice mt-4\" :propArrayInputs=\"arrayInputs\"\n      v-on:validateInputs=\"validateInputs\" />\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport { Address } from \"@/models/address\";\nimport { InputForms } from \"@/models/inputForms\";\n\ndeclare var google: any;\n@Component({})\nexport class StepTwo extends Vue {\n  @Prop() propArrayInputs!: InputForms[];\n\n  public arrayInputs: InputForms[] = this.propArrayInputs;\n  public zipCodeInput;\n  public address: Address = {};\n  public step = \"stepTwo\";\n\n  public openLocation: boolean = false;\n  public mouseover: boolean = false;\n  public checkAddressCurrent: boolean = true;\n\n  public widthSearch: number = 0;\n\n  public inputAddress = [\n    {\n      tag: \"input\",\n      label: \"Insira o endereço do seu negócio\",\n      type: \"text\",\n      id: \"addressInput\",\n      classContainer: \"form-group my-2 col-12\",\n      classInput: \"form-control\",\n      ariaDescribedby: \"addressHelp\",\n      placeholder: \"Buscar endereço e número\",\n      help: \"\",\n      required: true,\n      model: \"\",\n      classHelp: \"form-text text-muted\",\n      hasToastHelp: true,\n      toastHelp: ` O endereço é essencial para que os consumidores encontrem a localização do negócio. Caso você não encontre seu endereço, tente inserir um ponto de referencia próximo do endereço e ajuste o restante das informações nos campos: Logradouro, número e complemento.`,\n      showInput: true,\n    },\n  ];\n\n  mounted() {\n    if (document.getElementById(\"addressInput\")) {\n      this.autocomplete();\n    }\n\n    if (this.checkAddressCurrent) {\n      const addressInput = document.getElementById(\n        \"addressInput\"\n      ) as HTMLInputElement;\n      this.widthSearch = addressInput.clientWidth;\n    }\n\n    this.setNextDisabled();\n  }\n\n  searchFocusAutoComplete() {\n    if (this.checkAddressCurrent) {\n      const addressInput = document.getElementById(\n        \"addressInput\"\n      ) as HTMLInputElement;\n      this.widthSearch = addressInput.clientWidth;\n      const autoCompleteGoogle =\n        document.getElementsByClassName(\"pac-container\");\n      for (let i = 0, l = autoCompleteGoogle.length; i < l; i++) {\n        autoCompleteGoogle[i].classList.add(\"pac-container-search\");\n      }\n      this.openLocation = true;\n    }\n  }\n  searchBlurAutoComplete() {\n    if (this.checkAddressCurrent) {\n      const autoCompleteGoogle =\n        document.getElementsByClassName(\"pac-container\");\n      for (let i = 0, l = autoCompleteGoogle.length; i < l; i++) {\n        autoCompleteGoogle[i].classList.remove(\"pac-container-search\");\n      }\n      this.mouseover ? (this.openLocation = true) : (this.openLocation = false);\n    }\n  }\n\n  getCurrentLocation() {\n    this.openLocation = false;\n    this.mouseover = false;\n    navigator.geolocation.getCurrentPosition(\n      (pos) =>\n        this.reverseGeocoding({\n          lat: pos.coords.latitude,\n          lng: pos.coords.longitude,\n        }),\n      (err) => console.error(err)\n    );\n  }\n\n  reverseGeocoding(location: { lat: number; lng: number }) {\n    const geocoder = new google.maps.Geocoder();\n    geocoder.geocode({ location }, (results, status) => {\n      if (status === \"OK\" && results.length) {\n        localStorage.setItem(\"latlng\", JSON.stringify(location));\n\n        this.address.zipcode = this.getStorageAddress(\n          results[0],\n          \"postal_code\"\n        );\n        this.address.street = this.getStorageAddress(results[0], \"route\");\n        this.address.number = this.getStorageAddress(\n          results[0],\n          \"street_number\"\n        );\n        this.address.neighborhood = this.getStorageAddress(\n          results[0],\n          \"political\"\n        );\n        this.address.city = this.getStorageAddress(\n          results[0],\n          \"administrative_area_level_2\"\n        );\n        this.address.country = this.getStorageAddress(results[0], \"country\");\n        this.address.state = this.getStorageAddress(\n          results[0],\n          \"administrative_area_level_1\"\n        );\n        this.address.lat = location.lat.toString();\n        this.address.lng = location.lng.toString();\n\n        this.arrayInputs[0].model = this.address.zipcode\n          ? this.address.zipcode\n          : \"\";\n        this.arrayInputs[1].model = this.address.street\n          ? this.address.street\n          : \"\";\n        this.arrayInputs[2].model = this.address.number\n          ? this.address.number\n          : \"\";\n        this.arrayInputs[4].model = this.address.neighborhood\n          ? this.address.neighborhood\n          : \"\";\n        this.arrayInputs[5].model = this.address.city ? this.address.city : \"\";\n\n        this.arrayInputs.forEach((value) => (value.showInput = true));\n        this.arrayInputs[5].disabled = true;\n\n        this.setStepTwoAddress(this.address);\n        this.validateInputs(this.arrayInputs);\n      } else {\n        this.checkAddressCurrent = false;\n        window.alert(\"No results found\");\n      }\n    });\n  }\n\n  getStorageAddress(addressDetail, type) {\n    if (\n      addressDetail.address_components.filter((x) =>\n        x.types.find((element) => element === type)\n      ).length\n    ) {\n      return addressDetail.address_components.filter((x) =>\n        x.types.find((element) => element === type)\n      )[0].short_name;\n    }\n  }\n\n  private autocomplete() {\n    const options = {\n      componentRestrictions: { country: \"br\" },\n      language: [\"pt-BR\"],\n      fields: [\"address_components\", \"geometry\"],\n    };\n\n    this.zipCodeInput = new google.maps.places.Autocomplete(\n      document.getElementById(\"addressInput\"),\n      options\n    );\n\n    google.maps.event.addListener(this.zipCodeInput, `place_changed`, () => {\n      const googleAddress = this.zipCodeInput.getPlace();\n      this.address.country = this.setAddress(\n        googleAddress,\n        \"country\",\n        \"long_name\"\n      );\n      this.address.street = this.setAddress(\n        googleAddress,\n        \"route\",\n        \"long_name\"\n      );\n      this.address.state = this.setAddress(\n        googleAddress,\n        \"administrative_area_level_1\",\n        \"short_name\"\n      );\n      this.address.city = this.setAddress(\n        googleAddress,\n        \"administrative_area_level_2\",\n        \"short_name\"\n      );\n      this.address.neighborhood = this.setAddress(\n        googleAddress,\n        \"political\",\n        \"short_name\"\n      );\n      this.address.zipcode = this.setAddress(\n        googleAddress,\n        \"postal_code\",\n        \"long_name\"\n      );\n      this.address.number = this.setAddress(\n        googleAddress,\n        \"street_number\",\n        \"long_name\"\n      );\n      this.address.lat = googleAddress.geometry.location.lat();\n      this.address.lng = googleAddress.geometry.location.lng();\n\n      localStorage.setItem(\n        \"latlng\",\n        JSON.stringify({ lat: this.address.lat, lng: this.address.lng })\n      );\n\n      this.arrayInputs[0].model = this.address.zipcode\n        ? this.address.zipcode\n        : \"\";\n      this.arrayInputs[1].model = this.address.street\n        ? this.address.street\n        : \"\";\n      this.arrayInputs[2].model = this.address.number\n        ? this.address.number\n        : \"\";\n      this.arrayInputs[4].model = this.address.neighborhood\n        ? this.address.neighborhood\n        : \"\";\n      this.arrayInputs[5].model = this.address.city ? this.address.city : \"\";\n\n      this.arrayInputs.forEach((value) => (value.showInput = true));\n\n      this.arrayInputs[5].disabled = true;\n\n      this.setStepTwoAddress(this.address);\n      this.validateInputs(this.arrayInputs);\n    });\n  }\n\n  public validateInputs(inputs: InputForms[]) {\n    const stepModel: Array<{}> = [];\n\n    this.setNextDisabled();\n\n    const address = localStorage.getItem(\"stepTwoAddress\") || \"\";\n    if (address) {\n      const setAddress = JSON.parse(address) as Address;\n      setAddress.zipcode = this.arrayInputs[0].model;\n      setAddress.street = this.arrayInputs[1].model;\n      setAddress.number = this.arrayInputs[2].model;\n      setAddress.complement = this.arrayInputs[3].model;\n      setAddress.neighborhood = this.arrayInputs[4].model;\n      setAddress.city = this.arrayInputs[5].model;\n\n      this.setStepTwoAddress(setAddress);\n    }\n\n    inputs.forEach((input) => {\n      stepModel.push(input.model);\n      this.storageInputsStep(stepModel);\n    });\n  }\n\n  private setStepTwoAddress(address: Address) {\n    localStorage.setItem(\n      \"stepTwoAddress\",\n      JSON.stringify({\n        country: address.country,\n        street: address.street,\n        state: address.state,\n        city: address.city,\n        neighborhood: address.neighborhood,\n        postal_code: address.zipcode,\n        number: address.number,\n        complement: address.complement,\n      })\n    );\n  }\n\n  private setNextDisabled() {\n    if (localStorage.getItem(\"latlng\")) {\n      const location = JSON.parse(localStorage.getItem(\"latlng\") || \"\");\n      this.address.lat = location.lat;\n      this.address.lng = location.lng;\n    }\n    this.arrayInputs[0].model &&\n      this.arrayInputs[1].model &&\n      this.arrayInputs[4].model &&\n      this.address.lat &&\n      this.address.lng\n      ? this.$emit(\"setNextDisabled\", true)\n      : this.$emit(\"setNextDisabled\", false);\n  }\n\n  private setAddress(addressDetail, type: string, name: string) {\n    if (\n      addressDetail.address_components.filter((x) =>\n        x.types.find((element: string) => element === type)\n      ).length\n    ) {\n      return addressDetail.address_components.filter((x) =>\n        x.types.find((element: string) => element === type)\n      )[0][name];\n    }\n  }\n\n  public storageInputsStep(inputsModel: Array<{}>) {\n    this.$emit(\"storageInputsStep\", this.step, inputsModel);\n  }\n}\n\nexport { StepTwo as default };\n</script>\n\n<style lang=\"scss\" scoped>\n.address-content {\n  background-color: #fffafa;\n  border-radius: 6px;\n}\n\n.btn-location-div {\n  position: absolute;\n  top: 82px;\n  z-index: 99;\n}\n\n.btn-location-search {\n  position: relative;\n  height: 55px;\n  padding: 5px;\n  color: #717171;\n  background: #ffffff;\n  overflow: hidden;\n  transition: all 1s ease-in-out;\n  opacity: 1;\n  visibility: visible;\n  border-top: 1px solid #d9d9d9;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);\n  border-top-right-radius: 6px;\n  border-top-left-radius: 6px;\n  border-bottom-right-radius: 6px;\n  border-bottom-left-radius: 6px;\n  cursor: pointer;\n\n  &:hover {\n    color: #3e3e3e;\n    background-color: #fafafa;\n  }\n\n  &:focus {\n    outline: 0;\n    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.05),\n      0px 4px 16px rgba(0, 0, 0, 0.08);\n  }\n}\n\n.btn-location-search.hide {\n  opacity: 0;\n  pointer-events: none;\n}\n\n.btn-location-search.show {\n  opacity: 1;\n  transition: opacity 0.5s linear;\n}\n</style>"]}]}