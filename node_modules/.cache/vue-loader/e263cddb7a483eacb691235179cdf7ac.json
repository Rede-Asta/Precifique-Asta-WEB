{"remainingRequest":"/home/aline/AstaPrecifique/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/AstaPrecifique/src/views/Product/ProductCreateView.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/AstaPrecifique/src/views/Product/ProductCreateView.vue","mtime":1694456131369},{"path":"/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/AstaPrecifique/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/AstaPrecifique/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/AstaPrecifique/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKCmltcG9ydCBQcm9kdWN0Q3JlYXRlT3JFZGl0SW5mbyBmcm9tICJAL3ZpZXdzL1Byb2R1Y3QvUHJvZHVjdENyZWF0ZU9yRWRpdEluZm8udnVlIjsKaW1wb3J0IFByb2R1Y3RDcmVhdGVPckVkaXRJbWFnZXMgZnJvbSAiQC92aWV3cy9Qcm9kdWN0L1Byb2R1Y3RDcmVhdGVPckVkaXRJbWFnZXMudnVlIjsKCmltcG9ydCBwcm9kdWN0c1NlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9wcm9kdWN0cy5zZXJ2aWNlIjsKCmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoewogIG5hbWU6ICJQcm9kdWN0Q3JlYXRlVmlldyIsCiAgY29tcG9uZW50czogewogICAgUHJvZHVjdENyZWF0ZU9yRWRpdEltYWdlcywKICAgIFByb2R1Y3RDcmVhdGVPckVkaXRJbmZvLAogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9kdWN0c1NlcnZpY2U6IG5ldyBwcm9kdWN0c1NlcnZpY2UoKSwKCiAgICAgIG9wZW5TdGVwVHdvOiBmYWxzZSwKCiAgICAgIGhhc0NyZWF0ZWRQcm9kdWN0OiBmYWxzZSwKICAgICAgZGlzYWJsZUNyZWF0ZU9yRWRpdEluZm86IGZhbHNlLAoKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgaXNMb2FkaW5nSW1hZ2VzOiBmYWxzZSwKCiAgICAgIGNyZWF0ZWRQcm9kdWN0R3VpZDogJycsCiAgICAgIGNyZWF0ZWRQcm9kdWN0OiB1bmRlZmluZWQsCiAgICB9CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGlzU2VydmljZSgpOiBib29sZWFuIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLnBhcmFtcy50eXBlID09PSAnc2Vydmljbyc7CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgYmFja1RvSW5mbygpIHsKICAgICAgdGhpcy5kaXNhYmxlQ3JlYXRlT3JFZGl0SW5mbyA9IGZhbHNlOwogICAgICB0aGlzLnNjcm9sbFRvU3RlcCgxKTsKICAgIH0sCgogICAgY3JlYXRlT3JVcGRhdGVQcm9kdWN0KGluZm8pIHsKICAgICAgaWYgKHRoaXMuaGFzQ3JlYXRlZFByb2R1Y3QpIHsKICAgICAgICB0aGlzLnVwZGF0ZVByb2R1Y3QoaW5mbyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jcmVhdGVQcm9kdWN0KGluZm8pOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIGNyZWF0ZVByb2R1Y3QocHJvZHVjdEluZm8pIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IHRoaXMucHJvZHVjdHNTZXJ2aWNlLmNyZWF0ZVByb2R1Y3ROZXcocHJvZHVjdEluZm8sIHByb2R1Y3RJbmZvLmNhdGVnb3J5X2d1aWQpOwoKICAgICAgICB0aGlzLmNyZWF0ZWRQcm9kdWN0R3VpZCA9IGRhdGEubWVzc2FnZTsKCiAgICAgICAgY29uc3Qge2RhdGE6IHByb2R1Y3R9ID0gYXdhaXQgdGhpcy5wcm9kdWN0c1NlcnZpY2UuZ2V0UHJvZHVjdERldGFpbCh0aGlzLmNyZWF0ZWRQcm9kdWN0R3VpZCk7CgogICAgICAgIHRoaXMuY3JlYXRlZFByb2R1Y3QgPSBwcm9kdWN0OwoKICAgICAgICB0aGlzLmhhc0NyZWF0ZWRQcm9kdWN0ID0gdHJ1ZTsKICAgICAgICB0aGlzLmRpc2FibGVDcmVhdGVPckVkaXRJbmZvID0gdHJ1ZTsKICAgICAgICB0aGlzLm9wZW5TdGVwVHdvID0gdHJ1ZTsKICAgICAgICB0aGlzLnNjcm9sbFRvU3RlcCgyKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnRXJybyBhbyBjcmlhciBwcm9kdXRvJzsKCiAgICAgICAgaWYgKGUucmVzcG9uc2UgJiYgZS5yZXNwb25zZS5zdGF0dXMgPT09IDMwNCkgewogICAgICAgICAgZXJyb3JNZXNzYWdlID0gJ0rDoSBleGlzdGUgdW0gcHJvZHV0byBjb20gZXNzZSBub21lISc7CiAgICAgICAgfQoKICAgICAgICBhd2FpdCB0aGlzLiRhbGVydChlcnJvck1lc3NhZ2UsICcnLCAnZXJyb3InLCB7CiAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgIHBvc2l0aW9uOiAndG9wLWVuZCcsCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICB9KTsKCiAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgfQogICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgfSwKCiAgICBhc3luYyB1cGRhdGVQcm9kdWN0KGRhdGEpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGF3YWl0IHRoaXMucHJvZHVjdHNTZXJ2aWNlLmVkaXRQcm9kdWN0TmV3KGRhdGEsIHRoaXMuY3JlYXRlZFByb2R1Y3RHdWlkKTsKICAgICAgICB0aGlzLmRpc2FibGVDcmVhdGVPckVkaXRJbmZvID0gdHJ1ZTsKICAgICAgICB0aGlzLnNjcm9sbFRvU3RlcCgyKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnRXJybyBhbyBhdHVhbGl6YXIgcHJvZHV0byc7CgogICAgICAgIGlmIChlLnJlc3BvbnNlICYmIGUucmVzcG9uc2Uuc3RhdHVzID09PSAzMDQpIHsKICAgICAgICAgIGVycm9yTWVzc2FnZSA9ICdKw6EgZXhpc3RlIHVtIHByb2R1dG8gY29tIGVzc2Ugbm9tZSEnOwogICAgICAgIH0KCiAgICAgICAgYXdhaXQgdGhpcy4kYWxlcnQoZXJyb3JNZXNzYWdlLCAnJywgJ2Vycm9yJywgewogICAgICAgICAgdG9hc3Q6IHRydWUsCiAgICAgICAgICBwb3NpdGlvbjogJ3RvcC1lbmQnLAogICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgdGltZXI6IDMwMDAsCiAgICAgICAgfSk7CgogICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgIH0KICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgIH0sCgogICAgc2Nyb2xsVG9TdGVwKHN0ZXApIHsKICAgICAgc3dpdGNoIChzdGVwKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgY29uc3QgaW5mbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjcmVhdGUtb3ItZWRpdC1pbmZvJyk7CiAgICAgICAgICBpZiAoIWluZm8pIGJyZWFrOwogICAgICAgICAgd2luZG93LnNjcm9sbFRvKHsKICAgICAgICAgICAgYmVoYXZpb3I6ICJzbW9vdGgiLAogICAgICAgICAgICB0b3A6IGluZm8ub2Zmc2V0VG9wLAogICAgICAgICAgfSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDI6CiAgICAgICAgICBjb25zdCBpbWFnZXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3JlYXRlLW9yLWVkaXQtaW1hZ2VzJyk7CiAgICAgICAgICBpZiAoIWltYWdlcykgYnJlYWs7CiAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oewogICAgICAgICAgICBiZWhhdmlvcjogInNtb290aCIsCiAgICAgICAgICAgIHRvcDogaW1hZ2VzLm9mZnNldFRvcCwKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgfQp9KTsK"},{"version":3,"sources":["ProductCreateView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductCreateView.vue","sourceRoot":"src/views/Product","sourcesContent":["<template>\n  <section class=\"d-flex flex-column justify-content-center\" style=\"min-height: 100vh\">\n    <Header></Header>\n\n    <main class=\"product-create-wrapper container d-flex flex-column align-items-start mb-5\">\n      <div class=\"product-create-wrapper__breadcrumbs d-flex align-items-center mb-4\">\n        <router-link to=\"/produtos\" class=\"mr-1\">\n          <span class=\"material-icons\">arrow_back</span>\n          Produtos\n        </router-link>\n        / Criar {{ isService ? 'serviço' : 'produto' }}\n      </div>\n\n      <product-create-or-edit-info\n        id=\"create-or-edit-info\"\n        class=\"mb-3\"\n        :open=\"true\"\n        :is-parent-loading=\"isLoading\"\n        :has-created-product=\"hasCreatedProduct\"\n        :disabled=\"disableCreateOrEditInfo\"\n        :product=\"createdProduct\"\n        :is-service=\"isService\"\n        @submit-valid=\"createOrUpdateProduct\"\n      />\n\n      <product-create-or-edit-images\n        id=\"create-or-edit-images\"\n        :open=\"openStepTwo\"\n        :is-parent-loading=\"isLoading\"\n        :product-guid=\"createdProductGuid\"\n        :is-service=\"isService\"\n        @back=\"backToInfo\"\n      />\n    </main>\n\n    <Footer class=\"mt-auto\"></Footer>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue';\n\nimport ProductCreateOrEditInfo from \"@/views/Product/ProductCreateOrEditInfo.vue\";\nimport ProductCreateOrEditImages from \"@/views/Product/ProductCreateOrEditImages.vue\";\n\nimport productsService from \"@/services/products.service\";\n\nexport default Vue.extend({\n  name: \"ProductCreateView\",\n  components: {\n    ProductCreateOrEditImages,\n    ProductCreateOrEditInfo,\n  },\n\n  data() {\n    return {\n      productsService: new productsService(),\n\n      openStepTwo: false,\n\n      hasCreatedProduct: false,\n      disableCreateOrEditInfo: false,\n\n      isLoading: false,\n      isLoadingImages: false,\n\n      createdProductGuid: '',\n      createdProduct: undefined,\n    }\n  },\n\n  computed: {\n    isService(): boolean {\n      return this.$route.params.type === 'servico';\n    }\n  },\n\n  methods: {\n    backToInfo() {\n      this.disableCreateOrEditInfo = false;\n      this.scrollToStep(1);\n    },\n\n    createOrUpdateProduct(info) {\n      if (this.hasCreatedProduct) {\n        this.updateProduct(info);\n      } else {\n        this.createProduct(info);\n      }\n    },\n\n    async createProduct(productInfo) {\n      this.isLoading = true;\n      try {\n        const {data} = await this.productsService.createProductNew(productInfo, productInfo.category_guid);\n\n        this.createdProductGuid = data.message;\n\n        const {data: product} = await this.productsService.getProductDetail(this.createdProductGuid);\n\n        this.createdProduct = product;\n\n        this.hasCreatedProduct = true;\n        this.disableCreateOrEditInfo = true;\n        this.openStepTwo = true;\n        this.scrollToStep(2);\n      } catch (e) {\n        let errorMessage = 'Erro ao criar produto';\n\n        if (e.response && e.response.status === 304) {\n          errorMessage = 'Já existe um produto com esse nome!';\n        }\n\n        await this.$alert(errorMessage, '', 'error', {\n          toast: true,\n          position: 'top-end',\n          showConfirmButton: false,\n          timer: 3000,\n        });\n\n        console.error(e);\n      }\n      this.isLoading = false;\n    },\n\n    async updateProduct(data) {\n      this.isLoading = true;\n      try {\n        await this.productsService.editProductNew(data, this.createdProductGuid);\n        this.disableCreateOrEditInfo = true;\n        this.scrollToStep(2);\n      } catch (e) {\n        let errorMessage = 'Erro ao atualizar produto';\n\n        if (e.response && e.response.status === 304) {\n          errorMessage = 'Já existe um produto com esse nome!';\n        }\n\n        await this.$alert(errorMessage, '', 'error', {\n          toast: true,\n          position: 'top-end',\n          showConfirmButton: false,\n          timer: 3000,\n        });\n\n        console.error(e);\n      }\n      this.isLoading = false;\n    },\n\n    scrollToStep(step) {\n      switch (step) {\n        case 1:\n          const info = document.getElementById('create-or-edit-info');\n          if (!info) break;\n          window.scrollTo({\n            behavior: \"smooth\",\n            top: info.offsetTop,\n          });\n          break;\n        case 2:\n          const images = document.getElementById('create-or-edit-images');\n          if (!images) break;\n          window.scrollTo({\n            behavior: \"smooth\",\n            top: images.offsetTop,\n          });\n          break;\n        default:\n          break;\n      }\n    }\n  }\n});\n</script>\n\n<style scoped lang=\"scss\">\n.product-create-wrapper {\n  max-width: 680px;\n\n  &__breadcrumbs {\n    line-height: 1 !important;\n\n    color: #000000;\n\n    font-weight: 500;\n\n    a {\n      display: flex;\n      align-items: center;\n      text-decoration: none !important;\n    }\n\n    span.material-icons {\n      font-size: 1rem;\n    }\n  }\n}\n</style>"]}]}