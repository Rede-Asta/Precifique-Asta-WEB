{"remainingRequest":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/GitHub/admin-frontend/src/views/Cupon/CuponCreateView.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/GitHub/admin-frontend/src/views/Cupon/CuponCreateView.vue","mtime":1696439584697},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/thread-loader/dist/cjs.js","mtime":1673370377290},{"path":"/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKCmltcG9ydCBDdXBvbkNyZWF0ZU9yRWRpdEluZm8gZnJvbSAiQC92aWV3cy9DdXBvbi9DdXBvbkNyZWF0ZU9yRWRpdEluZm8udnVlIjsKLy8gaW1wb3J0IFByb2R1Y3RDcmVhdGVPckVkaXRJbWFnZXMgZnJvbSAiQC92aWV3cy9Qcm9kdWN0L1Byb2R1Y3RDcmVhdGVPckVkaXRJbWFnZXMudnVlIjsKCmltcG9ydCBwcm9kdWN0c1NlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9wcm9kdWN0cy5zZXJ2aWNlIjsKaW1wb3J0IGN1cG9uU2VydmljZSBmcm9tICdAL3NlcnZpY2VzL2N1cG9uLnNlcnZpY2UnOwoKaW1wb3J0IFN3YWwsIHsgU3dlZXRBbGVydFR5cGUgfSBmcm9tICJzd2VldGFsZXJ0MiI7CmltcG9ydCBWdWVTaW1wbGVBbGVydCBmcm9tICJ2dWUtc2ltcGxlLWFsZXJ0IjsKCmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoewogIG5hbWU6ICJDdXBvbkNyZWF0ZVZpZXciLAogIGNvbXBvbmVudHM6IHsKICAgIC8vIEN1cG9uQ3JlYXRlT3JFZGl0SW1hZ2VzLAogICAgQ3Vwb25DcmVhdGVPckVkaXRJbmZvLAogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9kdWN0c1NlcnZpY2U6IG5ldyBwcm9kdWN0c1NlcnZpY2UoKSwKICAgICAgY3Vwb25TZXJ2aWNlOiBuZXcgY3Vwb25TZXJ2aWNlKCksCgogICAgICBvcGVuU3RlcFR3bzogZmFsc2UsCgogICAgICBoYXNDcmVhdGVkUHJvZHVjdDogZmFsc2UsCiAgICAgIGRpc2FibGVDcmVhdGVPckVkaXRJbmZvOiBmYWxzZSwKCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGlzTG9hZGluZ0ltYWdlczogZmFsc2UsCgogICAgICBjcmVhdGVkUHJvZHVjdEd1aWQ6ICcnLAogICAgICBjcmVhdGVkUHJvZHVjdDogdW5kZWZpbmVkLAogICAgfQogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBpc1NlcnZpY2UoKTogYm9vbGVhbiB7CiAgICAgIHJldHVybiB0aGlzLiRyb3V0ZS5wYXJhbXMudHlwZSA9PT0gJ3NlcnZpY28nOwogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGJhY2tUb0luZm8oKSB7CiAgICAgIHRoaXMuZGlzYWJsZUNyZWF0ZU9yRWRpdEluZm8gPSBmYWxzZTsKICAgICAgdGhpcy5zY3JvbGxUb1N0ZXAoMSk7CiAgICB9LAoKICAgIGNyZWF0ZU9yVXBkYXRlQ3Vwb24oaW5mbykgewogICAgICB0aGlzLmNyZWF0ZUN1cG9uKGluZm8pOwogICAgfSwKCiAgICBhc3luYyBjcmVhdGVDdXBvbihjdXBvbil7CiAgICAgIGNvbnNvbGUubG9nKCJjcmVhdGluZyBjdXBvbiIsIGN1cG9uKQogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmN1cG9uU2VydmljZS5hZGRDdXBvbihjdXBvbik7CiAgICAgICAgY29uc29sZS5sb2coInJlc3BvbnNlIGNyZWF0ZSBjdXBvbiIsIHJlc3BvbnNlKQogICAgICAgIHN3aXRjaCAocmVzcG9uc2Uuc3RhdHVzKSB7CiAgICAgICAgICBjYXNlIDIwMDoKICAgICAgICAgICAgdGhpcy50b2FzdE1lc3NhZ2UoInN1Y2Nlc3MiLCAiQ3JpYWRvIGNvbSBzdWNlc3NvISIpOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIuYmFjaygpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMjAxOgogICAgICAgICAgICB0aGlzLnRvYXN0TWVzc2FnZSgic3VjY2VzcyIsICJDcmlhZG8gY29tIHN1Y2Vzc28hIik7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5iYWNrKCk7CiAgICAgICAgICAgIGJyZWFrOyAgCiAgICAgICAgICBjYXNlIDUwMDoKICAgICAgICAgICAgdGhpcy50b2FzdE1lc3NhZ2UoImVycm9yIiwgIkFjb250ZWNldSB1bSBlcnJvLCB0ZW50ZSBub3ZhbWVudGUiKTsKICAgICAgICAgICAgYnJlYWs7ICAgIAogICAgICAgIH0KICAgICAgfWNhdGNoKGUpewogICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBjcmVhdGUgY3Vwb24iLCBlKQogICAgICB9CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICB9LAoKICAgIHRvYXN0TWVzc2FnZSh0eXBlOiBTd2VldEFsZXJ0VHlwZSwgdGl0bGU6IHN0cmluZykgewogICAgICBWdWVTaW1wbGVBbGVydC5maXJlKHsKICAgICAgICB0eXBlLAogICAgICAgIHRpdGxlLAogICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgIHBvc2l0aW9uOiAidG9wLWVuZCIsCiAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgIHRpbWVyOiAzMDAwLAogICAgICAgIG9uT3BlbjogKHRvYXN0KSA9PiB7CiAgICAgICAgICB0b2FzdC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWVudGVyIiwgU3dhbC5zdG9wVGltZXIpLAogICAgICAgICAgICB0b2FzdC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWxlYXZlIiwgU3dhbC5yZXN1bWVUaW1lcik7CiAgICAgICAgfSwKICAgICAgfSk7CiAgICB9LAoKICAgIHNjcm9sbFRvU3RlcChzdGVwKSB7CiAgICAgIHN3aXRjaCAoc3RlcCkgewogICAgICAgIGNhc2UgMToKICAgICAgICAgIGNvbnN0IGluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3JlYXRlLW9yLWVkaXQtaW5mbycpOwogICAgICAgICAgaWYgKCFpbmZvKSBicmVhazsKICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh7CiAgICAgICAgICAgIGJlaGF2aW9yOiAic21vb3RoIiwKICAgICAgICAgICAgdG9wOiBpbmZvLm9mZnNldFRvcCwKICAgICAgICAgIH0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAyOgogICAgICAgICAgY29uc3QgaW1hZ2VzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWF0ZS1vci1lZGl0LWltYWdlcycpOwogICAgICAgICAgaWYgKCFpbWFnZXMpIGJyZWFrOwogICAgICAgICAgd2luZG93LnNjcm9sbFRvKHsKICAgICAgICAgICAgYmVoYXZpb3I6ICJzbW9vdGgiLAogICAgICAgICAgICB0b3A6IGltYWdlcy5vZmZzZXRUb3AsCiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogIH0KfSk7Cg=="},{"version":3,"sources":["CuponCreateView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CuponCreateView.vue","sourceRoot":"src/views/Cupon","sourcesContent":["<template>\n  <section class=\"d-flex flex-column justify-content-center\" style=\"min-height: 100vh\">\n    <Header></Header>\n\n    <main class=\"product-create-wrapper container d-flex flex-column align-items-start mb-5\">\n      <div class=\"product-create-wrapper__breadcrumbs d-flex align-items-center mb-4\">\n        <router-link to=\"/cupons\" class=\"mr-1\">\n          <span class=\"material-icons\">arrow_back</span>\n          Cupons de desconto\n        </router-link>\n        / Criar cupon\n      </div>\n\n      <div class=\"container-create-edit\">        \n        <cupon-create-or-edit-info\n          id=\"create-or-edit-info\"\n          class=\"mb-3\"\n          :open=\"true\"\n          :is-parent-loading=\"isLoading\"\n          :has-created-product=\"hasCreatedProduct\"\n          :disabled=\"disableCreateOrEditInfo\"\n          :product=\"createdProduct\"\n          :is-service=\"isService\"\n          @submit-valid=\"createOrUpdateCupon\"\n        />\n\n        <!-- <product-create-or-edit-images\n          id=\"create-or-edit-images\"\n          :open=\"openStepTwo\"\n          :is-parent-loading=\"isLoading\"\n          :product-guid=\"createdProductGuid\"\n          :is-service=\"isService\"\n          @back=\"backToInfo\"\n        /> -->\n\n      </div>\n    </main>\n\n    <Footer class=\"mt-auto\"></Footer>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue';\n\nimport CuponCreateOrEditInfo from \"@/views/Cupon/CuponCreateOrEditInfo.vue\";\n// import ProductCreateOrEditImages from \"@/views/Product/ProductCreateOrEditImages.vue\";\n\nimport productsService from \"@/services/products.service\";\nimport cuponService from '@/services/cupon.service';\n\nimport Swal, { SweetAlertType } from \"sweetalert2\";\nimport VueSimpleAlert from \"vue-simple-alert\";\n\nexport default Vue.extend({\n  name: \"CuponCreateView\",\n  components: {\n    // CuponCreateOrEditImages,\n    CuponCreateOrEditInfo,\n  },\n\n  data() {\n    return {\n      productsService: new productsService(),\n      cuponService: new cuponService(),\n\n      openStepTwo: false,\n\n      hasCreatedProduct: false,\n      disableCreateOrEditInfo: false,\n\n      isLoading: false,\n      isLoadingImages: false,\n\n      createdProductGuid: '',\n      createdProduct: undefined,\n    }\n  },\n\n  computed: {\n    isService(): boolean {\n      return this.$route.params.type === 'servico';\n    }\n  },\n\n  methods: {\n    backToInfo() {\n      this.disableCreateOrEditInfo = false;\n      this.scrollToStep(1);\n    },\n\n    createOrUpdateCupon(info) {\n      this.createCupon(info);\n    },\n\n    async createCupon(cupon){\n      console.log(\"creating cupon\", cupon)\n      this.isLoading = true;\n      try {\n        const response = await this.cuponService.addCupon(cupon);\n        console.log(\"response create cupon\", response)\n        switch (response.status) {\n          case 200:\n            this.toastMessage(\"success\", \"Criado com sucesso!\");\n            this.$router.back();\n            break;\n          case 201:\n            this.toastMessage(\"success\", \"Criado com sucesso!\");\n            this.$router.back();\n            break;  \n          case 500:\n            this.toastMessage(\"error\", \"Aconteceu um erro, tente novamente\");\n            break;    \n        }\n      }catch(e){\n        console.log(\"error create cupon\", e)\n      }\n      this.isLoading = false;\n    },\n\n    toastMessage(type: SweetAlertType, title: string) {\n      VueSimpleAlert.fire({\n        type,\n        title,\n        toast: true,\n        position: \"top-end\",\n        showConfirmButton: false,\n        timer: 3000,\n        onOpen: (toast) => {\n          toast.addEventListener(\"mouseenter\", Swal.stopTimer),\n            toast.addEventListener(\"mouseleave\", Swal.resumeTimer);\n        },\n      });\n    },\n\n    scrollToStep(step) {\n      switch (step) {\n        case 1:\n          const info = document.getElementById('create-or-edit-info');\n          if (!info) break;\n          window.scrollTo({\n            behavior: \"smooth\",\n            top: info.offsetTop,\n          });\n          break;\n        case 2:\n          const images = document.getElementById('create-or-edit-images');\n          if (!images) break;\n          window.scrollTo({\n            behavior: \"smooth\",\n            top: images.offsetTop,\n          });\n          break;\n        default:\n          break;\n      }\n    }\n  }\n});\n</script>\n\n<style scoped lang=\"scss\">\n.product-create-wrapper {\n  max-width: 680px;\n\n  &__breadcrumbs {\n    line-height: 1 !important;\n\n    color: #000000;\n\n    font-weight: 500;\n\n    a {\n      display: flex;\n      align-items: center;\n      text-decoration: none !important;\n    }\n\n    span.material-icons {\n      font-size: 1rem;\n    }\n  }\n}\n.container-create-edit{\n  width: 100%;\n}\n</style>"]}]}