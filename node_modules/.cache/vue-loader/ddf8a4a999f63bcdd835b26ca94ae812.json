{"remainingRequest":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/GitHub/admin-frontend/src/components/vitrine-modal/vitrine-modal.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/GitHub/admin-frontend/src/components/vitrine-modal/vitrine-modal.vue","mtime":1696439584693},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/thread-loader/dist/cjs.js","mtime":1673370377290},{"path":"/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgppbXBvcnQgVnVlIGZyb20gJ3Z1ZScKaW1wb3J0IHZpdHJpbmVJbWFnZUltcG9ydCBmcm9tICcuL3ZpdHJpbmUtaW1hZ2UtaW1wb3J0LnZ1ZScgCmltcG9ydCBWaXRyaW5lSW1hZ2VDcm9wcGVyIGZyb20gJy4vdml0cmluZS1pbWFnZS1jcm9wcGVyLnZ1ZScKaW1wb3J0IFZpdHJpbmVJbWFnZUxvYWRpbmdTY3JlZW4gZnJvbSAnLi92aXRyaW5lLWltYWdlLWxvYWRpbmctc2NyZWVuLnZ1ZScKaW1wb3J0IHVzZXJTZXJ2aWNlIGZyb20gJ0Avc2VydmljZXMvdXNlci5zZXJ2aWNlJwpleHBvcnQgZGVmYXVsdCBWdWUuZXh0ZW5kKHsKY29tcG9uZW50czogeyB2aXRyaW5lSW1hZ2VJbXBvcnQsIFZpdHJpbmVJbWFnZUNyb3BwZXIsIFZpdHJpbmVJbWFnZUxvYWRpbmdTY3JlZW4gfSwKICBuYW1lOiAnVml0cmluZU1vZGFsJywKICBwcm9wczogewogICAgc2hvd1ZpdHJpbmVNb2RhbDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogKCkgPT4gKHsKICAgIGltYWdlVG9Dcm9wOiAnJywKICAgIHNob3dJbWFnZUNyb3BwZXI6IGZhbHNlLAogICAgc2hvd0xvYWRpbmdTY3JlZW46IGZhbHNlLAogICAgaW1hZ2U6IHt9IGFzIGFueSwKICAgIHVzZXJTZXJ2aWNlOiBuZXcgdXNlclNlcnZpY2UoKQogIH0pLAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVNob3dJbWFnZUNyb3BwZXIoKSB7CiAgICAgIGlmICghdGhpcy5pbWFnZVRvQ3JvcCkgewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMuc2hvd0ltYWdlQ3JvcHBlciA9IHRydWUKICAgIH0sCiAgICBoYW5kbGVTZXRJbWFnZVRvQ3JvcChkYXRhKSB7CiAgICAgIGNvbnNvbGUubG9nKHtkYXRhfSkKICAgICAgdGhpcy5pbWFnZVRvQ3JvcCA9IGRhdGEKICAgIH0sCiAgICBhc3luYyBoYW5kbGVJbWFnZVVwbG9hZChbbWVzc2FnZSwgaW1hZ2VEYXRhXSkgewogICAgICBpZiAobWVzc2FnZSAhPT0gJ3N1Y2Nlc3MnKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2VEYXRhCgogICAgICAgIHRoaXMuc2hvd0xvYWRpbmdTY3JlZW4gPSB0cnVlCiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy51c2VyU2VydmljZS51cGxvYWRWaXRyaW5lKHRoaXMuaW1hZ2UsIChldmVudCkgPT4gewogICAgICAgICAgbGV0IHByb2dyZXNzOiBudW1iZXIgPSBNYXRoLnJvdW5kKAogICAgICAgICAgICAoZXZlbnQubG9hZGVkICogMTAwKSAvIGV2ZW50LnRvdGFsCiAgICAgICAgICApOwogICAgICAgICAgdGhpcy5pbWFnZS51cGxvYWRQcm9ncmVzcyA9IHByb2dyZXNzOwogICAgICAgIH0pCiAgICAgICAgdGhpcy5zaG93SW1hZ2VDcm9wcGVyID0gZmFsc2UKICAgICAgICB0aGlzLnNob3dMb2FkaW5nU2NyZWVuID0gZmFsc2UKICAgICAgICB0aGlzLiRlbWl0KCdzdWNjZXNzQ2xvc2VNb2RhbCcpCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcih7IGVycm9yIH0pCiAgICAgIH0KICAgIH0KICB9Cn0pCgo="},{"version":3,"sources":["vitrine-modal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"vitrine-modal.vue","sourceRoot":"src/components/vitrine-modal","sourcesContent":["<template>\n  <modal :active=\"showVitrineModal\">\n    <div class=\"wrapper\">\n      <vitrine-image-import\n        :showImportImageModal=\"true\"\n        @showImageCropper=\"handleShowImageCropper\"\n        @closeImageModal=\"$emit('closeLogoModal')\"\n        @setImageToCrop=\"handleSetImageToCrop\"\n      />\n      <vitrine-image-cropper\n        :showImageCropper=\"showImageCropper\"\n        :imageToCrop=\"imageToCrop\"\n        @closeImageCropper=\"showImageCropper = false\"\n        @uploadImage=\"handleImageUpload\"\n      />\n      <vitrine-image-loading-screen\n        :showLoadingScreen=\"showLoadingScreen\"\n        :image=\"image\"\n      />\n    </div>\n  </modal>\n</template>\n<script lang=\"ts\">\n  import Vue from 'vue'\n  import vitrineImageImport from './vitrine-image-import.vue' \n  import VitrineImageCropper from './vitrine-image-cropper.vue'\n  import VitrineImageLoadingScreen from './vitrine-image-loading-screen.vue'\n  import userService from '@/services/user.service'\n  export default Vue.extend({\n  components: { vitrineImageImport, VitrineImageCropper, VitrineImageLoadingScreen },\n    name: 'VitrineModal',\n    props: {\n      showVitrineModal: {\n        type: Boolean,\n        required: true\n      }\n    },\n    data: () => ({\n      imageToCrop: '',\n      showImageCropper: false,\n      showLoadingScreen: false,\n      image: {} as any,\n      userService: new userService()\n    }),\n    methods: {\n      handleShowImageCropper() {\n        if (!this.imageToCrop) {\n          return\n        }\n        this.showImageCropper = true\n      },\n      handleSetImageToCrop(data) {\n        console.log({data})\n        this.imageToCrop = data\n      },\n      async handleImageUpload([message, imageData]) {\n        if (message !== 'success') {\n          return\n        }\n        try {\n          this.image = imageData\n  \n          this.showLoadingScreen = true\n          const res = await this.userService.uploadVitrine(this.image, (event) => {\n            let progress: number = Math.round(\n              (event.loaded * 100) / event.total\n            );\n            this.image.uploadProgress = progress;\n          })\n          this.showImageCropper = false\n          this.showLoadingScreen = false\n          this.$emit('successCloseModal')\n        } catch (error) {\n          console.error({ error })\n        }\n      }\n    }\n  })\n\n</script>\n<style lang=\"scss\" scoped>\n  .wrapper {\n    background-color: #f4f5f9;\n    border-radius: 6px;\n  }\n</style>"]}]}