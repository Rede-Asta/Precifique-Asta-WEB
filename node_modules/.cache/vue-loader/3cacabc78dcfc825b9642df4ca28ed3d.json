{"remainingRequest":"/home/aline/AstaPrecifique/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/AstaPrecifique/src/components/product-modal/product-image-import/ProductImageImport.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/AstaPrecifique/src/components/product-modal/product-image-import/ProductImageImport.vue","mtime":1673321154838},{"path":"/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/AstaPrecifique/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/AstaPrecifique/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/AstaPrecifique/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgVnVlIH0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7CmltcG9ydCB7IENyb3BwZXIgfSBmcm9tICJ2dWUtYWR2YW5jZWQtY3JvcHBlciI7CmltcG9ydCBDb21wcmVzc29yIGZyb20gImNvbXByZXNzb3JqcyI7CgppbXBvcnQgInZ1ZS1hZHZhbmNlZC1jcm9wcGVyL2Rpc3Qvc3R5bGUuY3NzIjsKQENvbXBvbmVudCh7CiAgY29tcG9uZW50czogewogICAgQ3JvcHBlciwKICB9LAp9KQpleHBvcnQgY2xhc3MgUHJvZHVjdEltYWdlSW1wb3J0IGV4dGVuZHMgVnVlIHsKICBAUHJvcCgpIHByb3BTaG93SW1wb3J0SW1hZ2UhOiBib29sZWFuOwogIEBQcm9wKCkgcHJvcEltYWdlc0xpc3RMZW5ndGghOiBudW1iZXI7CiAgQFByb3AoKSBwcm9wSW1nTGlzdCE6IHN0cmluZzsKICBAUHJvcCgpIHByb3BQcm9kdWN0R3VpZCE6IHN0cmluZzsKICBAUHJvcCgpIHByb3BQb3NpdGlvbiE6IG51bWJlcjsKICBAUHJvcCgpIHByb3BSZWdpc3RlclR5cGUhOiBzdHJpbmc7CgogIHB1YmxpYyBpbWFnZXNMaXN0TGVuZ3RoID0gdGhpcy5wcm9wSW1hZ2VzTGlzdExlbmd0aDsKICBwdWJsaWMgdG90YWxJbWFnZXMgPSA0IC0gdGhpcy5pbWFnZXNMaXN0TGVuZ3RoOwogIHB1YmxpYyBzaG93SW1wb3J0SW1hZ2UgPSB0aGlzLnByb3BTaG93SW1wb3J0SW1hZ2U7CiAgcHVibGljIHByb2R1Y3RHdWlkID0gdGhpcy5wcm9wUHJvZHVjdEd1aWQ7CiAgcHVibGljIHBvc2l0aW9uID0gdGhpcy5wcm9wUG9zaXRpb247CiAgcHVibGljIHJlZ2lzdGVyVHlwZSA9IHRoaXMucHJvcFJlZ2lzdGVyVHlwZTsKCiAgcHVibGljIGltYWdlRmlsZTsKCiAgcHVibGljIHNob3dDcm9wcGVySW1hZ2U6IGJvb2xlYW4gPSBmYWxzZTsKICBwdWJsaWMgaW1hZ2VUb0Nyb3A6IHN0cmluZyA9ICIiOwogIHB1YmxpYyBkZXNjcmlwdGlvbjogc3RyaW5nID0gIiI7CgogIHB1YmxpYyBmaWxlbGlzdDogYW55W10gPSBbXTsKICBwdWJsaWMgZmlsZTogYW55OwoKICBwdWJsaWMgb25DaGFuZ2UoKSB7CiAgICB0aGlzLmZpbGUgPSB0aGlzLiRyZWZzLmZpbGU7CiAgICB0aGlzLmZpbGVsaXN0ID0gWy4uLnRoaXMuZmlsZS5maWxlc107CgogICAgaWYgKHRoaXMuZmlsZS5maWxlcy5sZW5ndGgpIHsKICAgICAgY29uc3QgaW1hZ2VGaWxlID0gdGhpcy5maWxlLmZpbGVzWzBdOwogICAgICBpZiAoaW1hZ2VGaWxlLnNpemUgLyAxMDAwMDAwIDwgMTUpIHsKICAgICAgICBjb25zdCBjb21wcmVzc29yID0gbmV3IENvbXByZXNzb3IoaW1hZ2VGaWxlLCB7CiAgICAgICAgICBxdWFsaXR5OiAwLjUsCiAgICAgICAgICB3aWR0aDogMTI1MCwKICAgICAgICAgIGhlaWdodDogMTI1MCwKICAgICAgICAgIGNvbnZlcnRTaXplOiAwLAogICAgICAgICAgc3VjY2VzczogKGltYWdlQ29tcHJlc3NlZCkgPT4gewogICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICBpZiAoaW1hZ2VDb21wcmVzc2VkLnNpemUgLyAxMDAwMDAwIDwgNikgewogICAgICAgICAgICAgIHRoaXMuaW1hZ2VGaWxlID0gaW1hZ2VDb21wcmVzc2VkOwogICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGltYWdlQ29tcHJlc3NlZCk7CiAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IChlOiBhbnkpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUb0Nyb3AgPSBlLnRhcmdldC5yZXN1bHQ7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBhbGVydCgiUmVkdXphIG8gdGFtYW5obyBkZSBpbWFnZW0gZSB0ZW50ZSBub3ZhbWVudGUuIik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBlcnJvcihlcnIpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coImVycm9yIGNvbXByaW1pbmRvIGltYWdlbSIsIGVyci5tZXNzYWdlKTsKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoIlJlZHV6YSBvIHRhbWFuaG8gZGUgaW1hZ2VtIGUgdGVudGUgbm92YW1lbnRlLiIpOwogICAgICB9CiAgICB9CiAgfQoKICBwdWJsaWMgcmVtb3ZlKGluZGV4OiBudW1iZXIpIHsKICAgIHRoaXMuZmlsZWxpc3Quc3BsaWNlKGluZGV4LCAxKTsKICB9CgogIHB1YmxpYyBkcmFnb3ZlcihldmVudCkgewogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIGlmICghZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoImJnLWdyZWVuLTMwMCIpKSB7CiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgiYmctZ3JheS0xMDAiKTsKICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCJiZy1ncmVlbi0zMDAiKTsKICAgIH0KICB9CgogIHB1YmxpYyBkcmFnbGVhdmUoZXZlbnQpIHsKICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgiYmctZ3JheS0xMDAiKTsKICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgiYmctZ3JlZW4tMzAwIik7CiAgfQoKICBwdWJsaWMgZHJvcChldmVudCkgewogICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgIHRoaXMuZmlsZSA9IHRoaXMuJHJlZnMuZmlsZTsKICAgIHRoaXMuZmlsZS5maWxlcyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlczsKICAgIHRoaXMub25DaGFuZ2UoKTsKICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgiYmctZ3JheS0xMDAiKTsKICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgiYmctZ3JlZW4tMzAwIik7CiAgfQoKICBwdWJsaWMgb3BlbkNyb3BwZXJJbWFnZU1vZGFsKCkgewogICAgdGhpcy5zaG93Q3JvcHBlckltYWdlID0gdHJ1ZTsKICB9CgogIHB1YmxpYyBjbG9zZUNyb3BwZXJJbWFnZU1vZGFsKHZhbHVlOiBhbnlbXSkgewogICAgaWYgKHZhbHVlWzBdID09PSAic3VjY2VzcyIpIHsKICAgICAgdGhpcy5jbG9zZUltcG9ydEltYWdlTW9kYWwodmFsdWVbMV0pOwogICAgfQogICAgdGhpcy5zaG93Q3JvcHBlckltYWdlID0gZmFsc2U7CiAgfQoKICBwdWJsaWMgY2xvc2VJbXBvcnRJbWFnZU1vZGFsKGltYWdlVXJsOiBhbnkpIHsKICAgIHRoaXMuaW1hZ2VGaWxlID0gbnVsbDsKICAgIHRoaXMuJGVtaXQoImNsb3NlSW1wb3J0SW1hZ2VNb2RhbCIsIGltYWdlVXJsKTsKICB9Cn0KCmV4cG9ydCB7IFByb2R1Y3RJbWFnZUltcG9ydCBhcyBkZWZhdWx0IH07Cg=="},{"version":3,"sources":["ProductImageImport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"ProductImageImport.vue","sourceRoot":"src/components/product-modal/product-image-import","sourcesContent":["<template>\n  <modal :active=\"showImportImage\">\n    <div class=\"card custom-modal\">\n      <div\n        class=\"card-body text-center d-flex flex-column justify-content-between\"\n      >\n        <div\n          class=\"custom-close\"\n          title=\"Fechar Modal de Excluir\"\n          @click=\"closeImportImageModal()\"\n        >\n          <i class=\"fas fa-times\"></i>\n        </div>\n\n        <div>\n          <h4 class=\"font-weight-bold text-dark text-center text-uppercase\">\n            Adicionar Nova Imagem\n          </h4>\n          <!-- <p class=\"text-muted text-center mb-1\">Adicione até {{ totalImages }} {{totalImages === 1 ? 'imagem' :'imagens'}} para seus produtos.</p> -->\n          <p\n            v-if=\"registerType === 'Product'\"\n            class=\"text-muted text-center mb-1\"\n          >\n            Adicione a imagem do seu produto.\n          </p>\n          <p\n            v-if=\"registerType === 'Service'\"\n            class=\"text-muted text-center mb-1\"\n          >\n            Adicione a imagem do seu serviço.\n          </p>\n        </div>\n\n        <div\n          class=\"\n            d-flex\n            align-items-center\n            justify-content-center\n            text-center\n            mt-3\n          \"\n          id=\"app\"\n        >\n          <div\n            class=\"drag-area bg-gray-100 border border-dashed border-gray-300\"\n            @dragover=\"dragover\"\n            @dragleave=\"dragleave\"\n            @drop=\"drop\"\n          >\n            <input\n              type=\"file\"\n              name=\"fields[assetsFieldHandle][]\"\n              id=\"assetsFieldHandle\"\n              class=\"w-px h-px opacity-0 overflow-hidden position-absolute\"\n              @change=\"onChange\"\n              ref=\"file\"\n              accept=\".jpg,.jpeg,.png\"\n            />\n\n            <label\n              for=\"assetsFieldHandle\"\n              class=\"\n                label-input\n                d-flex\n                align-items-center\n                justify-content-center\n              \"\n              :class=\"{ 'cursor-pointer': this.filelist.length < totalImages }\"\n            >\n              <p>\n                Arraste ou\n                <span class=\"btn btn-link p-0 text-uppercase mx-1\"\n                  >clique aqui</span\n                >\n                para enviar sua imagem\n              </p>\n              <span class=\"material-icons icon-drive\">drive_folder_upload</span>\n            </label>\n          </div>\n        </div>\n\n        <ul class=\"d-flex flex-column align-items-start my-1\">\n          <li class=\"small ul-list\">\n            Certifique-se que o arquivo está legível\n          </li>\n          <li class=\"small ul-list\">Tamanho máximo 6MB</li>\n          <li class=\"small ul-list\">Dimensões ideais: 600x600</li>\n          <li class=\"small ul-list\">Formatos permitidos: PNG ou JPG</li>\n        </ul>\n\n        <ul class=\"mt-2 p-2 cloak\" v-if=\"this.filelist.length\" v-cloak>\n          <li\n            class=\"\n              text-sm\n              p-2\n              my-1\n              d-flex\n              justify-content-between\n              align-items-center\n            \"\n            v-for=\"file in filelist\"\n          >\n            <span class=\"col-9 p-0 text-left\">{{ file.name }}</span>\n            <button\n              class=\"\n                btn btn-link\n                d-flex\n                align-items-center\n                justify-content-end\n                p-0\n                small\n                col-3\n                text-danger\n              \"\n              type=\"button\"\n              @click=\"remove(filelist.indexOf(file))\"\n              title=\"Remove file\"\n            >\n              <span class=\"material-icons mr-1 small-icon\">delete_sweep</span>\n              remover\n            </button>\n          </li>\n          <!--                <li class=\"form-group d-flex flex-column align-items-start m-0 p-2\">-->\n          <!--                    <label for=\"description\" class=\"m-0 small text-muted\">Descrição</label>-->\n          <!--                    <input v-model=\"description\" type=\"text\" maxlength=\"40\"-->\n          <!--                        class=\"form-control\" id=\"description\" aria-describedby=\"descriptionHelp\" placeholder=\"Descrição\">-->\n          <!--                    <small id=\"descriptionHelp\" class=\"form-text text-muted\">Escreva uma descrição para imagem.</small>-->\n          <!--                </li>-->\n        </ul>\n\n        <productCropperImage\n          v-if=\"showCropperImage\"\n          :propShowCropperImage=\"showCropperImage\"\n          :propImageToCrop=\"imageToCrop\"\n          :propProductGuid=\"productGuid\"\n          :propDescription=\"description\"\n          :propPosition=\"position\"\n          :propImageFile=\"imageFile\"\n          v-on:closeCropperImageModal=\"closeCropperImageModal\"\n        />\n\n        <div class=\"d-flex justify-content-end mt-2 mb-5 import-action-footer\">\n          <button\n            class=\"btn btn-link text-muted\"\n            @click=\"closeImportImageModal()\"\n          >\n            Cancelar\n          </button>\n          <button\n            class=\"btn btn-primary d-flex align-items-center\"\n            @click=\"openCropperImageModal()\"\n            :disabled=\"this.filelist.length < 1\"\n          >\n            Próximo\n            <span class=\"material-icons ml-2\">chevron_right</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </modal>\n</template>\n\n<script lang=\"ts\">\n  import { Component, Prop, Vue } from \"vue-property-decorator\";\n  import { Cropper } from \"vue-advanced-cropper\";\n  import Compressor from \"compressorjs\";\n\n  import \"vue-advanced-cropper/dist/style.css\";\n  @Component({\n    components: {\n      Cropper,\n    },\n  })\n  export class ProductImageImport extends Vue {\n    @Prop() propShowImportImage!: boolean;\n    @Prop() propImagesListLength!: number;\n    @Prop() propImgList!: string;\n    @Prop() propProductGuid!: string;\n    @Prop() propPosition!: number;\n    @Prop() propRegisterType!: string;\n\n    public imagesListLength = this.propImagesListLength;\n    public totalImages = 4 - this.imagesListLength;\n    public showImportImage = this.propShowImportImage;\n    public productGuid = this.propProductGuid;\n    public position = this.propPosition;\n    public registerType = this.propRegisterType;\n\n    public imageFile;\n\n    public showCropperImage: boolean = false;\n    public imageToCrop: string = \"\";\n    public description: string = \"\";\n\n    public filelist: any[] = [];\n    public file: any;\n\n    public onChange() {\n      this.file = this.$refs.file;\n      this.filelist = [...this.file.files];\n\n      if (this.file.files.length) {\n        const imageFile = this.file.files[0];\n        if (imageFile.size / 1000000 < 15) {\n          const compressor = new Compressor(imageFile, {\n            quality: 0.5,\n            width: 1250,\n            height: 1250,\n            convertSize: 0,\n            success: (imageCompressed) => {\n              const reader = new FileReader();\n              if (imageCompressed.size / 1000000 < 6) {\n                this.imageFile = imageCompressed;\n                reader.readAsDataURL(imageCompressed);\n                reader.onload = (e: any) => {\n                  this.imageToCrop = e.target.result;\n                };\n              } else {\n                alert(\"Reduza o tamanho de imagem e tente novamente.\");\n              }\n            },\n            error(err) {\n              console.log(\"error comprimindo imagem\", err.message);\n            },\n          });\n        } else {\n          alert(\"Reduza o tamanho de imagem e tente novamente.\");\n        }\n      }\n    }\n\n    public remove(index: number) {\n      this.filelist.splice(index, 1);\n    }\n\n    public dragover(event) {\n      event.preventDefault();\n      if (!event.currentTarget.classList.contains(\"bg-green-300\")) {\n        event.currentTarget.classList.remove(\"bg-gray-100\");\n        event.currentTarget.classList.add(\"bg-green-300\");\n      }\n    }\n\n    public dragleave(event) {\n      event.currentTarget.classList.add(\"bg-gray-100\");\n      event.currentTarget.classList.remove(\"bg-green-300\");\n    }\n\n    public drop(event) {\n      event.preventDefault();\n      this.file = this.$refs.file;\n      this.file.files = event.dataTransfer.files;\n      this.onChange();\n      event.currentTarget.classList.add(\"bg-gray-100\");\n      event.currentTarget.classList.remove(\"bg-green-300\");\n    }\n\n    public openCropperImageModal() {\n      this.showCropperImage = true;\n    }\n\n    public closeCropperImageModal(value: any[]) {\n      if (value[0] === \"success\") {\n        this.closeImportImageModal(value[1]);\n      }\n      this.showCropperImage = false;\n    }\n\n    public closeImportImageModal(imageUrl: any) {\n      this.imageFile = null;\n      this.$emit(\"closeImportImageModal\", imageUrl);\n    }\n  }\n\n  export { ProductImageImport as default };\n</script>\n\n<style lang=\"scss\" scoped>\n  .custom-modal {\n    width: 28vw;\n    background-color: #f4f5f9;\n\n    .btn {\n      font-size: 14px;\n    }\n\n    .slider {\n      top: 6px !important;\n    }\n\n    .variant {\n      font-size: 14px;\n    }\n\n    @media screen and (max-width: 992px) {\n      width: 100vw;\n      height: 100vh;\n      border-radius: 0;\n\n      .btn {\n        font-size: 12px;\n      }\n\n      h4 {\n        margin-top: 20px;\n      }\n    }\n\n    @media screen and (min-width: 992px) and (max-width: 1360px) {\n      width: 45vw;\n    }\n\n    @media screen and (min-width: 1361px) and (max-width: 1600px) {\n      width: 40vw;\n    }\n  }\n\n  [v-cloak] {\n    display: none;\n  }\n\n  .w-px {\n    width: 1px;\n  }\n\n  .h-px {\n    height: 1px;\n  }\n\n  .opacity-0 {\n    opacity: 0;\n  }\n\n  .opacity-5 {\n    opacity: 0.5;\n  }\n\n  .drag-area {\n    width: 100%;\n    border-radius: 6px;\n  }\n\n  .cloak {\n    border: 1px solid rgba(43, 88, 164, 0.28);\n    border-radius: 6px;\n\n    li {\n      background-color: #ffffff;\n\n      @media screen and (max-width: 992px) {\n        .text-sm {\n          font-size: 10px;\n        }\n      }\n    }\n  }\n\n  .icon-drive {\n    position: absolute;\n    font-size: 120px;\n    color: #f3f3f3;\n  }\n\n  .bg-green-300 {\n    background-color: #9ae6b4;\n  }\n\n  .bg-gray-100 {\n    background-color: #f7fafc;\n  }\n\n  .cursor-pointer {\n    cursor: pointer;\n  }\n\n  .label-input {\n    margin: 0;\n    width: 100%;\n    height: 120px;\n\n    p {\n      z-index: 1;\n    }\n  }\n\n  .cropper {\n    height: 600px;\n    background: #ddd;\n  }\n\n  .ul-list {\n    list-style: inside;\n  }\n\n  .import-action-footer {\n    position: sticky;\n  }\n</style>"]}]}