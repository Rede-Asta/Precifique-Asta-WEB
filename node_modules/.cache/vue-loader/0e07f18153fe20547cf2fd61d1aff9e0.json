{"remainingRequest":"/home/aline/AstaPrecifique/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/AstaPrecifique/src/views/Product/ProductEditView.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/AstaPrecifique/src/views/Product/ProductEditView.vue","mtime":1673321154842},{"path":"/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/AstaPrecifique/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/AstaPrecifique/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/AstaPrecifique/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/AstaPrecifique/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKCmltcG9ydCBQcm9kdWN0Q3JlYXRlT3JFZGl0SW5mbyBmcm9tICJAL3ZpZXdzL1Byb2R1Y3QvUHJvZHVjdENyZWF0ZU9yRWRpdEluZm8udnVlIjsKaW1wb3J0IFByb2R1Y3RDcmVhdGVPckVkaXRJbWFnZXMgZnJvbSAiQC92aWV3cy9Qcm9kdWN0L1Byb2R1Y3RDcmVhdGVPckVkaXRJbWFnZXMudnVlIjsKCmltcG9ydCBwcm9kdWN0c1NlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9wcm9kdWN0cy5zZXJ2aWNlIjsKCmludGVyZmFjZSBJRGF0YSB7CiAgcHJvZHVjdDogYW55OwogIHByb2R1Y3RzU2VydmljZTogcHJvZHVjdHNTZXJ2aWNlOwogIGlzTG9hZGluZzogYm9vbGVhbjsKfQoKZXhwb3J0IGRlZmF1bHQgVnVlLmV4dGVuZCh7CiAgbmFtZTogIlByb2R1Y3RFZGl0VmlldyIsCgogIGNvbXBvbmVudHM6IHsKICAgIFByb2R1Y3RDcmVhdGVPckVkaXRJbWFnZXMsCiAgICBQcm9kdWN0Q3JlYXRlT3JFZGl0SW5mbywKICB9LAoKICBkYXRhKCk6IElEYXRhIHsKICAgIHJldHVybiB7CiAgICAgIHByb2R1Y3Q6IG51bGwsCiAgICAgIHByb2R1Y3RzU2VydmljZTogbmV3IHByb2R1Y3RzU2VydmljZSgpLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgfQogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBpc1NlcnZpY2UoKTogYm9vbGVhbiB7CiAgICAgIGlmICghdGhpcy5wcm9kdWN0KSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0aGlzLnByb2R1Y3QucmVnaXN0ZXJfdHlwZSA9PT0gJ1NlcnZpY2UnOwogICAgfQogIH0sCgogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICBhd2FpdCB0aGlzLmdldFByb2R1Y3QoKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBhc3luYyBnZXRQcm9kdWN0KCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHtkYXRhfSA9IGF3YWl0IHRoaXMucHJvZHVjdHNTZXJ2aWNlLmdldFByb2R1Y3REZXRhaWwodGhpcy4kcm91dGUucGFyYW1zLnByb2R1Y3RHdWlkKTsKICAgICAgICB0aGlzLnByb2R1Y3QgPSBkYXRhOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihlKTsKICAgICAgfQogICAgfSwKCiAgICBhc3luYyB1cGRhdGVQcm9kdWN0KGRhdGEpIHsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGF3YWl0IHRoaXMucHJvZHVjdHNTZXJ2aWNlLmVkaXRQcm9kdWN0TmV3KGRhdGEsIHRoaXMucHJvZHVjdD8uZ3VpZCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBsZXQgZXJyb3JNZXNzYWdlID0gJ0Vycm8gYW8gYXR1YWxpemFyIHByb2R1dG8nOwoKICAgICAgICBpZiAoZS5yZXNwb25zZSAmJiBlLnJlc3BvbnNlLnN0YXR1cyA9PT0gMzA0KSB7CiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSAnSsOhIGV4aXN0ZSB1bSBwcm9kdXRvIGNvbSBlc3NlIG5vbWUhJzsKICAgICAgICB9CgogICAgICAgIGF3YWl0IHRoaXMuJGFsZXJ0KGVycm9yTWVzc2FnZSwgJycsICdlcnJvcicsIHsKICAgICAgICAgIHRvYXN0OiB0cnVlLAogICAgICAgICAgcG9zaXRpb246ICd0b3AtZW5kJywKICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgIHRpbWVyOiAzMDAwLAogICAgICAgIH0pOwoKICAgICAgICBjb25zb2xlLmVycm9yKGUpOwogICAgICB9CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICB9LAogIH0KfSk7Cg=="},{"version":3,"sources":["ProductEditView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"ProductEditView.vue","sourceRoot":"src/views/Product","sourcesContent":["<template>\n  <section>\n    <Header/>\n\n    <main class=\"product-edit-wrapper container mb-5\">\n      <div class=\"product-edit-wrapper__breadcrumbs d-flex align-items-center mb-4\">\n        <router-link to=\"/produtos\" class=\"mr-1\">\n          <span class=\"material-icons\">arrow_back</span>\n          Produtos\n        </router-link>\n        / Editar {{ isService ? 'serviço' : 'produto' }}\n      </div>\n\n      <product-create-or-edit-info\n        v-if=\"product\"\n        id=\"create-or-edit-info\"\n        class=\"mb-3\"\n        :open=\"true\"\n        :is-parent-loading=\"isLoading\"\n        :has-created-product=\"true\"\n        :product=\"product\"\n        :is-service=\"isService\"\n        :is-update-page=\"true\"\n        @submit-valid=\"updateProduct\"\n      />\n\n      <product-create-or-edit-images\n        v-if=\"product\"\n        id=\"create-or-edit-images\"\n        :open=\"true\"\n        :is-parent-loading=\"isLoading\"\n        :product-guid=\"product.guid\"\n        :is-service=\"isService\"\n        :is-update-page=\"true\"\n        :product=\"product\"\n      />\n    </main>\n\n    <Footer/>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue';\n\nimport ProductCreateOrEditInfo from \"@/views/Product/ProductCreateOrEditInfo.vue\";\nimport ProductCreateOrEditImages from \"@/views/Product/ProductCreateOrEditImages.vue\";\n\nimport productsService from \"@/services/products.service\";\n\ninterface IData {\n  product: any;\n  productsService: productsService;\n  isLoading: boolean;\n}\n\nexport default Vue.extend({\n  name: \"ProductEditView\",\n\n  components: {\n    ProductCreateOrEditImages,\n    ProductCreateOrEditInfo,\n  },\n\n  data(): IData {\n    return {\n      product: null,\n      productsService: new productsService(),\n      isLoading: false,\n    }\n  },\n\n  computed: {\n    isService(): boolean {\n      if (!this.product) return false;\n      return this.product.register_type === 'Service';\n    }\n  },\n\n  async created() {\n    await this.getProduct();\n  },\n\n  methods: {\n    async getProduct() {\n      try {\n        const {data} = await this.productsService.getProductDetail(this.$route.params.productGuid);\n        this.product = data;\n      } catch (e) {\n        console.error(e);\n      }\n    },\n\n    async updateProduct(data) {\n      this.isLoading = true;\n      try {\n        await this.productsService.editProductNew(data, this.product?.guid);\n      } catch (e) {\n        let errorMessage = 'Erro ao atualizar produto';\n\n        if (e.response && e.response.status === 304) {\n          errorMessage = 'Já existe um produto com esse nome!';\n        }\n\n        await this.$alert(errorMessage, '', 'error', {\n          toast: true,\n          position: 'top-end',\n          showConfirmButton: false,\n          timer: 3000,\n        });\n\n        console.error(e);\n      }\n      this.isLoading = false;\n    },\n  }\n});\n</script>\n\n<style scoped lang=\"scss\">\n.product-edit-wrapper {\n  max-width: 680px;\n\n  &__breadcrumbs {\n    line-height: 1 !important;\n\n    color: #000000;\n\n    font-weight: 500;\n\n    a {\n      display: flex;\n      align-items: center;\n      text-decoration: none !important;\n    }\n\n    span.material-icons {\n      font-size: 1rem;\n    }\n  }\n}\n</style>"]}]}