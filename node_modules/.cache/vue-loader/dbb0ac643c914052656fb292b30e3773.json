{"remainingRequest":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/aline/GitHub/admin-frontend/src/components/category-modal/CategoryModal.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/aline/GitHub/admin-frontend/src/components/category-modal/CategoryModal.vue","mtime":1696439584329},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/thread-loader/dist/cjs.js","mtime":1673370377290},{"path":"/home/aline/GitHub/admin-frontend/node_modules/babel-loader/lib/index.js","mtime":1673370377198},{"path":"/home/aline/GitHub/admin-frontend/node_modules/ts-loader/index.js","mtime":1673370387800},{"path":"/home/aline/GitHub/admin-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673370377252},{"path":"/home/aline/GitHub/admin-frontend/node_modules/vue-loader/lib/index.js","mtime":1673370389594}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgVnVlIH0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7CmltcG9ydCBWdWVTaW1wbGVBbGVydCBmcm9tICJ2dWUtc2ltcGxlLWFsZXJ0IjsKaW1wb3J0IFN3YWwsIHsgU3dlZXRBbGVydFR5cGUgfSBmcm9tICJzd2VldGFsZXJ0MiI7CgppbXBvcnQgewogIENhdGVnb3J5LAogIElDYXRlZ29yeSwKICBOb3RpZmljYXRpb25DYXRlZ29yeSwKICBWYXJpYW50VmFsdWUsCn0gZnJvbSAiQC9tb2RlbHMvY2F0ZWdvcnkiOwppbXBvcnQgU2VsbGVyIGZyb20gIkAvbW9kZWxzL3NlbGxlciI7CmltcG9ydCBjYXRlZ29yeVNlcnZpY2UgZnJvbSAiQC9zZXJ2aWNlcy9jYXRlZ29yeS5zZXJ2aWNlIjsKaW1wb3J0IG1peHBhbmVsIGZyb20gIm1peHBhbmVsLWJyb3dzZXIiOwoKQENvbXBvbmVudCh7fSkKZXhwb3J0IGNsYXNzIENhdGVnb3J5TW9kYWwgZXh0ZW5kcyBWdWUgewogIEBQcm9wKCkgcHJvcENhdGVnb3J5U2VsZWN0ZWQhOiBDYXRlZ29yeTsKICBAUHJvcCgpIHByb3BMb2dnZWRVc2VyITogU2VsbGVyOwogIEBQcm9wKCkgcHJvcENyZWF0ZUNhdGVnb3J5ITogYm9vbGVhbjsKICBAUHJvcCgpIHByb3BFZGl0Q2F0ZWdvcnkhOiBib29sZWFuOwogIEBQcm9wKCkgcHJvcElzQ2F0ZWdvcnlTZXJ2aWNlITogYm9vbGVhbjsKCiAgcHVibGljIGNhdGVnb3J5U2VsZWN0ZWQ6IENhdGVnb3J5ID0gdGhpcy5wcm9wQ2F0ZWdvcnlTZWxlY3RlZDsKICBwdWJsaWMgY2F0ZWdvcnlIYXNWYXJpYW50OiBib29sZWFuIHwgdW5kZWZpbmVkID0KICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZC52YXJpYW50X3N0YXR1czsKICBwdWJsaWMgbG9nZ2VkVXNlcjogU2VsbGVyID0gdGhpcy5wcm9wTG9nZ2VkVXNlcjsKICBwdWJsaWMgc2hvd0VkaXRDYXRlZ29yeTogYm9vbGVhbiA9IHRoaXMucHJvcEVkaXRDYXRlZ29yeTsKICBwdWJsaWMgaXNDYXRlZ29yeVNlcnZpY2U6IGJvb2xlYW4gPSB0aGlzLnByb3BJc0NhdGVnb3J5U2VydmljZTsKICBwdWJsaWMgc2hvd0NyZWF0ZUNhdGVnb3J5OiBib29sZWFuID0gdGhpcy5wcm9wQ3JlYXRlQ2F0ZWdvcnk7CgogIHB1YmxpYyBzaG93Q29uZmlybUVkaXRWYXJpYW50OiBib29sZWFuID0gZmFsc2U7CiAgcHVibGljIGRlbGV0ZWRBbGxWYXJpYW50czogYm9vbGVhbiA9IGZhbHNlOwoKICBwdWJsaWMgc2hvd0RlbGV0ZUNhdGVnb3J5OiBib29sZWFuID0gZmFsc2U7CiAgcHVibGljIHRpdGxlOiBzdHJpbmcgPSAiIjsKICBwdWJsaWMgc3VidGl0bGU6IHN0cmluZyA9ICIiOwogIHB1YmxpYyB0aXRsZUJ0bjogc3RyaW5nID0gIiI7CiAgcHVibGljIG1zZ0Vycm9yOiBzdHJpbmcgPSAiIjsKCiAgcHVibGljIHZhcmlhbnREZWxldGU6IFZhcmlhbnRWYWx1ZVtdID0gW107CiAgcHVibGljIHZhcmlhbnRFZGl0OiBWYXJpYW50VmFsdWVbXSA9IFtdOwogIHB1YmxpYyB2YXJpYW50Q3JlYXRlOiBzdHJpbmdbXSA9IFtdOwoKICBwdWJsaWMgbXNnSW5wdXRzOiBOb3RpZmljYXRpb25DYXRlZ29yeSA9IHsKICAgIG5hbWU6ICIiLAogICAgdmFyaWFudF9uYW1lOiAiIiwKICAgIHZhcmlhbnRfdmFsdWU6IFtdLAogIH07CgogIHByaXZhdGUgY2F0ZWdvcnlTZXJ2aWNlID0gbmV3IGNhdGVnb3J5U2VydmljZSgpOwoKICBjb25zdHJ1Y3RvcigpIHsKICAgIHN1cGVyKCk7CiAgfQoKICBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMuc2hvd0NyZWF0ZUNhdGVnb3J5ICYmICF0aGlzLnNob3dFZGl0Q2F0ZWdvcnkpIHsKICAgICAgdGhpcy5zZXRUaXRsZXMoCiAgICAgICAgIkFkaWNpb25hciBDYXRlZ29yaWEiLAogICAgICAgICJJbnNpcmEgbyBub21lIGRhIGNhdGVnb3JpYSBlIHN1YXMgdmFyaWFudGVzIiwKICAgICAgICAiU2FsdmFyIENhdGVnb3JpYSIKICAgICAgKTsKICAgIH0gZWxzZSBpZiAodGhpcy5zaG93RWRpdENhdGVnb3J5KSB7CiAgICAgIHRoaXMuc2V0VGl0bGVzKAogICAgICAgICJFZGl0YXIgQ2F0ZWdvcmlhIiwKICAgICAgICAiRWRpdGUgbyBub21lIGRhIGNhdGVnb3JpYSBlIHN1YXMgdmFyaWFudGVzIiwKICAgICAgICAiQXR1YWxpemFyIENhdGVnb3JpYSIKICAgICAgKTsKICAgIH0KICB9CgogIHByaXZhdGUgc2V0VGl0bGVzKHRpdGxlOiBzdHJpbmcsIHN1YnRpdGxlOiBzdHJpbmcsIHRpdGxlQnRuOiBzdHJpbmcpIHsKICAgIHRoaXMudGl0bGUgPSB0aXRsZTsKICAgIHRoaXMuc3VidGl0bGUgPSBzdWJ0aXRsZTsKICAgIHRoaXMudGl0bGVCdG4gPSB0aXRsZUJ0bjsKICB9CgogIHB1YmxpYyBhZGROZXdPcHQgPSAoKSA9PgogICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkLnZhcmlhbnRfdmFsdWUucHVzaCh7IHZhbHVlOiAiIiB9KTsKCiAgcHVibGljIG1vZGlmaWVkT3B0KHZhcmlhbnRWYWx1ZTogVmFyaWFudFZhbHVlKSB7CiAgICBpZiAoCiAgICAgIHZhcmlhbnRWYWx1ZS5ndWlkICYmCiAgICAgICF0aGlzLnZhcmlhbnRFZGl0LmZpbmQoKHZhcmlhbnQpID0+IHZhcmlhbnQuZ3VpZCA9PT0gdmFyaWFudFZhbHVlLmd1aWQpCiAgICApIHsKICAgICAgdGhpcy52YXJpYW50RWRpdC5wdXNoKHZhcmlhbnRWYWx1ZSk7CiAgICB9IGVsc2UgewogICAgICBjb25zdCB2YXJpYW50SW5kZXggPSB0aGlzLnZhcmlhbnRFZGl0LmZpbmRJbmRleCgKICAgICAgICAodmFyaWFudCkgPT4gdmFyaWFudC5ndWlkID09PSB2YXJpYW50VmFsdWUuZ3VpZAogICAgICApOwoKICAgICAgdGhpcy52YXJpYW50RWRpdFt2YXJpYW50SW5kZXhdLnZhbHVlID0gdmFyaWFudFZhbHVlLnZhbHVlOwogICAgfQogIH0KCiAgcHVibGljIHJlbW92ZU5ld09wdChpbmRleDogbnVtYmVyLCB2YXJpYW50OiBWYXJpYW50VmFsdWUpIHsKICAgIGlmICh0aGlzLmNhdGVnb3J5U2VsZWN0ZWQudmFyaWFudF92YWx1ZVtpbmRleF0udmFsdWUgIT09ICIiKSB7CiAgICAgIHRoaXMudmFyaWFudERlbGV0ZS5wdXNoKHZhcmlhbnQpOwogICAgfQogICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkLnZhcmlhbnRfdmFsdWUuc3BsaWNlKGluZGV4LCAxKTsKICB9CgogIHB1YmxpYyBzYXZlQ2F0ZWdvcnkoKSB7CiAgICB0aGlzLnZhbGlkYXRlQWRkQ2F0ZWdvcnkoKTsKICAgIGlmICh0aGlzLnZhbGlkYXRlSW5wdXRzKCkpIHsKICAgICAgaWYgKHRoaXMuc2hvd0NyZWF0ZUNhdGVnb3J5IHx8IHRoaXMuaXNDYXRlZ29yeVNlcnZpY2UpIHsKICAgICAgICB0aGlzLmNyZWF0ZUNhdGVnb3J5KHRoaXMuc2V0Q2F0ZWdvcnkodGhpcy5jYXRlZ29yeVNlbGVjdGVkKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZW1vdmVEdXBsaWNhdGUodGhpcy5jYXRlZ29yeVNlbGVjdGVkLnZhcmlhbnRfdmFsdWUpCiAgICAgICAgICAuZmlsdGVyKCh2YXJpYW50KSA9PiAhdmFyaWFudC5ndWlkKQogICAgICAgICAgLmZvckVhY2goKHZhbCkgPT4gewogICAgICAgICAgICB0aGlzLnZhcmlhbnRDcmVhdGUucHVzaCh2YWwudmFsdWUpOwogICAgICAgICAgfSk7CgogICAgICAgIGlmICgKICAgICAgICAgIHRoaXMudmFyaWFudENyZWF0ZS5sZW5ndGggfHwKICAgICAgICAgIHRoaXMudmFyaWFudERlbGV0ZS5sZW5ndGggfHwKICAgICAgICAgIHRoaXMuY2F0ZWdvcnlIYXNWYXJpYW50ICE9PSB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQudmFyaWFudF9zdGF0dXMKICAgICAgICApIHsKICAgICAgICAgIHRoaXMub3BlbkNvbmZpcm1FZGl0TW9kYWwoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKHRoaXMudmFyaWFudENyZWF0ZS5sZW5ndGgpIHsKICAgICAgICAgICAgdGhpcy5jcmVhdGVDYXRlZ29yeVZhcmlhbnQoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGhpcy52YXJpYW50RGVsZXRlLmxlbmd0aCkgewogICAgICAgICAgICB0aGlzLmRlbGV0ZUNhdGVnb3J5VmFyaWFudCgpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLnZhcmlhbnRFZGl0Lmxlbmd0aCkgewogICAgICAgICAgICB0aGlzLmVkaXRDYXRlZ29yeVZhcmlhbnQoKTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmVkaXRDYXRlZ29yeSgKICAgICAgICAgICAgdGhpcy5zZXRDYXRlZ29yeSgKICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQsCiAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkLm9yZGVyaW5nCiAgICAgICAgICAgICksCiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZC5ndWlkCiAgICAgICAgICApOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgcHJpdmF0ZSBvcGVuQ29uZmlybUVkaXRNb2RhbCgpIHsKICAgIGlmICghdGhpcy5jYXRlZ29yeVNlbGVjdGVkLnZhcmlhbnRfc3RhdHVzKSB7CiAgICAgIHRoaXMuZGVsZXRlZEFsbFZhcmlhbnRzID0gdHJ1ZTsKICAgIH0KCiAgICB0aGlzLnNob3dDb25maXJtRWRpdFZhcmlhbnQgPSB0cnVlOwogIH0KCiAgcHJpdmF0ZSBzZXRDYXRlZ29yeShjYXRlZ29yeTogSUNhdGVnb3J5LCBvcmRlcmluZzogbnVtYmVyID0gMTAwKSB7CiAgICBpZiAoY2F0ZWdvcnkudmFyaWFudF9zdGF0dXMpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBuYW1lOiBjYXRlZ29yeS5uYW1lLAogICAgICAgIG9yZGVyaW5nLAogICAgICAgIHZhcmlhbnRfbmFtZTogY2F0ZWdvcnkudmFyaWFudF9uYW1lLAogICAgICAgIHZhcmlhbnRfc3RhdHVzOiBjYXRlZ29yeS52YXJpYW50X3N0YXR1cywKICAgICAgICB2YXJpYW50X3ZhbHVlOiB0aGlzLnNob3dDcmVhdGVDYXRlZ29yeQogICAgICAgICAgPyB0aGlzLnNldENyZWF0ZVZhcmlhbnRWYWx1ZShjYXRlZ29yeS52YXJpYW50X3ZhbHVlKQogICAgICAgICAgOiBjYXRlZ29yeS52YXJpYW50X3ZhbHVlLAogICAgICAgIHJlZ2lzdGVyX3R5cGU6IHRoaXMuaXNDYXRlZ29yeVNlcnZpY2UgPyAiU2VydmljZSIgOiAiUHJvZHVjdCIsCiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gewogICAgICAgIG5hbWU6IGNhdGVnb3J5Lm5hbWUsCiAgICAgICAgb3JkZXJpbmcsCiAgICAgICAgdmFyaWFudF9zdGF0dXM6IGNhdGVnb3J5LnZhcmlhbnRfc3RhdHVzLAogICAgICAgIHJlZ2lzdGVyX3R5cGU6IHRoaXMuaXNDYXRlZ29yeVNlcnZpY2UgPyAiU2VydmljZSIgOiAiUHJvZHVjdCIsCiAgICAgIH07CiAgICB9CiAgfQoKICBwcml2YXRlIHNldENyZWF0ZVZhcmlhbnRWYWx1ZSgKICAgIHZhcmlhbnRWYWx1ZTogVmFyaWFudFZhbHVlW10gPSBbXQogICk6IFZhcmlhbnRWYWx1ZVtdIHsKICAgIGNvbnN0IHZhbHVlczogVmFyaWFudFZhbHVlW10gPSBbXTsKICAgIHZhcmlhbnRWYWx1ZS5tYXAoKHZhcmlhbnQpID0+IHZhbHVlcy5wdXNoKHsgdmFsdWU6IHZhcmlhbnQudmFsdWUgfSkpOwogICAgcmV0dXJuIHZhbHVlczsKICB9CgogIHByaXZhdGUgdmFsaWRhdGVBZGRDYXRlZ29yeSgpIHsKICAgIHRoaXMucmVzZXRNc2dJbnB1dHMoKTsKICAgIFsibmFtZSIsICJ2YXJpYW50X25hbWUiLCAidmFyaWFudF92YWx1ZSJdLmZvckVhY2goKHZhbHVlKSA9PgogICAgICB0aGlzLmNoZWNrSW5wdXRzKHZhbHVlKQogICAgKTsKICB9CgogIHByaXZhdGUgY2hlY2tJbnB1dHMoY2F0ZWdvcnlLZXk6IHN0cmluZykgewogICAgaWYgKGNhdGVnb3J5S2V5ID09PSAidmFyaWFudF92YWx1ZSIpIHsKICAgICAgdGhpcy5jaGVja1ZhcmlhbnRWYWx1ZSgpLmZpbmQoKHZhbHVlKSA9PiB7CiAgICAgICAgdmFsdWUgPj0gMAogICAgICAgICAgPyAodGhpcy5tc2dJbnB1dHNbY2F0ZWdvcnlLZXldW3ZhbHVlXSA9IGBBIE9ww6fDo28gJHt2YWx1ZSArIDEKICAgICAgICAgICAgfSDDqSBkZSBwcmVlbmNoaW1lbnRvIG9icmlnYXTDs3Jpb2ApCiAgICAgICAgICA6ICh0aGlzLm1zZ0lucHV0c1tjYXRlZ29yeUtleV1bdmFsdWVdID0gIiIpOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAodGhpcy5jYXRlZ29yeVNlbGVjdGVkW2NhdGVnb3J5S2V5XSA9PT0gIiIpIHsKICAgICAgdGhpcy5tc2dJbnB1dHNbY2F0ZWdvcnlLZXldID0gIkVzdGUgY2FtcG8gw6kgZGUgcHJlZW5jaGltZW50byBvYnJpZ2F0w7NyaW8iOwogICAgfQogIH0KCiAgcHJpdmF0ZSBjaGVja1ZhcmlhbnRWYWx1ZSgpOiBudW1iZXJbXSB7CiAgICBjb25zdCB2YWx1ZUluZGV4OiBudW1iZXJbXSA9IFtdOwogICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkLnZhcmlhbnRfdmFsdWUuZm9yRWFjaCgodmFsdWUsIGluZGV4OiBudW1iZXIpID0+IHsKICAgICAgaWYgKHRoaXMuY2F0ZWdvcnlTZWxlY3RlZC52YXJpYW50X3ZhbHVlW2luZGV4XS52YWx1ZSA9PT0gIiIpIHsKICAgICAgICB2YWx1ZUluZGV4LnB1c2goaW5kZXgpOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiB2YWx1ZUluZGV4OwogIH0KCiAgcHJpdmF0ZSBjcmVhdGVDYXRlZ29yeU1peHBhbmVsKCkgewogICAgbWl4cGFuZWwudHJhY2soIkNyZWF0ZV9DYXRlZ29yeV9Qcm9kdWN0IiwgewoKICAgIH0pOwoKICAgIGNvbnNvbGUubG9nKCJDcmVhdGUgQ2F0ZWdvcnkiKQogICAKCiAgfQoKCiAgICBwcml2YXRlIHZhbGlkYXRlSW5wdXRzKCk6IGJvb2xlYW4gewogIGxldCB2YWxpZGF0ZUlucHV0OiBib29sZWFuID0gZmFsc2U7CiAgaWYgKAogICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkLm5hbWUgIT09ICIiICYmCiAgICAoIXRoaXMuY2F0ZWdvcnlTZWxlY3RlZC52YXJpYW50X3N0YXR1cyB8fCB0aGlzLnNob3dFZGl0Q2F0ZWdvcnkpCiAgKSB7CiAgICB2YWxpZGF0ZUlucHV0ID0gdHJ1ZTsKICB9CiAgaWYgKAogICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkLnZhcmlhbnRfc3RhdHVzICYmCiAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQubmFtZSAhPT0gIiIgJiYKICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZC52YXJpYW50X25hbWUgIT09ICIiICYmCiAgICAhdGhpcy5jaGVja1ZhcmlhbnRWYWx1ZSgpLmxlbmd0aAogICkgewogICAgdmFsaWRhdGVJbnB1dCA9IHRydWU7CiAgfQogIHJldHVybiB2YWxpZGF0ZUlucHV0Owp9CgogICAgcHJpdmF0ZSByZXNldE1zZ0lucHV0cygpIHsKICB0aGlzLm1zZ0lucHV0cyA9IHsKICAgIG5hbWU6ICIiLAogICAgdmFyaWFudF9uYW1lOiAiIiwKICAgIHZhcmlhbnRfdmFsdWU6IFtdLAogIH07Cn0KCiAgICBwcml2YXRlIGNyZWF0ZUNhdGVnb3J5KGNhdGVnb3J5OiBJQ2F0ZWdvcnkpIHsKICB0aGlzLmNhdGVnb3J5U2VydmljZQogICAgLmNyZWF0ZUNhdGVnb3J5KGNhdGVnb3J5LCB0aGlzLmxvZ2dlZFVzZXIuc2x1ZykKICAgIC50aGVuKChkYXRhKSA9PiB7CiAgICAgIHN3aXRjaCAoZGF0YS5zdGF0dXMpIHsKICAgICAgICBjYXNlIDIwMToKICAgICAgICB0aGlzLmNyZWF0ZUNhdGVnb3J5TWl4cGFuZWwoKQogICAgICAgICAgdGhpcy5uZXh0U3RhdHVzU3VjY2VzcygKICAgICAgICAgICAgYEEgQ2F0ZWdvcmlhICR7Y2F0ZWdvcnkubmFtZX0gZm9pIGNhZGFzdHJhZGEuYAogICAgICAgICAgKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDIwMjoKICAgICAgICB0aGlzLmNyZWF0ZUNhdGVnb3J5TWl4cGFuZWwoKQoKICAgICAgICAgIGRhdGEKICAgICAgICAgICAgLmpzb24oKQogICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHRoaXMuZWRpdENhdGVnb3J5KGNhdGVnb3J5LCByZXNwb25zZS5ndWlkKSk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAzMDQ6CiAgICAgICAgICB0aGlzLm5leHRTdGF0dXNFcnJvcigKICAgICAgICAgICAgYEEgQ2F0ZWdvcmlhICR7Y2F0ZWdvcnkubmFtZX0gasOhIGVzdMOhIGNhZGFzdHJhZGEuYAogICAgICAgICAgKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhpcy5uZXh0U3RhdHVzRGVmYXVsdCgKICAgICAgICAgICAgYERlc2N1bHBlLCBvY29ycmV1IGFsZ3VtIGVycm8gYW8gY2FkYXN0cmFyIGEgQ2F0ZWdvcmlhICR7Y2F0ZWdvcnkubmFtZX0sIHBvciBmYXZvciB0ZW50ZSBub3ZhbWVudGUgbWFpcyB0YXJkZWAKICAgICAgICAgICk7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSk7Cn0KCiAgICBwcml2YXRlIGFzeW5jIGVkaXRDYXRlZ29yeShjYXRlZ29yeTogSUNhdGVnb3J5LCBndWlkOiBzdHJpbmcpIHsKICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2F0ZWdvcnlTZXJ2aWNlLnVwZGF0ZUNhdGVnb3J5KGNhdGVnb3J5LCBndWlkKTsKICB0aGlzLmVkaXRSZXNwb25zZShyZXNwb25zZSwgY2F0ZWdvcnkpOwp9CgogICAgcHJpdmF0ZSBlZGl0Q2F0ZWdvcnlWYXJpYW50ID0gYXN5bmMgKCkgPT4KICBhd2FpdCB0aGlzLmNhdGVnb3J5U2VydmljZS51cGRhdGVDYXRlZ29yeVZhcmlhbnQoCiAgICB0aGlzLnZhcmlhbnRFZGl0LAogICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkLmd1aWQKICApOwoKICAgIHByaXZhdGUgZGVsZXRlQ2F0ZWdvcnlWYXJpYW50ID0gYXN5bmMgKCkgPT4KICBhd2FpdCB0aGlzLmNhdGVnb3J5U2VydmljZS5kZWxldGVDYXRlZ29yeVZhcmlhbnQoCiAgICB0aGlzLnJlbW92ZUR1cGxpY2F0ZSh0aGlzLnZhcmlhbnREZWxldGUpLAogICAgdGhpcy5jYXRlZ29yeVNlbGVjdGVkLmd1aWQKICApOwoKICAgIHByaXZhdGUgY3JlYXRlQ2F0ZWdvcnlWYXJpYW50ID0gYXN5bmMgKCkgPT4KICBhd2FpdCB0aGlzLmNhdGVnb3J5U2VydmljZS5jcmVhdGVDYXRlZ29yeVZhcmlhbnQoCiAgICB0aGlzLnZhcmlhbnRDcmVhdGUsCiAgICB0aGlzLmNhdGVnb3J5U2VsZWN0ZWQuZ3VpZAogICk7CgogICAgcHJpdmF0ZSByZW1vdmVEdXBsaWNhdGUgPSAoYXJyYXk6IFZhcmlhbnRWYWx1ZVtdKSA9PgogIGFycmF5LmZpbHRlcigKICAgIChhcnIpID0+ICF0aGlzW0pTT04uc3RyaW5naWZ5KGFycildICYmICh0aGlzW0pTT04uc3RyaW5naWZ5KGFycildID0gdHJ1ZSksCiAgICBPYmplY3QuY3JlYXRlKG51bGwpCiAgKTsKCiAgICBwcml2YXRlIGVkaXRSZXNwb25zZShyZXNwb25zZTogUmVzcG9uc2UsIGNhdGVnb3J5OiBJQ2F0ZWdvcnkpIHsKICBzd2l0Y2ggKHJlc3BvbnNlLnN0YXR1cykgewogICAgY2FzZSAyMDI6CiAgICAgIHRoaXMubmV4dFN0YXR1c1N1Y2Nlc3MoYEEgQ2F0ZWdvcmlhICR7Y2F0ZWdvcnkubmFtZX0gZm9pIGF0dWFsaXphZGEuYCk7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgMzA0OgogICAgICB0aGlzLm5leHRTdGF0dXNFcnJvcigKICAgICAgICBgQSBDYXRlZ29yaWEgJHtjYXRlZ29yeS5uYW1lfSBqw6EgZXN0w6EgY2FkYXN0cmFkYS5gCiAgICAgICk7CiAgICAgIGJyZWFrOwoKICAgIGRlZmF1bHQ6CiAgICAgIHRoaXMubmV4dFN0YXR1c0RlZmF1bHQoCiAgICAgICAgYERlc2N1bHBlLCBvY29ycmV1IGFsZ3VtIGVycm8gYW8gZWRpdGFyIGEgQ2F0ZWdvcmlhICR7Y2F0ZWdvcnkubmFtZX0sIHBvciBmYXZvciB0ZW50ZSBub3ZhbWVudGUgbWFpcyB0YXJkZWAKICAgICAgKTsKICAgICAgYnJlYWs7CiAgfQp9CgogICAgcHJpdmF0ZSBuZXh0U3RhdHVzU3VjY2Vzcyhtc2c6IHN0cmluZykgewogIHRoaXMubG9hZGluZyhmYWxzZSk7CiAgdGhpcy5nZXRDYXRlZ29yaWVzKHRydWUpOwogIHRoaXMudG9hc3RNZXNzYWdlKCJzdWNjZXNzIiwgbXNnKTsKICB0aGlzLmNsb3NlQ2F0ZWdvcnlNb2RhbCgpOwp9CgogICAgcHJpdmF0ZSBuZXh0U3RhdHVzRXJyb3IobXNnOiBzdHJpbmcpIHsKICB0aGlzLmxvYWRpbmcoZmFsc2UpOwogIHRoaXMubXNnRXJyb3IgPSBtc2c7CiAgdGhpcy50b2FzdE1lc3NhZ2UoImVycm9yIiwgbXNnKTsKfQoKICAgIHByaXZhdGUgbmV4dFN0YXR1c0RlZmF1bHQobXNnOiBzdHJpbmcpIHsKICB0aGlzLmxvYWRpbmcoZmFsc2UpOwogIHRoaXMudG9hc3RNZXNzYWdlKCJlcnJvciIsIG1zZyk7Cn0KCiAgICBwdWJsaWMgbG9hZGluZygkZXZlbnQpIHsKICB0aGlzLiRlbWl0KCJsb2FkaW5nIiwgJGV2ZW50KTsKfQoKICAgIHB1YmxpYyBnZXRDYXRlZ29yaWVzKCRldmVudCkgewogIHRoaXMuJGVtaXQoImdldENhdGVnb3JpZXMiLCB0cnVlKTsKfQoKICAgIHB1YmxpYyBjbG9zZUNhdGVnb3J5TW9kYWwoKSB7CiAgdGhpcy4kZW1pdCgiY2xvc2VDYXRlZ29yeU1vZGFsIiwgdHJ1ZSk7Cn0KCiAgICBwcml2YXRlIHRvYXN0TWVzc2FnZSh0eXBlOiBTd2VldEFsZXJ0VHlwZSwgdGl0bGU6IHN0cmluZykgewogIFZ1ZVNpbXBsZUFsZXJ0LmZpcmUoewogICAgdHlwZSwKICAgIHRpdGxlLAogICAgdG9hc3Q6IHRydWUsCiAgICBwb3NpdGlvbjogInRvcC1lbmQiLAogICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgdGltZXI6IDMwMDAsCiAgICBvbk9wZW46ICh0b2FzdCkgPT4gewogICAgICB0b2FzdC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWVudGVyIiwgU3dhbC5zdG9wVGltZXIpLAogICAgICAgIHRvYXN0LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLCBTd2FsLnJlc3VtZVRpbWVyKTsKICAgIH0sCiAgfSk7Cn0KCiAgICBwdWJsaWMgZGVsZXRlQ2F0ZWdvcnkoKSB7CiAgdGhpcy5zaG93RGVsZXRlQ2F0ZWdvcnkgPSB0cnVlOwp9CgogICAgcHVibGljIGNsb3NlRGVsZXRlQ2F0ZWdvcnlNb2RhbCgpIHsKICB0aGlzLnNob3dEZWxldGVDYXRlZ29yeSA9IGZhbHNlOwp9CgogICAgcHVibGljIGNvbmZpcm1FZGl0VmFyaWFudCgpIHsKICBpZiAodGhpcy52YXJpYW50Q3JlYXRlLmxlbmd0aCkgewogICAgdGhpcy5jcmVhdGVDYXRlZ29yeVZhcmlhbnQoKTsKICB9CgogIGlmICh0aGlzLnZhcmlhbnREZWxldGUubGVuZ3RoKSB7CiAgICB0aGlzLmRlbGV0ZUNhdGVnb3J5VmFyaWFudCgpOwogIH0KCiAgdGhpcy5lZGl0Q2F0ZWdvcnkoCiAgICB0aGlzLnNldENhdGVnb3J5KHRoaXMuY2F0ZWdvcnlTZWxlY3RlZCwgdGhpcy5jYXRlZ29yeVNlbGVjdGVkLm9yZGVyaW5nKSwKICAgIHRoaXMuY2F0ZWdvcnlTZWxlY3RlZC5ndWlkCiAgKTsKfQoKICAgIHB1YmxpYyBjbG9zZUNvbmZpcm1FZGl0VmFyaWFudCgpIHsKICB0aGlzLnNob3dDb25maXJtRWRpdFZhcmlhbnQgPSBmYWxzZTsKfQogIH0KCmV4cG9ydCB7IENhdGVnb3J5TW9kYWwgYXMgZGVmYXVsdCB9Owo="},{"version":3,"sources":["CategoryModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkLA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA","file":"CategoryModal.vue","sourceRoot":"src/components/category-modal","sourcesContent":["<template>\n  <modal :active=\"showCreateCategory || showEditCategory || isCategoryService\">\n    <section class=\"card custom-modal\">\n      <div class=\"card-body custom-body\">\n        <div class=\"custom-close\" title=\"Fechar Modal\" @click=\"closeCategoryModal()\">\n          <i class=\"fas fa-times\"></i>\n        </div>\n\n        <div class=\"d-flex justify-content-center flex-column card-titles\">\n          <h4 class=\"card-title\">{{ title }}</h4>\n          <p class=\"card-subtitle\">{{ subtitle }}</p>\n        </div>\n\n        <section class=\"p-2 p-md-3 card-form\">\n          <div class=\"form-group\">\n            <label for=\"category\" class=\"form-label-input m-0 text-muted\" title=\"Campo de preencimento obrigatório\">Nome\n              da Categoria *</label>\n            <input type=\"text\" class=\"form-control\" id=\"category\" aria-describedby=\"categoryHelp\"\n              placeholder=\"Digite o Nome da Categoria*\" :class=\"{\n                'is-invalid': msgInputs.name && categorySelected.name === '',\n                'is-valid':\n                  (!msgInputs.name && categorySelected.name !== '') ||\n                  (msgInputs.name !== '' && categorySelected.name !== ''),\n              }\" v-model=\"categorySelected.name\" />\n            <small id=\"categoryHelp\" class=\"form-text m-0\" v-if=\"!isCategoryService\" :class=\"{\n              'invalid-feedback':\n                msgInputs.name && categorySelected.name === '',\n              'text-muted': !msgInputs.name,\n            }\">\n              {{\n                msgInputs.name && categorySelected.name === \"\"\n                ? msgInputs.name\n                : \"Ex: Camisas, Calça, Bebidas, Sobremesas, etc.\"\n              }}\n            </small>\n            <small id=\"categoryHelp\" class=\"form-text m-0\" v-if=\"isCategoryService\" :class=\"{\n              'invalid-feedback':\n                msgInputs.name && categorySelected.name === '',\n              'text-muted': !msgInputs.name,\n            }\">\n              {{\n                msgInputs.name && categorySelected.name === \"\"\n                ? msgInputs.name\n                : \"Ex: Mão de Obra, Consultoria, Aulas Particulares, etc\"\n              }}\n            </small>\n          </div>\n\n          <button class=\"d-flex btn btn-link align-items-center mt-3 col-12 px-0\" @click=\"deleteCategory()\"\n            v-if=\"showEditCategory\">\n            <i class=\"fas fa-trash text-danger mr-2\"></i>\n            <small class=\"text-muted m-0 click variant\">Excluir Categoria</small>\n          </button>\n\n          <div class=\"d-flex align-items-start my-3\" v-if=\"!isCategoryService\">\n            <label class=\"switch\">\n              <input id=\"variant\" type=\"checkbox\" v-model=\"categorySelected.variant_status\" />\n              <span class=\"slider round\"></span>\n            </label>\n            <label for=\"variant\" class=\"text-muted m-0 click variant\"\n              :class=\"{ 'font-weight-bold': categorySelected.variant_status }\">\n              Produto com variantes</label>\n          </div>\n\n          <section v-if=\"categorySelected.variant_status\">\n            <div class=\"form-group\">\n              <label for=\"variant-name\" class=\"form-label-input m-0 text-muted\"\n                title=\"Campo de preencimento obrigatório\">Nome da Variante *</label>\n              <input type=\"text\" class=\"form-control\" id=\"variant-name\" aria-describedby=\"variantHelp\"\n                placeholder=\"Digite o Nome da Variante*\" :class=\"{\n                  'is-invalid':\n                    msgInputs.variant_name &&\n                    categorySelected.variant_name === '',\n                  'is-valid':\n                    (!msgInputs.variant_name &&\n                      categorySelected.variant_name !== '') ||\n                    (msgInputs.variant_name !== '' &&\n                      categorySelected.variant_name !== ''),\n                }\" v-model=\"categorySelected.variant_name\" />\n              <small id=\"variantHelp\" class=\"form-text m-0\" :class=\"{\n                'invalid-feedback':\n                  msgInputs.variant_name &&\n                  categorySelected.variant_name === '',\n                'text-muted': !msgInputs.variant_name,\n              }\">\n                {{\n                  msgInputs.variant_name && categorySelected.variant_name === \"\"\n                  ? msgInputs.variant_name\n                  : \"Ex: Tamanho, Sabor, Ano, Quantidade, Cor, etc.\"\n                }}\n              </small>\n            </div>\n\n            <div v-for=\"(ops, index) in categorySelected.variant_value\" :key=\"index\">\n              <div class=\"form-group row m-1\">\n                <label :for=\"'inputOp' + index\" class=\"\n                    col-3 col-sm-3 col-md-2 col-lg-2\n                    form-label-input\n                    m-0\n                    text-muted\n                    d-flex\n                    align-items-center\n                    justify-content-start\n                    p-0\n                  \" title=\"Opção 2 (Campo obrigatório)\">Opção {{ index + 1 }}*</label>\n                <div class=\"col-9 col-sm-9 col-md-10 col-lg-10 p-0\">\n                  <div class=\"input-group\">\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Nome da Opção *\"\n                      aria-describedby=\"variantValueHelp\" @change=\"\n                        modifiedOpt(categorySelected.variant_value[index])\n                        \" :id=\"'inputOp' + index\" :class=\"{\n    'is-invalid':\n      msgInputs.variant_value[index] &&\n      categorySelected.variant_value[index].value === '',\n    'is-valid':\n      (!msgInputs.variant_value[index] &&\n        categorySelected.variant_value[index].value !==\n        '') ||\n      (!msgInputs.variant_value[index] &&\n        categorySelected.variant_value[index].value !== ''),\n  }\" v-model=\"categorySelected.variant_value[index].value\" required />\n                    <div class=\"input-group-append\">\n                      <button class=\"btn btn-outline-light d-flex btn-border\" @click=\"\n                        removeNewOpt(\n                          index,\n                          categorySelected.variant_value[index]\n                        )\n                        \" v-if=\"categorySelected.variant_value.length > 2\">\n                        <span class=\"material-icons text-danger\">remove_circle</span>\n                      </button>\n                    </div>\n                  </div>\n                  <small id=\"variantValueHelp\" class=\"form-text m-0\" :class=\"{\n                    'invalid-feedback d-block':\n                      msgInputs.variant_value[index] &&\n                      categorySelected.variant_value[index].value === '',\n                    'text-muted': !msgInputs.variant_value[index],\n                  }\">\n                    {{\n                      msgInputs.variant_value[index] &&\n                      categorySelected.variant_value[index].value === \"\"\n                      ? msgInputs.variant_value[index]\n                      : \"Ex: P, M, G, 250ml, 1L, Azul, Verde, etc.\"\n                    }}\n                  </small>\n                </div>\n              </div>\n            </div>\n\n            <button class=\"d-flex btn btn-link align-items-center mt-3 col-12 px-0\" @click=\"addNewOpt()\"\n              v-if=\"categorySelected.variant_value.length < 10\">\n              <span class=\"material-icons mr-2\">add_circle</span>\n              <small class=\"text-muted m-0 click variant\">Adicionar mais uma opção</small>\n            </button>\n          </section>\n\n          <div class=\"d-flex justify-content-center mt-4 btn-action\">\n            <button class=\"btn btn-primary w-100\" @click=\"saveCategory()\">\n              <i class=\"fas fa-folder-plus mr-2 fa-lg\"></i>\n              {{ titleBtn }}\n            </button>\n          </div>\n        </section>\n      </div>\n    </section>\n\n    <categoryDelete v-if=\"showDeleteCategory\" :propCategorySelected=\"categorySelected\"\n      :propShowDeleteCategory=\"showDeleteCategory\" v-on:closeDeleteCategoryModal=\"closeDeleteCategoryModal()\"\n      v-on:closeAllModal=\"closeCategoryModal()\" v-on:getCategories=\"getCategories($event)\"\n      v-on:loading=\"loading($event)\" />\n\n    <categoryConfirmEditVariant v-if=\"showConfirmEditVariant\" :propShowConfirmEditVariant=\"showConfirmEditVariant\"\n      :propDeletedAllVariants=\"deletedAllVariants\" v-on:closeConfirmEditVariant=\"closeConfirmEditVariant()\"\n      v-on:confirmEditVariant=\"confirmEditVariant()\" />\n  </modal>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from \"vue-property-decorator\";\nimport VueSimpleAlert from \"vue-simple-alert\";\nimport Swal, { SweetAlertType } from \"sweetalert2\";\n\nimport {\n  Category,\n  ICategory,\n  NotificationCategory,\n  VariantValue,\n} from \"@/models/category\";\nimport Seller from \"@/models/seller\";\nimport categoryService from \"@/services/category.service\";\nimport mixpanel from \"mixpanel-browser\";\n\n@Component({})\nexport class CategoryModal extends Vue {\n  @Prop() propCategorySelected!: Category;\n  @Prop() propLoggedUser!: Seller;\n  @Prop() propCreateCategory!: boolean;\n  @Prop() propEditCategory!: boolean;\n  @Prop() propIsCategoryService!: boolean;\n\n  public categorySelected: Category = this.propCategorySelected;\n  public categoryHasVariant: boolean | undefined =\n    this.categorySelected.variant_status;\n  public loggedUser: Seller = this.propLoggedUser;\n  public showEditCategory: boolean = this.propEditCategory;\n  public isCategoryService: boolean = this.propIsCategoryService;\n  public showCreateCategory: boolean = this.propCreateCategory;\n\n  public showConfirmEditVariant: boolean = false;\n  public deletedAllVariants: boolean = false;\n\n  public showDeleteCategory: boolean = false;\n  public title: string = \"\";\n  public subtitle: string = \"\";\n  public titleBtn: string = \"\";\n  public msgError: string = \"\";\n\n  public variantDelete: VariantValue[] = [];\n  public variantEdit: VariantValue[] = [];\n  public variantCreate: string[] = [];\n\n  public msgInputs: NotificationCategory = {\n    name: \"\",\n    variant_name: \"\",\n    variant_value: [],\n  };\n\n  private categoryService = new categoryService();\n\n  constructor() {\n    super();\n  }\n\n  created() {\n    if (this.showCreateCategory && !this.showEditCategory) {\n      this.setTitles(\n        \"Adicionar Categoria\",\n        \"Insira o nome da categoria e suas variantes\",\n        \"Salvar Categoria\"\n      );\n    } else if (this.showEditCategory) {\n      this.setTitles(\n        \"Editar Categoria\",\n        \"Edite o nome da categoria e suas variantes\",\n        \"Atualizar Categoria\"\n      );\n    }\n  }\n\n  private setTitles(title: string, subtitle: string, titleBtn: string) {\n    this.title = title;\n    this.subtitle = subtitle;\n    this.titleBtn = titleBtn;\n  }\n\n  public addNewOpt = () =>\n    this.categorySelected.variant_value.push({ value: \"\" });\n\n  public modifiedOpt(variantValue: VariantValue) {\n    if (\n      variantValue.guid &&\n      !this.variantEdit.find((variant) => variant.guid === variantValue.guid)\n    ) {\n      this.variantEdit.push(variantValue);\n    } else {\n      const variantIndex = this.variantEdit.findIndex(\n        (variant) => variant.guid === variantValue.guid\n      );\n\n      this.variantEdit[variantIndex].value = variantValue.value;\n    }\n  }\n\n  public removeNewOpt(index: number, variant: VariantValue) {\n    if (this.categorySelected.variant_value[index].value !== \"\") {\n      this.variantDelete.push(variant);\n    }\n    this.categorySelected.variant_value.splice(index, 1);\n  }\n\n  public saveCategory() {\n    this.validateAddCategory();\n    if (this.validateInputs()) {\n      if (this.showCreateCategory || this.isCategoryService) {\n        this.createCategory(this.setCategory(this.categorySelected));\n      } else {\n        this.removeDuplicate(this.categorySelected.variant_value)\n          .filter((variant) => !variant.guid)\n          .forEach((val) => {\n            this.variantCreate.push(val.value);\n          });\n\n        if (\n          this.variantCreate.length ||\n          this.variantDelete.length ||\n          this.categoryHasVariant !== this.categorySelected.variant_status\n        ) {\n          this.openConfirmEditModal();\n        } else {\n          if (this.variantCreate.length) {\n            this.createCategoryVariant();\n          }\n\n          if (this.variantDelete.length) {\n            this.deleteCategoryVariant();\n          }\n\n          if (this.variantEdit.length) {\n            this.editCategoryVariant();\n          }\n\n          this.editCategory(\n            this.setCategory(\n              this.categorySelected,\n              this.categorySelected.ordering\n            ),\n            this.categorySelected.guid\n          );\n        }\n      }\n    }\n  }\n\n  private openConfirmEditModal() {\n    if (!this.categorySelected.variant_status) {\n      this.deletedAllVariants = true;\n    }\n\n    this.showConfirmEditVariant = true;\n  }\n\n  private setCategory(category: ICategory, ordering: number = 100) {\n    if (category.variant_status) {\n      return {\n        name: category.name,\n        ordering,\n        variant_name: category.variant_name,\n        variant_status: category.variant_status,\n        variant_value: this.showCreateCategory\n          ? this.setCreateVariantValue(category.variant_value)\n          : category.variant_value,\n        register_type: this.isCategoryService ? \"Service\" : \"Product\",\n      };\n    } else {\n      return {\n        name: category.name,\n        ordering,\n        variant_status: category.variant_status,\n        register_type: this.isCategoryService ? \"Service\" : \"Product\",\n      };\n    }\n  }\n\n  private setCreateVariantValue(\n    variantValue: VariantValue[] = []\n  ): VariantValue[] {\n    const values: VariantValue[] = [];\n    variantValue.map((variant) => values.push({ value: variant.value }));\n    return values;\n  }\n\n  private validateAddCategory() {\n    this.resetMsgInputs();\n    [\"name\", \"variant_name\", \"variant_value\"].forEach((value) =>\n      this.checkInputs(value)\n    );\n  }\n\n  private checkInputs(categoryKey: string) {\n    if (categoryKey === \"variant_value\") {\n      this.checkVariantValue().find((value) => {\n        value >= 0\n          ? (this.msgInputs[categoryKey][value] = `A Opção ${value + 1\n            } é de preenchimento obrigatório`)\n          : (this.msgInputs[categoryKey][value] = \"\");\n      });\n    } else if (this.categorySelected[categoryKey] === \"\") {\n      this.msgInputs[categoryKey] = \"Este campo é de preenchimento obrigatório\";\n    }\n  }\n\n  private checkVariantValue(): number[] {\n    const valueIndex: number[] = [];\n    this.categorySelected.variant_value.forEach((value, index: number) => {\n      if (this.categorySelected.variant_value[index].value === \"\") {\n        valueIndex.push(index);\n      }\n    });\n    return valueIndex;\n  }\n\n  private createCategoryMixpanel() {\n    mixpanel.track(\"Create_Category_Product\", {\n\n    });\n\n    console.log(\"Create Category\")\n   \n\n  }\n\n\n    private validateInputs(): boolean {\n  let validateInput: boolean = false;\n  if (\n    this.categorySelected.name !== \"\" &&\n    (!this.categorySelected.variant_status || this.showEditCategory)\n  ) {\n    validateInput = true;\n  }\n  if (\n    this.categorySelected.variant_status &&\n    this.categorySelected.name !== \"\" &&\n    this.categorySelected.variant_name !== \"\" &&\n    !this.checkVariantValue().length\n  ) {\n    validateInput = true;\n  }\n  return validateInput;\n}\n\n    private resetMsgInputs() {\n  this.msgInputs = {\n    name: \"\",\n    variant_name: \"\",\n    variant_value: [],\n  };\n}\n\n    private createCategory(category: ICategory) {\n  this.categoryService\n    .createCategory(category, this.loggedUser.slug)\n    .then((data) => {\n      switch (data.status) {\n        case 201:\n        this.createCategoryMixpanel()\n          this.nextStatusSuccess(\n            `A Categoria ${category.name} foi cadastrada.`\n          );\n          break;\n\n        case 202:\n        this.createCategoryMixpanel()\n\n          data\n            .json()\n            .then((response) => this.editCategory(category, response.guid));\n          break;\n\n        case 304:\n          this.nextStatusError(\n            `A Categoria ${category.name} já está cadastrada.`\n          );\n          break;\n\n        default:\n          this.nextStatusDefault(\n            `Desculpe, ocorreu algum erro ao cadastrar a Categoria ${category.name}, por favor tente novamente mais tarde`\n          );\n          break;\n      }\n    });\n}\n\n    private async editCategory(category: ICategory, guid: string) {\n  const response = await this.categoryService.updateCategory(category, guid);\n  this.editResponse(response, category);\n}\n\n    private editCategoryVariant = async () =>\n  await this.categoryService.updateCategoryVariant(\n    this.variantEdit,\n    this.categorySelected.guid\n  );\n\n    private deleteCategoryVariant = async () =>\n  await this.categoryService.deleteCategoryVariant(\n    this.removeDuplicate(this.variantDelete),\n    this.categorySelected.guid\n  );\n\n    private createCategoryVariant = async () =>\n  await this.categoryService.createCategoryVariant(\n    this.variantCreate,\n    this.categorySelected.guid\n  );\n\n    private removeDuplicate = (array: VariantValue[]) =>\n  array.filter(\n    (arr) => !this[JSON.stringify(arr)] && (this[JSON.stringify(arr)] = true),\n    Object.create(null)\n  );\n\n    private editResponse(response: Response, category: ICategory) {\n  switch (response.status) {\n    case 202:\n      this.nextStatusSuccess(`A Categoria ${category.name} foi atualizada.`);\n      break;\n\n    case 304:\n      this.nextStatusError(\n        `A Categoria ${category.name} já está cadastrada.`\n      );\n      break;\n\n    default:\n      this.nextStatusDefault(\n        `Desculpe, ocorreu algum erro ao editar a Categoria ${category.name}, por favor tente novamente mais tarde`\n      );\n      break;\n  }\n}\n\n    private nextStatusSuccess(msg: string) {\n  this.loading(false);\n  this.getCategories(true);\n  this.toastMessage(\"success\", msg);\n  this.closeCategoryModal();\n}\n\n    private nextStatusError(msg: string) {\n  this.loading(false);\n  this.msgError = msg;\n  this.toastMessage(\"error\", msg);\n}\n\n    private nextStatusDefault(msg: string) {\n  this.loading(false);\n  this.toastMessage(\"error\", msg);\n}\n\n    public loading($event) {\n  this.$emit(\"loading\", $event);\n}\n\n    public getCategories($event) {\n  this.$emit(\"getCategories\", true);\n}\n\n    public closeCategoryModal() {\n  this.$emit(\"closeCategoryModal\", true);\n}\n\n    private toastMessage(type: SweetAlertType, title: string) {\n  VueSimpleAlert.fire({\n    type,\n    title,\n    toast: true,\n    position: \"top-end\",\n    showConfirmButton: false,\n    timer: 3000,\n    onOpen: (toast) => {\n      toast.addEventListener(\"mouseenter\", Swal.stopTimer),\n        toast.addEventListener(\"mouseleave\", Swal.resumeTimer);\n    },\n  });\n}\n\n    public deleteCategory() {\n  this.showDeleteCategory = true;\n}\n\n    public closeDeleteCategoryModal() {\n  this.showDeleteCategory = false;\n}\n\n    public confirmEditVariant() {\n  if (this.variantCreate.length) {\n    this.createCategoryVariant();\n  }\n\n  if (this.variantDelete.length) {\n    this.deleteCategoryVariant();\n  }\n\n  this.editCategory(\n    this.setCategory(this.categorySelected, this.categorySelected.ordering),\n    this.categorySelected.guid\n  );\n}\n\n    public closeConfirmEditVariant() {\n  this.showConfirmEditVariant = false;\n}\n  }\n\nexport { CategoryModal as default };\n</script>\n\n<style lang=\"scss\" scoped>\n.custom-modal {\n  width: 30vw;\n  background-color: #f4f5f9;\n\n  @media screen and (max-width: 992px) {\n    width: 100vw;\n  }\n\n  @media screen and (min-width: 992px) and (max-width: 1400px) {\n    width: 42vw;\n  }\n\n  .custom-body {\n    max-height: 75vh;\n    overflow-y: auto;\n    padding: 1rem !important;\n\n    @media screen and (max-width: 992px) {\n      max-height: 100vh;\n    }\n  }\n\n  .card-titles {\n    margin-bottom: 1.5rem;\n\n    @media screen and (max-width: 992px) {\n      margin-bottom: 45px;\n    }\n  }\n\n  .card-title,\n  .card-subtitle {\n    font-family: Raleway;\n    font-stretch: normal;\n    font-style: normal;\n    line-height: normal;\n    letter-spacing: normal;\n    color: #525252;\n    text-align: center;\n  }\n\n  .card-title {\n    font-size: 28px;\n    font-weight: bold;\n\n    @media screen and (max-width: 992px) {\n      font-size: 26px;\n    }\n  }\n\n  .card-subtitle {\n    font-size: 20px;\n    font-weight: normal;\n    color: #525252;\n\n    @media screen and (max-width: 992px) {\n      font-size: 16px;\n    }\n  }\n}\n\n.card-form {\n  position: relative;\n  border-radius: 6px;\n  box-shadow: 0 9px 15px -3px rgba(43, 88, 164, 0.23);\n  background-color: #ffffff;\n  border: none;\n}\n\n.form-label-input {\n  font-size: 14px;\n}\n\n.btn-border {\n  border: 1px solid #ced4da;\n}\n\n.header-title,\n.btn-action {\n  position: sticky;\n  padding: 12px 0;\n  z-index: 99;\n  background-color: #ffffff;\n}\n\n.header-title {\n  flex-direction: column;\n  top: -1.25rem;\n\n  @media screen and (max-width: 992px) {\n    h4 {\n      font-size: 1.4rem;\n    }\n  }\n}\n\n.btn-action {\n  bottom: -1.25rem;\n}\n\n.custom-close {\n  z-index: 999;\n\n  @media screen and (max-width: 992px) {\n    top: 10px;\n    right: 10px;\n  }\n}\n</style>"]}]}